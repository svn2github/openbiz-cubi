<?xml version="1.0" encoding="UTF-8"?>
<EasyForm Name="MessageComposeForm" Class="MessageForm"  Icon="{RESOURCE_URL}/collab/message/images/icon_message_compose.png" FormType="Edit" jsClass="jbForm" Title="Compose Message" Description="Send a message to your colleagues." BizDataObj="collab.msgbox.do.MessageDO" PageSize="10" DefaultForm="Y" TemplateEngine="Smarty" TemplateFile="detail.tpl" MessageFile="Message.msg" Access="collab_msgbox.access">
    <DataPanel>        
        <Element Name="fld_Id" Class="Hidden" FieldName="Id" Label="Id" AllowURLParam="Y"/>
        	
	    <Element Name="fld_to" Class="InputText" FieldName="recipient_to" Label="Send To" Description="Select message recipients from contact list" >
	        <EventHandler Name="to_onclick" Event="onclick" Function="LoadDialog(collab.msgbox.widget.RecipientPickForm)"/>	    
	    </Element>
	    <Element Name="fld_cc" Class="InputText" FieldName="recipient_cc" Label="Send CC"  Description="Contacts can also get this message"  >
	    	<EventHandler Name="cc_onclick" Event="onclick" Function="LoadDialog(collab.msgbox.widget.RecipientCCPickForm)"/>
	    </Element>
	    <Element Name="fld_bcc" Class="InputText" FieldName="recipient_bcc" Label="Send BCC" Description="Contacts are invisible for other recipients"   >
	    	<EventHandler Name="bcc_onclick" Event="onclick" Function="LoadDialog(collab.msgbox.widget.RecipientBCCPickForm)"/>
	    </Element>
	    
	    <Element Name="fld_subject"  Class="InputText" FieldName="subject" Label="Subject" Description="Subject of this message"   />	
        <Element Name="fld_content" Class="CKEditor" mode="adv"  Config="resize_maxWidth:640,resize_minWidth:640,resize_minHeight:450" width="640" height="450" FieldName="content" Label="Content" />
        <Element Name="fld_related_attachment"    Class="FormElement" FormReference="attachment.widget.AttachmentListEditForm" FieldName="" Label="Attachment" AllowURLParam="N" />
        
        	
    </DataPanel>
    <ActionPanel>
        <Element Name="btn_send" Class="Button" Text="Send Now" CssClass="button_gray_w">
            <EventHandler Name="save_onclick" EventLogMsg="" Event="onclick" Function="SendMessage()" RedirectPage="{@home:url}/collab/message_sent_detail/{@collab.msgbox.do.MessageDO:Field[Id].Value}"  ShortcutKey="Ctrl+Enter" ContextMenu="Send Now" />
        </Element>
        <Element Name="btn_save" Class="Button" Text="Save" CssClass="button_gray_m">
            <EventHandler Name="save_onclick" EventLogMsg="" Event="onclick" Function="SaveMessage()" RedirectPage="{@home:url}/collab/message_draft_detail/{@collab.msgbox.do.MessageDO:Field[Id].Value}"  ShortcutKey="Ctrl+Enter" ContextMenu="Save Draft" />
        </Element>
         <Element Name="btn_spacer" Class="Spacer" width="10" />
        <Element Name="btn_cancel" Class="Button" Text="Cancel" CssClass="button_gray_m">
            <EventHandler Name="cancel_onclick" Event="onclick" Function="SwitchForm()"  ShortcutKey="Escape" ContextMenu="Cancel"/>
        </Element>
    </ActionPanel> 
    <NavPanel>
    </NavPanel> 
    <SearchPanel>
    </SearchPanel>
</EasyForm>