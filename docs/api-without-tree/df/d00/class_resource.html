<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>Openbiz Framework API: Resource Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doc-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../openbiz-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Openbiz Framework API
   &#160;<span id="projectnumber">3.1</span>
   </div>
   <div id="projectbrief">Open source PHP Framework that designed for building web application.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">Resource Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Resource:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d2/d9e/class_resource__coll__graph.png" border="0" usemap="#_resource_coll__map" alt="Collaboration graph"/></div>
<map name="_resource_coll__map" id="_resource_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a66826405edc53b33073ed69eac7b49f4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#a66826405edc53b33073ed69eac7b49f4">loadMessage</a> ($messageFile, $packageName=&quot;&quot;)</td></tr>
<tr class="separator:a66826405edc53b33073ed69eac7b49f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6905723ead55f99e9e96d722bf39289"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#ac6905723ead55f99e9e96d722bf39289">getMessage</a> ($msgId, $params=array())</td></tr>
<tr class="separator:ac6905723ead55f99e9e96d722bf39289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b561ddf50dd090a4e4d4e4f0cf54d78"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#a7b561ddf50dd090a4e4d4e4f0cf54d78">getImageUrl</a> ()</td></tr>
<tr class="separator:a7b561ddf50dd090a4e4d4e4f0cf54d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a867ba152a2aeeae244630f0f9da79d0d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#a867ba152a2aeeae244630f0f9da79d0d">getCssUrl</a> ()</td></tr>
<tr class="separator:a867ba152a2aeeae244630f0f9da79d0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38ea79def78fdc6f486da392bd2b9188"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#a38ea79def78fdc6f486da392bd2b9188">getJsUrl</a> ()</td></tr>
<tr class="separator:a38ea79def78fdc6f486da392bd2b9188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f8104d8aa899c9c115363799ed0cbde"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#a1f8104d8aa899c9c115363799ed0cbde">getSmartyTemplate</a> ()</td></tr>
<tr class="separator:a1f8104d8aa899c9c115363799ed0cbde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad15c7aaf2cda13ae9e0d32429f666fc3"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#ad15c7aaf2cda13ae9e0d32429f666fc3">getZendTemplate</a> ()</td></tr>
<tr class="separator:ad15c7aaf2cda13ae9e0d32429f666fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af50fc124cc93de9390ce723c36530129"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#af50fc124cc93de9390ce723c36530129">getXmlFileWithPath</a> ($xmlObj)</td></tr>
<tr class="separator:af50fc124cc93de9390ce723c36530129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb794bcc37996f735dfc6e7ddddf961c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#afb794bcc37996f735dfc6e7ddddf961c">getTplFileWithPath</a> ($templateFile, $packageName)</td></tr>
<tr class="separator:afb794bcc37996f735dfc6e7ddddf961c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bbd0684f00be761ca64e9c4eb57a0c7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#a6bbd0684f00be761ca64e9c4eb57a0c7">getLibFileWithPath</a> ($className, $packageName=&quot;&quot;)</td></tr>
<tr class="separator:a6bbd0684f00be761ca64e9c4eb57a0c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43b9bb5f52377fabc68e21785b5afcb6"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#a43b9bb5f52377fabc68e21785b5afcb6">getCoreLibFilePath</a> ($className)</td></tr>
<tr class="separator:a43b9bb5f52377fabc68e21785b5afcb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb3b9597319d812f889a89ab0c7c5e4b"><td class="memItemLeft" align="right" valign="top">static &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#afb3b9597319d812f889a89ab0c7c5e4b">getXmlArray</a> ($xmlFile)</td></tr>
<tr class="separator:afb3b9597319d812f889a89ab0c7c5e4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fba0833b16e3ca8470ef13b70f66a40"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#a1fba0833b16e3ca8470ef13b70f66a40">getCurrentTheme</a> ()</td></tr>
<tr class="separator:a1fba0833b16e3ca8470ef13b70f66a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:adc652c9152546e8f179b3b4c9edb6541"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/class_resource.html#adc652c9152546e8f179b3b4c9edb6541">DEFAULT_THEME</a></td></tr>
<tr class="separator:adc652c9152546e8f179b3b4c9edb6541"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="../../#L30">30</a> of file <a class="el" href="../../">Resource.php</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a43b9bb5f52377fabc68e21785b5afcb6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static getCoreLibFilePath </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$className</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get core path of class</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$className</td><td>class name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string full file name of class </dd></dl>

<p>Definition at line <a class="el" href="../../#L366">366</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">                                                          {</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="../../d3/ddd/class_biz_class_loader.html#a43b9bb5f52377fabc68e21785b5afcb6">BizClassLoader::getCoreLibFilePath</a>($className);</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a867ba152a2aeeae244630f0f9da79d0d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static getCssUrl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get CSS URL </p>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

<p>Definition at line <a class="el" href="../../#L124">124</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (isset(self::$_cssUrl))</div>
<div class="line">            <span class="keywordflow">return</span> self::$_cssUrl;</div>
<div class="line">        $useTheme = !defined(<span class="stringliteral">&#39;USE_THEME&#39;</span>) ? 0 : <a class="code" href="../../d1/df2/sys__init_8php.html#a432c7b9290945e2b545a7ec04a521d2f">USE_THEME</a>;</div>
<div class="line">        $themeUrl = !defined(<span class="stringliteral">&#39;THEME_URL&#39;</span>) ? APP_URL . <span class="stringliteral">&quot;/themes&quot;</span> : <a class="code" href="../../d1/df2/sys__init_8php.html#acbe079f5f99677f3a97c3d3fe9816c54">THEME_URL</a>;</div>
<div class="line">  $themeName = <a class="code" href="../../df/d00/class_resource.html#a1fba0833b16e3ca8470ef13b70f66a40">Resource::getCurrentTheme</a>();</div>
<div class="line">        <span class="keywordflow">if</span> ($useTheme)</div>
<div class="line">            self::$_cssUrl = <span class="stringliteral">&quot;$themeUrl/$themeName/css&quot;</span>;</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            self::$_cssUrl = APP_URL . <span class="stringliteral">&quot;/css&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> self::$_cssUrl;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1fba0833b16e3ca8470ef13b70f66a40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static getCurrentTheme </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../#L447">447</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">     <span class="keywordflow">if</span> (Resource::$_currentTheme != null)</div>
<div class="line">            <span class="keywordflow">return</span> Resource::$_currentTheme;</div>
<div class="line">        </div>
<div class="line">  $currentTheme = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (isset($_GET[<span class="stringliteral">&#39;theme&#39;</span>])){</div>
<div class="line">            $currentTheme = $_GET[<span class="stringliteral">&#39;theme&#39;</span>];</div>
<div class="line">        }</div>
<div class="line">  <span class="keywordflow">if</span> ($currentTheme == <span class="stringliteral">&quot;&quot;</span>){</div>
<div class="line">         $currentTheme = <a class="code" href="../../d1/d7e/class_biz_system.html#af4e34e77c3fcde41b5c49a48a0b58b0d">BizSystem::sessionContext</a>()-&gt;getVar(<span class="stringliteral">&quot;THEME&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">  <span class="keywordflow">if</span> ($currentTheme == <span class="stringliteral">&quot;&quot;</span>){</div>
<div class="line">         $currentTheme = <a class="code" href="../../d1/d7e/class_biz_system.html#a24cea9a3a36a9387a2b6da23706f24f1">BizSystem::getUserPreference</a>(<span class="stringliteral">&quot;theme&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> ($currentTheme == <span class="stringliteral">&quot;&quot;</span> &amp;&amp; defined(<span class="stringliteral">&#39;THEME_NAME&#39;</span>)) {</div>
<div class="line">   $currentTheme = THEME_NAME;</div>
<div class="line">  }</div>
<div class="line">        <span class="keywordflow">if</span>($currentTheme == <span class="stringliteral">&quot;&quot;</span>){</div>
<div class="line">            $currentTheme = <a class="code" href="../../df/d00/class_resource.html#adc652c9152546e8f179b3b4c9edb6541">Resource::DEFAULT_THEME</a>;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// TODO: user pereference has language setting</span></div>
<div class="line">        </div>
<div class="line">        <a class="code" href="../../d1/d7e/class_biz_system.html#af4e34e77c3fcde41b5c49a48a0b58b0d">BizSystem::sessionContext</a>()-&gt;setVar(<span class="stringliteral">&quot;THEME&quot;</span>, $currentTheme);</div>
<div class="line">        Resource::$_currentTheme = $currentTheme;</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> $currentTheme;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7b561ddf50dd090a4e4d4e4f0cf54d78"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static getImageUrl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get image URL </p>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

<p>Definition at line <a class="el" href="../../#L105">105</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (isset(self::$_imageUrl))</div>
<div class="line">            <span class="keywordflow">return</span> self::$_imageUrl;</div>
<div class="line">        $useTheme = !defined(<span class="stringliteral">&#39;USE_THEME&#39;</span>) ? 0 : <a class="code" href="../../d1/df2/sys__init_8php.html#a432c7b9290945e2b545a7ec04a521d2f">USE_THEME</a>;</div>
<div class="line">        $themeUrl = !defined(<span class="stringliteral">&#39;THEME_URL&#39;</span>) ? <span class="stringliteral">&quot;../themes&quot;</span> : <a class="code" href="../../d1/df2/sys__init_8php.html#acbe079f5f99677f3a97c3d3fe9816c54">THEME_URL</a>;</div>
<div class="line">        $themeName = <a class="code" href="../../df/d00/class_resource.html#a1fba0833b16e3ca8470ef13b70f66a40">Resource::getCurrentTheme</a>();</div>
<div class="line">        <span class="keywordflow">if</span> ($useTheme)</div>
<div class="line">            self::$_imageUrl = <span class="stringliteral">&quot;$themeUrl/$themeName/images&quot;</span>;</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            self::$_imageUrl = <span class="stringliteral">&quot;../images&quot;</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> self::$_imageUrl;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a38ea79def78fdc6f486da392bd2b9188"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static getJsUrl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get JavaScript(JS) URL </p>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

<p>Definition at line <a class="el" href="../../#L142">142</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (isset(self::$_jsUrl))</div>
<div class="line">            <span class="keywordflow">return</span> self::$_jsUrl;</div>
<div class="line">        self::$_jsUrl = !defined(<span class="stringliteral">&#39;JS_URL&#39;</span>) ? APP_URL . <span class="stringliteral">&quot;/js&quot;</span> : <a class="code" href="../../d1/df2/sys__init_8php.html#a439300f4ac3d14c3a5a71e42ef239375">JS_URL</a>;</div>
<div class="line">        <span class="keywordflow">return</span> self::$_jsUrl;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6bbd0684f00be761ca64e9c4eb57a0c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static getLibFileWithPath </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$className</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$packageName</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get openbiz library php file path by searching modules/package, /bin/package and /bin</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$className</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string php library file path </dd></dl>

<p>Definition at line <a class="el" href="../../#L354">354</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="../../d3/ddd/class_biz_class_loader.html#a6bbd0684f00be761ca64e9c4eb57a0c7">BizClassLoader::getLibFileWithPath</a>($className, $packageName);</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac6905723ead55f99e9e96d722bf39289"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static getMessage </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$msgId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get message from CONSTANT, translate and format it </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$msgId</td><td>ID if constant </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>parameter for format (use vsprintf) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

<p>Definition at line <a class="el" href="../../#L90">90</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $message = constant($msgId);</div>
<div class="line">        <span class="keywordflow">if</span> (isset($message))</div>
<div class="line">        {</div>
<div class="line">            $message = <a class="code" href="../../d6/d59/class_i18n.html#a9d5d3b8239dc8b6571ba07d9f838ca9a">I18n::t</a>($message, $msgId, <span class="stringliteral">&#39;system&#39;</span>);</div>
<div class="line">            $result = vsprintf($message, $params);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> $result;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1f8104d8aa899c9c115363799ed0cbde"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static getSmartyTemplate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get smarty template </p>
<dl class="section return"><dt>Returns</dt><dd>Smarty smarty object </dd></dl>

<p>Definition at line <a class="el" href="../../#L154">154</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">     <span class="keywordflow">if</span>(extension_loaded(<span class="stringliteral">&#39;ionCube Loader&#39;</span>)){</div>
<div class="line">         include_once(SMARTY_DIR . <span class="stringliteral">&quot;Smarty.class.php&quot;</span>);</div>
<div class="line">     }<span class="keywordflow">else</span>{</div>
<div class="line">      include_once(SMARTY_DIR . <span class="stringliteral">&quot;Smarty.class.src.php&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">        $smarty = <span class="keyword">new</span> Smarty;</div>
<div class="line"></div>
<div class="line">        $useTheme = !defined(<span class="stringliteral">&#39;USE_THEME&#39;</span>) ? 0 : <a class="code" href="../../d1/df2/sys__init_8php.html#a432c7b9290945e2b545a7ec04a521d2f">USE_THEME</a>;</div>
<div class="line">        <span class="keywordflow">if</span> ($useTheme)</div>
<div class="line">        {</div>
<div class="line">            $theme = <a class="code" href="../../df/d00/class_resource.html#a1fba0833b16e3ca8470ef13b70f66a40">Resource::getCurrentTheme</a>();</div>
<div class="line">            $themePath = $theme;    <span class="comment">// BizSystem::configuration()-&gt;GetThemePath($theme);</span></div>
<div class="line">            <span class="keywordflow">if</span> (is_dir(<a class="code" href="../../d1/df2/sys__init_8php.html#a1076c67dfaaba117d079176ccb149b8f">THEME_PATH</a> . <span class="stringliteral">&quot;/&quot;</span> . $themePath . <span class="stringliteral">&quot;/template&quot;</span>))</div>
<div class="line">            {</div>
<div class="line">                $templateRoot = <a class="code" href="../../d1/df2/sys__init_8php.html#a1076c67dfaaba117d079176ccb149b8f">THEME_PATH</a> . <span class="stringliteral">&quot;/&quot;</span> . $themePath . <span class="stringliteral">&quot;/template&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                $templateRoot = <a class="code" href="../../d1/df2/sys__init_8php.html#a1076c67dfaaba117d079176ccb149b8f">THEME_PATH</a> . <span class="stringliteral">&quot;/&quot;</span> . $themePath . <span class="stringliteral">&quot;/templates&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">            $smarty-&gt;template_dir = $templateRoot;</div>
<div class="line">            $smarty-&gt;compile_dir = defined(<span class="stringliteral">&#39;SMARTY_CPL_PATH&#39;</span>) ? <a class="code" href="../../d1/df2/sys__init_8php.html#a5374b39f2cc392c305692122683adc2d">SMARTY_CPL_PATH</a>.<span class="stringliteral">&quot;/&quot;</span>.$themePath : $templateRoot . <span class="stringliteral">&quot;/cpl&quot;</span>;</div>
<div class="line">            $smarty-&gt;config_dir = $templateRoot . <span class="stringliteral">&quot;/cfg&quot;</span>;</div>
<div class="line">   <span class="keywordflow">if</span> (!file_exists($smarty-&gt;compile_dir)) {</div>
<div class="line">                @mkdir($smarty-&gt;compile_dir, 0777);</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">// load the config file which has the images and css url defined</span></div>
<div class="line">            $smarty-&gt;config_load(<span class="stringliteral">&#39;tpl.conf&#39;</span>);</div>
<div class="line">        } <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (defined(<span class="stringliteral">&#39;SMARTY_TPL_PATH&#39;</span>))</div>
<div class="line">                $smarty-&gt;template_dir = SMARTY_TPL_PATH;</div>
<div class="line">            <span class="keywordflow">if</span> (defined(<span class="stringliteral">&#39;SMARTY_CPL_PATH&#39;</span>))</div>
<div class="line">                $smarty-&gt;compile_dir = <a class="code" href="../../d1/df2/sys__init_8php.html#a5374b39f2cc392c305692122683adc2d">SMARTY_CPL_PATH</a>.<span class="stringliteral">&quot;/&quot;</span>.$themePath;</div>
<div class="line">            <span class="keywordflow">if</span> (defined(<span class="stringliteral">&#39;SMARTY_CFG_PATH&#39;</span>))</div>
<div class="line">                $smarty-&gt;config_dir = SMARTY_CFG_PATH;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span>(!is_dir($smarty-&gt;compile_dir)){</div>
<div class="line">         mkdir($smarty-&gt;compile_dir,0777);</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// load the config file which has the images and css url defined</span></div>
<div class="line">        $smarty-&gt;assign(<span class="stringliteral">&#39;app_url&#39;</span>, APP_URL);</div>
<div class="line">        $smarty-&gt;assign(<span class="stringliteral">&#39;app_index&#39;</span>, <a class="code" href="../../d1/df2/sys__init_8php.html#a6d8e212843c2fc5591e2b8bcc43eabb0">APP_INDEX</a>);</div>
<div class="line">        $smarty-&gt;assign(<span class="stringliteral">&#39;js_url&#39;</span>, <a class="code" href="../../d1/df2/sys__init_8php.html#a439300f4ac3d14c3a5a71e42ef239375">JS_URL</a>);</div>
<div class="line">        $smarty-&gt;assign(<span class="stringliteral">&#39;css_url&#39;</span>, <a class="code" href="../../d1/df2/sys__init_8php.html#acbe079f5f99677f3a97c3d3fe9816c54">THEME_URL</a> . <span class="stringliteral">&quot;/&quot;</span> . $theme . <span class="stringliteral">&quot;/css&quot;</span>);</div>
<div class="line">        $smarty-&gt;assign(<span class="stringliteral">&#39;resource_url&#39;</span>, <a class="code" href="../../d1/df2/sys__init_8php.html#ae138a42df57c5cb5c8341c851616065d">RESOURCE_URL</a> );</div>
<div class="line">        $smarty-&gt;assign(<span class="stringliteral">&#39;resource_php&#39;</span>, <a class="code" href="../../d1/df2/sys__init_8php.html#aee165ae9937c5735c5bc83ad6e62ebfe">RESOURCE_PHP</a> );</div>
<div class="line">        $smarty-&gt;assign(<span class="stringliteral">&#39;theme_js_url&#39;</span>, <a class="code" href="../../d1/df2/sys__init_8php.html#acbe079f5f99677f3a97c3d3fe9816c54">THEME_URL</a> . <span class="stringliteral">&quot;/&quot;</span> . $theme . <span class="stringliteral">&quot;/js&quot;</span>);</div>
<div class="line">        $smarty-&gt;assign(<span class="stringliteral">&#39;theme_url&#39;</span>, <a class="code" href="../../d1/df2/sys__init_8php.html#acbe079f5f99677f3a97c3d3fe9816c54">THEME_URL</a> . <span class="stringliteral">&quot;/&quot;</span> . $theme);</div>
<div class="line">        $smarty-&gt;assign(<span class="stringliteral">&#39;image_url&#39;</span>, <a class="code" href="../../d1/df2/sys__init_8php.html#acbe079f5f99677f3a97c3d3fe9816c54">THEME_URL</a> . <span class="stringliteral">&quot;/&quot;</span> . $theme . <span class="stringliteral">&quot;/images&quot;</span>);</div>
<div class="line">        $smarty-&gt;assign(<span class="stringliteral">&#39;lang&#39;</span>, strtolower(<a class="code" href="../../d6/d59/class_i18n.html#a13d425e8b2f796041ce30c928925c197">I18n::getCurrentLangCode</a>()));</div>
<div class="line">        $smarty-&gt;assign(<span class="stringliteral">&#39;lang_name&#39;</span>, <a class="code" href="../../d6/d59/class_i18n.html#a13d425e8b2f796041ce30c928925c197">I18n::getCurrentLangCode</a>());</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $smarty;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afb794bcc37996f735dfc6e7ddddf961c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static getTplFileWithPath </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$templateFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$packageName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get openbiz template file path by searching modules/package, /templates</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$className</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string php library file path </dd></dl>

<p>Definition at line <a class="el" href="../../#L303">303</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="comment">//for not changing a lot things, the best injection point is added theme support here.</span></div>
<div class="line">  $theme = <a class="code" href="../../df/d00/class_resource.html#a1fba0833b16e3ca8470ef13b70f66a40">Resource::getCurrentTheme</a>();</div>
<div class="line">        $themePath = $theme;    <span class="comment">// BizSystem::configuration()-&gt;GetThemePath($theme);</span></div>
<div class="line">        <span class="keywordflow">if</span> ($themePath)</div>
<div class="line">            $templateRoot = <a class="code" href="../../d1/df2/sys__init_8php.html#a1076c67dfaaba117d079176ccb149b8f">THEME_PATH</a> . <span class="stringliteral">&quot;/&quot;</span> . $themePath . <span class="stringliteral">&quot;/template&quot;</span>;</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            $templateRoot = SMARTY_TPL_PATH;</div>
<div class="line"></div>
<div class="line">        $names = explode(<span class="stringliteral">&quot;.&quot;</span>, $packageName);</div>
<div class="line">        <span class="keywordflow">if</span> (count($names) &gt; 0)</div>
<div class="line">            $moduleName = $names[0];</div>
<div class="line">        $packagePath = str_replace(<span class="charliteral">&#39;.&#39;</span>, <span class="charliteral">&#39;/&#39;</span>, $packageName);</div>
<div class="line">        <span class="comment">// check the leading char &#39;@&#39;</span></div>
<div class="line">        $checkExtModule = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keywordflow">if</span> (strpos($packagePath, <span class="charliteral">&#39;@&#39;</span>) === 0) {</div>
<div class="line">            $packagePath = substr($packagePath, 1);</div>
<div class="line">            $checkExtModule = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        $searchTpls = array(</div>
<div class="line">            <a class="code" href="../../d1/df2/sys__init_8php.html#ac741a5c484b794e0f4c08337608b625b">MODULE_PATH</a> . <span class="stringliteral">&quot;/$packagePath/template/$templateFile&quot;</span>,</div>
<div class="line">            dirname(<a class="code" href="../../d1/df2/sys__init_8php.html#ac741a5c484b794e0f4c08337608b625b">MODULE_PATH</a> . <span class="stringliteral">&quot;/$packagePath&quot;</span>) . <span class="stringliteral">&quot;/template/$templateFile&quot;</span>,</div>
<div class="line">            <a class="code" href="../../d1/df2/sys__init_8php.html#ac741a5c484b794e0f4c08337608b625b">MODULE_PATH</a> . <span class="stringliteral">&quot;/$moduleName/template/$templateFile&quot;</span>,</div>
<div class="line">            <span class="comment">//MODULE_PATH.&quot;/common/template/$templateFile&quot;,</span></div>
<div class="line">            $templateRoot . <span class="stringliteral">&quot;/$templateFile&quot;</span></div>
<div class="line">        );</div>
<div class="line">        <span class="keywordflow">if</span> ($checkExtModule &amp;&amp; defined(<span class="stringliteral">&#39;MODULE_EX_PATH&#39;</span>)) array_unshift($searchTpls, <a class="code" href="../../d1/df2/sys__init_8php.html#a52a4b3defcb31506af17423c123ed26e">MODULE_EX_PATH</a> . <span class="stringliteral">&quot;/$packagePath/template/$templateFile&quot;</span>);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// device</span></div>
<div class="line">  <span class="keywordflow">if</span> (defined(<span class="stringliteral">&#39;CLIENT_DEVICE&#39;</span>)) array_unshift($searchTpls, <a class="code" href="../../d1/df2/sys__init_8php.html#ac741a5c484b794e0f4c08337608b625b">MODULE_PATH</a>.<span class="stringliteral">&quot;/$moduleName/template/&quot;</span>.CLIENT_DEVICE.<span class="stringliteral">&quot;/$templateFile&quot;</span>);</div>
<div class="line">  </div>
<div class="line">        <span class="keywordflow">foreach</span> ($searchTpls as $tplFile)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (file_exists($tplFile))</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">return</span> $tplFile;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        $errmsg = <a class="code" href="../../d1/d7e/class_biz_system.html#ac501e57202820a4520e080c9771fb866">BizSystem::getMessage</a>(<span class="stringliteral">&quot;UNABLE_TO_LOCATE_TEMPLATE_FILE&quot;</span>, array($templateFile));</div>
<div class="line">        trigger_error($errmsg, E_USER_ERROR);</div>
<div class="line">        <span class="keywordflow">return</span> null;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afb3b9597319d812f889a89ab0c7c5e4b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static&amp; getXmlArray </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$xmlFile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get Xml Array. If xml file has been compiled (has .cmp), load the cmp file as array; otherwise, compile the .xml to .cmp first new 2.2.3, .cmp files will be created in app/cache/metadata_cmp directory. replace '/' with '_' for example, /module/demo/BOEvent.xml has cmp file as _module_demo_BOEvent.xml</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$xmlFile</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Definition at line <a class="el" href="../../#L381">381</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">  <span class="keywordflow">if</span> (isset(self::$_xmlArrayList[$xmlFile])) {</div>
<div class="line">   <span class="keywordflow">return</span> self::$_xmlArrayList[$xmlFile];</div>
<div class="line">  }</div>
<div class="line">        $objXmlFileName = $xmlFile;</div>
<div class="line">  <span class="comment">//echo &quot;getXmlArray($xmlFile)\n&quot;;</span></div>
<div class="line">        <span class="comment">//$objCmpFileName = dirname($objXmlFileName) . &quot;/__cmp/&quot; . basename($objXmlFileName, &quot;xml&quot;) . &quot;.cmp&quot;;</span></div>
<div class="line">        <span class="comment">//$_crc32 = sprintf(&#39;%08X&#39;, crc32(dirname($objXmlFileName)));</span></div>
<div class="line">        $_crc32 = strtoupper(md5(dirname($objXmlFileName)));</div>
<div class="line">        $objCmpFileName = <a class="code" href="../../d1/df2/sys__init_8php.html#a6b83cf7077db4b49aa13a41555a4a078">CACHE_METADATA_PATH</a> . <span class="charliteral">&#39;/&#39;</span> . $_crc32 . <span class="charliteral">&#39;_&#39;</span></div>
<div class="line">                . basename($objXmlFileName, <span class="stringliteral">&quot;xml&quot;</span>) . <span class="stringliteral">&quot;cmp&quot;</span>;</div>
<div class="line"></div>
<div class="line">        $xmlArr = null;</div>
<div class="line">        <span class="comment">//$cacheKey = substr($objXmlFileName, strlen(META_PATH)+1);</span></div>
<div class="line">        $cacheKey = $objXmlFileName;</div>
<div class="line">        $findInCache = <span class="keyword">false</span>;</div>
<div class="line">        <span class="keywordflow">if</span> (file_exists($objCmpFileName)</div>
<div class="line">                &amp;&amp; (filemtime($objCmpFileName) &gt; filemtime($objXmlFileName)))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// search in cache first</span></div>
<div class="line">            <span class="keywordflow">if</span> (!$xmlArr &amp;&amp; extension_loaded(<span class="stringliteral">&#39;apc&#39;</span>))</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (($xmlArr = apc_fetch($cacheKey)) != null)</div>
<div class="line">                {</div>
<div class="line">                    $findInCache = <span class="keyword">true</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (!$xmlArr)</div>
<div class="line">            {</div>
<div class="line">                $content_array = file($objCmpFileName);</div>
<div class="line">                $xmlArr = unserialize(implode(<span class="stringliteral">&quot;&quot;</span>, $content_array));</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">         <span class="keywordflow">if</span>(extension_loaded(<span class="stringliteral">&#39;ionCube Loader&#39;</span>)){</div>
<div class="line">             include_once(OPENBIZ_BIN . <span class="stringliteral">&quot;util/xmltoarray.php&quot;</span>);</div>
<div class="line">         }<span class="keywordflow">else</span>{</div>
<div class="line">          include_once(OPENBIZ_BIN . <span class="stringliteral">&quot;util/xmltoarray.src.php&quot;</span>);</div>
<div class="line">         }</div>
<div class="line">            $parser = <span class="keyword">new</span> <a class="code" href="../../d2/d95/class_x_m_l_parser.html">XMLParser</a>($objXmlFileName, <span class="stringliteral">&#39;file&#39;</span>, 1);</div>
<div class="line">            $xmlArr = $parser-&gt;getTree();</div>
<div class="line">            <span class="comment">// simple validate the xml array</span></div>
<div class="line">            $root_keys = array_keys($xmlArr);</div>
<div class="line">            $root_key = $root_keys[0];</div>
<div class="line">            <span class="keywordflow">if</span> (!$root_key || $root_key == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line">            {</div>
<div class="line">                trigger_error(<span class="stringliteral">&quot;Metadata file parsing error for file $objXmlFileName. Please double check your metadata xml file again.&quot;</span>, E_USER_ERROR);</div>
<div class="line">            }</div>
<div class="line">            $xmlArrStr = serialize($xmlArr);</div>
<div class="line">            <span class="keywordflow">if</span> (!file_exists(dirname($objCmpFileName)))</div>
<div class="line">                mkdir(dirname($objCmpFileName));</div>
<div class="line">            $cmp_file = fopen($objCmpFileName, <span class="charliteral">&#39;w&#39;</span>) or die(&quot;can&#39;t open cmp file to write&quot;);</div>
<div class="line">            fwrite($cmp_file, $xmlArrStr) or die(&quot;can&#39;t write to the cmp file&quot;);</div>
<div class="line">            fclose($cmp_file);</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// save to cache to avoid file processing overhead</span></div>
<div class="line">        <a class="code" href="../../d3/d07/sysheader__inc_8php.html#a6cf9ee4d2b5d66ab50414ac61cf1acc6">if</a> (!$findInCache &amp;&amp; extension_loaded(&#39;apc&#39;))</div>
<div class="line">        {</div>
<div class="line">            apc_store($cacheKey, $xmlArr);</div>
<div class="line">        }</div>
<div class="line">  self::$_xmlArrayList[$xmlFile] = $xmlArr;</div>
<div class="line">        <span class="keywordflow">return</span> $xmlArr;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af50fc124cc93de9390ce723c36530129"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static getXmlFileWithPath </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$xmlObj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get Xml file with path</p>
<p>Search the object metedata file as objname+.xml in metedata directories name convension: demo.BOEvent points to metadata/demo/BOEvent.xml new in 2.2.3, demo.BOEvent can point to modules/demo/BOEvent.xml</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$xmlObj</td><td>xml object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string xml config file path </dd></dl>

<p>Definition at line <a class="el" href="../../#L250">250</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (isset(self::$_xmlFileList[$xmlObj])) {</div>
<div class="line">   <span class="keywordflow">return</span> self::$_xmlFileList[$xmlObj];</div>
<div class="line">  }</div>
<div class="line">  $xmlFile = $xmlObj;</div>
<div class="line">        <span class="keywordflow">if</span> (strpos($xmlObj, <span class="stringliteral">&quot;.xml&quot;</span>) &gt; 0)  <span class="comment">// remove .xml suffix if any</span></div>
<div class="line">            $xmlFile = substr($xmlObj, 0, strlen($xmlObj) - 4);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// replace &quot;.&quot; with &quot;/&quot;</span></div>
<div class="line">        $xmlFile = str_replace(<span class="stringliteral">&quot;.&quot;</span>, <span class="stringliteral">&quot;/&quot;</span>, $xmlFile);</div>
<div class="line">        <span class="comment">// check the leading char &#39;@&#39;</span></div>
<div class="line">        $checkExtModule = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keywordflow">if</span> (strpos($xmlFile, <span class="charliteral">&#39;@&#39;</span>) === 0) {</div>
<div class="line">            $xmlFile = substr($xmlFile, 1);</div>
<div class="line">            $checkExtModule = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">        $xmlFile .= <span class="stringliteral">&quot;.xml&quot;</span>;</div>
<div class="line">        $xmlFile = <span class="stringliteral">&quot;/&quot;</span> . $xmlFile;</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// find device path first</span></div>
<div class="line">        <span class="keywordflow">if</span> (defined(<span class="stringliteral">&#39;CLIENT_DEVICE&#39;</span>)) {</div>
<div class="line">            $path = dirname($xmlFile);</div>
<div class="line">            <span class="keywordflow">if</span> (strpos($path, <span class="stringliteral">&#39;view&#39;</span>)&gt;0 || strpos($path, <span class="stringliteral">&#39;form&#39;</span>)&gt;0 || strpos($path, <span class="stringliteral">&#39;widget&#39;</span>)&gt;0) {</div>
<div class="line">                $fname = basename($xmlFile);</div>
<div class="line">                $xmlFileList[] = <a class="code" href="../../d1/df2/sys__init_8php.html#ac741a5c484b794e0f4c08337608b625b">MODULE_PATH</a>.<span class="stringliteral">&quot;/$path/&quot;</span>.CLIENT_DEVICE.<span class="stringliteral">&quot;/$fname&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// search in modules directory first</span></div>
<div class="line">        $xmlFileList[] = <a class="code" href="../../d1/df2/sys__init_8php.html#ac741a5c484b794e0f4c08337608b625b">MODULE_PATH</a> . $xmlFile;</div>
<div class="line">        $xmlFileList[] = <a class="code" href="../../d1/df2/sys__init_8php.html#a252aacc48601a59f3f33f237c14b15c3">APP_HOME</a> . $xmlFile;</div>
<div class="line">        $xmlFileList[] = OPENBIZ_META . $xmlFile;</div>
<div class="line">        <span class="keywordflow">if</span> ($checkExtModule &amp;&amp; defined(<span class="stringliteral">&#39;MODULE_EX_PATH&#39;</span>)) array_unshift($xmlFileList, <a class="code" href="../../d1/df2/sys__init_8php.html#a52a4b3defcb31506af17423c123ed26e">MODULE_EX_PATH</a> . $xmlFile);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> ($xmlFileList as $xmlFileItem)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">//echo &quot;file_exists($xmlFileItem)\n&quot;;</span></div>
<div class="line">   <span class="keywordflow">if</span> (file_exists($xmlFileItem)) {</div>
<div class="line">    self::$_xmlFileList[$xmlObj] = $xmlFileItem;</div>
<div class="line">                <span class="keywordflow">return</span> $xmlFileItem;</div>
<div class="line">   }</div>
<div class="line">        }</div>
<div class="line">  self::$_xmlFileList[$xmlObj] = null;</div>
<div class="line">        <span class="keywordflow">return</span> null;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad15c7aaf2cda13ae9e0d32429f666fc3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static getZendTemplate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get Zend Template </p>
<dl class="section return"><dt>Returns</dt><dd>Zend_View zend view template object </dd></dl>

<p>Definition at line <a class="el" href="../../#L215">215</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="comment">// now assign the book data to a Zend_View instance</span></div>
<div class="line">        <span class="comment">//Zend_Loader::loadClass(&#39;Zend_View&#39;);</span></div>
<div class="line">        require_once <span class="stringliteral">&#39;Zend/View.php&#39;</span>;</div>
<div class="line">        $view = <span class="keyword">new</span> Zend_View();</div>
<div class="line">        <span class="keywordflow">if</span> (defined(<span class="stringliteral">&#39;SMARTY_TPL_PATH&#39;</span>))</div>
<div class="line">            $view-&gt;setScriptPath(SMARTY_TPL_PATH);</div>
<div class="line"></div>
<div class="line">        $theme = <a class="code" href="../../df/d00/class_resource.html#a1fba0833b16e3ca8470ef13b70f66a40">Resource::getCurrentTheme</a>();            </div>
<div class="line">            </div>
<div class="line">        <span class="comment">// load the config file which has the images and css url defined</span></div>
<div class="line">        $view-&gt;app_url = APP_URL;</div>
<div class="line">        $view-&gt;app_index = <a class="code" href="../../d1/df2/sys__init_8php.html#a6d8e212843c2fc5591e2b8bcc43eabb0">APP_INDEX</a>;</div>
<div class="line">        $view-&gt;js_url = <a class="code" href="../../d1/df2/sys__init_8php.html#a439300f4ac3d14c3a5a71e42ef239375">JS_URL</a>;</div>
<div class="line">        $view-&gt;css_url = <a class="code" href="../../d1/df2/sys__init_8php.html#acbe079f5f99677f3a97c3d3fe9816c54">THEME_URL</a> . <span class="stringliteral">&quot;/&quot;</span> . $theme . <span class="stringliteral">&quot;/css&quot;</span>;</div>
<div class="line">        $view-&gt;resource_url = <a class="code" href="../../d1/df2/sys__init_8php.html#ae138a42df57c5cb5c8341c851616065d">RESOURCE_URL</a>;    </div>
<div class="line">        $view-&gt;theme_js_url = <a class="code" href="../../d1/df2/sys__init_8php.html#acbe079f5f99677f3a97c3d3fe9816c54">THEME_URL</a> . <span class="stringliteral">&quot;/&quot;</span> . $theme . <span class="stringliteral">&quot;/js&quot;</span>;</div>
<div class="line">        $view-&gt;theme_url = <a class="code" href="../../d1/df2/sys__init_8php.html#acbe079f5f99677f3a97c3d3fe9816c54">THEME_URL</a> . <span class="stringliteral">&quot;/&quot;</span> . $theme;</div>
<div class="line">        $view-&gt;image_url = <a class="code" href="../../d1/df2/sys__init_8php.html#acbe079f5f99677f3a97c3d3fe9816c54">THEME_URL</a> . <span class="stringliteral">&quot;/&quot;</span> . $theme . <span class="stringliteral">&quot;/images&quot;</span>;</div>
<div class="line">        $view-&gt;lang = strtolower(<a class="code" href="../../d6/d59/class_i18n.html#a13d425e8b2f796041ce30c928925c197">I18n::getCurrentLangCode</a>());            </div>
<div class="line">            </div>
<div class="line">        <span class="keywordflow">return</span> $view;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a66826405edc53b33073ed69eac7b49f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static loadMessage </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$messageFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$packageName</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Load message from file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$messageFile</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mixed </dd></dl>

<p>Definition at line <a class="el" href="../../#L46">46</a> of file <a class="el" href="../../">Resource.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (isset($messageFile) &amp;&amp; $messageFile != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line">        {</div>
<div class="line"></div>
<div class="line">            <span class="comment">// message file location order </span></div>
<div class="line">            <span class="comment">// 1. MESSAGE_PATH.&quot;/&quot;.$messageFile</span></div>
<div class="line">            <span class="comment">// 2. MODULE_PATH . &quot;/$moduleName/message/&quot; . $messageFile;</span></div>
<div class="line">            <span class="comment">// 3. CORE_MODULE_PATH . &quot;/$moduleName/message/&quot; . $messageFile;</span></div>
<div class="line">            <span class="comment">// APP_HOME / MESSAGE_PATH : APP_HOME / messages</span></div>
<div class="line">            <span class="keywordflow">if</span> (is_file(<a class="code" href="../../d1/df2/sys__init_8php.html#ac9d8eb364f948462bf4fab7d4ef05a0b">MESSAGE_PATH</a> . <span class="stringliteral">&quot;/&quot;</span> . $messageFile)) {</div>
<div class="line">                <span class="keywordflow">return</span> parse_ini_file(<a class="code" href="../../d1/df2/sys__init_8php.html#ac9d8eb364f948462bf4fab7d4ef05a0b">MESSAGE_PATH</a> . <span class="stringliteral">&quot;/&quot;</span> . $messageFile);</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_file(<a class="code" href="../../d1/df2/sys__init_8php.html#ac741a5c484b794e0f4c08337608b625b">MODULE_PATH</a> . <span class="stringliteral">&quot;/&quot;</span> . $messageFile)) {</div>
<div class="line">    <span class="keywordflow">return</span> parse_ini_file(<a class="code" href="../../d1/df2/sys__init_8php.html#ac741a5c484b794e0f4c08337608b625b">MODULE_PATH</a> . <span class="stringliteral">&quot;/&quot;</span> . $messageFile);</div>
<div class="line">   } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordflow">if</span> (isset($packageName) &amp;&amp; $packageName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line">                {</div>
<div class="line">                    $dirs = explode(<span class="charliteral">&#39;.&#39;</span>, $packageName);</div>
<div class="line">                    $moduleName = $dirs[0];</div>
<div class="line">                    $msgFile = <a class="code" href="../../d1/df2/sys__init_8php.html#ac741a5c484b794e0f4c08337608b625b">MODULE_PATH</a> . <span class="stringliteral">&quot;/$moduleName/message/&quot;</span> . $messageFile;</div>
<div class="line">                    <span class="keywordflow">if</span> (is_file($msgFile))</div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordflow">return</span> parse_ini_file($msgFile);</div>
<div class="line">                    } <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        $errmsg = self::getMessage(<span class="stringliteral">&quot;SYS_ERROR_INVALID_MSGFILE&quot;</span>, array($msgFile));</div>
<div class="line">                        trigger_error($errmsg, E_USER_ERROR);</div>
<div class="line">                    }</div>
<div class="line">                } <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    $errmsg = self::getMessage(<span class="stringliteral">&quot;SYS_ERROR_INVALID_MSGFILE&quot;</span>, array(<a class="code" href="../../d1/df2/sys__init_8php.html#ac9d8eb364f948462bf4fab7d4ef05a0b">MESSAGE_PATH</a> . <span class="stringliteral">&quot;/&quot;</span> . $messageFile));</div>
<div class="line">                    trigger_error($errmsg, E_USER_ERROR);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> null;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="adc652c9152546e8f179b3b4c9edb6541"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const DEFAULT_THEME</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../#L39">39</a> of file <a class="el" href="../../">Resource.php</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 21 2013 17:16:27 for Openbiz Framework API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.3
</small></address>
</body>
</html>
