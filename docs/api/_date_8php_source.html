<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>openbiz: E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Date.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Date.php</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00025"></a>00025 require_once <span class="stringliteral">&#39;Zend/Date/DateObject.php&#39;</span>;
<a name="l00026"></a>00026 require_once <span class="stringliteral">&#39;Zend/Locale.php&#39;</span>;
<a name="l00027"></a>00027 require_once <span class="stringliteral">&#39;Zend/Locale/Format.php&#39;</span>;
<a name="l00028"></a>00028 require_once <span class="stringliteral">&#39;Zend/Locale/Math.php&#39;</span>;
<a name="l00029"></a>00029 
<a name="l00036"></a><a class="code" href="class_zend___date.html">00036</a> <span class="keyword">class </span><a class="code" href="class_zend___date.html">Zend_Date</a> <span class="keyword">extends</span> Zend_Date_DateObject
<a name="l00037"></a>00037 {
<a name="l00038"></a>00038     <span class="keyword">private</span> $_locale  = null;
<a name="l00039"></a>00039 
<a name="l00040"></a>00040     <span class="comment">// Fractional second variables</span>
<a name="l00041"></a>00041     <span class="keyword">private</span> $_fractional = 0;
<a name="l00042"></a>00042     <span class="keyword">private</span> $_precision  = 3;
<a name="l00043"></a>00043 
<a name="l00044"></a>00044     <span class="keyword">private</span> <span class="keyword">static</span> $_options = array(
<a name="l00045"></a>00045         <span class="stringliteral">&#39;format_type&#39;</span>  =&gt; <span class="stringliteral">&#39;iso&#39;</span>,      <span class="comment">// format for date strings &#39;iso&#39; or &#39;php&#39;</span>
<a name="l00046"></a>00046         <span class="stringliteral">&#39;fix_dst&#39;</span>      =&gt; <span class="keyword">true</span>,       <span class="comment">// fix dst on summer/winter time change</span>
<a name="l00047"></a>00047         <span class="stringliteral">&#39;extend_month&#39;</span> =&gt; <span class="keyword">false</span>,      <span class="comment">// false - addMonth like SQL, true like excel</span>
<a name="l00048"></a>00048         <span class="stringliteral">&#39;cache&#39;</span>        =&gt; null,       <span class="comment">// cache to set</span>
<a name="l00049"></a>00049         <span class="stringliteral">&#39;timesync&#39;</span>     =&gt; null        <span class="comment">// timesync server to set</span>
<a name="l00050"></a>00050     );
<a name="l00051"></a>00051 
<a name="l00052"></a>00052     <span class="comment">// Class wide Date Constants</span>
<a name="l00053"></a>00053     <span class="keyword">const</span> DAY               = <span class="stringliteral">&#39;dd&#39;</span>;
<a name="l00054"></a>00054     <span class="keyword">const</span> DAY_SHORT         = <span class="charliteral">&#39;d&#39;</span>;
<a name="l00055"></a>00055     <span class="keyword">const</span> DAY_SUFFIX        = <span class="stringliteral">&#39;SS&#39;</span>;
<a name="l00056"></a>00056     <span class="keyword">const</span> DAY_OF_YEAR       = <span class="charliteral">&#39;D&#39;</span>;
<a name="l00057"></a>00057     <span class="keyword">const</span> WEEKDAY           = <span class="stringliteral">&#39;EEEE&#39;</span>;
<a name="l00058"></a>00058     <span class="keyword">const</span> WEEKDAY_SHORT     = <span class="stringliteral">&#39;EEE&#39;</span>;
<a name="l00059"></a>00059     <span class="keyword">const</span> WEEKDAY_NARROW    = <span class="charliteral">&#39;E&#39;</span>;
<a name="l00060"></a>00060     <span class="keyword">const</span> WEEKDAY_NAME      = <span class="stringliteral">&#39;EE&#39;</span>;
<a name="l00061"></a>00061     <span class="keyword">const</span> WEEKDAY_8601      = <span class="stringliteral">&#39;eee&#39;</span>;
<a name="l00062"></a>00062     <span class="keyword">const</span> WEEKDAY_DIGIT     = <span class="charliteral">&#39;e&#39;</span>;
<a name="l00063"></a>00063     <span class="keyword">const</span> WEEK              = <span class="stringliteral">&#39;ww&#39;</span>;
<a name="l00064"></a>00064     <span class="keyword">const</span> MONTH             = <span class="stringliteral">&#39;MM&#39;</span>;
<a name="l00065"></a>00065     <span class="keyword">const</span> MONTH_SHORT       = <span class="charliteral">&#39;M&#39;</span>;
<a name="l00066"></a>00066     <span class="keyword">const</span> MONTH_DAYS        = <span class="stringliteral">&#39;ddd&#39;</span>;
<a name="l00067"></a>00067     <span class="keyword">const</span> MONTH_NAME        = <span class="stringliteral">&#39;MMMM&#39;</span>;
<a name="l00068"></a>00068     <span class="keyword">const</span> MONTH_NAME_SHORT  = <span class="stringliteral">&#39;MMM&#39;</span>;
<a name="l00069"></a>00069     <span class="keyword">const</span> MONTH_NAME_NARROW = <span class="stringliteral">&#39;MMMMM&#39;</span>;
<a name="l00070"></a>00070     <span class="keyword">const</span> YEAR              = <span class="charliteral">&#39;y&#39;</span>;
<a name="l00071"></a>00071     <span class="keyword">const</span> YEAR_SHORT        = <span class="stringliteral">&#39;yy&#39;</span>;
<a name="l00072"></a>00072     <span class="keyword">const</span> YEAR_8601         = <span class="charliteral">&#39;Y&#39;</span>;
<a name="l00073"></a>00073     <span class="keyword">const</span> YEAR_SHORT_8601   = <span class="stringliteral">&#39;YY&#39;</span>;
<a name="l00074"></a>00074     <span class="keyword">const</span> LEAPYEAR          = <span class="charliteral">&#39;l&#39;</span>;
<a name="l00075"></a>00075     <span class="keyword">const</span> MERIDIEM          = <span class="charliteral">&#39;a&#39;</span>;
<a name="l00076"></a>00076     <span class="keyword">const</span> SWATCH            = <span class="charliteral">&#39;B&#39;</span>;
<a name="l00077"></a>00077     <span class="keyword">const</span> HOUR              = <span class="stringliteral">&#39;HH&#39;</span>;
<a name="l00078"></a>00078     <span class="keyword">const</span> HOUR_SHORT        = <span class="charliteral">&#39;H&#39;</span>;
<a name="l00079"></a>00079     <span class="keyword">const</span> HOUR_AM           = <span class="stringliteral">&#39;hh&#39;</span>;
<a name="l00080"></a>00080     <span class="keyword">const</span> HOUR_SHORT_AM     = <span class="charliteral">&#39;h&#39;</span>;
<a name="l00081"></a>00081     <span class="keyword">const</span> MINUTE            = <span class="stringliteral">&#39;mm&#39;</span>;
<a name="l00082"></a>00082     <span class="keyword">const</span> MINUTE_SHORT      = <span class="charliteral">&#39;m&#39;</span>;
<a name="l00083"></a>00083     <span class="keyword">const</span> SECOND            = <span class="stringliteral">&#39;ss&#39;</span>;
<a name="l00084"></a>00084     <span class="keyword">const</span> SECOND_SHORT      = <span class="charliteral">&#39;s&#39;</span>;
<a name="l00085"></a>00085     <span class="keyword">const</span> MILLISECOND       = <span class="charliteral">&#39;S&#39;</span>;
<a name="l00086"></a>00086     <span class="keyword">const</span> TIMEZONE_NAME     = <span class="stringliteral">&#39;zzzz&#39;</span>;
<a name="l00087"></a>00087     <span class="keyword">const</span> DAYLIGHT          = <span class="charliteral">&#39;I&#39;</span>;
<a name="l00088"></a>00088     <span class="keyword">const</span> GMT_DIFF          = <span class="charliteral">&#39;Z&#39;</span>;
<a name="l00089"></a>00089     <span class="keyword">const</span> GMT_DIFF_SEP      = <span class="stringliteral">&#39;ZZZZ&#39;</span>;
<a name="l00090"></a>00090     <span class="keyword">const</span> TIMEZONE          = <span class="charliteral">&#39;z&#39;</span>;
<a name="l00091"></a>00091     <span class="keyword">const</span> TIMEZONE_SECS     = <span class="charliteral">&#39;X&#39;</span>;
<a name="l00092"></a>00092     <span class="keyword">const</span> ISO_8601          = <span class="charliteral">&#39;c&#39;</span>;
<a name="l00093"></a>00093     <span class="keyword">const</span> RFC_2822          = <span class="charliteral">&#39;r&#39;</span>;
<a name="l00094"></a>00094     <span class="keyword">const</span> TIMESTAMP         = <span class="charliteral">&#39;U&#39;</span>;
<a name="l00095"></a>00095     <span class="keyword">const</span> ERA               = <span class="charliteral">&#39;G&#39;</span>;
<a name="l00096"></a>00096     <span class="keyword">const</span> ERA_NAME          = <span class="stringliteral">&#39;GGGG&#39;</span>;
<a name="l00097"></a>00097     <span class="keyword">const</span> ERA_NARROW        = <span class="stringliteral">&#39;GGGGG&#39;</span>;
<a name="l00098"></a>00098     <span class="keyword">const</span> DATES             = <span class="charliteral">&#39;F&#39;</span>;
<a name="l00099"></a>00099     <span class="keyword">const</span> DATE_FULL         = <span class="stringliteral">&#39;FFFFF&#39;</span>;
<a name="l00100"></a>00100     <span class="keyword">const</span> DATE_LONG         = <span class="stringliteral">&#39;FFFF&#39;</span>;
<a name="l00101"></a>00101     <span class="keyword">const</span> DATE_MEDIUM       = <span class="stringliteral">&#39;FFF&#39;</span>;
<a name="l00102"></a>00102     <span class="keyword">const</span> DATE_SHORT        = <span class="stringliteral">&#39;FF&#39;</span>;
<a name="l00103"></a>00103     <span class="keyword">const</span> TIMES             = <span class="stringliteral">&#39;WW&#39;</span>;
<a name="l00104"></a>00104     <span class="keyword">const</span> TIME_FULL         = <span class="stringliteral">&#39;TTTTT&#39;</span>;
<a name="l00105"></a>00105     <span class="keyword">const</span> TIME_LONG         = <span class="stringliteral">&#39;TTTT&#39;</span>;
<a name="l00106"></a>00106     <span class="keyword">const</span> TIME_MEDIUM       = <span class="stringliteral">&#39;TTT&#39;</span>;
<a name="l00107"></a>00107     <span class="keyword">const</span> TIME_SHORT        = <span class="stringliteral">&#39;TT&#39;</span>;
<a name="l00108"></a>00108     <span class="keyword">const</span> DATETIME          = <span class="charliteral">&#39;K&#39;</span>;
<a name="l00109"></a>00109     <span class="keyword">const</span> DATETIME_FULL     = <span class="stringliteral">&#39;KKKKK&#39;</span>;
<a name="l00110"></a>00110     <span class="keyword">const</span> DATETIME_LONG     = <span class="stringliteral">&#39;KKKK&#39;</span>;
<a name="l00111"></a>00111     <span class="keyword">const</span> DATETIME_MEDIUM   = <span class="stringliteral">&#39;KKK&#39;</span>;
<a name="l00112"></a>00112     <span class="keyword">const</span> DATETIME_SHORT    = <span class="stringliteral">&#39;KK&#39;</span>;
<a name="l00113"></a>00113     <span class="keyword">const</span> ATOM              = <span class="stringliteral">&#39;OOO&#39;</span>;
<a name="l00114"></a>00114     <span class="keyword">const</span> COOKIE            = <span class="stringliteral">&#39;CCC&#39;</span>;
<a name="l00115"></a>00115     <span class="keyword">const</span> RFC_822           = <span class="charliteral">&#39;R&#39;</span>;
<a name="l00116"></a>00116     <span class="keyword">const</span> RFC_850           = <span class="stringliteral">&#39;RR&#39;</span>;
<a name="l00117"></a>00117     <span class="keyword">const</span> RFC_1036          = <span class="stringliteral">&#39;RRR&#39;</span>;
<a name="l00118"></a>00118     <span class="keyword">const</span> RFC_1123          = <span class="stringliteral">&#39;RRRR&#39;</span>;
<a name="l00119"></a>00119     <span class="keyword">const</span> RFC_3339          = <span class="stringliteral">&#39;RRRRR&#39;</span>;
<a name="l00120"></a>00120     <span class="keyword">const</span> RSS               = <span class="stringliteral">&#39;SSS&#39;</span>;
<a name="l00121"></a>00121     <span class="keyword">const</span> W3C               = <span class="stringliteral">&#39;WWW&#39;</span>;
<a name="l00122"></a>00122 
<a name="l00137"></a><a class="code" href="class_zend___date.html#a2cd65e3ef29d98b51d74993db4c196d9">00137</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a2cd65e3ef29d98b51d74993db4c196d9">__construct</a>($date = null, $part = null, $locale = null)
<a name="l00138"></a>00138     {
<a name="l00139"></a>00139         <span class="keywordflow">if</span> (is_object($date) and !($date instanceof Zend_TimeSync_Protocol) and
<a name="l00140"></a>00140             !($date instanceof <a class="code" href="class_zend___date.html">Zend_Date</a>)) {
<a name="l00141"></a>00141             <span class="keywordflow">if</span> ($locale instanceof <a class="code" href="class_zend___locale.html">Zend_Locale</a>) {
<a name="l00142"></a>00142                 $locale = $date;
<a name="l00143"></a>00143                 $date   = null;
<a name="l00144"></a>00144                 $part   = null;
<a name="l00145"></a>00145             } <span class="keywordflow">else</span> {
<a name="l00146"></a>00146                 $date = (string) $date;
<a name="l00147"></a>00147             }
<a name="l00148"></a>00148         }
<a name="l00149"></a>00149 
<a name="l00150"></a>00150         <span class="keywordflow">if</span> (($date !== null) and !is_array($date) and !($date instanceof Zend_TimeSync_Protocol) and
<a name="l00151"></a>00151             !($date instanceof Zend_Date) and !defined($date) and <a class="code" href="class_zend___locale.html#a84c0df2fe97b8386edb88024b77c869b">Zend_Locale::isLocale</a>($date, <span class="keyword">true</span>, <span class="keyword">false</span>)) {
<a name="l00152"></a>00152             $locale = $date;
<a name="l00153"></a>00153             $date   = null;
<a name="l00154"></a>00154             $part   = null;
<a name="l00155"></a>00155         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (($part !== null) and !defined($part) and <a class="code" href="class_zend___locale.html#a84c0df2fe97b8386edb88024b77c869b">Zend_Locale::isLocale</a>($part, <span class="keyword">true</span>, <span class="keyword">false</span>)) {
<a name="l00156"></a>00156             $locale = $part;
<a name="l00157"></a>00157             $part   = null;
<a name="l00158"></a>00158         }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160         $this-&gt;<a class="code" href="class_zend___date.html#a0fb89675983893dbf686b0d22111b8e5">setLocale</a>($locale);
<a name="l00161"></a>00161         <span class="keywordflow">if</span> (is_string($date) &amp;&amp; ($part === null) &amp;&amp; (strlen($date) &lt;= 5)) {
<a name="l00162"></a>00162             $part = $date;
<a name="l00163"></a>00163             $date = null;
<a name="l00164"></a>00164         }
<a name="l00165"></a>00165 
<a name="l00166"></a>00166         <span class="keywordflow">if</span> ($date === null) {
<a name="l00167"></a>00167             <span class="keywordflow">if</span> ($part === null) {
<a name="l00168"></a>00168                 $date = time();
<a name="l00169"></a>00169             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($part !== self::TIMESTAMP) {
<a name="l00170"></a>00170                 $date = <a class="code" href="class_zend___date.html#a45a5028322ce537215205b73165ecef4">self::now</a>($locale);
<a name="l00171"></a>00171                 $date = $date-&gt;get($part);
<a name="l00172"></a>00172             }
<a name="l00173"></a>00173         }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175         <span class="keywordflow">if</span> ($date instanceof Zend_TimeSync_Protocol) {
<a name="l00176"></a>00176             $date = $date-&gt;getInfo();
<a name="l00177"></a>00177             $date = $this-&gt;_getTime($date[<span class="stringliteral">&#39;offset&#39;</span>]);
<a name="l00178"></a>00178             $part = null;
<a name="l00179"></a>00179         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (parent::$_defaultOffset != 0) {
<a name="l00180"></a>00180             $date = $this-&gt;_getTime(parent::$_defaultOffset);
<a name="l00181"></a>00181         }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183         <span class="comment">// set the timezone and offset for $this</span>
<a name="l00184"></a>00184         $zone = @date_default_timezone_get();
<a name="l00185"></a>00185         $this-&gt;setTimezone($zone);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187         <span class="comment">// try to get timezone from date-string</span>
<a name="l00188"></a>00188         <span class="keywordflow">if</span> (!is_int($date)) {
<a name="l00189"></a>00189             $zone = $this-&gt;<a class="code" href="class_zend___date.html#a5cb98c662de5afaf2220d54335f9c8b7">getTimezoneFromString</a>($date);
<a name="l00190"></a>00190             $this-&gt;setTimezone($zone);
<a name="l00191"></a>00191         }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193         <span class="comment">// set datepart</span>
<a name="l00194"></a>00194         <span class="keywordflow">if</span> (($part !== null &amp;&amp; $part !== self::TIMESTAMP) or (!is_numeric($date))) {
<a name="l00195"></a>00195             <span class="comment">// switch off dst handling for value setting</span>
<a name="l00196"></a>00196             $this-&gt;setUnixTimestamp($this-&gt;getGmtOffset());
<a name="l00197"></a>00197             $this-&gt;<span class="keyword">set</span>($date, $part, $this-&gt;_locale);
<a name="l00198"></a>00198 
<a name="l00199"></a>00199             <span class="comment">// DST fix</span>
<a name="l00200"></a>00200             <span class="keywordflow">if</span> (is_array($date) === <span class="keyword">true</span>) {
<a name="l00201"></a>00201                 <span class="keywordflow">if</span> (!isset($date[<span class="stringliteral">&#39;hour&#39;</span>])) {
<a name="l00202"></a>00202                     $date[<span class="stringliteral">&#39;hour&#39;</span>] = 0;
<a name="l00203"></a>00203                 }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205                 $hour = $this-&gt;<a class="code" href="class_zend___date.html#ad9fc26fbf11b0eb6a58c761c01044ada">toString</a>(<span class="charliteral">&#39;H&#39;</span>);
<a name="l00206"></a>00206                 $hour = $date[<span class="stringliteral">&#39;hour&#39;</span>] - $hour;
<a name="l00207"></a>00207                 <span class="keywordflow">switch</span> ($hour) {
<a name="l00208"></a>00208                     <span class="keywordflow">case</span> 1 :
<a name="l00209"></a>00209                     <span class="keywordflow">case</span> -23 :
<a name="l00210"></a>00210                         $this-&gt;<a class="code" href="class_zend___date.html#af07d719a5fc2a21d091bb6d91b430648">addTimestamp</a>(3600);
<a name="l00211"></a>00211                         <span class="keywordflow">break</span>;
<a name="l00212"></a>00212                     <span class="keywordflow">case</span> -1 :
<a name="l00213"></a>00213                     <span class="keywordflow">case</span> 23 :
<a name="l00214"></a>00214                         $this-&gt;<a class="code" href="class_zend___date.html#a0b765190b76aef0b7e139f8de7b06955">subTimestamp</a>(3600);
<a name="l00215"></a>00215                         <span class="keywordflow">break</span>;
<a name="l00216"></a>00216                     <span class="keywordflow">case</span> 2 :
<a name="l00217"></a>00217                     <span class="keywordflow">case</span> -22 :
<a name="l00218"></a>00218                         $this-&gt;<a class="code" href="class_zend___date.html#af07d719a5fc2a21d091bb6d91b430648">addTimestamp</a>(7200);
<a name="l00219"></a>00219                         <span class="keywordflow">break</span>;
<a name="l00220"></a>00220                     <span class="keywordflow">case</span> -2 :
<a name="l00221"></a>00221                     <span class="keywordflow">case</span> 22 :
<a name="l00222"></a>00222                         $this-&gt;<a class="code" href="class_zend___date.html#a0b765190b76aef0b7e139f8de7b06955">subTimestamp</a>(7200);
<a name="l00223"></a>00223                         <span class="keywordflow">break</span>;
<a name="l00224"></a>00224                 }
<a name="l00225"></a>00225             }
<a name="l00226"></a>00226         } <span class="keywordflow">else</span> {
<a name="l00227"></a>00227             $this-&gt;setUnixTimestamp($date);
<a name="l00228"></a>00228         }
<a name="l00229"></a>00229     }
<a name="l00230"></a>00230 
<a name="l00238"></a><a class="code" href="class_zend___date.html#aec5ae93fc79540cb9f1cf69a9731fddd">00238</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___date.html#aec5ae93fc79540cb9f1cf69a9731fddd">setOptions</a>(array $options = array())
<a name="l00239"></a>00239     {
<a name="l00240"></a>00240         <span class="keywordflow">if</span> (empty($options)) {
<a name="l00241"></a>00241             <span class="keywordflow">return</span> self::$_options;
<a name="l00242"></a>00242         }
<a name="l00243"></a>00243         <span class="keywordflow">foreach</span> ($options as $name =&gt; $value) {
<a name="l00244"></a>00244             $name  = strtolower($name);
<a name="l00245"></a>00245 
<a name="l00246"></a>00246             <span class="keywordflow">if</span> (array_key_exists($name, self::$_options)) {
<a name="l00247"></a>00247                 <span class="keywordflow">switch</span>($name) {
<a name="l00248"></a>00248                     <span class="keywordflow">case</span> <span class="stringliteral">&#39;format_type&#39;</span> :
<a name="l00249"></a>00249                         <span class="keywordflow">if</span> ((strtolower($value) != <span class="stringliteral">&#39;php&#39;</span>) &amp;&amp; (strtolower($value) != <span class="stringliteral">&#39;iso&#39;</span>)) {
<a name="l00250"></a>00250                             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l00251"></a>00251                             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;Unknown format type ($value) for dates, only &#39;iso&#39; and &#39;php&#39; supported&quot;</span>, $value);
<a name="l00252"></a>00252                         }
<a name="l00253"></a>00253                         <span class="keywordflow">break</span>;
<a name="l00254"></a>00254                     <span class="keywordflow">case</span> <span class="stringliteral">&#39;fix_dst&#39;</span> :
<a name="l00255"></a>00255                         <span class="keywordflow">if</span> (!is_bool($value)) {
<a name="l00256"></a>00256                             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l00257"></a>00257                             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;&#39;fix_dst&#39; has to be boolean&quot;</span>, $value);
<a name="l00258"></a>00258                         }
<a name="l00259"></a>00259                         <span class="keywordflow">break</span>;
<a name="l00260"></a>00260                     <span class="keywordflow">case</span> <span class="stringliteral">&#39;extend_month&#39;</span> :
<a name="l00261"></a>00261                         <span class="keywordflow">if</span> (!is_bool($value)) {
<a name="l00262"></a>00262                             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l00263"></a>00263                             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;&#39;extend_month&#39; has to be boolean&quot;</span>, $value);
<a name="l00264"></a>00264                         }
<a name="l00265"></a>00265                         <span class="keywordflow">break</span>;
<a name="l00266"></a>00266                     <span class="keywordflow">case</span> <span class="stringliteral">&#39;cache&#39;</span> :
<a name="l00267"></a>00267                         <span class="keywordflow">if</span> (!$value instanceof <a class="code" href="class_zend___cache___core.html">Zend_Cache_Core</a>) {
<a name="l00268"></a>00268                             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l00269"></a>00269                             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;Instance of Zend_Cache expected&quot;</span>);
<a name="l00270"></a>00270                         }
<a name="l00271"></a>00271                         parent::$_cache = $value;
<a name="l00272"></a>00272                         <a class="code" href="class_zend___locale___data.html#a01c39a05983592df3a63cb5bb464a4df">Zend_Locale_Data::setCache</a>($value);
<a name="l00273"></a>00273                         <span class="keywordflow">break</span>;
<a name="l00274"></a>00274                     <span class="keywordflow">case</span> <span class="stringliteral">&#39;timesync&#39;</span> :
<a name="l00275"></a>00275                         <span class="keywordflow">if</span> (!$value instanceof Zend_TimeSync_Protocol) {
<a name="l00276"></a>00276                             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l00277"></a>00277                             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;Instance of Zend_TimeSync expected&quot;</span>);
<a name="l00278"></a>00278                         }
<a name="l00279"></a>00279                         $date = $value-&gt;getInfo();
<a name="l00280"></a>00280                         parent::$_defaultOffset = $date[<span class="stringliteral">&#39;offset&#39;</span>];
<a name="l00281"></a>00281                         <span class="keywordflow">break</span>;
<a name="l00282"></a>00282                 }
<a name="l00283"></a>00283                 self::$_options[$name] = $value;
<a name="l00284"></a>00284             }
<a name="l00285"></a>00285             <span class="keywordflow">else</span> {
<a name="l00286"></a>00286                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l00287"></a>00287                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;Unknown option: $name = $value&quot;</span>);
<a name="l00288"></a>00288             }
<a name="l00289"></a>00289         }
<a name="l00290"></a>00290     }
<a name="l00291"></a>00291 
<a name="l00300"></a><a class="code" href="class_zend___date.html#a92aa1d82129ec8cd803d64c28efcb30f">00300</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a92aa1d82129ec8cd803d64c28efcb30f">getTimestamp</a>()
<a name="l00301"></a>00301     {
<a name="l00302"></a>00302         <span class="keywordflow">return</span> $this-&gt;getUnixTimestamp();
<a name="l00303"></a>00303     }
<a name="l00304"></a>00304 
<a name="l00314"></a>00314     <span class="keyword">private</span> function _timestamp($calc, $stamp)
<a name="l00315"></a>00315     {
<a name="l00316"></a>00316         <span class="keywordflow">if</span> ($stamp instanceof <a class="code" href="class_zend___date.html">Zend_Date</a>) {
<a name="l00317"></a>00317             <span class="comment">// extract timestamp from object</span>
<a name="l00318"></a>00318             $stamp = $stamp-&gt;get(self::TIMESTAMP, <span class="keyword">true</span>);
<a name="l00319"></a>00319         }
<a name="l00320"></a>00320 
<a name="l00321"></a>00321         <span class="keywordflow">if</span> (is_array($stamp)) {
<a name="l00322"></a>00322             <span class="keywordflow">if</span> (isset($stamp[<span class="stringliteral">&#39;timestamp&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l00323"></a>00323                 $stamp = $stamp[<span class="stringliteral">&#39;timestamp&#39;</span>];
<a name="l00324"></a>00324             } <span class="keywordflow">else</span> {
<a name="l00325"></a>00325                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l00326"></a>00326                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;no timestamp given in array&#39;</span>);
<a name="l00327"></a>00327             }
<a name="l00328"></a>00328         }
<a name="l00329"></a>00329 
<a name="l00330"></a>00330         <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;set&#39;</span>) {
<a name="l00331"></a>00331             $return = $this-&gt;setUnixTimestamp($stamp);
<a name="l00332"></a>00332         } <span class="keywordflow">else</span> {
<a name="l00333"></a>00333             $return = $this-&gt;_calcdetail($calc, $stamp, self::TIMESTAMP, null);
<a name="l00334"></a>00334         }
<a name="l00335"></a>00335         <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;cmp&#39;</span>) {
<a name="l00336"></a>00336             <span class="keywordflow">return</span> $this;
<a name="l00337"></a>00337         }
<a name="l00338"></a>00338         <span class="keywordflow">return</span> $return;
<a name="l00339"></a>00339     }
<a name="l00340"></a>00340 
<a name="l00348"></a><a class="code" href="class_zend___date.html#a2619ddf85109b204f4313e8f50260220">00348</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a2619ddf85109b204f4313e8f50260220">setTimestamp</a>($timestamp)
<a name="l00349"></a>00349     {
<a name="l00350"></a>00350         <span class="keywordflow">return</span> $this-&gt;_timestamp(<span class="stringliteral">&#39;set&#39;</span>, $timestamp);
<a name="l00351"></a>00351     }
<a name="l00352"></a>00352 
<a name="l00360"></a><a class="code" href="class_zend___date.html#af07d719a5fc2a21d091bb6d91b430648">00360</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#af07d719a5fc2a21d091bb6d91b430648">addTimestamp</a>($timestamp)
<a name="l00361"></a>00361     {
<a name="l00362"></a>00362         <span class="keywordflow">return</span> $this-&gt;_timestamp(<span class="stringliteral">&#39;add&#39;</span>, $timestamp);
<a name="l00363"></a>00363     }
<a name="l00364"></a>00364 
<a name="l00372"></a><a class="code" href="class_zend___date.html#a0b765190b76aef0b7e139f8de7b06955">00372</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a0b765190b76aef0b7e139f8de7b06955">subTimestamp</a>($timestamp)
<a name="l00373"></a>00373     {
<a name="l00374"></a>00374         <span class="keywordflow">return</span> $this-&gt;_timestamp(<span class="stringliteral">&#39;sub&#39;</span>, $timestamp);
<a name="l00375"></a>00375     }
<a name="l00376"></a>00376 
<a name="l00384"></a><a class="code" href="class_zend___date.html#ad69c05f331813e4af99de1978e2e70b9">00384</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ad69c05f331813e4af99de1978e2e70b9">compareTimestamp</a>($timestamp)
<a name="l00385"></a>00385     {
<a name="l00386"></a>00386         <span class="keywordflow">return</span> $this-&gt;_timestamp(<span class="stringliteral">&#39;cmp&#39;</span>, $timestamp);
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388 
<a name="l00411"></a><a class="code" href="class_zend___date.html#ad9fc26fbf11b0eb6a58c761c01044ada">00411</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ad9fc26fbf11b0eb6a58c761c01044ada">toString</a>($format = null, $type = null, $locale = null)
<a name="l00412"></a>00412     {
<a name="l00413"></a>00413         <span class="keywordflow">if</span> (is_object($format)) {
<a name="l00414"></a>00414             <span class="keywordflow">if</span> ($format instanceof <a class="code" href="class_zend___locale.html">Zend_Locale</a>) {
<a name="l00415"></a>00415                 $locale = $format;
<a name="l00416"></a>00416                 $format = null;
<a name="l00417"></a>00417             } <span class="keywordflow">else</span> {
<a name="l00418"></a>00418                 $format = (string) $format;
<a name="l00419"></a>00419             }
<a name="l00420"></a>00420         }
<a name="l00421"></a>00421 
<a name="l00422"></a>00422         <span class="keywordflow">if</span> (is_object($type)) {
<a name="l00423"></a>00423             <span class="keywordflow">if</span> ($type instanceof <a class="code" href="class_zend___locale.html">Zend_Locale</a>) {
<a name="l00424"></a>00424                 $locale = $type;
<a name="l00425"></a>00425                 $type   = null;
<a name="l00426"></a>00426             } <span class="keywordflow">else</span> {
<a name="l00427"></a>00427                 $type = (string) $type;
<a name="l00428"></a>00428             }
<a name="l00429"></a>00429         }
<a name="l00430"></a>00430 
<a name="l00431"></a>00431         <span class="keywordflow">if</span> (($format !== null) and !defined($format) and
<a name="l00432"></a>00432             ($format != <span class="stringliteral">&#39;ee&#39;</span>) and ($format != <span class="stringliteral">&#39;ss&#39;</span>) and <a class="code" href="class_zend___locale.html#a84c0df2fe97b8386edb88024b77c869b">Zend_Locale::isLocale</a>($format, null, <span class="keyword">false</span>)) {
<a name="l00433"></a>00433             $locale = $format;
<a name="l00434"></a>00434             $format = null;
<a name="l00435"></a>00435         }
<a name="l00436"></a>00436 
<a name="l00437"></a>00437         <span class="keywordflow">if</span> (($type !== null) and ($type != <span class="stringliteral">&#39;php&#39;</span>) and ($type != <span class="stringliteral">&#39;iso&#39;</span>) and
<a name="l00438"></a>00438             <a class="code" href="class_zend___locale.html#a84c0df2fe97b8386edb88024b77c869b">Zend_Locale::isLocale</a>($type, null, <span class="keyword">false</span>)) {
<a name="l00439"></a>00439             $locale = $type;
<a name="l00440"></a>00440             $type = null;
<a name="l00441"></a>00441         }
<a name="l00442"></a>00442 
<a name="l00443"></a>00443         <span class="keywordflow">if</span> ($locale === null) {
<a name="l00444"></a>00444             $locale = $this-&gt;<a class="code" href="class_zend___date.html#ad532b661eb33c3e755bd3fa8ff1bd7af">getLocale</a>();
<a name="l00445"></a>00445         }
<a name="l00446"></a>00446 
<a name="l00447"></a>00447         <span class="keywordflow">if</span> ($format === null) {
<a name="l00448"></a>00448             $format = <a class="code" href="class_zend___locale___format.html#aa1d208f5bf369b2103b6a9bfb0d6f2f8">Zend_Locale_Format::getDateFormat</a>($locale) . <span class="charliteral">&#39; &#39;</span> . <a class="code" href="class_zend___locale___format.html#abbb6baa874b851756cdb74dd5d77f434">Zend_Locale_Format::getTimeFormat</a>($locale);
<a name="l00449"></a>00449         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((self::$_options[<span class="stringliteral">&#39;format_type&#39;</span>] == <span class="stringliteral">&#39;php&#39;</span>) &amp;&amp; ($type === null)) or ($type == <span class="stringliteral">&#39;php&#39;</span>)) {
<a name="l00450"></a>00450             $format = <a class="code" href="class_zend___locale___format.html#a95fc846144cd145417ec7516af6bc436">Zend_Locale_Format::convertPhpToIsoFormat</a>($format);
<a name="l00451"></a>00451         }
<a name="l00452"></a>00452 
<a name="l00453"></a>00453         <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>($format, $locale);
<a name="l00454"></a>00454     }
<a name="l00455"></a>00455 
<a name="l00461"></a><a class="code" href="class_zend___date.html#a7516ca30af0db3cdbf9a7739b48ce91d">00461</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a7516ca30af0db3cdbf9a7739b48ce91d">__toString</a>()
<a name="l00462"></a>00462     {
<a name="l00463"></a>00463         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#ad9fc26fbf11b0eb6a58c761c01044ada">toString</a>(null, $this-&gt;_locale);
<a name="l00464"></a>00464     }
<a name="l00465"></a>00465 
<a name="l00473"></a><a class="code" href="class_zend___date.html#aa3223c9d948e3342afa997a0fac1d120">00473</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#aa3223c9d948e3342afa997a0fac1d120">toValue</a>($part = null)
<a name="l00474"></a>00474     {
<a name="l00475"></a>00475         $result = $this-&gt;<span class="keyword">get</span>($part);
<a name="l00476"></a>00476         <span class="keywordflow">if</span> (is_numeric($result)) {
<a name="l00477"></a>00477           <span class="keywordflow">return</span> intval(<span class="stringliteral">&quot;$result&quot;</span>);
<a name="l00478"></a>00478         } <span class="keywordflow">else</span> {
<a name="l00479"></a>00479           <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00480"></a>00480         }
<a name="l00481"></a>00481     }
<a name="l00482"></a>00482 
<a name="l00488"></a><a class="code" href="class_zend___date.html#a658defb34762c8f40085aec87e16ba1a">00488</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a658defb34762c8f40085aec87e16ba1a">toArray</a>()
<a name="l00489"></a>00489     {
<a name="l00490"></a>00490         <span class="keywordflow">return</span> array(<span class="stringliteral">&#39;day&#39;</span>       =&gt; $this-&gt;<span class="keyword">get</span>(self::DAY_SHORT),
<a name="l00491"></a>00491                      <span class="stringliteral">&#39;month&#39;</span>     =&gt; $this-&gt;<span class="keyword">get</span>(self::MONTH_SHORT),
<a name="l00492"></a>00492                      <span class="stringliteral">&#39;year&#39;</span>      =&gt; $this-&gt;<span class="keyword">get</span>(self::YEAR),
<a name="l00493"></a>00493                      <span class="stringliteral">&#39;hour&#39;</span>      =&gt; $this-&gt;<span class="keyword">get</span>(self::HOUR_SHORT),
<a name="l00494"></a>00494                      <span class="stringliteral">&#39;minute&#39;</span>    =&gt; $this-&gt;<span class="keyword">get</span>(self::MINUTE_SHORT),
<a name="l00495"></a>00495                      <span class="stringliteral">&#39;second&#39;</span>    =&gt; $this-&gt;<span class="keyword">get</span>(self::SECOND_SHORT),
<a name="l00496"></a>00496                      <span class="stringliteral">&#39;timezone&#39;</span>  =&gt; $this-&gt;<span class="keyword">get</span>(self::TIMEZONE),
<a name="l00497"></a>00497                      <span class="stringliteral">&#39;timestamp&#39;</span> =&gt; $this-&gt;<span class="keyword">get</span>(self::TIMESTAMP),
<a name="l00498"></a>00498                      <span class="stringliteral">&#39;weekday&#39;</span>   =&gt; $this-&gt;<span class="keyword">get</span>(self::WEEKDAY_8601),
<a name="l00499"></a>00499                      <span class="stringliteral">&#39;dayofyear&#39;</span> =&gt; $this-&gt;<span class="keyword">get</span>(self::DAY_OF_YEAR),
<a name="l00500"></a>00500                      <span class="stringliteral">&#39;week&#39;</span>      =&gt; $this-&gt;<span class="keyword">get</span>(self::WEEK),
<a name="l00501"></a>00501                      <span class="stringliteral">&#39;gmtsecs&#39;</span>   =&gt; $this-&gt;<span class="keyword">get</span>(self::TIMEZONE_SECS));
<a name="l00502"></a>00502     }
<a name="l00503"></a>00503 
<a name="l00514"></a><a class="code" href="class_zend___date.html#a7960bc668542f6a812f27703a7c0c675">00514</a>     <span class="keyword">public</span> function <span class="keyword">get</span>($part = null, $locale = null)
<a name="l00515"></a>00515     {
<a name="l00516"></a>00516         <span class="keywordflow">if</span> ($locale === null) {
<a name="l00517"></a>00517             $locale = $this-&gt;<a class="code" href="class_zend___date.html#ad532b661eb33c3e755bd3fa8ff1bd7af">getLocale</a>();
<a name="l00518"></a>00518         }
<a name="l00519"></a>00519 
<a name="l00520"></a>00520         <span class="keywordflow">if</span> (($part !== null) &amp;&amp; (strlen($part) !== 2) &amp;&amp; (<a class="code" href="class_zend___locale.html#a84c0df2fe97b8386edb88024b77c869b">Zend_Locale::isLocale</a>($part, null, <span class="keyword">false</span>))) {
<a name="l00521"></a>00521             $locale = $part;
<a name="l00522"></a>00522             $part = null;
<a name="l00523"></a>00523         }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525         <span class="keywordflow">if</span> ($part === null) {
<a name="l00526"></a>00526             $part = self::TIMESTAMP;
<a name="l00527"></a>00527         }
<a name="l00528"></a>00528 
<a name="l00529"></a>00529         <span class="keywordflow">return</span> $this-&gt;date($this-&gt;_toToken($part, $locale), $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>);
<a name="l00530"></a>00530     }
<a name="l00531"></a>00531 
<a name="l00539"></a>00539     <span class="keyword">private</span> function _toToken($part, $locale) {
<a name="l00540"></a>00540         <span class="comment">// get format tokens</span>
<a name="l00541"></a>00541         $comment = <span class="keyword">false</span>;
<a name="l00542"></a>00542         $format  = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00543"></a>00543         $orig    = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00544"></a>00544         <span class="keywordflow">for</span> ($i = 0; $i &lt; strlen($part); ++$i) {
<a name="l00545"></a>00545             <span class="keywordflow">if</span> ($part[$i] == <span class="stringliteral">&quot;&#39;&quot;</span>) {
<a name="l00546"></a>00546                 $comment = $comment ? <span class="keyword">false</span> : <span class="keyword">true</span>;
<a name="l00547"></a>00547                 <span class="keywordflow">if</span> (isset($part[$i+1]) &amp;&amp; ($part[$i+1] == <span class="stringliteral">&quot;&#39;&quot;</span>)) {
<a name="l00548"></a>00548                     $comment = $comment ? <span class="keyword">false</span> : <span class="keyword">true</span>;
<a name="l00549"></a>00549                     $format .= <span class="stringliteral">&quot;\\&#39;&quot;</span>;
<a name="l00550"></a>00550                     ++$i;
<a name="l00551"></a>00551                 }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553                 $orig = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00554"></a>00554                 <span class="keywordflow">continue</span>;
<a name="l00555"></a>00555             }
<a name="l00556"></a>00556 
<a name="l00557"></a>00557             <span class="keywordflow">if</span> ($comment) {
<a name="l00558"></a>00558                 $format .= <span class="charliteral">&#39;\\&#39;</span> . $part[$i];
<a name="l00559"></a>00559                 $orig = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00560"></a>00560             } <span class="keywordflow">else</span> {
<a name="l00561"></a>00561                 $orig .= $part[$i];
<a name="l00562"></a>00562                 <span class="keywordflow">if</span> (!isset($part[$i+1]) || (isset($orig[0]) &amp;&amp; ($orig[0] != $part[$i+1]))) {
<a name="l00563"></a>00563                     $format .= $this-&gt;_parseIsoToDate($orig, $locale);
<a name="l00564"></a>00564                     $orig  = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00565"></a>00565                 }
<a name="l00566"></a>00566             }
<a name="l00567"></a>00567         }
<a name="l00568"></a>00568 
<a name="l00569"></a>00569         <span class="keywordflow">return</span> $format;
<a name="l00570"></a>00570     }
<a name="l00571"></a>00571 
<a name="l00579"></a>00579     <span class="keyword">private</span> function _parseIsoToDate($token, $locale) {
<a name="l00580"></a>00580         <span class="keywordflow">switch</span>($token) {
<a name="l00581"></a>00581             <span class="keywordflow">case</span> self::DAY :
<a name="l00582"></a>00582                 <span class="keywordflow">return</span> <span class="charliteral">&#39;d&#39;</span>;
<a name="l00583"></a>00583                 <span class="keywordflow">break</span>;
<a name="l00584"></a>00584 
<a name="l00585"></a>00585             <span class="keywordflow">case</span> self::WEEKDAY_SHORT :
<a name="l00586"></a>00586                 $weekday = strtolower($this-&gt;date(<span class="charliteral">&#39;D&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>));
<a name="l00587"></a>00587                 $day     = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;day&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;format&#39;</span>, <span class="stringliteral">&#39;wide&#39;</span>, $weekday));
<a name="l00588"></a>00588                 <span class="keywordflow">return</span> $this-&gt;_toComment(iconv_substr($day, 0, 3, <span class="stringliteral">&#39;UTF-8&#39;</span>));
<a name="l00589"></a>00589                 <span class="keywordflow">break</span>;
<a name="l00590"></a>00590 
<a name="l00591"></a>00591             <span class="keywordflow">case</span> self::DAY_SHORT :
<a name="l00592"></a>00592                 <span class="keywordflow">return</span> <span class="charliteral">&#39;j&#39;</span>;
<a name="l00593"></a>00593                 <span class="keywordflow">break</span>;
<a name="l00594"></a>00594 
<a name="l00595"></a>00595             <span class="keywordflow">case</span> self::WEEKDAY :
<a name="l00596"></a>00596                 $weekday = strtolower($this-&gt;date(<span class="charliteral">&#39;D&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>));
<a name="l00597"></a>00597                 <span class="keywordflow">return</span> $this-&gt;_toComment(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;day&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;format&#39;</span>, <span class="stringliteral">&#39;wide&#39;</span>, $weekday)));
<a name="l00598"></a>00598                 <span class="keywordflow">break</span>;
<a name="l00599"></a>00599 
<a name="l00600"></a>00600             <span class="keywordflow">case</span> self::WEEKDAY_8601 :
<a name="l00601"></a>00601                 <span class="keywordflow">return</span> <span class="charliteral">&#39;N&#39;</span>;
<a name="l00602"></a>00602                 <span class="keywordflow">break</span>;
<a name="l00603"></a>00603 
<a name="l00604"></a>00604             <span class="keywordflow">case</span> <span class="stringliteral">&#39;ee&#39;</span> :
<a name="l00605"></a>00605                 <span class="keywordflow">return</span> $this-&gt;_toComment(str_pad($this-&gt;date(<span class="charliteral">&#39;N&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>), 2, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT));
<a name="l00606"></a>00606                 <span class="keywordflow">break</span>;
<a name="l00607"></a>00607 
<a name="l00608"></a>00608             <span class="keywordflow">case</span> self::DAY_SUFFIX :
<a name="l00609"></a>00609                 <span class="keywordflow">return</span> <span class="charliteral">&#39;S&#39;</span>;
<a name="l00610"></a>00610                 <span class="keywordflow">break</span>;
<a name="l00611"></a>00611 
<a name="l00612"></a>00612             <span class="keywordflow">case</span> self::WEEKDAY_DIGIT :
<a name="l00613"></a>00613                 <span class="keywordflow">return</span> <span class="charliteral">&#39;w&#39;</span>;
<a name="l00614"></a>00614                 <span class="keywordflow">break</span>;
<a name="l00615"></a>00615 
<a name="l00616"></a>00616             <span class="keywordflow">case</span> self::DAY_OF_YEAR :
<a name="l00617"></a>00617                 <span class="keywordflow">return</span> <span class="charliteral">&#39;z&#39;</span>;
<a name="l00618"></a>00618                 <span class="keywordflow">break</span>;
<a name="l00619"></a>00619 
<a name="l00620"></a>00620             <span class="keywordflow">case</span> <span class="stringliteral">&#39;DDD&#39;</span> :
<a name="l00621"></a>00621                 <span class="keywordflow">return</span> $this-&gt;_toComment(str_pad($this-&gt;date(<span class="charliteral">&#39;z&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>), 3, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT));
<a name="l00622"></a>00622                 <span class="keywordflow">break</span>;
<a name="l00623"></a>00623 
<a name="l00624"></a>00624             <span class="keywordflow">case</span> <span class="stringliteral">&#39;DD&#39;</span> :
<a name="l00625"></a>00625                 <span class="keywordflow">return</span> $this-&gt;_toComment(str_pad($this-&gt;date(<span class="charliteral">&#39;z&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>), 2, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT));
<a name="l00626"></a>00626                 <span class="keywordflow">break</span>;
<a name="l00627"></a>00627 
<a name="l00628"></a>00628             <span class="keywordflow">case</span> self::WEEKDAY_NARROW :
<a name="l00629"></a>00629             <span class="keywordflow">case</span> <span class="stringliteral">&#39;EEEEE&#39;</span> :
<a name="l00630"></a>00630                 $weekday = strtolower($this-&gt;date(<span class="charliteral">&#39;D&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>));
<a name="l00631"></a>00631                 $day = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;day&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;format&#39;</span>, <span class="stringliteral">&#39;abbreviated&#39;</span>, $weekday));
<a name="l00632"></a>00632                 <span class="keywordflow">return</span> $this-&gt;_toComment(iconv_substr($day, 0, 1, <span class="stringliteral">&#39;UTF-8&#39;</span>));
<a name="l00633"></a>00633                 <span class="keywordflow">break</span>;
<a name="l00634"></a>00634 
<a name="l00635"></a>00635             <span class="keywordflow">case</span> self::WEEKDAY_NAME :
<a name="l00636"></a>00636                 $weekday = strtolower($this-&gt;date(<span class="charliteral">&#39;D&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>));
<a name="l00637"></a>00637                 <span class="keywordflow">return</span> $this-&gt;_toComment(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;day&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;format&#39;</span>, <span class="stringliteral">&#39;abbreviated&#39;</span>, $weekday)));
<a name="l00638"></a>00638                 <span class="keywordflow">break</span>;
<a name="l00639"></a>00639 
<a name="l00640"></a>00640             <span class="keywordflow">case</span> <span class="charliteral">&#39;w&#39;</span> :
<a name="l00641"></a>00641                 $week = $this-&gt;date(<span class="charliteral">&#39;W&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>);
<a name="l00642"></a>00642                 <span class="keywordflow">return</span> $this-&gt;_toComment(($week[0] == <span class="charliteral">&#39;0&#39;</span>) ? $week[1] : $week);
<a name="l00643"></a>00643                 <span class="keywordflow">break</span>;
<a name="l00644"></a>00644 
<a name="l00645"></a>00645             <span class="keywordflow">case</span> self::WEEK :
<a name="l00646"></a>00646                 <span class="keywordflow">return</span> <span class="charliteral">&#39;W&#39;</span>;
<a name="l00647"></a>00647                 <span class="keywordflow">break</span>;
<a name="l00648"></a>00648 
<a name="l00649"></a>00649             <span class="keywordflow">case</span> self::MONTH_NAME :
<a name="l00650"></a>00650                 $month = $this-&gt;date(<span class="charliteral">&#39;n&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>);
<a name="l00651"></a>00651                 <span class="keywordflow">return</span> $this-&gt;_toComment(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;month&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;format&#39;</span>, <span class="stringliteral">&#39;wide&#39;</span>, $month)));
<a name="l00652"></a>00652                 <span class="keywordflow">break</span>;
<a name="l00653"></a>00653 
<a name="l00654"></a>00654             <span class="keywordflow">case</span> self::MONTH :
<a name="l00655"></a>00655                 <span class="keywordflow">return</span> <span class="charliteral">&#39;m&#39;</span>;
<a name="l00656"></a>00656                 <span class="keywordflow">break</span>;
<a name="l00657"></a>00657 
<a name="l00658"></a>00658             <span class="keywordflow">case</span> self::MONTH_NAME_SHORT :
<a name="l00659"></a>00659                 $month = $this-&gt;date(<span class="charliteral">&#39;n&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>);
<a name="l00660"></a>00660                 <span class="keywordflow">return</span> $this-&gt;_toComment(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;month&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;format&#39;</span>, <span class="stringliteral">&#39;abbreviated&#39;</span>, $month)));
<a name="l00661"></a>00661                 <span class="keywordflow">break</span>;
<a name="l00662"></a>00662 
<a name="l00663"></a>00663             <span class="keywordflow">case</span> self::MONTH_SHORT :
<a name="l00664"></a>00664                 <span class="keywordflow">return</span> <span class="charliteral">&#39;n&#39;</span>;
<a name="l00665"></a>00665                 <span class="keywordflow">break</span>;
<a name="l00666"></a>00666 
<a name="l00667"></a>00667             <span class="keywordflow">case</span> self::MONTH_DAYS :
<a name="l00668"></a>00668                 <span class="keywordflow">return</span> <span class="charliteral">&#39;t&#39;</span>;
<a name="l00669"></a>00669                 <span class="keywordflow">break</span>;
<a name="l00670"></a>00670 
<a name="l00671"></a>00671             <span class="keywordflow">case</span> self::MONTH_NAME_NARROW :
<a name="l00672"></a>00672                 $month = $this-&gt;date(<span class="charliteral">&#39;n&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>);
<a name="l00673"></a>00673                 $mon = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;month&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;format&#39;</span>, <span class="stringliteral">&#39;abbreviated&#39;</span>, $month));
<a name="l00674"></a>00674                 <span class="keywordflow">return</span> $this-&gt;_toComment(iconv_substr($mon, 0, 1, <span class="stringliteral">&#39;UTF-8&#39;</span>));
<a name="l00675"></a>00675                 <span class="keywordflow">break</span>;
<a name="l00676"></a>00676 
<a name="l00677"></a>00677             <span class="keywordflow">case</span> self::LEAPYEAR :
<a name="l00678"></a>00678                 <span class="keywordflow">return</span> <span class="charliteral">&#39;L&#39;</span>;
<a name="l00679"></a>00679                 <span class="keywordflow">break</span>;
<a name="l00680"></a>00680 
<a name="l00681"></a>00681             <span class="keywordflow">case</span> self::YEAR_8601 :
<a name="l00682"></a>00682                 <span class="keywordflow">return</span> <span class="charliteral">&#39;o&#39;</span>;
<a name="l00683"></a>00683                 <span class="keywordflow">break</span>;
<a name="l00684"></a>00684 
<a name="l00685"></a>00685             <span class="keywordflow">case</span> self::YEAR :
<a name="l00686"></a>00686                 <span class="keywordflow">return</span> <span class="charliteral">&#39;Y&#39;</span>;
<a name="l00687"></a>00687                 <span class="keywordflow">break</span>;
<a name="l00688"></a>00688 
<a name="l00689"></a>00689             <span class="keywordflow">case</span> self::YEAR_SHORT :
<a name="l00690"></a>00690                 <span class="keywordflow">return</span> <span class="charliteral">&#39;y&#39;</span>;
<a name="l00691"></a>00691                 <span class="keywordflow">break</span>;
<a name="l00692"></a>00692 
<a name="l00693"></a>00693             <span class="keywordflow">case</span> self::YEAR_SHORT_8601 :
<a name="l00694"></a>00694                 <span class="keywordflow">return</span> $this-&gt;_toComment(substr($this-&gt;date(<span class="charliteral">&#39;o&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>), -2, 2));
<a name="l00695"></a>00695                 <span class="keywordflow">break</span>;
<a name="l00696"></a>00696 
<a name="l00697"></a>00697             <span class="keywordflow">case</span> self::MERIDIEM :
<a name="l00698"></a>00698                 $am = $this-&gt;date(<span class="charliteral">&#39;a&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>);
<a name="l00699"></a>00699                 <span class="keywordflow">if</span> ($am == <span class="stringliteral">&#39;am&#39;</span>) {
<a name="l00700"></a>00700                     <span class="keywordflow">return</span> $this-&gt;_toComment(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;am&#39;</span>));
<a name="l00701"></a>00701                 }
<a name="l00702"></a>00702 
<a name="l00703"></a>00703                 <span class="keywordflow">return</span> $this-&gt;_toComment(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;pm&#39;</span>));
<a name="l00704"></a>00704                 <span class="keywordflow">break</span>;
<a name="l00705"></a>00705 
<a name="l00706"></a>00706             <span class="keywordflow">case</span> self::SWATCH :
<a name="l00707"></a>00707                 <span class="keywordflow">return</span> <span class="charliteral">&#39;B&#39;</span>;
<a name="l00708"></a>00708                 <span class="keywordflow">break</span>;
<a name="l00709"></a>00709 
<a name="l00710"></a>00710             <span class="keywordflow">case</span> self::HOUR_SHORT_AM :
<a name="l00711"></a>00711                 <span class="keywordflow">return</span> <span class="charliteral">&#39;g&#39;</span>;
<a name="l00712"></a>00712                 <span class="keywordflow">break</span>;
<a name="l00713"></a>00713 
<a name="l00714"></a>00714             <span class="keywordflow">case</span> self::HOUR_SHORT :
<a name="l00715"></a>00715                 <span class="keywordflow">return</span> <span class="charliteral">&#39;G&#39;</span>;
<a name="l00716"></a>00716                 <span class="keywordflow">break</span>;
<a name="l00717"></a>00717 
<a name="l00718"></a>00718             <span class="keywordflow">case</span> self::HOUR_AM :
<a name="l00719"></a>00719                 <span class="keywordflow">return</span> <span class="charliteral">&#39;h&#39;</span>;
<a name="l00720"></a>00720                 <span class="keywordflow">break</span>;
<a name="l00721"></a>00721 
<a name="l00722"></a>00722             <span class="keywordflow">case</span> self::HOUR :
<a name="l00723"></a>00723                 <span class="keywordflow">return</span> <span class="charliteral">&#39;H&#39;</span>;
<a name="l00724"></a>00724                 <span class="keywordflow">break</span>;
<a name="l00725"></a>00725 
<a name="l00726"></a>00726             <span class="keywordflow">case</span> self::MINUTE :
<a name="l00727"></a>00727                 <span class="keywordflow">return</span> $this-&gt;_toComment(str_pad($this-&gt;date(<span class="charliteral">&#39;i&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>), 2, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT));
<a name="l00728"></a>00728                 <span class="keywordflow">break</span>;
<a name="l00729"></a>00729 
<a name="l00730"></a>00730             <span class="keywordflow">case</span> self::SECOND :
<a name="l00731"></a>00731                 <span class="keywordflow">return</span> $this-&gt;_toComment(str_pad($this-&gt;date(<span class="charliteral">&#39;s&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>), 2, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT));
<a name="l00732"></a>00732                 <span class="keywordflow">break</span>;
<a name="l00733"></a>00733 
<a name="l00734"></a>00734             <span class="keywordflow">case</span> self::MINUTE_SHORT :
<a name="l00735"></a>00735                 <span class="keywordflow">return</span> <span class="charliteral">&#39;i&#39;</span>;
<a name="l00736"></a>00736                 <span class="keywordflow">break</span>;
<a name="l00737"></a>00737 
<a name="l00738"></a>00738             <span class="keywordflow">case</span> self::SECOND_SHORT :
<a name="l00739"></a>00739                 <span class="keywordflow">return</span> <span class="charliteral">&#39;s&#39;</span>;
<a name="l00740"></a>00740                 <span class="keywordflow">break</span>;
<a name="l00741"></a>00741 
<a name="l00742"></a>00742             <span class="keywordflow">case</span> self::MILLISECOND :
<a name="l00743"></a>00743                 <span class="keywordflow">return</span> $this-&gt;_toComment($this-&gt;_fractional);
<a name="l00744"></a>00744                 <span class="keywordflow">break</span>;
<a name="l00745"></a>00745 
<a name="l00746"></a>00746             <span class="keywordflow">case</span> self::TIMEZONE_NAME :
<a name="l00747"></a>00747             <span class="keywordflow">case</span> <span class="stringliteral">&#39;vvvv&#39;</span> :
<a name="l00748"></a>00748                 <span class="keywordflow">return</span> <span class="charliteral">&#39;e&#39;</span>;
<a name="l00749"></a>00749                 <span class="keywordflow">break</span>;
<a name="l00750"></a>00750 
<a name="l00751"></a>00751             <span class="keywordflow">case</span> self::DAYLIGHT :
<a name="l00752"></a>00752                 <span class="keywordflow">return</span> <span class="charliteral">&#39;I&#39;</span>;
<a name="l00753"></a>00753                 <span class="keywordflow">break</span>;
<a name="l00754"></a>00754 
<a name="l00755"></a>00755             <span class="keywordflow">case</span> self::GMT_DIFF :
<a name="l00756"></a>00756             <span class="keywordflow">case</span> <span class="stringliteral">&#39;ZZ&#39;</span> :
<a name="l00757"></a>00757             <span class="keywordflow">case</span> <span class="stringliteral">&#39;ZZZ&#39;</span> :
<a name="l00758"></a>00758                 <span class="keywordflow">return</span> <span class="charliteral">&#39;O&#39;</span>;
<a name="l00759"></a>00759                 <span class="keywordflow">break</span>;
<a name="l00760"></a>00760 
<a name="l00761"></a>00761             <span class="keywordflow">case</span> self::GMT_DIFF_SEP :
<a name="l00762"></a>00762                 <span class="keywordflow">return</span> <span class="charliteral">&#39;P&#39;</span>;
<a name="l00763"></a>00763                 <span class="keywordflow">break</span>;
<a name="l00764"></a>00764 
<a name="l00765"></a>00765             <span class="keywordflow">case</span> self::TIMEZONE :
<a name="l00766"></a>00766             <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span> :
<a name="l00767"></a>00767             <span class="keywordflow">case</span> <span class="stringliteral">&#39;zz&#39;</span> :
<a name="l00768"></a>00768             <span class="keywordflow">case</span> <span class="stringliteral">&#39;zzz&#39;</span> :
<a name="l00769"></a>00769                 <span class="keywordflow">return</span> <span class="charliteral">&#39;T&#39;</span>;
<a name="l00770"></a>00770                 <span class="keywordflow">break</span>;
<a name="l00771"></a>00771 
<a name="l00772"></a>00772             <span class="keywordflow">case</span> self::TIMEZONE_SECS :
<a name="l00773"></a>00773                 <span class="keywordflow">return</span> <span class="charliteral">&#39;Z&#39;</span>;
<a name="l00774"></a>00774                 <span class="keywordflow">break</span>;
<a name="l00775"></a>00775 
<a name="l00776"></a>00776             <span class="keywordflow">case</span> self::ISO_8601 :
<a name="l00777"></a>00777                 <span class="keywordflow">return</span> <span class="charliteral">&#39;c&#39;</span>;
<a name="l00778"></a>00778                 <span class="keywordflow">break</span>;
<a name="l00779"></a>00779 
<a name="l00780"></a>00780             <span class="keywordflow">case</span> self::RFC_2822 :
<a name="l00781"></a>00781                 <span class="keywordflow">return</span> <span class="charliteral">&#39;r&#39;</span>;
<a name="l00782"></a>00782                 <span class="keywordflow">break</span>;
<a name="l00783"></a>00783 
<a name="l00784"></a>00784             <span class="keywordflow">case</span> self::TIMESTAMP :
<a name="l00785"></a>00785                 <span class="keywordflow">return</span> <span class="charliteral">&#39;U&#39;</span>;
<a name="l00786"></a>00786                 <span class="keywordflow">break</span>;
<a name="l00787"></a>00787 
<a name="l00788"></a>00788             <span class="keywordflow">case</span> self::ERA :
<a name="l00789"></a>00789             <span class="keywordflow">case</span> <span class="stringliteral">&#39;GG&#39;</span> :
<a name="l00790"></a>00790             <span class="keywordflow">case</span> <span class="stringliteral">&#39;GGG&#39;</span> :
<a name="l00791"></a>00791                 $year = $this-&gt;date(<span class="charliteral">&#39;Y&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>);
<a name="l00792"></a>00792                 <span class="keywordflow">if</span> ($year &lt; 0) {
<a name="l00793"></a>00793                     <span class="keywordflow">return</span> $this-&gt;_toComment(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;era&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;Abbr&#39;</span>, <span class="charliteral">&#39;0&#39;</span>)));
<a name="l00794"></a>00794                 }
<a name="l00795"></a>00795 
<a name="l00796"></a>00796                 <span class="keywordflow">return</span> $this-&gt;_toComment(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;era&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;Abbr&#39;</span>, <span class="charliteral">&#39;1&#39;</span>)));
<a name="l00797"></a>00797                 <span class="keywordflow">break</span>;
<a name="l00798"></a>00798 
<a name="l00799"></a>00799             <span class="keywordflow">case</span> self::ERA_NARROW :
<a name="l00800"></a>00800                 $year = $this-&gt;date(<span class="charliteral">&#39;Y&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>);
<a name="l00801"></a>00801                 <span class="keywordflow">if</span> ($year &lt; 0) {
<a name="l00802"></a>00802                     <span class="keywordflow">return</span> $this-&gt;_toComment(iconv_substr(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;era&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;Abbr&#39;</span>, <span class="charliteral">&#39;0&#39;</span>)), 0, 1, <span class="stringliteral">&#39;UTF-8&#39;</span>)) . <span class="charliteral">&#39;.&#39;</span>;
<a name="l00803"></a>00803                 }
<a name="l00804"></a>00804 
<a name="l00805"></a>00805                 <span class="keywordflow">return</span> $this-&gt;_toComment(iconv_substr(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;era&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;Abbr&#39;</span>, <span class="charliteral">&#39;1&#39;</span>)), 0, 1, <span class="stringliteral">&#39;UTF-8&#39;</span>)) . <span class="charliteral">&#39;.&#39;</span>;
<a name="l00806"></a>00806                 <span class="keywordflow">break</span>;
<a name="l00807"></a>00807 
<a name="l00808"></a>00808             <span class="keywordflow">case</span> self::ERA_NAME :
<a name="l00809"></a>00809                 $year = $this-&gt;date(<span class="charliteral">&#39;Y&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>);
<a name="l00810"></a>00810                 <span class="keywordflow">if</span> ($year &lt; 0) {
<a name="l00811"></a>00811                     <span class="keywordflow">return</span> $this-&gt;_toComment(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;era&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;Names&#39;</span>, <span class="charliteral">&#39;0&#39;</span>)));
<a name="l00812"></a>00812                 }
<a name="l00813"></a>00813 
<a name="l00814"></a>00814                 <span class="keywordflow">return</span> $this-&gt;_toComment(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;era&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;Names&#39;</span>, <span class="charliteral">&#39;1&#39;</span>)));
<a name="l00815"></a>00815                 <span class="keywordflow">break</span>;
<a name="l00816"></a>00816 
<a name="l00817"></a>00817             <span class="keywordflow">case</span> self::DATES :
<a name="l00818"></a>00818                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___format.html#aa1d208f5bf369b2103b6a9bfb0d6f2f8">Zend_Locale_Format::getDateFormat</a>($locale), $locale);
<a name="l00819"></a>00819                 <span class="keywordflow">break</span>;
<a name="l00820"></a>00820 
<a name="l00821"></a>00821             <span class="keywordflow">case</span> self::DATE_FULL :
<a name="l00822"></a>00822                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;full&#39;</span>)), $locale);
<a name="l00823"></a>00823                 <span class="keywordflow">break</span>;
<a name="l00824"></a>00824 
<a name="l00825"></a>00825             <span class="keywordflow">case</span> self::DATE_LONG :
<a name="l00826"></a>00826                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;long&#39;</span>)), $locale);
<a name="l00827"></a>00827                 <span class="keywordflow">break</span>;
<a name="l00828"></a>00828 
<a name="l00829"></a>00829             <span class="keywordflow">case</span> self::DATE_MEDIUM :
<a name="l00830"></a>00830                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;medium&#39;</span>)), $locale);
<a name="l00831"></a>00831                 <span class="keywordflow">break</span>;
<a name="l00832"></a>00832 
<a name="l00833"></a>00833             <span class="keywordflow">case</span> self::DATE_SHORT :
<a name="l00834"></a>00834                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;short&#39;</span>)), $locale);
<a name="l00835"></a>00835                 <span class="keywordflow">break</span>;
<a name="l00836"></a>00836 
<a name="l00837"></a>00837             <span class="keywordflow">case</span> self::TIMES :
<a name="l00838"></a>00838                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___format.html#abbb6baa874b851756cdb74dd5d77f434">Zend_Locale_Format::getTimeFormat</a>($locale), $locale);
<a name="l00839"></a>00839                 <span class="keywordflow">break</span>;
<a name="l00840"></a>00840 
<a name="l00841"></a>00841             <span class="keywordflow">case</span> self::TIME_FULL :
<a name="l00842"></a>00842                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;time&#39;</span>, <span class="stringliteral">&#39;full&#39;</span>), $locale);
<a name="l00843"></a>00843                 <span class="keywordflow">break</span>;
<a name="l00844"></a>00844 
<a name="l00845"></a>00845             <span class="keywordflow">case</span> self::TIME_LONG :
<a name="l00846"></a>00846                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;time&#39;</span>, <span class="stringliteral">&#39;long&#39;</span>), $locale);
<a name="l00847"></a>00847                 <span class="keywordflow">break</span>;
<a name="l00848"></a>00848 
<a name="l00849"></a>00849             <span class="keywordflow">case</span> self::TIME_MEDIUM :
<a name="l00850"></a>00850                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;time&#39;</span>, <span class="stringliteral">&#39;medium&#39;</span>), $locale);
<a name="l00851"></a>00851                 <span class="keywordflow">break</span>;
<a name="l00852"></a>00852 
<a name="l00853"></a>00853             <span class="keywordflow">case</span> self::TIME_SHORT :
<a name="l00854"></a>00854                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;time&#39;</span>, <span class="stringliteral">&#39;short&#39;</span>), $locale);
<a name="l00855"></a>00855                 <span class="keywordflow">break</span>;
<a name="l00856"></a>00856 
<a name="l00857"></a>00857             <span class="keywordflow">case</span> self::DATETIME :
<a name="l00858"></a>00858                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___format.html#a045ac529e7dccc94d79bb261b57ff140">Zend_Locale_Format::getDateTimeFormat</a>($locale), $locale);
<a name="l00859"></a>00859                 <span class="keywordflow">break</span>;
<a name="l00860"></a>00860 
<a name="l00861"></a>00861             <span class="keywordflow">case</span> self::DATETIME_FULL :
<a name="l00862"></a>00862                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;full&#39;</span>)), $locale);
<a name="l00863"></a>00863                 <span class="keywordflow">break</span>;
<a name="l00864"></a>00864 
<a name="l00865"></a>00865             <span class="keywordflow">case</span> self::DATETIME_LONG :
<a name="l00866"></a>00866                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;long&#39;</span>)), $locale);
<a name="l00867"></a>00867                 <span class="keywordflow">break</span>;
<a name="l00868"></a>00868 
<a name="l00869"></a>00869             <span class="keywordflow">case</span> self::DATETIME_MEDIUM :
<a name="l00870"></a>00870                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;medium&#39;</span>)), $locale);
<a name="l00871"></a>00871                 <span class="keywordflow">break</span>;
<a name="l00872"></a>00872 
<a name="l00873"></a>00873             <span class="keywordflow">case</span> self::DATETIME_SHORT :
<a name="l00874"></a>00874                 <span class="keywordflow">return</span> $this-&gt;_toToken(<a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;short&#39;</span>)), $locale);
<a name="l00875"></a>00875                 <span class="keywordflow">break</span>;
<a name="l00876"></a>00876 
<a name="l00877"></a>00877             <span class="keywordflow">case</span> self::ATOM :
<a name="l00878"></a>00878                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;Y\-m\-d\TH\:i\:sP&#39;</span>;
<a name="l00879"></a>00879                 <span class="keywordflow">break</span>;
<a name="l00880"></a>00880 
<a name="l00881"></a>00881             <span class="keywordflow">case</span> self::COOKIE :
<a name="l00882"></a>00882                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;l\, d\-M\-y H\:i\:s e&#39;</span>;
<a name="l00883"></a>00883                 <span class="keywordflow">break</span>;
<a name="l00884"></a>00884 
<a name="l00885"></a>00885             <span class="keywordflow">case</span> self::RFC_822 :
<a name="l00886"></a>00886                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;D\, d M y H\:i\:s O&#39;</span>;
<a name="l00887"></a>00887                 <span class="keywordflow">break</span>;
<a name="l00888"></a>00888 
<a name="l00889"></a>00889             <span class="keywordflow">case</span> self::RFC_850 :
<a name="l00890"></a>00890                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;l\, d\-M\-y H\:i\:s e&#39;</span>;
<a name="l00891"></a>00891                 <span class="keywordflow">break</span>;
<a name="l00892"></a>00892 
<a name="l00893"></a>00893             <span class="keywordflow">case</span> self::RFC_1036 :
<a name="l00894"></a>00894                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;D\, d M y H\:i\:s O&#39;</span>;
<a name="l00895"></a>00895                 <span class="keywordflow">break</span>;
<a name="l00896"></a>00896 
<a name="l00897"></a>00897             <span class="keywordflow">case</span> self::RFC_1123 :
<a name="l00898"></a>00898                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;D\, d M Y H\:i\:s O&#39;</span>;
<a name="l00899"></a>00899                 <span class="keywordflow">break</span>;
<a name="l00900"></a>00900 
<a name="l00901"></a>00901             <span class="keywordflow">case</span> self::RFC_3339 :
<a name="l00902"></a>00902                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;Y\-m\-d\TH\:i\:sP&#39;</span>;
<a name="l00903"></a>00903                 <span class="keywordflow">break</span>;
<a name="l00904"></a>00904 
<a name="l00905"></a>00905             <span class="keywordflow">case</span> self::RSS :
<a name="l00906"></a>00906                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;D\, d M Y H\:i\:s O&#39;</span>;
<a name="l00907"></a>00907                 <span class="keywordflow">break</span>;
<a name="l00908"></a>00908 
<a name="l00909"></a>00909             <span class="keywordflow">case</span> self::W3C :
<a name="l00910"></a>00910                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;Y\-m\-d\TH\:i\:sP&#39;</span>;
<a name="l00911"></a>00911                 <span class="keywordflow">break</span>;
<a name="l00912"></a>00912         }
<a name="l00913"></a>00913 
<a name="l00914"></a>00914         <span class="keywordflow">if</span> ($token == <span class="stringliteral">&#39;&#39;</span>) {
<a name="l00915"></a>00915             <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;
<a name="l00916"></a>00916         }
<a name="l00917"></a>00917 
<a name="l00918"></a>00918         <span class="keywordflow">switch</span> ($token[0]) {
<a name="l00919"></a>00919             <span class="keywordflow">case</span> <span class="charliteral">&#39;y&#39;</span> :
<a name="l00920"></a>00920                 <span class="keywordflow">if</span> ((strlen($token) == 4) &amp;&amp; (abs($this-&gt;getUnixTimestamp()) &lt;= 0x7FFFFFFF)) {
<a name="l00921"></a>00921                     <span class="keywordflow">return</span> <span class="charliteral">&#39;Y&#39;</span>;
<a name="l00922"></a>00922                 }
<a name="l00923"></a>00923 
<a name="l00924"></a>00924                 $length = iconv_strlen($token, <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l00925"></a>00925                 <span class="keywordflow">return</span> $this-&gt;_toComment(str_pad($this-&gt;date(<span class="charliteral">&#39;Y&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>), $length, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT));
<a name="l00926"></a>00926                 <span class="keywordflow">break</span>;
<a name="l00927"></a>00927 
<a name="l00928"></a>00928             <span class="keywordflow">case</span> <span class="charliteral">&#39;Y&#39;</span> :
<a name="l00929"></a>00929                 <span class="keywordflow">if</span> ((strlen($token) == 4) &amp;&amp; (abs($this-&gt;getUnixTimestamp()) &lt;= 0x7FFFFFFF)) {
<a name="l00930"></a>00930                     <span class="keywordflow">return</span> <span class="charliteral">&#39;o&#39;</span>;
<a name="l00931"></a>00931                 }
<a name="l00932"></a>00932 
<a name="l00933"></a>00933                 $length = iconv_strlen($token, <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l00934"></a>00934                 <span class="keywordflow">return</span> $this-&gt;_toComment(str_pad($this-&gt;date(<span class="charliteral">&#39;o&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>), $length, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT));
<a name="l00935"></a>00935                 <span class="keywordflow">break</span>;
<a name="l00936"></a>00936 
<a name="l00937"></a>00937             <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span> :
<a name="l00938"></a>00938                 $length  = iconv_strlen($token, <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l00939"></a>00939                 $result  = $this-&gt;_fractional;
<a name="l00940"></a>00940                 $result += $this-&gt;date(<span class="charliteral">&#39;s&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>) * 1000;
<a name="l00941"></a>00941                 $result += $this-&gt;date(<span class="charliteral">&#39;i&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>) * 60000;
<a name="l00942"></a>00942                 $result += $this-&gt;date(<span class="charliteral">&#39;H&#39;</span>, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>) * 3600000;
<a name="l00943"></a>00943 
<a name="l00944"></a>00944                 <span class="keywordflow">return</span> $this-&gt;_toComment(str_pad($result, $length, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT));
<a name="l00945"></a>00945                 <span class="keywordflow">break</span>;
<a name="l00946"></a>00946         }
<a name="l00947"></a>00947 
<a name="l00948"></a>00948         <span class="keywordflow">return</span> $this-&gt;_toComment($token);
<a name="l00949"></a>00949     }
<a name="l00950"></a>00950 
<a name="l00957"></a>00957     <span class="keyword">private</span> function _toComment($token)
<a name="l00958"></a>00958     {
<a name="l00959"></a>00959         $token = str_split($token);
<a name="l00960"></a>00960         $result = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00961"></a>00961         <span class="keywordflow">foreach</span> ($token as $tok) {
<a name="l00962"></a>00962             $result .= <span class="charliteral">&#39;\\&#39;</span> . $tok;
<a name="l00963"></a>00963         }
<a name="l00964"></a>00964 
<a name="l00965"></a>00965         <span class="keywordflow">return</span> $result;
<a name="l00966"></a>00966     }
<a name="l00967"></a>00967 
<a name="l00976"></a>00976     <span class="keyword">private</span> function _getDigitFromName($name)
<a name="l00977"></a>00977     {
<a name="l00978"></a>00978         <span class="keywordflow">switch</span>($name) {
<a name="l00979"></a>00979             <span class="keywordflow">case</span> <span class="stringliteral">&quot;Jan&quot;</span>:
<a name="l00980"></a>00980                 <span class="keywordflow">return</span> 1;
<a name="l00981"></a>00981 
<a name="l00982"></a>00982             <span class="keywordflow">case</span> <span class="stringliteral">&quot;Feb&quot;</span>:
<a name="l00983"></a>00983                 <span class="keywordflow">return</span> 2;
<a name="l00984"></a>00984 
<a name="l00985"></a>00985             <span class="keywordflow">case</span> <span class="stringliteral">&quot;Mar&quot;</span>:
<a name="l00986"></a>00986                 <span class="keywordflow">return</span> 3;
<a name="l00987"></a>00987 
<a name="l00988"></a>00988             <span class="keywordflow">case</span> <span class="stringliteral">&quot;Apr&quot;</span>:
<a name="l00989"></a>00989                 <span class="keywordflow">return</span> 4;
<a name="l00990"></a>00990 
<a name="l00991"></a>00991             <span class="keywordflow">case</span> <span class="stringliteral">&quot;May&quot;</span>:
<a name="l00992"></a>00992                 <span class="keywordflow">return</span> 5;
<a name="l00993"></a>00993 
<a name="l00994"></a>00994             <span class="keywordflow">case</span> <span class="stringliteral">&quot;Jun&quot;</span>:
<a name="l00995"></a>00995                 <span class="keywordflow">return</span> 6;
<a name="l00996"></a>00996 
<a name="l00997"></a>00997             <span class="keywordflow">case</span> <span class="stringliteral">&quot;Jul&quot;</span>:
<a name="l00998"></a>00998                 <span class="keywordflow">return</span> 7;
<a name="l00999"></a>00999 
<a name="l01000"></a>01000             <span class="keywordflow">case</span> <span class="stringliteral">&quot;Aug&quot;</span>:
<a name="l01001"></a>01001                 <span class="keywordflow">return</span> 8;
<a name="l01002"></a>01002 
<a name="l01003"></a>01003             <span class="keywordflow">case</span> <span class="stringliteral">&quot;Sep&quot;</span>:
<a name="l01004"></a>01004                 <span class="keywordflow">return</span> 9;
<a name="l01005"></a>01005 
<a name="l01006"></a>01006             <span class="keywordflow">case</span> <span class="stringliteral">&quot;Oct&quot;</span>:
<a name="l01007"></a>01007                 <span class="keywordflow">return</span> 10;
<a name="l01008"></a>01008 
<a name="l01009"></a>01009             <span class="keywordflow">case</span> <span class="stringliteral">&quot;Nov&quot;</span>:
<a name="l01010"></a>01010                 <span class="keywordflow">return</span> 11;
<a name="l01011"></a>01011 
<a name="l01012"></a>01012             <span class="keywordflow">case</span> <span class="stringliteral">&quot;Dec&quot;</span>:
<a name="l01013"></a>01013                 <span class="keywordflow">return</span> 12;
<a name="l01014"></a>01014 
<a name="l01015"></a>01015             <span class="keywordflow">default</span>:
<a name="l01016"></a>01016                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01017"></a>01017                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;Month ($name) is not a known month&#39;</span>);
<a name="l01018"></a>01018         }
<a name="l01019"></a>01019     }
<a name="l01020"></a>01020 
<a name="l01028"></a><a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">01028</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">getFullYear</a>($value)
<a name="l01029"></a>01029     {
<a name="l01030"></a>01030         <span class="keywordflow">if</span> ($value &gt;= 0) {
<a name="l01031"></a>01031             <span class="keywordflow">if</span> ($value &lt; 70) {
<a name="l01032"></a>01032                 $value += 2000;
<a name="l01033"></a>01033             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($value &lt; 100) {
<a name="l01034"></a>01034                 $value += 1900;
<a name="l01035"></a>01035             }
<a name="l01036"></a>01036         }
<a name="l01037"></a>01037         <span class="keywordflow">return</span> $value;
<a name="l01038"></a>01038     }
<a name="l01039"></a>01039 
<a name="l01052"></a><a class="code" href="class_zend___date.html#ad57e81136fb42cc6b466ea34823800a3">01052</a>     <span class="keyword">public</span> function <span class="keyword">set</span>($date, $part = null, $locale = null)
<a name="l01053"></a>01053     {
<a name="l01054"></a>01054         $zone = $this-&gt;<a class="code" href="class_zend___date.html#a5cb98c662de5afaf2220d54335f9c8b7">getTimezoneFromString</a>($date);
<a name="l01055"></a>01055         $this-&gt;setTimezone($zone);
<a name="l01056"></a>01056 
<a name="l01057"></a>01057         $result = $this-&gt;_calculate(<span class="stringliteral">&#39;set&#39;</span>, $date, $part, $locale);
<a name="l01058"></a>01058         <span class="keywordflow">return</span> $result;
<a name="l01059"></a>01059     }
<a name="l01060"></a>01060 
<a name="l01076"></a><a class="code" href="class_zend___date.html#ace913ddc75571d75850d9fd8488ea5e2">01076</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ace913ddc75571d75850d9fd8488ea5e2">add</a>($date, $part = null, $locale = null)
<a name="l01077"></a>01077     {
<a name="l01078"></a>01078         $this-&gt;_calculate(<span class="stringliteral">&#39;add&#39;</span>, $date, $part, $locale);
<a name="l01079"></a>01079         $result = $this-&gt;<span class="keyword">get</span>($part, $locale);
<a name="l01080"></a>01080 
<a name="l01081"></a>01081         <span class="keywordflow">return</span> $result;
<a name="l01082"></a>01082     }
<a name="l01083"></a>01083 
<a name="l01097"></a><a class="code" href="class_zend___date.html#adde4d144b0986a76610eb1309fdf4a0b">01097</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#adde4d144b0986a76610eb1309fdf4a0b">sub</a>($date, $part = null, $locale = null)
<a name="l01098"></a>01098     {
<a name="l01099"></a>01099         $this-&gt;_calculate(<span class="stringliteral">&#39;sub&#39;</span>, $date, $part, $locale);
<a name="l01100"></a>01100         $result = $this-&gt;<span class="keyword">get</span>($part, $locale);
<a name="l01101"></a>01101 
<a name="l01102"></a>01102         <span class="keywordflow">return</span> $result;
<a name="l01103"></a>01103     }
<a name="l01104"></a>01104 
<a name="l01115"></a><a class="code" href="class_zend___date.html#a97230b8cbf1567db4c67aa499fa23f3f">01115</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a97230b8cbf1567db4c67aa499fa23f3f">compare</a>($date, $part = null, $locale = null)
<a name="l01116"></a>01116     {
<a name="l01117"></a>01117         $compare = $this-&gt;_calculate(<span class="stringliteral">&#39;cmp&#39;</span>, $date, $part, $locale);
<a name="l01118"></a>01118 
<a name="l01119"></a>01119         <span class="keywordflow">if</span> ($compare &gt; 0) {
<a name="l01120"></a>01120             <span class="keywordflow">return</span> 1;
<a name="l01121"></a>01121         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($compare &lt; 0) {
<a name="l01122"></a>01122             <span class="keywordflow">return</span> -1;
<a name="l01123"></a>01123         }
<a name="l01124"></a>01124         <span class="keywordflow">return</span> 0;
<a name="l01125"></a>01125     }
<a name="l01126"></a>01126 
<a name="l01141"></a><a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">01141</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>($part, $locale = null)
<a name="l01142"></a>01142     {
<a name="l01143"></a>01143         $clone = clone $this;           <span class="comment">// copy all instance variables</span>
<a name="l01144"></a>01144         $clone-&gt;setUnixTimestamp(0);    <span class="comment">// except the timestamp</span>
<a name="l01145"></a>01145         <span class="keywordflow">if</span> ($locale != null) {
<a name="l01146"></a>01146             $clone-&gt;setLocale($locale); <span class="comment">// set an other locale if selected</span>
<a name="l01147"></a>01147         }
<a name="l01148"></a>01148         $clone-&gt;set($this, $part);
<a name="l01149"></a>01149         <span class="keywordflow">return</span> $clone;
<a name="l01150"></a>01150     }
<a name="l01151"></a>01151 
<a name="l01158"></a><a class="code" href="class_zend___date.html#a5cb98c662de5afaf2220d54335f9c8b7">01158</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a5cb98c662de5afaf2220d54335f9c8b7">getTimezoneFromString</a>($zone)
<a name="l01159"></a>01159     {
<a name="l01160"></a>01160         <span class="keywordflow">if</span> (is_array($zone)) {
<a name="l01161"></a>01161             <span class="keywordflow">return</span> $this-&gt;getTimezone();
<a name="l01162"></a>01162         }
<a name="l01163"></a>01163 
<a name="l01164"></a>01164         <span class="keywordflow">if</span> ($zone instanceof Zend_Date) {
<a name="l01165"></a>01165             <span class="keywordflow">return</span> $zone-&gt;getTimezone();
<a name="l01166"></a>01166         }
<a name="l01167"></a>01167 
<a name="l01168"></a>01168         $match = array();
<a name="l01169"></a>01169         preg_match(<span class="stringliteral">&#39;/\dZ$/&#39;</span>, $zone, $match);
<a name="l01170"></a>01170         <span class="keywordflow">if</span> (!empty($match)) {
<a name="l01171"></a>01171             <span class="keywordflow">return</span> <span class="stringliteral">&quot;Etc/UTC&quot;</span>;
<a name="l01172"></a>01172         }
<a name="l01173"></a>01173 
<a name="l01174"></a>01174         preg_match(<span class="stringliteral">&#39;/([+-]\d{2}):{0,1}\d{2}/&#39;</span>, $zone, $match);
<a name="l01175"></a>01175         <span class="keywordflow">if</span> (!empty($match) and ($match[count($match) - 1] &lt;= 12) and ($match[count($match) - 1] &gt;= -12)) {
<a name="l01176"></a>01176             $zone = <span class="stringliteral">&quot;Etc/GMT&quot;</span>;
<a name="l01177"></a>01177             $zone .= ($match[count($match) - 1] &lt; 0) ? <span class="stringliteral">&quot;+&quot;</span> : <span class="stringliteral">&quot;-&quot;</span>;
<a name="l01178"></a>01178             $zone .= (int) abs($match[count($match) - 1]);
<a name="l01179"></a>01179             <span class="keywordflow">return</span> $zone;
<a name="l01180"></a>01180         }
<a name="l01181"></a>01181 
<a name="l01182"></a>01182         preg_match(<span class="stringliteral">&#39;/([[:alpha:]\/]{3,30})(?!.*([[:alpha:]\/]{3,30}))/&#39;</span>, $zone, $match);
<a name="l01183"></a>01183         <span class="keywordflow">try</span> {
<a name="l01184"></a>01184             <span class="keywordflow">if</span> (!empty($match) and (!is_int($match[count($match) - 1]))) {
<a name="l01185"></a>01185                 $oldzone = $this-&gt;getTimezone();
<a name="l01186"></a>01186                 $this-&gt;setTimezone($match[count($match) - 1]);
<a name="l01187"></a>01187                 $result = $this-&gt;getTimezone();
<a name="l01188"></a>01188                 $this-&gt;setTimezone($oldzone);
<a name="l01189"></a>01189                 <span class="keywordflow">if</span> ($result !== $oldzone) {
<a name="l01190"></a>01190                     <span class="keywordflow">return</span> $match[count($match) - 1];
<a name="l01191"></a>01191                 }
<a name="l01192"></a>01192             }
<a name="l01193"></a>01193         } <span class="keywordflow">catch</span> (Exception $e) {
<a name="l01194"></a>01194             <span class="comment">// fall through</span>
<a name="l01195"></a>01195         }
<a name="l01196"></a>01196 
<a name="l01197"></a>01197         <span class="keywordflow">return</span> $this-&gt;getTimezone();
<a name="l01198"></a>01198     }
<a name="l01199"></a>01199 
<a name="l01209"></a>01209     <span class="keyword">private</span> function _assign($calc, $date, $comp = 0, $dst = <span class="keyword">false</span>)
<a name="l01210"></a>01210     {
<a name="l01211"></a>01211         <span class="keywordflow">switch</span> ($calc) {
<a name="l01212"></a>01212             <span class="keywordflow">case</span> <span class="stringliteral">&#39;set&#39;</span> :
<a name="l01213"></a>01213                 <span class="keywordflow">if</span> (!empty($comp)) {
<a name="l01214"></a>01214                     $this-&gt;setUnixTimestamp(call_user_func(Zend_Locale_Math::$sub, $this-&gt;getUnixTimestamp(), $comp));
<a name="l01215"></a>01215                 }
<a name="l01216"></a>01216                 $this-&gt;setUnixTimestamp(call_user_func(Zend_Locale_Math::$add, $this-&gt;getUnixTimestamp(), $date));
<a name="l01217"></a>01217                 $value = $this-&gt;getUnixTimestamp();
<a name="l01218"></a>01218                 <span class="keywordflow">break</span>;
<a name="l01219"></a>01219             <span class="keywordflow">case</span> <span class="stringliteral">&#39;add&#39;</span> :
<a name="l01220"></a>01220                 $this-&gt;setUnixTimestamp(call_user_func(Zend_Locale_Math::$add, $this-&gt;getUnixTimestamp(), $date));
<a name="l01221"></a>01221                 $value = $this-&gt;getUnixTimestamp();
<a name="l01222"></a>01222                 <span class="keywordflow">break</span>;
<a name="l01223"></a>01223             <span class="keywordflow">case</span> <span class="stringliteral">&#39;sub&#39;</span> :
<a name="l01224"></a>01224                 $this-&gt;setUnixTimestamp(call_user_func(Zend_Locale_Math::$sub, $this-&gt;getUnixTimestamp(), $date));
<a name="l01225"></a>01225                 $value = $this-&gt;getUnixTimestamp();
<a name="l01226"></a>01226                 <span class="keywordflow">break</span>;
<a name="l01227"></a>01227             <span class="keywordflow">default</span> :
<a name="l01228"></a>01228                 <span class="comment">// cmp - compare</span>
<a name="l01229"></a>01229                 <span class="keywordflow">return</span> call_user_func(Zend_Locale_Math::$comp, $comp, $date);
<a name="l01230"></a>01230                 <span class="keywordflow">break</span>;
<a name="l01231"></a>01231         }
<a name="l01232"></a>01232 
<a name="l01233"></a>01233         <span class="comment">// dst-correction if &#39;fix_dst&#39; = true and dst !== false but only for non UTC and non GMT</span>
<a name="l01234"></a>01234         <span class="keywordflow">if</span> ((self::$_options[<span class="stringliteral">&#39;fix_dst&#39;</span>] === <span class="keyword">true</span>) and ($dst !== <span class="keyword">false</span>) and ($this-&gt;_dst === <span class="keyword">true</span>)) {
<a name="l01235"></a>01235             $hour = $this-&gt;<span class="keyword">get</span>(self::HOUR);
<a name="l01236"></a>01236             <span class="keywordflow">if</span> ($hour != $dst) {
<a name="l01237"></a>01237                 <span class="keywordflow">if</span> (($dst == ($hour + 1)) or ($dst == ($hour - 23))) {
<a name="l01238"></a>01238                     $value += 3600;
<a name="l01239"></a>01239                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (($dst == ($hour - 1)) or ($dst == ($hour + 23))) {
<a name="l01240"></a>01240                     $value -= 3600;
<a name="l01241"></a>01241                 }
<a name="l01242"></a>01242                 $this-&gt;setUnixTimestamp($value);
<a name="l01243"></a>01243             }
<a name="l01244"></a>01244         }
<a name="l01245"></a>01245         <span class="keywordflow">return</span> $this-&gt;getUnixTimestamp();
<a name="l01246"></a>01246     }
<a name="l01247"></a>01247 
<a name="l01248"></a>01248 
<a name="l01259"></a>01259     <span class="keyword">private</span> function _calculate($calc, $date, $part, $locale)
<a name="l01260"></a>01260     {
<a name="l01261"></a>01261         <span class="keywordflow">if</span> ($date === null) {
<a name="l01262"></a>01262             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01263"></a>01263             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;parameter $date must be set, null is not allowed&#39;</span>);
<a name="l01264"></a>01264         }
<a name="l01265"></a>01265 
<a name="l01266"></a>01266         <span class="keywordflow">if</span> (($part !== null) &amp;&amp; (strlen($part) !== 2) &amp;&amp; (<a class="code" href="class_zend___locale.html#a84c0df2fe97b8386edb88024b77c869b">Zend_Locale::isLocale</a>($part, null, <span class="keyword">false</span>))) {
<a name="l01267"></a>01267             $locale = $part;
<a name="l01268"></a>01268             $part   = null;
<a name="l01269"></a>01269         }
<a name="l01270"></a>01270 
<a name="l01271"></a>01271         <span class="keywordflow">if</span> ($locale === null) {
<a name="l01272"></a>01272             $locale = $this-&gt;<a class="code" href="class_zend___date.html#ad532b661eb33c3e755bd3fa8ff1bd7af">getLocale</a>();
<a name="l01273"></a>01273         }
<a name="l01274"></a>01274 
<a name="l01275"></a>01275         $locale = (string) $locale;
<a name="l01276"></a>01276 
<a name="l01277"></a>01277         <span class="comment">// Create date parts</span>
<a name="l01278"></a>01278         $year   = $this-&gt;<span class="keyword">get</span>(self::YEAR);
<a name="l01279"></a>01279         $month  = $this-&gt;<span class="keyword">get</span>(self::MONTH_SHORT);
<a name="l01280"></a>01280         $day    = $this-&gt;<span class="keyword">get</span>(self::DAY_SHORT);
<a name="l01281"></a>01281         $hour   = $this-&gt;<span class="keyword">get</span>(self::HOUR_SHORT);
<a name="l01282"></a>01282         $minute = $this-&gt;<span class="keyword">get</span>(self::MINUTE_SHORT);
<a name="l01283"></a>01283         $second = $this-&gt;<span class="keyword">get</span>(self::SECOND_SHORT);
<a name="l01284"></a>01284         <span class="comment">// If object extract value</span>
<a name="l01285"></a>01285         <span class="keywordflow">if</span> ($date instanceof Zend_Date) {
<a name="l01286"></a>01286             $date = $date-&gt;get($part, $locale);
<a name="l01287"></a>01287         }
<a name="l01288"></a>01288 
<a name="l01289"></a>01289         <span class="keywordflow">if</span> (is_array($date) === <span class="keyword">true</span>) {
<a name="l01290"></a>01290             <span class="keywordflow">if</span> (empty($part) === <span class="keyword">false</span>) {
<a name="l01291"></a>01291                 <span class="keywordflow">switch</span>($part) {
<a name="l01292"></a>01292                     <span class="comment">// Fall through</span>
<a name="l01293"></a>01293                     <span class="keywordflow">case</span> self::DAY:
<a name="l01294"></a>01294                     <span class="keywordflow">case</span> self::DAY_SHORT:
<a name="l01295"></a>01295                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;day&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01296"></a>01296                             $date = $date[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l01297"></a>01297                         }
<a name="l01298"></a>01298                         <span class="keywordflow">break</span>;
<a name="l01299"></a>01299                     <span class="comment">// Fall through</span>
<a name="l01300"></a>01300                     <span class="keywordflow">case</span> self::WEEKDAY_SHORT:
<a name="l01301"></a>01301                     <span class="keywordflow">case</span> self::WEEKDAY:
<a name="l01302"></a>01302                     <span class="keywordflow">case</span> self::WEEKDAY_8601:
<a name="l01303"></a>01303                     <span class="keywordflow">case</span> self::WEEKDAY_DIGIT:
<a name="l01304"></a>01304                     <span class="keywordflow">case</span> self::WEEKDAY_NARROW:
<a name="l01305"></a>01305                     <span class="keywordflow">case</span> self::WEEKDAY_NAME:
<a name="l01306"></a>01306                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;weekday&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01307"></a>01307                             $date = $date[<span class="stringliteral">&#39;weekday&#39;</span>];
<a name="l01308"></a>01308                             $part = self::WEEKDAY_DIGIT;
<a name="l01309"></a>01309                         }
<a name="l01310"></a>01310                         <span class="keywordflow">break</span>;
<a name="l01311"></a>01311                     <span class="keywordflow">case</span> self::DAY_OF_YEAR:
<a name="l01312"></a>01312                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;day_of_year&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01313"></a>01313                             $date = $date[<span class="stringliteral">&#39;day_of_year&#39;</span>];
<a name="l01314"></a>01314                         }
<a name="l01315"></a>01315                         <span class="keywordflow">break</span>;
<a name="l01316"></a>01316                     <span class="comment">// Fall through</span>
<a name="l01317"></a>01317                     <span class="keywordflow">case</span> self::MONTH:
<a name="l01318"></a>01318                     <span class="keywordflow">case</span> self::MONTH_SHORT:
<a name="l01319"></a>01319                     <span class="keywordflow">case</span> self::MONTH_NAME:
<a name="l01320"></a>01320                     <span class="keywordflow">case</span> self::MONTH_NAME_SHORT:
<a name="l01321"></a>01321                     <span class="keywordflow">case</span> self::MONTH_NAME_NARROW:
<a name="l01322"></a>01322                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;month&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01323"></a>01323                             $date = $date[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l01324"></a>01324                         }
<a name="l01325"></a>01325                         <span class="keywordflow">break</span>;
<a name="l01326"></a>01326                     <span class="comment">// Fall through</span>
<a name="l01327"></a>01327                     <span class="keywordflow">case</span> self::YEAR:
<a name="l01328"></a>01328                     <span class="keywordflow">case</span> self::YEAR_SHORT:
<a name="l01329"></a>01329                     <span class="keywordflow">case</span> self::YEAR_8601:
<a name="l01330"></a>01330                     <span class="keywordflow">case</span> self::YEAR_SHORT_8601:
<a name="l01331"></a>01331                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;year&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01332"></a>01332                             $date = $date[<span class="stringliteral">&#39;year&#39;</span>];
<a name="l01333"></a>01333                         }
<a name="l01334"></a>01334                         <span class="keywordflow">break</span>;
<a name="l01335"></a>01335                     <span class="comment">// Fall through</span>
<a name="l01336"></a>01336                     <span class="keywordflow">case</span> self::HOUR:
<a name="l01337"></a>01337                     <span class="keywordflow">case</span> self::HOUR_AM:
<a name="l01338"></a>01338                     <span class="keywordflow">case</span> self::HOUR_SHORT:
<a name="l01339"></a>01339                     <span class="keywordflow">case</span> self::HOUR_SHORT_AM:
<a name="l01340"></a>01340                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;hour&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01341"></a>01341                             $date = $date[<span class="stringliteral">&#39;hour&#39;</span>];
<a name="l01342"></a>01342                         }
<a name="l01343"></a>01343                         <span class="keywordflow">break</span>;
<a name="l01344"></a>01344                     <span class="comment">// Fall through</span>
<a name="l01345"></a>01345                     <span class="keywordflow">case</span> self::MINUTE:
<a name="l01346"></a>01346                     <span class="keywordflow">case</span> self::MINUTE_SHORT:
<a name="l01347"></a>01347                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;minute&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01348"></a>01348                             $date = $date[<span class="stringliteral">&#39;minute&#39;</span>];
<a name="l01349"></a>01349                         }
<a name="l01350"></a>01350                         <span class="keywordflow">break</span>;
<a name="l01351"></a>01351                     <span class="comment">// Fall through</span>
<a name="l01352"></a>01352                     <span class="keywordflow">case</span> self::SECOND:
<a name="l01353"></a>01353                     <span class="keywordflow">case</span> self::SECOND_SHORT:
<a name="l01354"></a>01354                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;second&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01355"></a>01355                             $date = $date[<span class="stringliteral">&#39;second&#39;</span>];
<a name="l01356"></a>01356                         }
<a name="l01357"></a>01357                         <span class="keywordflow">break</span>;
<a name="l01358"></a>01358                     <span class="comment">// Fall through</span>
<a name="l01359"></a>01359                     <span class="keywordflow">case</span> self::TIMEZONE:
<a name="l01360"></a>01360                     <span class="keywordflow">case</span> self::TIMEZONE_NAME:
<a name="l01361"></a>01361                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;timezone&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01362"></a>01362                             $date = $date[<span class="stringliteral">&#39;timezone&#39;</span>];
<a name="l01363"></a>01363                         }
<a name="l01364"></a>01364                         <span class="keywordflow">break</span>;
<a name="l01365"></a>01365                     <span class="keywordflow">case</span> self::TIMESTAMP:
<a name="l01366"></a>01366                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;timestamp&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01367"></a>01367                             $date = $date[<span class="stringliteral">&#39;timestamp&#39;</span>];
<a name="l01368"></a>01368                         }
<a name="l01369"></a>01369                         <span class="keywordflow">break</span>;
<a name="l01370"></a>01370                     <span class="keywordflow">case</span> self::WEEK:
<a name="l01371"></a>01371                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;week&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01372"></a>01372                             $date = $date[<span class="stringliteral">&#39;week&#39;</span>];
<a name="l01373"></a>01373                         }
<a name="l01374"></a>01374                         <span class="keywordflow">break</span>;
<a name="l01375"></a>01375                     <span class="keywordflow">case</span> self::TIMEZONE_SECS:
<a name="l01376"></a>01376                         <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;gmtsecs&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01377"></a>01377                             $date = $date[<span class="stringliteral">&#39;gmtsecs&#39;</span>];
<a name="l01378"></a>01378                         }
<a name="l01379"></a>01379                         <span class="keywordflow">break</span>;
<a name="l01380"></a>01380                     <span class="keywordflow">default</span>:
<a name="l01381"></a>01381                         require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01382"></a>01382                         <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;datepart for part ($part) not found in array&quot;</span>);
<a name="l01383"></a>01383                         <span class="keywordflow">break</span>;
<a name="l01384"></a>01384                 }
<a name="l01385"></a>01385             } <span class="keywordflow">else</span> {
<a name="l01386"></a>01386                 $hours = 0;
<a name="l01387"></a>01387                 <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;hour&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01388"></a>01388                     $hours = $date[<span class="stringliteral">&#39;hour&#39;</span>];
<a name="l01389"></a>01389                 }
<a name="l01390"></a>01390                 $minutes = 0;
<a name="l01391"></a>01391                 <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;minute&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01392"></a>01392                     $minutes = $date[<span class="stringliteral">&#39;minute&#39;</span>];
<a name="l01393"></a>01393                 }
<a name="l01394"></a>01394                 $seconds = 0;
<a name="l01395"></a>01395                 <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;second&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01396"></a>01396                     $seconds = $date[<span class="stringliteral">&#39;second&#39;</span>];
<a name="l01397"></a>01397                 }
<a name="l01398"></a>01398                 $months = 0;
<a name="l01399"></a>01399                 <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;month&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01400"></a>01400                     $months = $date[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l01401"></a>01401                 }
<a name="l01402"></a>01402                 $days = 0;
<a name="l01403"></a>01403                 <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;day&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01404"></a>01404                     $days = $date[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l01405"></a>01405                 }
<a name="l01406"></a>01406                 $years = 0;
<a name="l01407"></a>01407                 <span class="keywordflow">if</span> (isset($date[<span class="stringliteral">&#39;year&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l01408"></a>01408                     $years = $date[<span class="stringliteral">&#39;year&#39;</span>];
<a name="l01409"></a>01409                 }
<a name="l01410"></a>01410                 <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($hours, $minutes, $seconds, $months, $days, $years, <span class="keyword">true</span>),
<a name="l01411"></a>01411                                              $this-&gt;mktime($hour, $minute, $second, $month, $day, $year, <span class="keyword">true</span>), $hour);
<a name="l01412"></a>01412             }
<a name="l01413"></a>01413         }
<a name="l01414"></a>01414 
<a name="l01415"></a>01415         <span class="comment">// $date as object, part of foreign date as own date</span>
<a name="l01416"></a>01416         <span class="keywordflow">switch</span>($part) {
<a name="l01417"></a>01417 
<a name="l01418"></a>01418             <span class="comment">// day formats</span>
<a name="l01419"></a>01419             <span class="keywordflow">case</span> self::DAY:
<a name="l01420"></a>01420                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01421"></a>01421                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1, 1 + intval($date), 1970, <span class="keyword">true</span>),
<a name="l01422"></a>01422                                                  $this-&gt;mktime(0, 0, 0, 1, 1 + intval($day), 1970, <span class="keyword">true</span>), $hour);
<a name="l01423"></a>01423                 }
<a name="l01424"></a>01424                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01425"></a>01425                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, day expected&quot;</span>, $date);
<a name="l01426"></a>01426                 <span class="keywordflow">break</span>;
<a name="l01427"></a>01427 
<a name="l01428"></a>01428             <span class="keywordflow">case</span> self::WEEKDAY_SHORT:
<a name="l01429"></a>01429                 $daylist = <a class="code" href="class_zend___locale___data.html#afb7aafc4885ad882f4af6df7bb06e6f6">Zend_Locale_Data::getList</a>($locale, <span class="stringliteral">&#39;day&#39;</span>);
<a name="l01430"></a>01430                 $weekday = (int) $this-&gt;<span class="keyword">get</span>(self::WEEKDAY_DIGIT, $locale);
<a name="l01431"></a>01431                 $cnt = 0;
<a name="l01432"></a>01432 
<a name="l01433"></a>01433                 <span class="keywordflow">foreach</span> ($daylist as $key =&gt; $value) {
<a name="l01434"></a>01434                     <span class="keywordflow">if</span> (strtoupper(iconv_substr($value, 0, 3, <span class="stringliteral">&#39;UTF-8&#39;</span>)) == strtoupper($date)) {
<a name="l01435"></a>01435                          $found = $cnt;
<a name="l01436"></a>01436                         <span class="keywordflow">break</span>;
<a name="l01437"></a>01437                     }
<a name="l01438"></a>01438                     ++$cnt;
<a name="l01439"></a>01439                 }
<a name="l01440"></a>01440 
<a name="l01441"></a>01441                 <span class="comment">// Weekday found</span>
<a name="l01442"></a>01442                 <span class="keywordflow">if</span> ($cnt &lt; 7) {
<a name="l01443"></a>01443                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1, 1 + $found, 1970, <span class="keyword">true</span>),
<a name="l01444"></a>01444                                                  $this-&gt;mktime(0, 0, 0, 1, 1 + $weekday, 1970, <span class="keyword">true</span>), $hour);
<a name="l01445"></a>01445                 }
<a name="l01446"></a>01446 
<a name="l01447"></a>01447                 <span class="comment">// Weekday not found</span>
<a name="l01448"></a>01448                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01449"></a>01449                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, weekday expected&quot;</span>, $date);
<a name="l01450"></a>01450                 <span class="keywordflow">break</span>;
<a name="l01451"></a>01451 
<a name="l01452"></a>01452             <span class="keywordflow">case</span> self::DAY_SHORT:
<a name="l01453"></a>01453                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01454"></a>01454                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1, 1 + intval($date), 1970, <span class="keyword">true</span>),
<a name="l01455"></a>01455                                                  $this-&gt;mktime(0, 0, 0, 1, 1 + intval($day), 1970, <span class="keyword">true</span>), $hour);
<a name="l01456"></a>01456                 }
<a name="l01457"></a>01457                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01458"></a>01458                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, day expected&quot;</span>, $date);
<a name="l01459"></a>01459                 <span class="keywordflow">break</span>;
<a name="l01460"></a>01460 
<a name="l01461"></a>01461             <span class="keywordflow">case</span> self::WEEKDAY:
<a name="l01462"></a>01462                 $daylist = <a class="code" href="class_zend___locale___data.html#afb7aafc4885ad882f4af6df7bb06e6f6">Zend_Locale_Data::getList</a>($locale, <span class="stringliteral">&#39;day&#39;</span>);
<a name="l01463"></a>01463                 $weekday = (int) $this-&gt;<span class="keyword">get</span>(self::WEEKDAY_DIGIT, $locale);
<a name="l01464"></a>01464                 $cnt = 0;
<a name="l01465"></a>01465 
<a name="l01466"></a>01466                 <span class="keywordflow">foreach</span> ($daylist as $key =&gt; $value) {
<a name="l01467"></a>01467                     <span class="keywordflow">if</span> (strtoupper($value) == strtoupper($date)) {
<a name="l01468"></a>01468                         $found = $cnt;
<a name="l01469"></a>01469                         <span class="keywordflow">break</span>;
<a name="l01470"></a>01470                     }
<a name="l01471"></a>01471                     ++$cnt;
<a name="l01472"></a>01472                 }
<a name="l01473"></a>01473 
<a name="l01474"></a>01474                 <span class="comment">// Weekday found</span>
<a name="l01475"></a>01475                 <span class="keywordflow">if</span> ($cnt &lt; 7) {
<a name="l01476"></a>01476                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1, 1 + $found, 1970, <span class="keyword">true</span>),
<a name="l01477"></a>01477                                                  $this-&gt;mktime(0, 0, 0, 1, 1 + $weekday, 1970, <span class="keyword">true</span>), $hour);
<a name="l01478"></a>01478                 }
<a name="l01479"></a>01479 
<a name="l01480"></a>01480                 <span class="comment">// Weekday not found</span>
<a name="l01481"></a>01481                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01482"></a>01482                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, weekday expected&quot;</span>, $date);
<a name="l01483"></a>01483                 <span class="keywordflow">break</span>;
<a name="l01484"></a>01484 
<a name="l01485"></a>01485             <span class="keywordflow">case</span> self::WEEKDAY_8601:
<a name="l01486"></a>01486                 $weekday = (int) $this-&gt;<span class="keyword">get</span>(self::WEEKDAY_8601, $locale);
<a name="l01487"></a>01487                 <span class="keywordflow">if</span> ((intval($date) &gt; 0) and (intval($date) &lt; 8)) {
<a name="l01488"></a>01488                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1, 1 + intval($date), 1970, <span class="keyword">true</span>),
<a name="l01489"></a>01489                                                  $this-&gt;mktime(0, 0, 0, 1, 1 + $weekday, 1970, <span class="keyword">true</span>), $hour);
<a name="l01490"></a>01490                 }
<a name="l01491"></a>01491 
<a name="l01492"></a>01492                 <span class="comment">// Weekday not found</span>
<a name="l01493"></a>01493                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01494"></a>01494                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, weekday expected&quot;</span>, $date);
<a name="l01495"></a>01495                 <span class="keywordflow">break</span>;
<a name="l01496"></a>01496 
<a name="l01497"></a>01497             <span class="keywordflow">case</span> self::DAY_SUFFIX:
<a name="l01498"></a>01498                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01499"></a>01499                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;day suffix not supported&#39;</span>, $date);
<a name="l01500"></a>01500                 <span class="keywordflow">break</span>;
<a name="l01501"></a>01501 
<a name="l01502"></a>01502             <span class="keywordflow">case</span> self::WEEKDAY_DIGIT:
<a name="l01503"></a>01503                 $weekday = (int) $this-&gt;<span class="keyword">get</span>(self::WEEKDAY_DIGIT, $locale);
<a name="l01504"></a>01504                 <span class="keywordflow">if</span> (is_numeric($date) and (intval($date) &gt;= 0) and (intval($date) &lt; 7)) {
<a name="l01505"></a>01505                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1, 1 + $date, 1970, <span class="keyword">true</span>),
<a name="l01506"></a>01506                                                  $this-&gt;mktime(0, 0, 0, 1, 1 + $weekday, 1970, <span class="keyword">true</span>), $hour);
<a name="l01507"></a>01507                 }
<a name="l01508"></a>01508 
<a name="l01509"></a>01509                 <span class="comment">// Weekday not found</span>
<a name="l01510"></a>01510                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01511"></a>01511                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, weekday expected&quot;</span>, $date);
<a name="l01512"></a>01512                 <span class="keywordflow">break</span>;
<a name="l01513"></a>01513 
<a name="l01514"></a>01514             <span class="keywordflow">case</span> self::DAY_OF_YEAR:
<a name="l01515"></a>01515                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01516"></a>01516                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1, 1 + $date, 1970, <span class="keyword">true</span>),
<a name="l01517"></a>01517                                                  $this-&gt;mktime(0, 0, 0, $month, 1 + $day, 1970, <span class="keyword">true</span>), $hour);
<a name="l01518"></a>01518                 }
<a name="l01519"></a>01519                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01520"></a>01520                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, day expected&quot;</span>, $date);
<a name="l01521"></a>01521                 <span class="keywordflow">break</span>;
<a name="l01522"></a>01522 
<a name="l01523"></a>01523             <span class="keywordflow">case</span> self::WEEKDAY_NARROW:
<a name="l01524"></a>01524                 $daylist = <a class="code" href="class_zend___locale___data.html#afb7aafc4885ad882f4af6df7bb06e6f6">Zend_Locale_Data::getList</a>($locale, <span class="stringliteral">&#39;day&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;format&#39;</span>, <span class="stringliteral">&#39;abbreviated&#39;</span>));
<a name="l01525"></a>01525                 $weekday = (int) $this-&gt;<span class="keyword">get</span>(self::WEEKDAY_DIGIT, $locale);
<a name="l01526"></a>01526                 $cnt = 0;
<a name="l01527"></a>01527                 <span class="keywordflow">foreach</span> ($daylist as $key =&gt; $value) {
<a name="l01528"></a>01528                     <span class="keywordflow">if</span> (strtoupper(iconv_substr($value, 0, 1, <span class="stringliteral">&#39;UTF-8&#39;</span>)) == strtoupper($date)) {
<a name="l01529"></a>01529                         $found = $cnt;
<a name="l01530"></a>01530                         <span class="keywordflow">break</span>;
<a name="l01531"></a>01531                     }
<a name="l01532"></a>01532                     ++$cnt;
<a name="l01533"></a>01533                 }
<a name="l01534"></a>01534 
<a name="l01535"></a>01535                 <span class="comment">// Weekday found</span>
<a name="l01536"></a>01536                 <span class="keywordflow">if</span> ($cnt &lt; 7) {
<a name="l01537"></a>01537                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1, 1 + $found, 1970, <span class="keyword">true</span>),
<a name="l01538"></a>01538                                                  $this-&gt;mktime(0, 0, 0, 1, 1 + $weekday, 1970, <span class="keyword">true</span>), $hour);
<a name="l01539"></a>01539                 }
<a name="l01540"></a>01540 
<a name="l01541"></a>01541                 <span class="comment">// Weekday not found</span>
<a name="l01542"></a>01542                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01543"></a>01543                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, weekday expected&quot;</span>, $date);
<a name="l01544"></a>01544                 <span class="keywordflow">break</span>;
<a name="l01545"></a>01545 
<a name="l01546"></a>01546             <span class="keywordflow">case</span> self::WEEKDAY_NAME:
<a name="l01547"></a>01547                 $daylist = <a class="code" href="class_zend___locale___data.html#afb7aafc4885ad882f4af6df7bb06e6f6">Zend_Locale_Data::getList</a>($locale, <span class="stringliteral">&#39;day&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;format&#39;</span>, <span class="stringliteral">&#39;abbreviated&#39;</span>));
<a name="l01548"></a>01548                 $weekday = (int) $this-&gt;<span class="keyword">get</span>(self::WEEKDAY_DIGIT, $locale);
<a name="l01549"></a>01549                 $cnt = 0;
<a name="l01550"></a>01550                 <span class="keywordflow">foreach</span> ($daylist as $key =&gt; $value) {
<a name="l01551"></a>01551                     <span class="keywordflow">if</span> (strtoupper($value) == strtoupper($date)) {
<a name="l01552"></a>01552                         $found = $cnt;
<a name="l01553"></a>01553                         <span class="keywordflow">break</span>;
<a name="l01554"></a>01554                     }
<a name="l01555"></a>01555                     ++$cnt;
<a name="l01556"></a>01556                 }
<a name="l01557"></a>01557 
<a name="l01558"></a>01558                 <span class="comment">// Weekday found</span>
<a name="l01559"></a>01559                 <span class="keywordflow">if</span> ($cnt &lt; 7) {
<a name="l01560"></a>01560                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1, 1 + $found, 1970, <span class="keyword">true</span>),
<a name="l01561"></a>01561                                                  $this-&gt;mktime(0, 0, 0, 1, 1 + $weekday, 1970, <span class="keyword">true</span>), $hour);
<a name="l01562"></a>01562                 }
<a name="l01563"></a>01563 
<a name="l01564"></a>01564                 <span class="comment">// Weekday not found</span>
<a name="l01565"></a>01565                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01566"></a>01566                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, weekday expected&quot;</span>, $date);
<a name="l01567"></a>01567                 <span class="keywordflow">break</span>;
<a name="l01568"></a>01568 
<a name="l01569"></a>01569             <span class="comment">// week formats</span>
<a name="l01570"></a>01570             <span class="keywordflow">case</span> self::WEEK:
<a name="l01571"></a>01571                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01572"></a>01572                     $week = (int) $this-&gt;<span class="keyword">get</span>(self::WEEK, $locale);
<a name="l01573"></a>01573                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, parent::mktime(0, 0, 0, 1, 1 + ($date * 7), 1970, <span class="keyword">true</span>),
<a name="l01574"></a>01574                                                  parent::mktime(0, 0, 0, 1, 1 + ($week * 7), 1970, <span class="keyword">true</span>), $hour);
<a name="l01575"></a>01575                 }
<a name="l01576"></a>01576                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01577"></a>01577                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, week expected&quot;</span>, $date);
<a name="l01578"></a>01578                 <span class="keywordflow">break</span>;
<a name="l01579"></a>01579 
<a name="l01580"></a>01580             <span class="comment">// month formats</span>
<a name="l01581"></a>01581             <span class="keywordflow">case</span> self::MONTH_NAME:
<a name="l01582"></a>01582                 $monthlist = <a class="code" href="class_zend___locale___data.html#afb7aafc4885ad882f4af6df7bb06e6f6">Zend_Locale_Data::getList</a>($locale, <span class="stringliteral">&#39;month&#39;</span>);
<a name="l01583"></a>01583                 $cnt = 0;
<a name="l01584"></a>01584                 <span class="keywordflow">foreach</span> ($monthlist as $key =&gt; $value) {
<a name="l01585"></a>01585                     <span class="keywordflow">if</span> (strtoupper($value) == strtoupper($date)) {
<a name="l01586"></a>01586                         $found = $key;
<a name="l01587"></a>01587                         <span class="keywordflow">break</span>;
<a name="l01588"></a>01588                     }
<a name="l01589"></a>01589                     ++$cnt;
<a name="l01590"></a>01590                 }
<a name="l01591"></a>01591                 $date = array_search($date, $monthlist);
<a name="l01592"></a>01592 
<a name="l01593"></a>01593                 <span class="comment">// Monthname found</span>
<a name="l01594"></a>01594                 <span class="keywordflow">if</span> ($cnt &lt; 12) {
<a name="l01595"></a>01595                     $fixday = 0;
<a name="l01596"></a>01596                     <span class="keywordflow">if</span> ($calc == <span class="stringliteral">&#39;add&#39;</span>) {
<a name="l01597"></a>01597                         $date += $found;
<a name="l01598"></a>01598                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01599"></a>01599                         <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;extend_month&#39;</span>] == <span class="keyword">false</span>) {
<a name="l01600"></a>01600                             $parts = $this-&gt;getDateParts($this-&gt;mktime($hour, $minute, $second, $date, $day, $year, <span class="keyword">false</span>));
<a name="l01601"></a>01601                             <span class="keywordflow">if</span> ($parts[<span class="stringliteral">&#39;mday&#39;</span>] != $day) {
<a name="l01602"></a>01602                                 $fixday = ($parts[<span class="stringliteral">&#39;mday&#39;</span>] &lt; $day) ? -$parts[<span class="stringliteral">&#39;mday&#39;</span>] : ($parts[<span class="stringliteral">&#39;mday&#39;</span>] - $day);
<a name="l01603"></a>01603                             }
<a name="l01604"></a>01604                         }
<a name="l01605"></a>01605                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($calc == <span class="stringliteral">&#39;sub&#39;</span>) {
<a name="l01606"></a>01606                         $date = $month - $found;
<a name="l01607"></a>01607                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01608"></a>01608                         <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;extend_month&#39;</span>] == <span class="keyword">false</span>) {
<a name="l01609"></a>01609                             $parts = $this-&gt;getDateParts($this-&gt;mktime($hour, $minute, $second, $date, $day, $year, <span class="keyword">false</span>));
<a name="l01610"></a>01610                             <span class="keywordflow">if</span> ($parts[<span class="stringliteral">&#39;mday&#39;</span>] != $day) {
<a name="l01611"></a>01611                                 $fixday = ($parts[<span class="stringliteral">&#39;mday&#39;</span>] &lt; $day) ? -$parts[<span class="stringliteral">&#39;mday&#39;</span>] : ($parts[<span class="stringliteral">&#39;mday&#39;</span>] - $day);
<a name="l01612"></a>01612                             }
<a name="l01613"></a>01613                         }
<a name="l01614"></a>01614                     }
<a name="l01615"></a>01615                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, $date,  $day + $fixday, $year, <span class="keyword">true</span>),
<a name="l01616"></a>01616                                                  $this-&gt;mktime(0, 0, 0, $month, $day, $year, <span class="keyword">true</span>), $hour);
<a name="l01617"></a>01617                 }
<a name="l01618"></a>01618 
<a name="l01619"></a>01619                 <span class="comment">// Monthname not found</span>
<a name="l01620"></a>01620                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01621"></a>01621                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, month expected&quot;</span>, $date);
<a name="l01622"></a>01622                 <span class="keywordflow">break</span>;
<a name="l01623"></a>01623 
<a name="l01624"></a>01624             <span class="keywordflow">case</span> self::MONTH:
<a name="l01625"></a>01625                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01626"></a>01626                     $fixday = 0;
<a name="l01627"></a>01627                     <span class="keywordflow">if</span> ($calc == <span class="stringliteral">&#39;add&#39;</span>) {
<a name="l01628"></a>01628                         $date += $month;
<a name="l01629"></a>01629                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01630"></a>01630                         <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;extend_month&#39;</span>] == <span class="keyword">false</span>) {
<a name="l01631"></a>01631                             $parts = $this-&gt;getDateParts($this-&gt;mktime($hour, $minute, $second, $date, $day, $year, <span class="keyword">false</span>));
<a name="l01632"></a>01632                             <span class="keywordflow">if</span> ($parts[<span class="stringliteral">&#39;mday&#39;</span>] != $day) {
<a name="l01633"></a>01633                                 $fixday = ($parts[<span class="stringliteral">&#39;mday&#39;</span>] &lt; $day) ? -$parts[<span class="stringliteral">&#39;mday&#39;</span>] : ($parts[<span class="stringliteral">&#39;mday&#39;</span>] - $day);
<a name="l01634"></a>01634                             }
<a name="l01635"></a>01635                         }
<a name="l01636"></a>01636                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($calc == <span class="stringliteral">&#39;sub&#39;</span>) {
<a name="l01637"></a>01637                         $date = $month - $date;
<a name="l01638"></a>01638                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01639"></a>01639                         <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;extend_month&#39;</span>] == <span class="keyword">false</span>) {
<a name="l01640"></a>01640                             $parts = $this-&gt;getDateParts($this-&gt;mktime($hour, $minute, $second, $date, $day, $year, <span class="keyword">false</span>));
<a name="l01641"></a>01641                             <span class="keywordflow">if</span> ($parts[<span class="stringliteral">&#39;mday&#39;</span>] != $day) {
<a name="l01642"></a>01642                                 $fixday = ($parts[<span class="stringliteral">&#39;mday&#39;</span>] &lt; $day) ? -$parts[<span class="stringliteral">&#39;mday&#39;</span>] : ($parts[<span class="stringliteral">&#39;mday&#39;</span>] - $day);
<a name="l01643"></a>01643                             }
<a name="l01644"></a>01644                         }
<a name="l01645"></a>01645                     }
<a name="l01646"></a>01646                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, $date, $day + $fixday, $year, <span class="keyword">true</span>),
<a name="l01647"></a>01647                                                  $this-&gt;mktime(0, 0, 0, $month, $day, $year, <span class="keyword">true</span>), $hour);
<a name="l01648"></a>01648                 }
<a name="l01649"></a>01649                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01650"></a>01650                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, month expected&quot;</span>, $date);
<a name="l01651"></a>01651                 <span class="keywordflow">break</span>;
<a name="l01652"></a>01652 
<a name="l01653"></a>01653             <span class="keywordflow">case</span> self::MONTH_NAME_SHORT:
<a name="l01654"></a>01654                 $monthlist = <a class="code" href="class_zend___locale___data.html#afb7aafc4885ad882f4af6df7bb06e6f6">Zend_Locale_Data::getList</a>($locale, <span class="stringliteral">&#39;month&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;format&#39;</span>, <span class="stringliteral">&#39;abbreviated&#39;</span>));
<a name="l01655"></a>01655                 $cnt = 0;
<a name="l01656"></a>01656                 <span class="keywordflow">foreach</span> ($monthlist as $key =&gt; $value) {
<a name="l01657"></a>01657                     <span class="keywordflow">if</span> (strtoupper($value) == strtoupper($date)) {
<a name="l01658"></a>01658                         $found = $key;
<a name="l01659"></a>01659                         <span class="keywordflow">break</span>;
<a name="l01660"></a>01660                     }
<a name="l01661"></a>01661                     ++$cnt;
<a name="l01662"></a>01662                 }
<a name="l01663"></a>01663                 $date = array_search($date, $monthlist);
<a name="l01664"></a>01664 
<a name="l01665"></a>01665                 <span class="comment">// Monthname found</span>
<a name="l01666"></a>01666                 <span class="keywordflow">if</span> ($cnt &lt; 12) {
<a name="l01667"></a>01667                     $fixday = 0;
<a name="l01668"></a>01668                     <span class="keywordflow">if</span> ($calc == <span class="stringliteral">&#39;add&#39;</span>) {
<a name="l01669"></a>01669                         $date += $found;
<a name="l01670"></a>01670                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01671"></a>01671                         <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;extend_month&#39;</span>] === <span class="keyword">false</span>) {
<a name="l01672"></a>01672                             $parts = $this-&gt;getDateParts($this-&gt;mktime($hour, $minute, $second, $date, $day, $year, <span class="keyword">false</span>));
<a name="l01673"></a>01673                             <span class="keywordflow">if</span> ($parts[<span class="stringliteral">&#39;mday&#39;</span>] != $day) {
<a name="l01674"></a>01674                                 $fixday = ($parts[<span class="stringliteral">&#39;mday&#39;</span>] &lt; $day) ? -$parts[<span class="stringliteral">&#39;mday&#39;</span>] : ($parts[<span class="stringliteral">&#39;mday&#39;</span>] - $day);
<a name="l01675"></a>01675                             }
<a name="l01676"></a>01676                         }
<a name="l01677"></a>01677                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($calc == <span class="stringliteral">&#39;sub&#39;</span>) {
<a name="l01678"></a>01678                         $date = $month - $found;
<a name="l01679"></a>01679                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01680"></a>01680                         <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;extend_month&#39;</span>] === <span class="keyword">false</span>) {
<a name="l01681"></a>01681                             $parts = $this-&gt;getDateParts($this-&gt;mktime($hour, $minute, $second, $date, $day, $year, <span class="keyword">false</span>));
<a name="l01682"></a>01682                             <span class="keywordflow">if</span> ($parts[<span class="stringliteral">&#39;mday&#39;</span>] != $day) {
<a name="l01683"></a>01683                                 $fixday = ($parts[<span class="stringliteral">&#39;mday&#39;</span>] &lt; $day) ? -$parts[<span class="stringliteral">&#39;mday&#39;</span>] : ($parts[<span class="stringliteral">&#39;mday&#39;</span>] - $day);
<a name="l01684"></a>01684                             }
<a name="l01685"></a>01685                         }
<a name="l01686"></a>01686                     }
<a name="l01687"></a>01687                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, $date, $day + $fixday, $year, <span class="keyword">true</span>),
<a name="l01688"></a>01688                                                  $this-&gt;mktime(0, 0, 0, $month, $day, $year, <span class="keyword">true</span>), $hour);
<a name="l01689"></a>01689                 }
<a name="l01690"></a>01690 
<a name="l01691"></a>01691                 <span class="comment">// Monthname not found</span>
<a name="l01692"></a>01692                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01693"></a>01693                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, month expected&quot;</span>, $date);
<a name="l01694"></a>01694                 <span class="keywordflow">break</span>;
<a name="l01695"></a>01695 
<a name="l01696"></a>01696             <span class="keywordflow">case</span> self::MONTH_SHORT:
<a name="l01697"></a>01697                 <span class="keywordflow">if</span> (is_numeric($date) === <span class="keyword">true</span>) {
<a name="l01698"></a>01698                     $fixday = 0;
<a name="l01699"></a>01699                     <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;add&#39;</span>) {
<a name="l01700"></a>01700                         $date += $month;
<a name="l01701"></a>01701                         $calc  = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01702"></a>01702                         <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;extend_month&#39;</span>] === <span class="keyword">false</span>) {
<a name="l01703"></a>01703                             $parts = $this-&gt;getDateParts($this-&gt;mktime($hour, $minute, $second, $date, $day, $year, <span class="keyword">false</span>));
<a name="l01704"></a>01704                             <span class="keywordflow">if</span> ($parts[<span class="stringliteral">&#39;mday&#39;</span>] != $day) {
<a name="l01705"></a>01705                                 $fixday = ($parts[<span class="stringliteral">&#39;mday&#39;</span>] &lt; $day) ? -$parts[<span class="stringliteral">&#39;mday&#39;</span>] : ($parts[<span class="stringliteral">&#39;mday&#39;</span>] - $day);
<a name="l01706"></a>01706                             }
<a name="l01707"></a>01707                         }
<a name="l01708"></a>01708                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;sub&#39;</span>) {
<a name="l01709"></a>01709                         $date = $month - $date;
<a name="l01710"></a>01710                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01711"></a>01711                         <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;extend_month&#39;</span>] === <span class="keyword">false</span>) {
<a name="l01712"></a>01712                             $parts = $this-&gt;getDateParts($this-&gt;mktime($hour, $minute, $second, $date, $day, $year, <span class="keyword">false</span>));
<a name="l01713"></a>01713                             <span class="keywordflow">if</span> ($parts[<span class="stringliteral">&#39;mday&#39;</span>] != $day) {
<a name="l01714"></a>01714                                 $fixday = ($parts[<span class="stringliteral">&#39;mday&#39;</span>] &lt; $day) ? -$parts[<span class="stringliteral">&#39;mday&#39;</span>] : ($parts[<span class="stringliteral">&#39;mday&#39;</span>] - $day);
<a name="l01715"></a>01715                             }
<a name="l01716"></a>01716                         }
<a name="l01717"></a>01717                     }
<a name="l01718"></a>01718 
<a name="l01719"></a>01719                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, $date,  $day + $fixday, $year, <span class="keyword">true</span>),
<a name="l01720"></a>01720                                                  $this-&gt;mktime(0, 0, 0, $month, $day,           $year, <span class="keyword">true</span>), $hour);
<a name="l01721"></a>01721                 }
<a name="l01722"></a>01722                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01723"></a>01723                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, month expected&quot;</span>, $date);
<a name="l01724"></a>01724                 <span class="keywordflow">break</span>;
<a name="l01725"></a>01725 
<a name="l01726"></a>01726             <span class="keywordflow">case</span> self::MONTH_DAYS:
<a name="l01727"></a>01727                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01728"></a>01728                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;month days not supported&#39;</span>, $date);
<a name="l01729"></a>01729                 <span class="keywordflow">break</span>;
<a name="l01730"></a>01730 
<a name="l01731"></a>01731             <span class="keywordflow">case</span> self::MONTH_NAME_NARROW:
<a name="l01732"></a>01732                 $monthlist = <a class="code" href="class_zend___locale___data.html#afb7aafc4885ad882f4af6df7bb06e6f6">Zend_Locale_Data::getList</a>($locale, <span class="stringliteral">&#39;month&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;stand-alone&#39;</span>, <span class="stringliteral">&#39;narrow&#39;</span>));
<a name="l01733"></a>01733                 $cnt       = 0;
<a name="l01734"></a>01734                 <span class="keywordflow">foreach</span> ($monthlist as $key =&gt; $value) {
<a name="l01735"></a>01735                     <span class="keywordflow">if</span> (strtoupper($value) === strtoupper($date)) {
<a name="l01736"></a>01736                         $found = $key;
<a name="l01737"></a>01737                         <span class="keywordflow">break</span>;
<a name="l01738"></a>01738                     }
<a name="l01739"></a>01739                     ++$cnt;
<a name="l01740"></a>01740                 }
<a name="l01741"></a>01741                 $date = array_search($date, $monthlist);
<a name="l01742"></a>01742 
<a name="l01743"></a>01743                 <span class="comment">// Monthname found</span>
<a name="l01744"></a>01744                 <span class="keywordflow">if</span> ($cnt &lt; 12) {
<a name="l01745"></a>01745                     $fixday = 0;
<a name="l01746"></a>01746                     <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;add&#39;</span>) {
<a name="l01747"></a>01747                         $date += $found;
<a name="l01748"></a>01748                         $calc  = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01749"></a>01749                         <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;extend_month&#39;</span>] === <span class="keyword">false</span>) {
<a name="l01750"></a>01750                             $parts = $this-&gt;getDateParts($this-&gt;mktime($hour, $minute, $second, $date, $day, $year, <span class="keyword">false</span>));
<a name="l01751"></a>01751                             <span class="keywordflow">if</span> ($parts[<span class="stringliteral">&#39;mday&#39;</span>] != $day) {
<a name="l01752"></a>01752                                 $fixday = ($parts[<span class="stringliteral">&#39;mday&#39;</span>] &lt; $day) ? -$parts[<span class="stringliteral">&#39;mday&#39;</span>] : ($parts[<span class="stringliteral">&#39;mday&#39;</span>] - $day);
<a name="l01753"></a>01753                             }
<a name="l01754"></a>01754                         }
<a name="l01755"></a>01755                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;sub&#39;</span>) {
<a name="l01756"></a>01756                         $date = $month - $found;
<a name="l01757"></a>01757                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01758"></a>01758                         <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;extend_month&#39;</span>] === <span class="keyword">false</span>) {
<a name="l01759"></a>01759                             $parts = $this-&gt;getDateParts($this-&gt;mktime($hour, $minute, $second, $date, $day, $year, <span class="keyword">false</span>));
<a name="l01760"></a>01760                             <span class="keywordflow">if</span> ($parts[<span class="stringliteral">&#39;mday&#39;</span>] != $day) {
<a name="l01761"></a>01761                                 $fixday = ($parts[<span class="stringliteral">&#39;mday&#39;</span>] &lt; $day) ? -$parts[<span class="stringliteral">&#39;mday&#39;</span>] : ($parts[<span class="stringliteral">&#39;mday&#39;</span>] - $day);
<a name="l01762"></a>01762                             }
<a name="l01763"></a>01763                         }
<a name="l01764"></a>01764                     }
<a name="l01765"></a>01765                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, $date,  $day + $fixday, $year, <span class="keyword">true</span>),
<a name="l01766"></a>01766                                                  $this-&gt;mktime(0, 0, 0, $month, $day,           $year, <span class="keyword">true</span>), $hour);
<a name="l01767"></a>01767                 }
<a name="l01768"></a>01768 
<a name="l01769"></a>01769                 <span class="comment">// Monthname not found</span>
<a name="l01770"></a>01770                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01771"></a>01771                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, month expected&quot;</span>, $date);
<a name="l01772"></a>01772                 <span class="keywordflow">break</span>;
<a name="l01773"></a>01773 
<a name="l01774"></a>01774             <span class="comment">// year formats</span>
<a name="l01775"></a>01775             <span class="keywordflow">case</span> self::LEAPYEAR:
<a name="l01776"></a>01776                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01777"></a>01777                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;leap year not supported&#39;</span>, $date);
<a name="l01778"></a>01778                 <span class="keywordflow">break</span>;
<a name="l01779"></a>01779 
<a name="l01780"></a>01780             <span class="keywordflow">case</span> self::YEAR_8601:
<a name="l01781"></a>01781                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01782"></a>01782                     <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;add&#39;</span>) {
<a name="l01783"></a>01783                         $date += $year;
<a name="l01784"></a>01784                         $calc  = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01785"></a>01785                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;sub&#39;</span>) {
<a name="l01786"></a>01786                         $date = $year - $date;
<a name="l01787"></a>01787                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01788"></a>01788                     }
<a name="l01789"></a>01789                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, $month, $day, intval($date), <span class="keyword">true</span>),
<a name="l01790"></a>01790                                                  $this-&gt;mktime(0, 0, 0, $month, $day, $year,         <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01791"></a>01791                 }
<a name="l01792"></a>01792                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01793"></a>01793                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, year expected&quot;</span>, $date);
<a name="l01794"></a>01794                 <span class="keywordflow">break</span>;
<a name="l01795"></a>01795 
<a name="l01796"></a>01796             <span class="keywordflow">case</span> self::YEAR:
<a name="l01797"></a>01797                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01798"></a>01798                     <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;add&#39;</span>) {
<a name="l01799"></a>01799                         $date += $year;
<a name="l01800"></a>01800                         $calc  = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01801"></a>01801                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;sub&#39;</span>) {
<a name="l01802"></a>01802                         $date = $year - $date;
<a name="l01803"></a>01803                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01804"></a>01804                     }
<a name="l01805"></a>01805                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, $month, $day, intval($date), <span class="keyword">true</span>),
<a name="l01806"></a>01806                                                  $this-&gt;mktime(0, 0, 0, $month, $day, $year,         <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01807"></a>01807                 }
<a name="l01808"></a>01808                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01809"></a>01809                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, year expected&quot;</span>, $date);
<a name="l01810"></a>01810                 <span class="keywordflow">break</span>;
<a name="l01811"></a>01811 
<a name="l01812"></a>01812             <span class="keywordflow">case</span> self::YEAR_SHORT:
<a name="l01813"></a>01813                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01814"></a>01814                     $date = intval($date);
<a name="l01815"></a>01815                     <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l01816"></a>01816                         $date = <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">self::getFullYear</a>($date);
<a name="l01817"></a>01817                     }
<a name="l01818"></a>01818                     <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;add&#39;</span>) {
<a name="l01819"></a>01819                         $date += $year;
<a name="l01820"></a>01820                         $calc  = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01821"></a>01821                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;sub&#39;</span>) {
<a name="l01822"></a>01822                         $date = $year - $date;
<a name="l01823"></a>01823                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01824"></a>01824                     }
<a name="l01825"></a>01825                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, $month, $day, $date, <span class="keyword">true</span>),
<a name="l01826"></a>01826                                                  $this-&gt;mktime(0, 0, 0, $month, $day, $year, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01827"></a>01827                 }
<a name="l01828"></a>01828                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01829"></a>01829                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, year expected&quot;</span>, $date);
<a name="l01830"></a>01830                 <span class="keywordflow">break</span>;
<a name="l01831"></a>01831 
<a name="l01832"></a>01832             <span class="keywordflow">case</span> self::YEAR_SHORT_8601:
<a name="l01833"></a>01833                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01834"></a>01834                     $date = intval($date);
<a name="l01835"></a>01835                     <span class="keywordflow">if</span> (($calc === <span class="stringliteral">&#39;set&#39;</span>) || ($calc === <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l01836"></a>01836                         $date = <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">self::getFullYear</a>($date);
<a name="l01837"></a>01837                     }
<a name="l01838"></a>01838                     <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;add&#39;</span>) {
<a name="l01839"></a>01839                         $date += $year;
<a name="l01840"></a>01840                         $calc  = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01841"></a>01841                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($calc === <span class="stringliteral">&#39;sub&#39;</span>) {
<a name="l01842"></a>01842                         $date = $year - $date;
<a name="l01843"></a>01843                         $calc = <span class="stringliteral">&#39;set&#39;</span>;
<a name="l01844"></a>01844                     }
<a name="l01845"></a>01845                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, $month, $day, $date, <span class="keyword">true</span>),
<a name="l01846"></a>01846                                                  $this-&gt;mktime(0, 0, 0, $month, $day, $year, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01847"></a>01847                 }
<a name="l01848"></a>01848                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01849"></a>01849                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, year expected&quot;</span>, $date);
<a name="l01850"></a>01850                 <span class="keywordflow">break</span>;
<a name="l01851"></a>01851 
<a name="l01852"></a>01852             <span class="comment">// time formats</span>
<a name="l01853"></a>01853             <span class="keywordflow">case</span> self::MERIDIEM:
<a name="l01854"></a>01854                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01855"></a>01855                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;meridiem not supported&#39;</span>, $date);
<a name="l01856"></a>01856                 <span class="keywordflow">break</span>;
<a name="l01857"></a>01857 
<a name="l01858"></a>01858             <span class="keywordflow">case</span> self::SWATCH:
<a name="l01859"></a>01859                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01860"></a>01860                     $rest    = intval($date);
<a name="l01861"></a>01861                     $hours   = floor($rest * 24 / 1000);
<a name="l01862"></a>01862                     $rest    = $rest - ($hours * 1000 / 24);
<a name="l01863"></a>01863                     $minutes = floor($rest * 1440 / 1000);
<a name="l01864"></a>01864                     $rest    = $rest - ($minutes * 1000 / 1440);
<a name="l01865"></a>01865                     $seconds = floor($rest * 86400 / 1000);
<a name="l01866"></a>01866                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($hours, $minutes, $seconds, 1, 1, 1970, <span class="keyword">true</span>),
<a name="l01867"></a>01867                                                  $this-&gt;mktime($hour,  $minute,  $second,  1, 1, 1970, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01868"></a>01868                 }
<a name="l01869"></a>01869                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01870"></a>01870                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, swatchstamp expected&quot;</span>, $date);
<a name="l01871"></a>01871                 <span class="keywordflow">break</span>;
<a name="l01872"></a>01872 
<a name="l01873"></a>01873             <span class="keywordflow">case</span> self::HOUR_SHORT_AM:
<a name="l01874"></a>01874                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01875"></a>01875                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(intval($date), 0, 0, 1, 1, 1970, <span class="keyword">true</span>),
<a name="l01876"></a>01876                                                  $this-&gt;mktime($hour,         0, 0, 1, 1, 1970, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01877"></a>01877                 }
<a name="l01878"></a>01878                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01879"></a>01879                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, hour expected&quot;</span>, $date);
<a name="l01880"></a>01880                 <span class="keywordflow">break</span>;
<a name="l01881"></a>01881 
<a name="l01882"></a>01882             <span class="keywordflow">case</span> self::HOUR_SHORT:
<a name="l01883"></a>01883                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01884"></a>01884                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(intval($date), 0, 0, 1, 1, 1970, <span class="keyword">true</span>),
<a name="l01885"></a>01885                                                  $this-&gt;mktime($hour,         0, 0, 1, 1, 1970, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01886"></a>01886                 }
<a name="l01887"></a>01887                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01888"></a>01888                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, hour expected&quot;</span>, $date);
<a name="l01889"></a>01889                 <span class="keywordflow">break</span>;
<a name="l01890"></a>01890 
<a name="l01891"></a>01891             <span class="keywordflow">case</span> self::HOUR_AM:
<a name="l01892"></a>01892                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01893"></a>01893                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(intval($date), 0, 0, 1, 1, 1970, <span class="keyword">true</span>),
<a name="l01894"></a>01894                                                  $this-&gt;mktime($hour,         0, 0, 1, 1, 1970, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01895"></a>01895                 }
<a name="l01896"></a>01896                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01897"></a>01897                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, hour expected&quot;</span>, $date);
<a name="l01898"></a>01898                 <span class="keywordflow">break</span>;
<a name="l01899"></a>01899 
<a name="l01900"></a>01900             <span class="keywordflow">case</span> self::HOUR:
<a name="l01901"></a>01901                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01902"></a>01902                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(intval($date), 0, 0, 1, 1, 1970, <span class="keyword">true</span>),
<a name="l01903"></a>01903                                                  $this-&gt;mktime($hour,         0, 0, 1, 1, 1970, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01904"></a>01904                 }
<a name="l01905"></a>01905                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01906"></a>01906                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, hour expected&quot;</span>, $date);
<a name="l01907"></a>01907                 <span class="keywordflow">break</span>;
<a name="l01908"></a>01908 
<a name="l01909"></a>01909             <span class="keywordflow">case</span> self::MINUTE:
<a name="l01910"></a>01910                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01911"></a>01911                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, intval($date), 0, 1, 1, 1970, <span class="keyword">true</span>),
<a name="l01912"></a>01912                                                  $this-&gt;mktime(0, $minute,       0, 1, 1, 1970, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01913"></a>01913                 }
<a name="l01914"></a>01914                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01915"></a>01915                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, minute expected&quot;</span>, $date);
<a name="l01916"></a>01916                 <span class="keywordflow">break</span>;
<a name="l01917"></a>01917 
<a name="l01918"></a>01918             <span class="keywordflow">case</span> self::SECOND:
<a name="l01919"></a>01919                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01920"></a>01920                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, intval($date), 1, 1, 1970, <span class="keyword">true</span>),
<a name="l01921"></a>01921                                                  $this-&gt;mktime(0, 0, $second,       1, 1, 1970, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01922"></a>01922                 }
<a name="l01923"></a>01923                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01924"></a>01924                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, second expected&quot;</span>, $date);
<a name="l01925"></a>01925                 <span class="keywordflow">break</span>;
<a name="l01926"></a>01926 
<a name="l01927"></a>01927             <span class="keywordflow">case</span> self::MILLISECOND:
<a name="l01928"></a>01928                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01929"></a>01929                     <span class="keywordflow">switch</span>($calc) {
<a name="l01930"></a>01930                         <span class="keywordflow">case</span> <span class="stringliteral">&#39;set&#39;</span> :
<a name="l01931"></a>01931                             <span class="keywordflow">return</span> $this-&gt;setMillisecond($date);
<a name="l01932"></a>01932                             <span class="keywordflow">break</span>;
<a name="l01933"></a>01933                         <span class="keywordflow">case</span> <span class="stringliteral">&#39;add&#39;</span> :
<a name="l01934"></a>01934                             <span class="keywordflow">return</span> $this-&gt;addMillisecond($date);
<a name="l01935"></a>01935                             <span class="keywordflow">break</span>;
<a name="l01936"></a>01936                         <span class="keywordflow">case</span> <span class="stringliteral">&#39;sub&#39;</span> :
<a name="l01937"></a>01937                             <span class="keywordflow">return</span> $this-&gt;subMillisecond($date);
<a name="l01938"></a>01938                             <span class="keywordflow">break</span>;
<a name="l01939"></a>01939                     }
<a name="l01940"></a>01940                     <span class="keywordflow">return</span> $this-&gt;compareMillisecond($date);
<a name="l01941"></a>01941                 }
<a name="l01942"></a>01942                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01943"></a>01943                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, milliseconds expected&quot;</span>, $date);
<a name="l01944"></a>01944                 <span class="keywordflow">break</span>;
<a name="l01945"></a>01945 
<a name="l01946"></a>01946             <span class="keywordflow">case</span> self::MINUTE_SHORT:
<a name="l01947"></a>01947                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01948"></a>01948                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, intval($date), 0, 1, 1, 1970, <span class="keyword">true</span>),
<a name="l01949"></a>01949                                                  $this-&gt;mktime(0, $minute,       0, 1, 1, 1970, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01950"></a>01950                 }
<a name="l01951"></a>01951                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01952"></a>01952                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, minute expected&quot;</span>, $date);
<a name="l01953"></a>01953                 <span class="keywordflow">break</span>;
<a name="l01954"></a>01954 
<a name="l01955"></a>01955             <span class="keywordflow">case</span> self::SECOND_SHORT:
<a name="l01956"></a>01956                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l01957"></a>01957                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, intval($date), 1, 1, 1970, <span class="keyword">true</span>),
<a name="l01958"></a>01958                                                  $this-&gt;mktime(0, 0, $second,       1, 1, 1970, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l01959"></a>01959                 }
<a name="l01960"></a>01960                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01961"></a>01961                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, second expected&quot;</span>, $date);
<a name="l01962"></a>01962                 <span class="keywordflow">break</span>;
<a name="l01963"></a>01963 
<a name="l01964"></a>01964             <span class="comment">// timezone formats</span>
<a name="l01965"></a>01965             <span class="comment">// break intentionally omitted</span>
<a name="l01966"></a>01966             <span class="keywordflow">case</span> self::TIMEZONE_NAME:
<a name="l01967"></a>01967             <span class="keywordflow">case</span> self::TIMEZONE:
<a name="l01968"></a>01968             <span class="keywordflow">case</span> self::TIMEZONE_SECS:
<a name="l01969"></a>01969                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01970"></a>01970                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;timezone not supported&#39;</span>, $date);
<a name="l01971"></a>01971                 <span class="keywordflow">break</span>;
<a name="l01972"></a>01972 
<a name="l01973"></a>01973             <span class="keywordflow">case</span> self::DAYLIGHT:
<a name="l01974"></a>01974                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01975"></a>01975                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;daylight not supported&#39;</span>, $date);
<a name="l01976"></a>01976                 <span class="keywordflow">break</span>;
<a name="l01977"></a>01977 
<a name="l01978"></a>01978             <span class="keywordflow">case</span> self::GMT_DIFF:
<a name="l01979"></a>01979             <span class="keywordflow">case</span> self::GMT_DIFF_SEP:
<a name="l01980"></a>01980                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l01981"></a>01981                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;gmtdiff not supported&#39;</span>, $date);
<a name="l01982"></a>01982                 <span class="keywordflow">break</span>;
<a name="l01983"></a>01983 
<a name="l01984"></a>01984             <span class="comment">// date strings</span>
<a name="l01985"></a>01985             <span class="keywordflow">case</span> self::ISO_8601:
<a name="l01986"></a>01986                 <span class="comment">// (-)YYYY-MM-dd</span>
<a name="l01987"></a>01987                 preg_match(<span class="stringliteral">&#39;/^(-{0,1}\d{4})-(\d{2})-(\d{2})/&#39;</span>, $date, $datematch);
<a name="l01988"></a>01988                 <span class="comment">// (-)YY-MM-dd</span>
<a name="l01989"></a>01989                 <span class="keywordflow">if</span> (empty($datematch)) {
<a name="l01990"></a>01990                     preg_match(<span class="stringliteral">&#39;/^(-{0,1}\d{2})-(\d{2})-(\d{2})/&#39;</span>, $date, $datematch);
<a name="l01991"></a>01991                 }
<a name="l01992"></a>01992                 <span class="comment">// (-)YYYYMMdd</span>
<a name="l01993"></a>01993                 <span class="keywordflow">if</span> (empty($datematch)) {
<a name="l01994"></a>01994                     preg_match(<span class="stringliteral">&#39;/^(-{0,1}\d{4})(\d{2})(\d{2})/&#39;</span>, $date, $datematch);
<a name="l01995"></a>01995                 }
<a name="l01996"></a>01996                 <span class="comment">// (-)YYMMdd</span>
<a name="l01997"></a>01997                 <span class="keywordflow">if</span> (empty($datematch)) {
<a name="l01998"></a>01998                     preg_match(<span class="stringliteral">&#39;/^(-{0,1}\d{2})(\d{2})(\d{2})/&#39;</span>, $date, $datematch);
<a name="l01999"></a>01999                 }
<a name="l02000"></a>02000                 $tmpdate = $date;
<a name="l02001"></a>02001                 <span class="keywordflow">if</span> (!empty($datematch)) {
<a name="l02002"></a>02002                     $dateMatchCharCount = iconv_strlen($datematch[0], <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l02003"></a>02003                     $tmpdate = iconv_substr($date,
<a name="l02004"></a>02004                                             $dateMatchCharCount,
<a name="l02005"></a>02005                                             iconv_strlen($date, <span class="stringliteral">&#39;UTF-8&#39;</span>) - $dateMatchCharCount,
<a name="l02006"></a>02006                                             <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l02007"></a>02007                 }
<a name="l02008"></a>02008                 <span class="comment">// (T)hh:mm:ss</span>
<a name="l02009"></a>02009                 preg_match(<span class="stringliteral">&#39;/[T,\s]{0,1}(\d{2}):(\d{2}):(\d{2})/&#39;</span>, $tmpdate, $timematch);
<a name="l02010"></a>02010                 <span class="keywordflow">if</span> (empty($timematch)) {
<a name="l02011"></a>02011                     preg_match(<span class="stringliteral">&#39;/[T,\s]{0,1}(\d{2})(\d{2})(\d{2})/&#39;</span>, $tmpdate, $timematch);
<a name="l02012"></a>02012                 }
<a name="l02013"></a>02013                 <span class="keywordflow">if</span> (empty($datematch) and empty($timematch)) {
<a name="l02014"></a>02014                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02015"></a>02015                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;unsupported ISO8601 format ($date)&quot;</span>, $date);
<a name="l02016"></a>02016                 }
<a name="l02017"></a>02017                 <span class="keywordflow">if</span> (!empty($timematch)) {
<a name="l02018"></a>02018                     $timeMatchCharCount = iconv_strlen($timematch[0], <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l02019"></a>02019                     $tmpdate = iconv_substr($tmpdate,
<a name="l02020"></a>02020                                             $timeMatchCharCount,
<a name="l02021"></a>02021                                             iconv_strlen($tmpdate, <span class="stringliteral">&#39;UTF-8&#39;</span>) - $timeMatchCharCount,
<a name="l02022"></a>02022                                             <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l02023"></a>02023                 }
<a name="l02024"></a>02024                 <span class="keywordflow">if</span> (empty($datematch)) {
<a name="l02025"></a>02025                     $datematch[1] = 1970;
<a name="l02026"></a>02026                     $datematch[2] = 1;
<a name="l02027"></a>02027                     $datematch[3] = 1;
<a name="l02028"></a>02028                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iconv_strlen($datematch[1], <span class="stringliteral">&#39;UTF-8&#39;</span>) == 2) {
<a name="l02029"></a>02029                     $datematch[1] = <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">self::getFullYear</a>($datematch[1]);
<a name="l02030"></a>02030                 }
<a name="l02031"></a>02031                 <span class="keywordflow">if</span> (empty($timematch)) {
<a name="l02032"></a>02032                     $timematch[1] = 0;
<a name="l02033"></a>02033                     $timematch[2] = 0;
<a name="l02034"></a>02034                     $timematch[3] = 0;
<a name="l02035"></a>02035                 }
<a name="l02036"></a>02036 
<a name="l02037"></a>02037                 <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02038"></a>02038                     --$datematch[2];
<a name="l02039"></a>02039                     --$month;
<a name="l02040"></a>02040                     --$datematch[3];
<a name="l02041"></a>02041                     --$day;
<a name="l02042"></a>02042                     $datematch[1] -= 1970;
<a name="l02043"></a>02043                     $year         -= 1970;
<a name="l02044"></a>02044                 }
<a name="l02045"></a>02045                 <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($timematch[1], $timematch[2], $timematch[3], 1 + $datematch[2], 1 + $datematch[3], 1970 + $datematch[1], <span class="keyword">false</span>),
<a name="l02046"></a>02046                                              $this-&gt;mktime($hour,         $minute,       $second,       1 + $month,        1 + $day,          1970 + $year,         <span class="keyword">false</span>), <span class="keyword">false</span>);
<a name="l02047"></a>02047                 <span class="keywordflow">break</span>;
<a name="l02048"></a>02048 
<a name="l02049"></a>02049             <span class="keywordflow">case</span> self::RFC_2822:
<a name="l02050"></a>02050                 $result = preg_match(<span class="stringliteral">&#39;/^\w{3},\s(\d{1,2})\s(\w{3})\s(\d{4})\s(\d{2}):(\d{2}):{0,1}(\d{0,2})\s([+-]{1}\d{4})$/&#39;</span>, $date, $match);
<a name="l02051"></a>02051                 <span class="keywordflow">if</span> (!$result) {
<a name="l02052"></a>02052                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02053"></a>02053                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;no RFC 2822 format ($date)&quot;</span>, $date);
<a name="l02054"></a>02054                 }
<a name="l02055"></a>02055 
<a name="l02056"></a>02056                 $months  = $this-&gt;_getDigitFromName($match[2]);
<a name="l02057"></a>02057 
<a name="l02058"></a>02058                 <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02059"></a>02059                     --$months;
<a name="l02060"></a>02060                     --$month;
<a name="l02061"></a>02061                     --$match[1];
<a name="l02062"></a>02062                     --$day;
<a name="l02063"></a>02063                     $match[3] -= 1970;
<a name="l02064"></a>02064                     $year     -= 1970;
<a name="l02065"></a>02065                 }
<a name="l02066"></a>02066                 <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($match[4], $match[5], $match[6], 1 + $months, 1 + $match[1], 1970 + $match[3], <span class="keyword">false</span>),
<a name="l02067"></a>02067                                              $this-&gt;mktime($hour,     $minute,   $second,   1 + $month,  1 + $day,      1970 + $year,     <span class="keyword">false</span>), <span class="keyword">false</span>);
<a name="l02068"></a>02068                 <span class="keywordflow">break</span>;
<a name="l02069"></a>02069 
<a name="l02070"></a>02070             <span class="keywordflow">case</span> self::TIMESTAMP:
<a name="l02071"></a>02071                 <span class="keywordflow">if</span> (is_numeric($date)) {
<a name="l02072"></a>02072                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $date, $this-&gt;getUnixTimestamp());
<a name="l02073"></a>02073                 }
<a name="l02074"></a>02074                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02075"></a>02075                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, timestamp expected&quot;</span>, $date);
<a name="l02076"></a>02076                 <span class="keywordflow">break</span>;
<a name="l02077"></a>02077 
<a name="l02078"></a>02078             <span class="comment">// additional formats</span>
<a name="l02079"></a>02079             <span class="comment">// break intentionally omitted</span>
<a name="l02080"></a>02080             <span class="keywordflow">case</span> self::ERA:
<a name="l02081"></a>02081             <span class="keywordflow">case</span> self::ERA_NAME:
<a name="l02082"></a>02082                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02083"></a>02083                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;era not supported&#39;</span>, $date);
<a name="l02084"></a>02084                 <span class="keywordflow">break</span>;
<a name="l02085"></a>02085 
<a name="l02086"></a>02086             <span class="keywordflow">case</span> self::DATES:
<a name="l02087"></a>02087                 <span class="keywordflow">try</span> {
<a name="l02088"></a>02088                     $parsed = <a class="code" href="class_zend___date.html#a795dca865c296fd703738c07003cb457">Zend_Locale_Format::getDate</a>($date, array(<span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;fix_date&#39;</span> =&gt; <span class="keyword">true</span>));
<a name="l02089"></a>02089 
<a name="l02090"></a>02090                     <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02091"></a>02091                         --$parsed[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l02092"></a>02092                         --$month;
<a name="l02093"></a>02093                         --$parsed[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l02094"></a>02094                         --$day;
<a name="l02095"></a>02095                         $parsed[<span class="stringliteral">&#39;year&#39;</span>] -= 1970;
<a name="l02096"></a>02096                         $year  -= 1970;
<a name="l02097"></a>02097                     }
<a name="l02098"></a>02098                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1 + $parsed[<span class="stringliteral">&#39;month&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;day&#39;</span>], 1970 + $parsed[<span class="stringliteral">&#39;year&#39;</span>], <span class="keyword">true</span>),
<a name="l02099"></a>02099                                                  $this-&gt;mktime(0, 0, 0, 1 + $month,           1 + $day,           1970 + $year,           <span class="keyword">true</span>), $hour);
<a name="l02100"></a>02100                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02101"></a>02101                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02102"></a>02102                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02103"></a>02103                 }
<a name="l02104"></a>02104                 <span class="keywordflow">break</span>;
<a name="l02105"></a>02105 
<a name="l02106"></a>02106             <span class="keywordflow">case</span> self::DATE_FULL:
<a name="l02107"></a>02107                 <span class="keywordflow">try</span> {
<a name="l02108"></a>02108                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;full&#39;</span>));
<a name="l02109"></a>02109                     $parsed = <a class="code" href="class_zend___date.html#a795dca865c296fd703738c07003cb457">Zend_Locale_Format::getDate</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02110"></a>02110 
<a name="l02111"></a>02111                     <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02112"></a>02112                         --$parsed[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l02113"></a>02113                         --$month;
<a name="l02114"></a>02114                         --$parsed[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l02115"></a>02115                         --$day;
<a name="l02116"></a>02116                         $parsed[<span class="stringliteral">&#39;year&#39;</span>] -= 1970;
<a name="l02117"></a>02117                         $year  -= 1970;
<a name="l02118"></a>02118                     }
<a name="l02119"></a>02119                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1 + $parsed[<span class="stringliteral">&#39;month&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;day&#39;</span>], 1970 + $parsed[<span class="stringliteral">&#39;year&#39;</span>], <span class="keyword">true</span>),
<a name="l02120"></a>02120                                                  $this-&gt;mktime(0, 0, 0, 1 + $month,           1 + $day,           1970 + $year,           <span class="keyword">true</span>), $hour);
<a name="l02121"></a>02121                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02122"></a>02122                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02123"></a>02123                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02124"></a>02124                 }
<a name="l02125"></a>02125                 <span class="keywordflow">break</span>;
<a name="l02126"></a>02126 
<a name="l02127"></a>02127             <span class="keywordflow">case</span> self::DATE_LONG:
<a name="l02128"></a>02128                 <span class="keywordflow">try</span> {
<a name="l02129"></a>02129                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;long&#39;</span>));
<a name="l02130"></a>02130                     $parsed = <a class="code" href="class_zend___date.html#a795dca865c296fd703738c07003cb457">Zend_Locale_Format::getDate</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02131"></a>02131 
<a name="l02132"></a>02132                     <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)){
<a name="l02133"></a>02133                         --$parsed[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l02134"></a>02134                         --$month;
<a name="l02135"></a>02135                         --$parsed[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l02136"></a>02136                         --$day;
<a name="l02137"></a>02137                         $parsed[<span class="stringliteral">&#39;year&#39;</span>] -= 1970;
<a name="l02138"></a>02138                         $year  -= 1970;
<a name="l02139"></a>02139                     }
<a name="l02140"></a>02140                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1 + $parsed[<span class="stringliteral">&#39;month&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;day&#39;</span>], 1970 + $parsed[<span class="stringliteral">&#39;year&#39;</span>], <span class="keyword">true</span>),
<a name="l02141"></a>02141                                                  $this-&gt;mktime(0, 0, 0, 1 + $month,           1 + $day,           1970 + $year,           <span class="keyword">true</span>), $hour);
<a name="l02142"></a>02142                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02143"></a>02143                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02144"></a>02144                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02145"></a>02145                 }
<a name="l02146"></a>02146                 <span class="keywordflow">break</span>;
<a name="l02147"></a>02147 
<a name="l02148"></a>02148             <span class="keywordflow">case</span> self::DATE_MEDIUM:
<a name="l02149"></a>02149                 <span class="keywordflow">try</span> {
<a name="l02150"></a>02150                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;medium&#39;</span>));
<a name="l02151"></a>02151                     $parsed = <a class="code" href="class_zend___date.html#a795dca865c296fd703738c07003cb457">Zend_Locale_Format::getDate</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02152"></a>02152 
<a name="l02153"></a>02153                     <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02154"></a>02154                         --$parsed[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l02155"></a>02155                         --$month;
<a name="l02156"></a>02156                         --$parsed[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l02157"></a>02157                         --$day;
<a name="l02158"></a>02158                         $parsed[<span class="stringliteral">&#39;year&#39;</span>] -= 1970;
<a name="l02159"></a>02159                         $year  -= 1970;
<a name="l02160"></a>02160                     }
<a name="l02161"></a>02161                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1 + $parsed[<span class="stringliteral">&#39;month&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;day&#39;</span>], 1970 + $parsed[<span class="stringliteral">&#39;year&#39;</span>], <span class="keyword">true</span>),
<a name="l02162"></a>02162                                                  $this-&gt;mktime(0, 0, 0, 1 + $month,           1 + $day,           1970 + $year,           <span class="keyword">true</span>), $hour);
<a name="l02163"></a>02163                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02164"></a>02164                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02165"></a>02165                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02166"></a>02166                 }
<a name="l02167"></a>02167                 <span class="keywordflow">break</span>;
<a name="l02168"></a>02168 
<a name="l02169"></a>02169             <span class="keywordflow">case</span> self::DATE_SHORT:
<a name="l02170"></a>02170                 <span class="keywordflow">try</span> {
<a name="l02171"></a>02171                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;short&#39;</span>));
<a name="l02172"></a>02172                     $parsed = <a class="code" href="class_zend___date.html#a795dca865c296fd703738c07003cb457">Zend_Locale_Format::getDate</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02173"></a>02173 
<a name="l02174"></a>02174                     $parsed[<span class="stringliteral">&#39;year&#39;</span>] = <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">self::getFullYear</a>($parsed[<span class="stringliteral">&#39;year&#39;</span>]);
<a name="l02175"></a>02175 
<a name="l02176"></a>02176                     <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02177"></a>02177                         --$parsed[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l02178"></a>02178                         --$month;
<a name="l02179"></a>02179                         --$parsed[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l02180"></a>02180                         --$day;
<a name="l02181"></a>02181                         $parsed[<span class="stringliteral">&#39;year&#39;</span>] -= 1970;
<a name="l02182"></a>02182                         $year  -= 1970;
<a name="l02183"></a>02183                     }
<a name="l02184"></a>02184                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(0, 0, 0, 1 + $parsed[<span class="stringliteral">&#39;month&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;day&#39;</span>], 1970 + $parsed[<span class="stringliteral">&#39;year&#39;</span>], <span class="keyword">true</span>),
<a name="l02185"></a>02185                                                  $this-&gt;mktime(0, 0, 0, 1 + $month,           1 + $day,           1970 + $year,           <span class="keyword">true</span>), $hour);
<a name="l02186"></a>02186                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02187"></a>02187                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02188"></a>02188                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02189"></a>02189                 }
<a name="l02190"></a>02190                 <span class="keywordflow">break</span>;
<a name="l02191"></a>02191 
<a name="l02192"></a>02192             <span class="keywordflow">case</span> self::TIMES:
<a name="l02193"></a>02193                 <span class="keywordflow">try</span> {
<a name="l02194"></a>02194                     <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;set&#39;</span>) {
<a name="l02195"></a>02195                         $month = 1;
<a name="l02196"></a>02196                         $day   = 1;
<a name="l02197"></a>02197                         $year  = 1970;
<a name="l02198"></a>02198                     }
<a name="l02199"></a>02199                     $parsed = <a class="code" href="class_zend___date.html#ad895813fb8d285a279f2ad6a1f86bb48">Zend_Locale_Format::getTime</a>($date, array(<span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;fix_date&#39;</span> =&gt; <span class="keyword">true</span>));
<a name="l02200"></a>02200                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($parsed[<span class="stringliteral">&#39;hour&#39;</span>], $parsed[<span class="stringliteral">&#39;minute&#39;</span>], $parsed[<span class="stringliteral">&#39;second&#39;</span>], $month, $day, $year, <span class="keyword">true</span>),
<a name="l02201"></a>02201                                                  $this-&gt;mktime($hour,           $minute,           $second,           $month, $day, $year, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l02202"></a>02202                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02203"></a>02203                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02204"></a>02204                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02205"></a>02205                 }
<a name="l02206"></a>02206                 <span class="keywordflow">break</span>;
<a name="l02207"></a>02207 
<a name="l02208"></a>02208             <span class="keywordflow">case</span> self::TIME_FULL:
<a name="l02209"></a>02209                 <span class="keywordflow">try</span> {
<a name="l02210"></a>02210                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;time&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;full&#39;</span>));
<a name="l02211"></a>02211                     $parsed = <a class="code" href="class_zend___date.html#ad895813fb8d285a279f2ad6a1f86bb48">Zend_Locale_Format::getTime</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02212"></a>02212                     <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;set&#39;</span>) {
<a name="l02213"></a>02213                         $month = 1;
<a name="l02214"></a>02214                         $day   = 1;
<a name="l02215"></a>02215                         $year  = 1970;
<a name="l02216"></a>02216                     }
<a name="l02217"></a>02217 
<a name="l02218"></a>02218                     <span class="keywordflow">if</span> (!isset($parsed[<span class="stringliteral">&#39;second&#39;</span>])) {
<a name="l02219"></a>02219                         $parsed[<span class="stringliteral">&#39;second&#39;</span>] = 0;
<a name="l02220"></a>02220                     }
<a name="l02221"></a>02221 
<a name="l02222"></a>02222                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($parsed[<span class="stringliteral">&#39;hour&#39;</span>], $parsed[<span class="stringliteral">&#39;minute&#39;</span>], $parsed[<span class="stringliteral">&#39;second&#39;</span>], $month, $day, $year, <span class="keyword">true</span>),
<a name="l02223"></a>02223                                                  $this-&gt;mktime($hour,           $minute,           $second,           $month, $day, $year, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l02224"></a>02224                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02225"></a>02225                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02226"></a>02226                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02227"></a>02227                 }
<a name="l02228"></a>02228                 <span class="keywordflow">break</span>;
<a name="l02229"></a>02229 
<a name="l02230"></a>02230             <span class="keywordflow">case</span> self::TIME_LONG:
<a name="l02231"></a>02231                 <span class="keywordflow">try</span> {
<a name="l02232"></a>02232                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;time&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;long&#39;</span>));
<a name="l02233"></a>02233                     $parsed = <a class="code" href="class_zend___date.html#ad895813fb8d285a279f2ad6a1f86bb48">Zend_Locale_Format::getTime</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02234"></a>02234                     <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;set&#39;</span>) {
<a name="l02235"></a>02235                         $month = 1;
<a name="l02236"></a>02236                         $day   = 1;
<a name="l02237"></a>02237                         $year  = 1970;
<a name="l02238"></a>02238                     }
<a name="l02239"></a>02239                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($parsed[<span class="stringliteral">&#39;hour&#39;</span>], $parsed[<span class="stringliteral">&#39;minute&#39;</span>], $parsed[<span class="stringliteral">&#39;second&#39;</span>], $month, $day, $year, <span class="keyword">true</span>),
<a name="l02240"></a>02240                                                  $this-&gt;mktime($hour,           $minute,           $second,           $month, $day, $year, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l02241"></a>02241                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02242"></a>02242                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02243"></a>02243                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02244"></a>02244                 }
<a name="l02245"></a>02245                 <span class="keywordflow">break</span>;
<a name="l02246"></a>02246 
<a name="l02247"></a>02247             <span class="keywordflow">case</span> self::TIME_MEDIUM:
<a name="l02248"></a>02248                 <span class="keywordflow">try</span> {
<a name="l02249"></a>02249                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;time&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;medium&#39;</span>));
<a name="l02250"></a>02250                     $parsed = <a class="code" href="class_zend___date.html#ad895813fb8d285a279f2ad6a1f86bb48">Zend_Locale_Format::getTime</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02251"></a>02251                     <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;set&#39;</span>) {
<a name="l02252"></a>02252                         $month = 1;
<a name="l02253"></a>02253                         $day   = 1;
<a name="l02254"></a>02254                         $year  = 1970;
<a name="l02255"></a>02255                     }
<a name="l02256"></a>02256                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($parsed[<span class="stringliteral">&#39;hour&#39;</span>], $parsed[<span class="stringliteral">&#39;minute&#39;</span>], $parsed[<span class="stringliteral">&#39;second&#39;</span>], $month, $day, $year, <span class="keyword">true</span>),
<a name="l02257"></a>02257                                                  $this-&gt;mktime($hour,           $minute,           $second,           $month, $day, $year, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l02258"></a>02258                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02259"></a>02259                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02260"></a>02260                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02261"></a>02261                 }
<a name="l02262"></a>02262                 <span class="keywordflow">break</span>;
<a name="l02263"></a>02263 
<a name="l02264"></a>02264             <span class="keywordflow">case</span> self::TIME_SHORT:
<a name="l02265"></a>02265                 <span class="keywordflow">try</span> {
<a name="l02266"></a>02266                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;time&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;short&#39;</span>));
<a name="l02267"></a>02267                     $parsed = <a class="code" href="class_zend___date.html#ad895813fb8d285a279f2ad6a1f86bb48">Zend_Locale_Format::getTime</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02268"></a>02268                     <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;set&#39;</span>) {
<a name="l02269"></a>02269                         $month = 1;
<a name="l02270"></a>02270                         $day   = 1;
<a name="l02271"></a>02271                         $year  = 1970;
<a name="l02272"></a>02272                     }
<a name="l02273"></a>02273 
<a name="l02274"></a>02274                     <span class="keywordflow">if</span> (!isset($parsed[<span class="stringliteral">&#39;second&#39;</span>])) {
<a name="l02275"></a>02275                         $parsed[<span class="stringliteral">&#39;second&#39;</span>] = 0;
<a name="l02276"></a>02276                     }
<a name="l02277"></a>02277 
<a name="l02278"></a>02278                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($parsed[<span class="stringliteral">&#39;hour&#39;</span>], $parsed[<span class="stringliteral">&#39;minute&#39;</span>], $parsed[<span class="stringliteral">&#39;second&#39;</span>], $month, $day, $year, <span class="keyword">true</span>),
<a name="l02279"></a>02279                                                  $this-&gt;mktime($hour,           $minute,           $second,           $month, $day, $year, <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l02280"></a>02280                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02281"></a>02281                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02282"></a>02282                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02283"></a>02283                 }
<a name="l02284"></a>02284                 <span class="keywordflow">break</span>;
<a name="l02285"></a>02285 
<a name="l02286"></a>02286             <span class="keywordflow">case</span> self::DATETIME:
<a name="l02287"></a>02287                 <span class="keywordflow">try</span> {
<a name="l02288"></a>02288                     $parsed = <a class="code" href="class_zend___locale___format.html#a9d005cc0e7caf229e59061be97b2a748">Zend_Locale_Format::getDateTime</a>($date, array(<span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;fix_date&#39;</span> =&gt; <span class="keyword">true</span>));
<a name="l02289"></a>02289                     <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02290"></a>02290                         --$parsed[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l02291"></a>02291                         --$month;
<a name="l02292"></a>02292                         --$parsed[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l02293"></a>02293                         --$day;
<a name="l02294"></a>02294                         $parsed[<span class="stringliteral">&#39;year&#39;</span>] -= 1970;
<a name="l02295"></a>02295                         $year  -= 1970;
<a name="l02296"></a>02296                     }
<a name="l02297"></a>02297                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($parsed[<span class="stringliteral">&#39;hour&#39;</span>], $parsed[<span class="stringliteral">&#39;minute&#39;</span>], $parsed[<span class="stringliteral">&#39;second&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;month&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;day&#39;</span>], 1970 + $parsed[<span class="stringliteral">&#39;year&#39;</span>], <span class="keyword">true</span>),
<a name="l02298"></a>02298                                                  $this-&gt;mktime($hour,           $minute,           $second,           1 + $month,           1 + $day,           1970 + $year,           <span class="keyword">true</span>), $hour);
<a name="l02299"></a>02299                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02300"></a>02300                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02301"></a>02301                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02302"></a>02302                 }
<a name="l02303"></a>02303                 <span class="keywordflow">break</span>;
<a name="l02304"></a>02304 
<a name="l02305"></a>02305             <span class="keywordflow">case</span> self::DATETIME_FULL:
<a name="l02306"></a>02306                 <span class="keywordflow">try</span> {
<a name="l02307"></a>02307                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;full&#39;</span>));
<a name="l02308"></a>02308                     $parsed = <a class="code" href="class_zend___locale___format.html#a9d005cc0e7caf229e59061be97b2a748">Zend_Locale_Format::getDateTime</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02309"></a>02309 
<a name="l02310"></a>02310                     <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02311"></a>02311                         --$parsed[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l02312"></a>02312                         --$month;
<a name="l02313"></a>02313                         --$parsed[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l02314"></a>02314                         --$day;
<a name="l02315"></a>02315                         $parsed[<span class="stringliteral">&#39;year&#39;</span>] -= 1970;
<a name="l02316"></a>02316                         $year  -= 1970;
<a name="l02317"></a>02317                     }
<a name="l02318"></a>02318 
<a name="l02319"></a>02319                     <span class="keywordflow">if</span> (!isset($parsed[<span class="stringliteral">&#39;second&#39;</span>])) {
<a name="l02320"></a>02320                         $parsed[<span class="stringliteral">&#39;second&#39;</span>] = 0;
<a name="l02321"></a>02321                     }
<a name="l02322"></a>02322 
<a name="l02323"></a>02323                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($parsed[<span class="stringliteral">&#39;hour&#39;</span>], $parsed[<span class="stringliteral">&#39;minute&#39;</span>], $parsed[<span class="stringliteral">&#39;second&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;month&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;day&#39;</span>], 1970 + $parsed[<span class="stringliteral">&#39;year&#39;</span>], <span class="keyword">true</span>),
<a name="l02324"></a>02324                                                  $this-&gt;mktime($hour,           $minute,           $second,           1 + $month,           1 + $day,           1970 + $year,           <span class="keyword">true</span>), $hour);
<a name="l02325"></a>02325                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02326"></a>02326                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02327"></a>02327                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02328"></a>02328                 }
<a name="l02329"></a>02329                 <span class="keywordflow">break</span>;
<a name="l02330"></a>02330 
<a name="l02331"></a>02331             <span class="keywordflow">case</span> self::DATETIME_LONG:
<a name="l02332"></a>02332                 <span class="keywordflow">try</span> {
<a name="l02333"></a>02333                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;long&#39;</span>));
<a name="l02334"></a>02334                     $parsed = <a class="code" href="class_zend___locale___format.html#a9d005cc0e7caf229e59061be97b2a748">Zend_Locale_Format::getDateTime</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02335"></a>02335 
<a name="l02336"></a>02336                     <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)){
<a name="l02337"></a>02337                         --$parsed[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l02338"></a>02338                         --$month;
<a name="l02339"></a>02339                         --$parsed[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l02340"></a>02340                         --$day;
<a name="l02341"></a>02341                         $parsed[<span class="stringliteral">&#39;year&#39;</span>] -= 1970;
<a name="l02342"></a>02342                         $year  -= 1970;
<a name="l02343"></a>02343                     }
<a name="l02344"></a>02344                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($parsed[<span class="stringliteral">&#39;hour&#39;</span>], $parsed[<span class="stringliteral">&#39;minute&#39;</span>], $parsed[<span class="stringliteral">&#39;second&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;month&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;day&#39;</span>], 1970 + $parsed[<span class="stringliteral">&#39;year&#39;</span>], <span class="keyword">true</span>),
<a name="l02345"></a>02345                                                  $this-&gt;mktime($hour,           $minute,           $second,           1 + $month,           1 + $day,           1970 + $year,           <span class="keyword">true</span>), $hour);
<a name="l02346"></a>02346                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02347"></a>02347                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02348"></a>02348                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02349"></a>02349                 }
<a name="l02350"></a>02350                 <span class="keywordflow">break</span>;
<a name="l02351"></a>02351 
<a name="l02352"></a>02352             <span class="keywordflow">case</span> self::DATETIME_MEDIUM:
<a name="l02353"></a>02353                 <span class="keywordflow">try</span> {
<a name="l02354"></a>02354                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;medium&#39;</span>));
<a name="l02355"></a>02355                     $parsed = <a class="code" href="class_zend___locale___format.html#a9d005cc0e7caf229e59061be97b2a748">Zend_Locale_Format::getDateTime</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02356"></a>02356                     <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02357"></a>02357                         --$parsed[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l02358"></a>02358                         --$month;
<a name="l02359"></a>02359                         --$parsed[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l02360"></a>02360                         --$day;
<a name="l02361"></a>02361                         $parsed[<span class="stringliteral">&#39;year&#39;</span>] -= 1970;
<a name="l02362"></a>02362                         $year  -= 1970;
<a name="l02363"></a>02363                     }
<a name="l02364"></a>02364                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($parsed[<span class="stringliteral">&#39;hour&#39;</span>], $parsed[<span class="stringliteral">&#39;minute&#39;</span>], $parsed[<span class="stringliteral">&#39;second&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;month&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;day&#39;</span>], 1970 + $parsed[<span class="stringliteral">&#39;year&#39;</span>], <span class="keyword">true</span>),
<a name="l02365"></a>02365                                                  $this-&gt;mktime($hour,           $minute,           $second,           1 + $month,           1 + $day,           1970 + $year,           <span class="keyword">true</span>), $hour);
<a name="l02366"></a>02366                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02367"></a>02367                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02368"></a>02368                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02369"></a>02369                 }
<a name="l02370"></a>02370                 <span class="keywordflow">break</span>;
<a name="l02371"></a>02371 
<a name="l02372"></a>02372             <span class="keywordflow">case</span> self::DATETIME_SHORT:
<a name="l02373"></a>02373                 <span class="keywordflow">try</span> {
<a name="l02374"></a>02374                     $format = <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;short&#39;</span>));
<a name="l02375"></a>02375                     $parsed = <a class="code" href="class_zend___locale___format.html#a9d005cc0e7caf229e59061be97b2a748">Zend_Locale_Format::getDateTime</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale));
<a name="l02376"></a>02376 
<a name="l02377"></a>02377                     $parsed[<span class="stringliteral">&#39;year&#39;</span>] = <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">self::getFullYear</a>($parsed[<span class="stringliteral">&#39;year&#39;</span>]);
<a name="l02378"></a>02378 
<a name="l02379"></a>02379                     <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02380"></a>02380                         --$parsed[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l02381"></a>02381                         --$month;
<a name="l02382"></a>02382                         --$parsed[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l02383"></a>02383                         --$day;
<a name="l02384"></a>02384                         $parsed[<span class="stringliteral">&#39;year&#39;</span>] -= 1970;
<a name="l02385"></a>02385                         $year  -= 1970;
<a name="l02386"></a>02386                     }
<a name="l02387"></a>02387 
<a name="l02388"></a>02388                     <span class="keywordflow">if</span> (!isset($parsed[<span class="stringliteral">&#39;second&#39;</span>])) {
<a name="l02389"></a>02389                         $parsed[<span class="stringliteral">&#39;second&#39;</span>] = 0;
<a name="l02390"></a>02390                     }
<a name="l02391"></a>02391 
<a name="l02392"></a>02392                     <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($parsed[<span class="stringliteral">&#39;hour&#39;</span>], $parsed[<span class="stringliteral">&#39;minute&#39;</span>], $parsed[<span class="stringliteral">&#39;second&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;month&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;day&#39;</span>], 1970 + $parsed[<span class="stringliteral">&#39;year&#39;</span>], <span class="keyword">true</span>),
<a name="l02393"></a>02393                                                  $this-&gt;mktime($hour,           $minute,           $second,           1 + $month,           1 + $day,           1970 + $year,           <span class="keyword">true</span>), $hour);
<a name="l02394"></a>02394                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02395"></a>02395                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02396"></a>02396                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02397"></a>02397                 }
<a name="l02398"></a>02398                 <span class="keywordflow">break</span>;
<a name="l02399"></a>02399 
<a name="l02400"></a>02400             <span class="comment">// ATOM and RFC_3339 are identical</span>
<a name="l02401"></a>02401             <span class="keywordflow">case</span> self::ATOM:
<a name="l02402"></a>02402             <span class="keywordflow">case</span> self::RFC_3339:
<a name="l02403"></a>02403                 $result = preg_match(<span class="stringliteral">&#39;/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\d{0,4}([+-]{1}\d{2}:\d{2}|Z)$/&#39;</span>, $date, $match);
<a name="l02404"></a>02404                 <span class="keywordflow">if</span> (!$result) {
<a name="l02405"></a>02405                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02406"></a>02406                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, ATOM format expected&quot;</span>, $date);
<a name="l02407"></a>02407                 }
<a name="l02408"></a>02408 
<a name="l02409"></a>02409                 <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02410"></a>02410                     --$match[2];
<a name="l02411"></a>02411                     --$month;
<a name="l02412"></a>02412                     --$match[3];
<a name="l02413"></a>02413                     --$day;
<a name="l02414"></a>02414                     $match[1] -= 1970;
<a name="l02415"></a>02415                     $year     -= 1970;
<a name="l02416"></a>02416                 }
<a name="l02417"></a>02417                 <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($match[4], $match[5], $match[6], 1 + $match[2], 1 + $match[3], 1970 + $match[1], <span class="keyword">true</span>),
<a name="l02418"></a>02418                                              $this-&gt;mktime($hour,     $minute,   $second,   1 + $month,    1 + $day,      1970 + $year,     <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l02419"></a>02419                 <span class="keywordflow">break</span>;
<a name="l02420"></a>02420 
<a name="l02421"></a>02421             <span class="keywordflow">case</span> self::COOKIE:
<a name="l02422"></a>02422                 $result = preg_match(<span class="stringliteral">&quot;/^\w{6,9},\s(\d{2})-(\w{3})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})\s.{3,20}$/&quot;</span>, $date, $match);
<a name="l02423"></a>02423                 <span class="keywordflow">if</span> (!$result) {
<a name="l02424"></a>02424                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02425"></a>02425                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, COOKIE format expected&quot;</span>, $date);
<a name="l02426"></a>02426                 }
<a name="l02427"></a>02427                 $matchStartPos = iconv_strpos($match[0], <span class="charliteral">&#39; &#39;</span>, 0, <span class="stringliteral">&#39;UTF-8&#39;</span>) + 1;
<a name="l02428"></a>02428                 $match[0] = iconv_substr($match[0],
<a name="l02429"></a>02429                                          $matchStartPos,
<a name="l02430"></a>02430                                          iconv_strlen($match[0], <span class="stringliteral">&#39;UTF-8&#39;</span>) - $matchStartPos,
<a name="l02431"></a>02431                                          <span class="stringliteral">&#39;UTF-8&#39;</span>);
<a name="l02432"></a>02432 
<a name="l02433"></a>02433                 $months    = $this-&gt;_getDigitFromName($match[2]);
<a name="l02434"></a>02434                 $match[3] = <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">self::getFullYear</a>($match[3]);
<a name="l02435"></a>02435 
<a name="l02436"></a>02436                 <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02437"></a>02437                     --$months;
<a name="l02438"></a>02438                     --$month;
<a name="l02439"></a>02439                     --$match[1];
<a name="l02440"></a>02440                     --$day;
<a name="l02441"></a>02441                     $match[3] -= 1970;
<a name="l02442"></a>02442                     $year     -= 1970;
<a name="l02443"></a>02443                 }
<a name="l02444"></a>02444                 <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($match[4], $match[5], $match[6], 1 + $months, 1 + $match[1], 1970 + $match[3], <span class="keyword">true</span>),
<a name="l02445"></a>02445                                              $this-&gt;mktime($hour,     $minute,   $second,   1 + $month,  1 + $day,      1970 + $year,     <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l02446"></a>02446                 <span class="keywordflow">break</span>;
<a name="l02447"></a>02447 
<a name="l02448"></a>02448             <span class="keywordflow">case</span> self::RFC_822:
<a name="l02449"></a>02449             <span class="keywordflow">case</span> self::RFC_1036:
<a name="l02450"></a>02450                 <span class="comment">// new RFC 822 format, identical to RFC 1036 standard</span>
<a name="l02451"></a>02451                 $result = preg_match(<span class="stringliteral">&#39;/^\w{0,3},{0,1}\s{0,1}(\d{1,2})\s(\w{3})\s(\d{2})\s(\d{2}):(\d{2}):{0,1}(\d{0,2})\s([+-]{1}\d{4}|\w{1,20})$/&#39;</span>, $date, $match);
<a name="l02452"></a>02452                 <span class="keywordflow">if</span> (!$result) {
<a name="l02453"></a>02453                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02454"></a>02454                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, RFC 822 date format expected&quot;</span>, $date);
<a name="l02455"></a>02455                 }
<a name="l02456"></a>02456 
<a name="l02457"></a>02457                 $months    = $this-&gt;_getDigitFromName($match[2]);
<a name="l02458"></a>02458                 $match[3] = <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">self::getFullYear</a>($match[3]);
<a name="l02459"></a>02459 
<a name="l02460"></a>02460                 <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02461"></a>02461                     --$months;
<a name="l02462"></a>02462                     --$month;
<a name="l02463"></a>02463                     --$match[1];
<a name="l02464"></a>02464                     --$day;
<a name="l02465"></a>02465                     $match[3] -= 1970;
<a name="l02466"></a>02466                     $year     -= 1970;
<a name="l02467"></a>02467                 }
<a name="l02468"></a>02468                 <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($match[4], $match[5], $match[6], 1 + $months, 1 + $match[1], 1970 + $match[3], <span class="keyword">false</span>),
<a name="l02469"></a>02469                                              $this-&gt;mktime($hour,     $minute,   $second,   1 + $month,  1 + $day,      1970 + $year,     <span class="keyword">false</span>), <span class="keyword">false</span>);
<a name="l02470"></a>02470                 <span class="keywordflow">break</span>;
<a name="l02471"></a>02471 
<a name="l02472"></a>02472             <span class="keywordflow">case</span> self::RFC_850:
<a name="l02473"></a>02473                 $result = preg_match(<span class="stringliteral">&#39;/^\w{6,9},\s(\d{2})-(\w{3})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})\s.{3,21}$/&#39;</span>, $date, $match);
<a name="l02474"></a>02474                 <span class="keywordflow">if</span> (!$result) {
<a name="l02475"></a>02475                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02476"></a>02476                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, RFC 850 date format expected&quot;</span>, $date);
<a name="l02477"></a>02477                 }
<a name="l02478"></a>02478 
<a name="l02479"></a>02479                 $months    = $this-&gt;_getDigitFromName($match[2]);
<a name="l02480"></a>02480                 $match[3] = <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">self::getFullYear</a>($match[3]);
<a name="l02481"></a>02481 
<a name="l02482"></a>02482                 <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02483"></a>02483                     --$months;
<a name="l02484"></a>02484                     --$month;
<a name="l02485"></a>02485                     --$match[1];
<a name="l02486"></a>02486                     --$day;
<a name="l02487"></a>02487                     $match[3] -= 1970;
<a name="l02488"></a>02488                     $year     -= 1970;
<a name="l02489"></a>02489                 }
<a name="l02490"></a>02490                 <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($match[4], $match[5], $match[6], 1 + $months, 1 + $match[1], 1970 + $match[3], <span class="keyword">true</span>),
<a name="l02491"></a>02491                                              $this-&gt;mktime($hour,     $minute,   $second,   1 + $month,  1 + $day,      1970 + $year,     <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l02492"></a>02492                 <span class="keywordflow">break</span>;
<a name="l02493"></a>02493 
<a name="l02494"></a>02494             <span class="keywordflow">case</span> self::RFC_1123:
<a name="l02495"></a>02495                 $result = preg_match(<span class="stringliteral">&#39;/^\w{0,3},{0,1}\s{0,1}(\d{1,2})\s(\w{3})\s(\d{2,4})\s(\d{2}):(\d{2}):{0,1}(\d{0,2})\s([+-]{1}\d{4}|\w{1,20})$/&#39;</span>, $date, $match);
<a name="l02496"></a>02496                 <span class="keywordflow">if</span> (!$result) {
<a name="l02497"></a>02497                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02498"></a>02498                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, RFC 1123 date format expected&quot;</span>, $date);
<a name="l02499"></a>02499                 }
<a name="l02500"></a>02500 
<a name="l02501"></a>02501                 $months  = $this-&gt;_getDigitFromName($match[2]);
<a name="l02502"></a>02502 
<a name="l02503"></a>02503                 <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02504"></a>02504                     --$months;
<a name="l02505"></a>02505                     --$month;
<a name="l02506"></a>02506                     --$match[1];
<a name="l02507"></a>02507                     --$day;
<a name="l02508"></a>02508                     $match[3] -= 1970;
<a name="l02509"></a>02509                     $year     -= 1970;
<a name="l02510"></a>02510                 }
<a name="l02511"></a>02511                 <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($match[4], $match[5], $match[6], 1 + $months, 1 + $match[1], 1970 + $match[3], <span class="keyword">true</span>),
<a name="l02512"></a>02512                                              $this-&gt;mktime($hour,     $minute,   $second,   1 + $month,  1 + $day,      1970 + $year,     <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l02513"></a>02513                 <span class="keywordflow">break</span>;
<a name="l02514"></a>02514 
<a name="l02515"></a>02515             <span class="keywordflow">case</span> self::RSS:
<a name="l02516"></a>02516                 $result = preg_match(<span class="stringliteral">&#39;/^\w{3},\s(\d{2})\s(\w{3})\s(\d{2,4})\s(\d{1,2}):(\d{2}):(\d{2})\s.{1,21}$/&#39;</span>, $date, $match);
<a name="l02517"></a>02517                 <span class="keywordflow">if</span> (!$result) {
<a name="l02518"></a>02518                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02519"></a>02519                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, RSS date format expected&quot;</span>, $date);
<a name="l02520"></a>02520                 }
<a name="l02521"></a>02521 
<a name="l02522"></a>02522                 $months  = $this-&gt;_getDigitFromName($match[2]);
<a name="l02523"></a>02523                 $match[3] = <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">self::getFullYear</a>($match[3]);
<a name="l02524"></a>02524 
<a name="l02525"></a>02525                 <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02526"></a>02526                     --$months;
<a name="l02527"></a>02527                     --$month;
<a name="l02528"></a>02528                     --$match[1];
<a name="l02529"></a>02529                     --$day;
<a name="l02530"></a>02530                     $match[3] -= 1970;
<a name="l02531"></a>02531                     $year  -= 1970;
<a name="l02532"></a>02532                 }
<a name="l02533"></a>02533                 <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($match[4], $match[5], $match[6], 1 + $months, 1 + $match[1], 1970 + $match[3], <span class="keyword">true</span>),
<a name="l02534"></a>02534                                              $this-&gt;mktime($hour,     $minute,   $second,   1 + $month,  1 + $day,      1970 + $year,     <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l02535"></a>02535                 <span class="keywordflow">break</span>;
<a name="l02536"></a>02536 
<a name="l02537"></a>02537             <span class="keywordflow">case</span> self::W3C:
<a name="l02538"></a>02538                 $result = preg_match(<span class="stringliteral">&#39;/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})[+-]{1}\d{2}:\d{2}$/&#39;</span>, $date, $match);
<a name="l02539"></a>02539                 <span class="keywordflow">if</span> (!$result) {
<a name="l02540"></a>02540                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02541"></a>02541                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid date ($date) operand, W3C date format expected&quot;</span>, $date);
<a name="l02542"></a>02542                 }
<a name="l02543"></a>02543 
<a name="l02544"></a>02544                 <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02545"></a>02545                     --$match[2];
<a name="l02546"></a>02546                     --$month;
<a name="l02547"></a>02547                     --$match[3];
<a name="l02548"></a>02548                     --$day;
<a name="l02549"></a>02549                     $match[1] -= 1970;
<a name="l02550"></a>02550                     $year     -= 1970;
<a name="l02551"></a>02551                 }
<a name="l02552"></a>02552                 <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime($match[4], $match[5], $match[6], 1 + $match[2], 1 + $match[3], 1970 + $match[1], <span class="keyword">true</span>),
<a name="l02553"></a>02553                                              $this-&gt;mktime($hour,     $minute,   $second,   1 + $month,    1 + $day,      1970 + $year,     <span class="keyword">true</span>), <span class="keyword">false</span>);
<a name="l02554"></a>02554                 <span class="keywordflow">break</span>;
<a name="l02555"></a>02555 
<a name="l02556"></a>02556             <span class="keywordflow">default</span>:
<a name="l02557"></a>02557                 <span class="keywordflow">if</span> (!is_numeric($date) || !empty($part)) {
<a name="l02558"></a>02558                     <span class="keywordflow">try</span> {
<a name="l02559"></a>02559                         <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;format_type&#39;</span>] == <span class="stringliteral">&#39;php&#39;</span>) {
<a name="l02560"></a>02560                             $part = <a class="code" href="class_zend___locale___format.html#a95fc846144cd145417ec7516af6bc436">Zend_Locale_Format::convertPhpToIsoFormat</a>($part);
<a name="l02561"></a>02561                         }
<a name="l02562"></a>02562                         <span class="keywordflow">if</span> (empty($part)) {
<a name="l02563"></a>02563                             $part  = <a class="code" href="class_zend___locale___format.html#aa1d208f5bf369b2103b6a9bfb0d6f2f8">Zend_Locale_Format::getDateFormat</a>($locale) . <span class="stringliteral">&quot; &quot;</span>;
<a name="l02564"></a>02564                             $part .= <a class="code" href="class_zend___locale___format.html#abbb6baa874b851756cdb74dd5d77f434">Zend_Locale_Format::getTimeFormat</a>($locale);
<a name="l02565"></a>02565                         }
<a name="l02566"></a>02566                         $parsed = <a class="code" href="class_zend___date.html#a795dca865c296fd703738c07003cb457">Zend_Locale_Format::getDate</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $part, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale, <span class="stringliteral">&#39;fix_date&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>));
<a name="l02567"></a>02567                         <span class="keywordflow">if</span> ((strpos(strtoupper($part), <span class="stringliteral">&#39;YY&#39;</span>) !== <span class="keyword">false</span>) and (strpos(strtoupper($part), <span class="stringliteral">&#39;YYYY&#39;</span>) === <span class="keyword">false</span>)) {
<a name="l02568"></a>02568                             $parsed[<span class="stringliteral">&#39;year&#39;</span>] = <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">self::getFullYear</a>($parsed[<span class="stringliteral">&#39;year&#39;</span>]);
<a name="l02569"></a>02569                         }
<a name="l02570"></a>02570                         <span class="keywordflow">if</span> (($calc == <span class="stringliteral">&#39;set&#39;</span>) || ($calc == <span class="stringliteral">&#39;cmp&#39;</span>)) {
<a name="l02571"></a>02571                             <span class="keywordflow">if</span> (isset($parsed[<span class="stringliteral">&#39;month&#39;</span>])) {
<a name="l02572"></a>02572                                 --$parsed[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l02573"></a>02573                             } <span class="keywordflow">else</span> {
<a name="l02574"></a>02574                                 $parsed[<span class="stringliteral">&#39;month&#39;</span>] = 0;
<a name="l02575"></a>02575                             }
<a name="l02576"></a>02576                             <span class="keywordflow">if</span> (isset($parsed[<span class="stringliteral">&#39;day&#39;</span>])) {
<a name="l02577"></a>02577                                 --$parsed[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l02578"></a>02578                             } <span class="keywordflow">else</span> {
<a name="l02579"></a>02579                                 $parsed[<span class="stringliteral">&#39;day&#39;</span>] = 0;
<a name="l02580"></a>02580                             }
<a name="l02581"></a>02581                             <span class="keywordflow">if</span> (isset($parsed[<span class="stringliteral">&#39;year&#39;</span>])) {
<a name="l02582"></a>02582                                 $parsed[<span class="stringliteral">&#39;year&#39;</span>] -= 1970;
<a name="l02583"></a>02583                             } <span class="keywordflow">else</span> {
<a name="l02584"></a>02584                                 $parsed[<span class="stringliteral">&#39;year&#39;</span>] = 0;
<a name="l02585"></a>02585                             }
<a name="l02586"></a>02586                         }
<a name="l02587"></a>02587                         <span class="keywordflow">return</span> $this-&gt;_assign($calc, $this-&gt;mktime(
<a name="l02588"></a>02588                             isset($parsed[<span class="stringliteral">&#39;hour&#39;</span>]) ? $parsed[<span class="stringliteral">&#39;hour&#39;</span>] : 0,
<a name="l02589"></a>02589                             isset($parsed[<span class="stringliteral">&#39;minute&#39;</span>]) ? $parsed[<span class="stringliteral">&#39;minute&#39;</span>] : 0,
<a name="l02590"></a>02590                             isset($parsed[<span class="stringliteral">&#39;second&#39;</span>]) ? $parsed[<span class="stringliteral">&#39;second&#39;</span>] : 0,
<a name="l02591"></a>02591                             1 + $parsed[<span class="stringliteral">&#39;month&#39;</span>], 1 + $parsed[<span class="stringliteral">&#39;day&#39;</span>], 1970 + $parsed[<span class="stringliteral">&#39;year&#39;</span>],
<a name="l02592"></a>02592                             <span class="keyword">false</span>), $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>);
<a name="l02593"></a>02593                     } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02594"></a>02594                         <span class="keywordflow">if</span> (!is_numeric($date)) {
<a name="l02595"></a>02595                             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02596"></a>02596                             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage(), $date);
<a name="l02597"></a>02597                         }
<a name="l02598"></a>02598                     }
<a name="l02599"></a>02599                 }
<a name="l02600"></a>02600                 <span class="keywordflow">return</span> $this-&gt;_assign($calc, $date, $this-&gt;getUnixTimestamp(), <span class="keyword">false</span>);
<a name="l02601"></a>02601                 <span class="keywordflow">break</span>;
<a name="l02602"></a>02602         }
<a name="l02603"></a>02603     }
<a name="l02604"></a>02604 
<a name="l02616"></a><a class="code" href="class_zend___date.html#a55eee81a7effbf9c4fd4077dd554b0cc">02616</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a55eee81a7effbf9c4fd4077dd554b0cc">equals</a>($date, $part = null, $locale = null)
<a name="l02617"></a>02617     {
<a name="l02618"></a>02618         $result = $this-&gt;<a class="code" href="class_zend___date.html#a97230b8cbf1567db4c67aa499fa23f3f">compare</a>($date, $part, $locale);
<a name="l02619"></a>02619 
<a name="l02620"></a>02620         <span class="keywordflow">if</span> ($result == 0) {
<a name="l02621"></a>02621             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02622"></a>02622         }
<a name="l02623"></a>02623         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02624"></a>02624     }
<a name="l02625"></a>02625 
<a name="l02637"></a><a class="code" href="class_zend___date.html#abd3a7f4ad92f16a438350c33bdf02b79">02637</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#abd3a7f4ad92f16a438350c33bdf02b79">isEarlier</a>($date, $part = null, $locale = null)
<a name="l02638"></a>02638     {
<a name="l02639"></a>02639         $result = $this-&gt;<a class="code" href="class_zend___date.html#a97230b8cbf1567db4c67aa499fa23f3f">compare</a>($date, $part, $locale);
<a name="l02640"></a>02640 
<a name="l02641"></a>02641         <span class="keywordflow">if</span> ($result == -1) {
<a name="l02642"></a>02642             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02643"></a>02643         }
<a name="l02644"></a>02644         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02645"></a>02645     }
<a name="l02646"></a>02646 
<a name="l02659"></a><a class="code" href="class_zend___date.html#ad880b98a0697a814659494da7a9b4de2">02659</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ad880b98a0697a814659494da7a9b4de2">isLater</a>($date, $part = null, $locale = null)
<a name="l02660"></a>02660     {
<a name="l02661"></a>02661         $result = $this-&gt;<a class="code" href="class_zend___date.html#a97230b8cbf1567db4c67aa499fa23f3f">compare</a>($date, $part, $locale);
<a name="l02662"></a>02662 
<a name="l02663"></a>02663         <span class="keywordflow">if</span> ($result == 1) {
<a name="l02664"></a>02664             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02665"></a>02665         }
<a name="l02666"></a>02666         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02667"></a>02667     }
<a name="l02668"></a>02668 
<a name="l02677"></a><a class="code" href="class_zend___date.html#ad895813fb8d285a279f2ad6a1f86bb48">02677</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ad895813fb8d285a279f2ad6a1f86bb48">getTime</a>($locale = null)
<a name="l02678"></a>02678     {
<a name="l02679"></a>02679         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>(self::TIME_MEDIUM, $locale);
<a name="l02680"></a>02680     }
<a name="l02681"></a>02681 
<a name="l02692"></a>02692     <span class="keyword">private</span> function _time($calc, $time, $format, $locale)
<a name="l02693"></a>02693     {
<a name="l02694"></a>02694         <span class="keywordflow">if</span> ($time === null) {
<a name="l02695"></a>02695             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02696"></a>02696             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;parameter $time must be set, null is not allowed&#39;</span>);
<a name="l02697"></a>02697         }
<a name="l02698"></a>02698 
<a name="l02699"></a>02699         <span class="keywordflow">if</span> ($time instanceof Zend_Date) {
<a name="l02700"></a>02700             <span class="comment">// extract time from object</span>
<a name="l02701"></a>02701             $time = $time-&gt;get(<span class="stringliteral">&#39;HH:mm:ss&#39;</span>);
<a name="l02702"></a>02702         } <span class="keywordflow">else</span> {
<a name="l02703"></a>02703             <span class="keywordflow">if</span> (is_array($time)) {
<a name="l02704"></a>02704                 <span class="keywordflow">if</span> ((isset($time[<span class="stringliteral">&#39;hour&#39;</span>]) === <span class="keyword">true</span>) or (isset($time[<span class="stringliteral">&#39;minute&#39;</span>]) === <span class="keyword">true</span>) or
<a name="l02705"></a>02705                     (isset($time[<span class="stringliteral">&#39;second&#39;</span>]) === <span class="keyword">true</span>)) {
<a name="l02706"></a>02706                     $parsed = $time;
<a name="l02707"></a>02707                 } <span class="keywordflow">else</span> {
<a name="l02708"></a>02708                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02709"></a>02709                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;no hour, minute or second given in array&quot;</span>);
<a name="l02710"></a>02710                 }
<a name="l02711"></a>02711             } <span class="keywordflow">else</span> {
<a name="l02712"></a>02712                 <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;format_type&#39;</span>] == <span class="stringliteral">&#39;php&#39;</span>) {
<a name="l02713"></a>02713                     $format = <a class="code" href="class_zend___locale___format.html#a95fc846144cd145417ec7516af6bc436">Zend_Locale_Format::convertPhpToIsoFormat</a>($format);
<a name="l02714"></a>02714                 }
<a name="l02715"></a>02715                 <span class="keywordflow">try</span> {
<a name="l02716"></a>02716                     <span class="keywordflow">if</span> ($locale === null) {
<a name="l02717"></a>02717                         $locale = $this-&gt;<a class="code" href="class_zend___date.html#ad532b661eb33c3e755bd3fa8ff1bd7af">getLocale</a>();
<a name="l02718"></a>02718                     }
<a name="l02719"></a>02719 
<a name="l02720"></a>02720                     $parsed = <a class="code" href="class_zend___date.html#ad895813fb8d285a279f2ad6a1f86bb48">Zend_Locale_Format::getTime</a>($time, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>));
<a name="l02721"></a>02721                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02722"></a>02722                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02723"></a>02723                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage());
<a name="l02724"></a>02724                 }
<a name="l02725"></a>02725             }
<a name="l02726"></a>02726             $time  = str_pad($parsed[<span class="stringliteral">&#39;hour&#39;</span>], 2, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT) . <span class="stringliteral">&quot;:&quot;</span>;
<a name="l02727"></a>02727             $time .= str_pad($parsed[<span class="stringliteral">&#39;minute&#39;</span>], 2, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT) . <span class="stringliteral">&quot;:&quot;</span>;
<a name="l02728"></a>02728             $time .= str_pad($parsed[<span class="stringliteral">&#39;second&#39;</span>], 2, <span class="charliteral">&#39;0&#39;</span>, STR_PAD_LEFT);
<a name="l02729"></a>02729         }
<a name="l02730"></a>02730 
<a name="l02731"></a>02731         $return = $this-&gt;_calcdetail($calc, $time, self::TIMES, <span class="stringliteral">&#39;de&#39;</span>);
<a name="l02732"></a>02732         <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;cmp&#39;</span>) {
<a name="l02733"></a>02733             <span class="keywordflow">return</span> $this;
<a name="l02734"></a>02734         }
<a name="l02735"></a>02735         <span class="keywordflow">return</span> $return;
<a name="l02736"></a>02736     }
<a name="l02737"></a>02737 
<a name="l02738"></a>02738 
<a name="l02751"></a><a class="code" href="class_zend___date.html#adea6f36148869ce1fa375fdb6afe367b">02751</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#adea6f36148869ce1fa375fdb6afe367b">setTime</a>($time, $format = null, $locale = null)
<a name="l02752"></a>02752     {
<a name="l02753"></a>02753         <span class="keywordflow">return</span> $this-&gt;_time(<span class="stringliteral">&#39;set&#39;</span>, $time, $format, $locale);
<a name="l02754"></a>02754     }
<a name="l02755"></a>02755 
<a name="l02756"></a>02756 
<a name="l02769"></a><a class="code" href="class_zend___date.html#abd0b3f5b953a3b7201ba8f1184c394e6">02769</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#abd0b3f5b953a3b7201ba8f1184c394e6">addTime</a>($time, $format = null, $locale = null)
<a name="l02770"></a>02770     {
<a name="l02771"></a>02771         <span class="keywordflow">return</span> $this-&gt;_time(<span class="stringliteral">&#39;add&#39;</span>, $time, $format, $locale);
<a name="l02772"></a>02772     }
<a name="l02773"></a>02773 
<a name="l02774"></a>02774 
<a name="l02787"></a><a class="code" href="class_zend___date.html#aab902b8c77d2b09176e6eca5642c7015">02787</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#aab902b8c77d2b09176e6eca5642c7015">subTime</a>($time, $format = null, $locale = null)
<a name="l02788"></a>02788     {
<a name="l02789"></a>02789         <span class="keywordflow">return</span> $this-&gt;_time(<span class="stringliteral">&#39;sub&#39;</span>, $time, $format, $locale);
<a name="l02790"></a>02790     }
<a name="l02791"></a>02791 
<a name="l02792"></a>02792 
<a name="l02805"></a><a class="code" href="class_zend___date.html#a50ac937da33f9603d2d96e6707991a93">02805</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a50ac937da33f9603d2d96e6707991a93">compareTime</a>($time, $format = null, $locale = null)
<a name="l02806"></a>02806     {
<a name="l02807"></a>02807         <span class="keywordflow">return</span> $this-&gt;_time(<span class="stringliteral">&#39;cmp&#39;</span>, $time, $format, $locale);
<a name="l02808"></a>02808     }
<a name="l02809"></a>02809 
<a name="l02816"></a><a class="code" href="class_zend___date.html#a795dca865c296fd703738c07003cb457">02816</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a795dca865c296fd703738c07003cb457">getDate</a>($locale = null)
<a name="l02817"></a>02817     {
<a name="l02818"></a>02818         $date = $this-&gt;<a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>(self::DATE_MEDIUM, $locale);
<a name="l02819"></a>02819         $date-&gt;addTimestamp($this-&gt;getGmtOffset());
<a name="l02820"></a>02820         <span class="keywordflow">return</span> $date;
<a name="l02821"></a>02821     }
<a name="l02822"></a>02822 
<a name="l02833"></a>02833     <span class="keyword">private</span> function _date($calc, $date, $format, $locale)
<a name="l02834"></a>02834     {
<a name="l02835"></a>02835         <span class="keywordflow">if</span> ($date === null) {
<a name="l02836"></a>02836             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02837"></a>02837             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;parameter $date must be set, null is not allowed&#39;</span>);
<a name="l02838"></a>02838         }
<a name="l02839"></a>02839 
<a name="l02840"></a>02840         <span class="keywordflow">if</span> ($date instanceof Zend_Date) {
<a name="l02841"></a>02841             <span class="comment">// extract date from object</span>
<a name="l02842"></a>02842             $date = $date-&gt;get(<span class="stringliteral">&#39;d.M.Y&#39;</span>);
<a name="l02843"></a>02843         } <span class="keywordflow">else</span> {
<a name="l02844"></a>02844             <span class="keywordflow">if</span> (is_array($date)) {
<a name="l02845"></a>02845                 <span class="keywordflow">if</span> ((isset($date[<span class="stringliteral">&#39;year&#39;</span>]) === <span class="keyword">true</span>) or (isset($date[<span class="stringliteral">&#39;month&#39;</span>]) === <span class="keyword">true</span>) or
<a name="l02846"></a>02846                     (isset($date[<span class="stringliteral">&#39;day&#39;</span>]) === <span class="keyword">true</span>)) {
<a name="l02847"></a>02847                     $parsed = $date;
<a name="l02848"></a>02848                 } <span class="keywordflow">else</span> {
<a name="l02849"></a>02849                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02850"></a>02850                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;no day,month or year given in array&quot;</span>);
<a name="l02851"></a>02851                 }
<a name="l02852"></a>02852             } <span class="keywordflow">else</span> {
<a name="l02853"></a>02853                 <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;format_type&#39;</span>] == <span class="stringliteral">&#39;php&#39;</span>) {
<a name="l02854"></a>02854                     $format = <a class="code" href="class_zend___locale___format.html#a95fc846144cd145417ec7516af6bc436">Zend_Locale_Format::convertPhpToIsoFormat</a>($format);
<a name="l02855"></a>02855                 }
<a name="l02856"></a>02856                 <span class="keywordflow">try</span> {
<a name="l02857"></a>02857                     <span class="keywordflow">if</span> ($locale === null) {
<a name="l02858"></a>02858                         $locale = $this-&gt;<a class="code" href="class_zend___date.html#ad532b661eb33c3e755bd3fa8ff1bd7af">getLocale</a>();
<a name="l02859"></a>02859                     }
<a name="l02860"></a>02860 
<a name="l02861"></a>02861                     $parsed = <a class="code" href="class_zend___date.html#a795dca865c296fd703738c07003cb457">Zend_Locale_Format::getDate</a>($date, array(<span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>));
<a name="l02862"></a>02862                     <span class="keywordflow">if</span> ((strpos(strtoupper($format), <span class="stringliteral">&#39;YY&#39;</span>) !== <span class="keyword">false</span>) and (strpos(strtoupper($format), <span class="stringliteral">&#39;YYYY&#39;</span>) === <span class="keyword">false</span>)) {
<a name="l02863"></a>02863                         $parsed[<span class="stringliteral">&#39;year&#39;</span>] = <a class="code" href="class_zend___date.html#aa6664619e61f053a6e901bf5bf6e52f5">self::getFullYear</a>($parsed[<span class="stringliteral">&#39;year&#39;</span>]);
<a name="l02864"></a>02864                     }
<a name="l02865"></a>02865                 } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l02866"></a>02866                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l02867"></a>02867                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage());
<a name="l02868"></a>02868                 }
<a name="l02869"></a>02869             }
<a name="l02870"></a>02870             $date  = $parsed[<span class="stringliteral">&#39;day&#39;</span>] . <span class="stringliteral">&quot;.&quot;</span> . $parsed[<span class="stringliteral">&#39;month&#39;</span>] . <span class="stringliteral">&quot;.&quot;</span> . $parsed[<span class="stringliteral">&#39;year&#39;</span>];
<a name="l02871"></a>02871         }
<a name="l02872"></a>02872 
<a name="l02873"></a>02873         $return = $this-&gt;_calcdetail($calc, $date, self::DATE_MEDIUM, <span class="stringliteral">&#39;de&#39;</span>);
<a name="l02874"></a>02874         <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;cmp&#39;</span>) {
<a name="l02875"></a>02875             <span class="keywordflow">return</span> $this;
<a name="l02876"></a>02876         }
<a name="l02877"></a>02877         <span class="keywordflow">return</span> $return;
<a name="l02878"></a>02878     }
<a name="l02879"></a>02879 
<a name="l02880"></a>02880 
<a name="l02893"></a><a class="code" href="class_zend___date.html#af7291391f97d1a9a9ffe8297bf3ec5c1">02893</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#af7291391f97d1a9a9ffe8297bf3ec5c1">setDate</a>($date, $format = null, $locale = null)
<a name="l02894"></a>02894     {
<a name="l02895"></a>02895         <span class="keywordflow">return</span> $this-&gt;_date(<span class="stringliteral">&#39;set&#39;</span>, $date, $format, $locale);
<a name="l02896"></a>02896     }
<a name="l02897"></a>02897 
<a name="l02898"></a>02898 
<a name="l02911"></a><a class="code" href="class_zend___date.html#a104a3e8191681dbddcd9df09993d23ff">02911</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a104a3e8191681dbddcd9df09993d23ff">addDate</a>($date, $format = null, $locale = null)
<a name="l02912"></a>02912     {
<a name="l02913"></a>02913         <span class="keywordflow">return</span> $this-&gt;_date(<span class="stringliteral">&#39;add&#39;</span>, $date, $format, $locale);
<a name="l02914"></a>02914     }
<a name="l02915"></a>02915 
<a name="l02916"></a>02916 
<a name="l02930"></a><a class="code" href="class_zend___date.html#a1b8e21c90846e07c3afd6e25d2aca822">02930</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a1b8e21c90846e07c3afd6e25d2aca822">subDate</a>($date, $format = null, $locale = null)
<a name="l02931"></a>02931     {
<a name="l02932"></a>02932         <span class="keywordflow">return</span> $this-&gt;_date(<span class="stringliteral">&#39;sub&#39;</span>, $date, $format, $locale);
<a name="l02933"></a>02933     }
<a name="l02934"></a>02934 
<a name="l02935"></a>02935 
<a name="l02949"></a><a class="code" href="class_zend___date.html#a633b53debcad6f3391cbf56933645801">02949</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a633b53debcad6f3391cbf56933645801">compareDate</a>($date, $format = null, $locale = null)
<a name="l02950"></a>02950     {
<a name="l02951"></a>02951         <span class="keywordflow">return</span> $this-&gt;_date(<span class="stringliteral">&#39;cmp&#39;</span>, $date, $format, $locale);
<a name="l02952"></a>02952     }
<a name="l02953"></a>02953 
<a name="l02954"></a>02954 
<a name="l02964"></a><a class="code" href="class_zend___date.html#a5fad8629a1fe9693128b2ab65e0ad7ba">02964</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a5fad8629a1fe9693128b2ab65e0ad7ba">getIso</a>($locale = null)
<a name="l02965"></a>02965     {
<a name="l02966"></a>02966         <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(self::ISO_8601, $locale);
<a name="l02967"></a>02967     }
<a name="l02968"></a>02968 
<a name="l02969"></a>02969 
<a name="l02981"></a><a class="code" href="class_zend___date.html#a71a328b2e8b5ed70a1560f910db65a13">02981</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a71a328b2e8b5ed70a1560f910db65a13">setIso</a>($date, $locale = null)
<a name="l02982"></a>02982     {
<a name="l02983"></a>02983         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;set&#39;</span>, $date, <span class="stringliteral">&#39;iso&#39;</span>, self::ISO_8601, $locale);
<a name="l02984"></a>02984     }
<a name="l02985"></a>02985 
<a name="l02986"></a>02986 
<a name="l02998"></a><a class="code" href="class_zend___date.html#a632970ff130a950d92989b85368583c1">02998</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a632970ff130a950d92989b85368583c1">addIso</a>($date, $locale = null)
<a name="l02999"></a>02999     {
<a name="l03000"></a>03000         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;add&#39;</span>, $date, <span class="stringliteral">&#39;iso&#39;</span>, self::ISO_8601, $locale);
<a name="l03001"></a>03001     }
<a name="l03002"></a>03002 
<a name="l03003"></a>03003 
<a name="l03015"></a><a class="code" href="class_zend___date.html#abafa964ff01ab4443de021d9abeaa183">03015</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#abafa964ff01ab4443de021d9abeaa183">subIso</a>($date, $locale = null)
<a name="l03016"></a>03016     {
<a name="l03017"></a>03017         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;sub&#39;</span>, $date, <span class="stringliteral">&#39;iso&#39;</span>, self::ISO_8601, $locale);
<a name="l03018"></a>03018     }
<a name="l03019"></a>03019 
<a name="l03020"></a>03020 
<a name="l03032"></a><a class="code" href="class_zend___date.html#a05055d5c0950cab22840c6596f19e574">03032</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a05055d5c0950cab22840c6596f19e574">compareIso</a>($date, $locale = null)
<a name="l03033"></a>03033     {
<a name="l03034"></a>03034         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;cmp&#39;</span>, $date, <span class="stringliteral">&#39;iso&#39;</span>, self::ISO_8601, $locale);
<a name="l03035"></a>03035     }
<a name="l03036"></a>03036 
<a name="l03037"></a>03037 
<a name="l03045"></a><a class="code" href="class_zend___date.html#a2a5c7849914616a991d696c279c7882d">03045</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a2a5c7849914616a991d696c279c7882d">getArpa</a>($locale = null)
<a name="l03046"></a>03046     {
<a name="l03047"></a>03047         <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(self::RFC_822, $locale);
<a name="l03048"></a>03048     }
<a name="l03049"></a>03049 
<a name="l03050"></a>03050 
<a name="l03062"></a><a class="code" href="class_zend___date.html#a1bcb05dc627e6bc025e8a0c01a2755e0">03062</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a1bcb05dc627e6bc025e8a0c01a2755e0">setArpa</a>($date, $locale = null)
<a name="l03063"></a>03063     {
<a name="l03064"></a>03064         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;set&#39;</span>, $date, <span class="stringliteral">&#39;arpa&#39;</span>, self::RFC_822, $locale);
<a name="l03065"></a>03065     }
<a name="l03066"></a>03066 
<a name="l03067"></a>03067 
<a name="l03080"></a><a class="code" href="class_zend___date.html#a17e115cb71d1ebc33bd24e860e0d5b8d">03080</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a17e115cb71d1ebc33bd24e860e0d5b8d">addArpa</a>($date, $locale = null)
<a name="l03081"></a>03081     {
<a name="l03082"></a>03082         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;add&#39;</span>, $date, <span class="stringliteral">&#39;arpa&#39;</span>, self::RFC_822, $locale);
<a name="l03083"></a>03083     }
<a name="l03084"></a>03084 
<a name="l03085"></a>03085 
<a name="l03098"></a><a class="code" href="class_zend___date.html#a7c096e0e84555395ef13f4b908ced86a">03098</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a7c096e0e84555395ef13f4b908ced86a">subArpa</a>($date, $locale = null)
<a name="l03099"></a>03099     {
<a name="l03100"></a>03100         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;sub&#39;</span>, $date, <span class="stringliteral">&#39;arpa&#39;</span>, self::RFC_822, $locale);
<a name="l03101"></a>03101     }
<a name="l03102"></a>03102 
<a name="l03103"></a>03103 
<a name="l03116"></a><a class="code" href="class_zend___date.html#abc7d08f79551c03f21030fad7f8680b8">03116</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#abc7d08f79551c03f21030fad7f8680b8">compareArpa</a>($date, $locale = null)
<a name="l03117"></a>03117     {
<a name="l03118"></a>03118         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;cmp&#39;</span>, $date, <span class="stringliteral">&#39;arpa&#39;</span>, self::RFC_822, $locale);
<a name="l03119"></a>03119     }
<a name="l03120"></a>03120 
<a name="l03121"></a>03121 
<a name="l03128"></a>03128     <span class="keyword">private</span> function _checkLocation($location)
<a name="l03129"></a>03129     {
<a name="l03130"></a>03130         <span class="keywordflow">if</span> (!isset($location[<span class="stringliteral">&#39;longitude&#39;</span>]) or !isset($location[<span class="stringliteral">&#39;latitude&#39;</span>])) {
<a name="l03131"></a>03131             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03132"></a>03132             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;Location must include \&#39;longitude\&#39; and \&#39;latitude\&#39;&#39;</span>, $location);
<a name="l03133"></a>03133         }
<a name="l03134"></a>03134         <span class="keywordflow">if</span> (($location[<span class="stringliteral">&#39;longitude&#39;</span>] &gt; 180) or ($location[<span class="stringliteral">&#39;longitude&#39;</span>] &lt; -180)) {
<a name="l03135"></a>03135             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03136"></a>03136             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;Longitude must be between -180 and 180&#39;</span>, $location);
<a name="l03137"></a>03137         }
<a name="l03138"></a>03138         <span class="keywordflow">if</span> (($location[<span class="stringliteral">&#39;latitude&#39;</span>] &gt; 90) or ($location[<span class="stringliteral">&#39;latitude&#39;</span>] &lt; -90)) {
<a name="l03139"></a>03139             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03140"></a>03140             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;Latitude must be between -90 and 90&#39;</span>, $location);
<a name="l03141"></a>03141         }
<a name="l03142"></a>03142 
<a name="l03143"></a>03143         <span class="keywordflow">if</span> (!isset($location[<span class="stringliteral">&#39;horizon&#39;</span>])){
<a name="l03144"></a>03144             $location[<span class="stringliteral">&#39;horizon&#39;</span>] = <span class="stringliteral">&#39;effective&#39;</span>;
<a name="l03145"></a>03145         }
<a name="l03146"></a>03146 
<a name="l03147"></a>03147         <span class="keywordflow">switch</span> ($location[<span class="stringliteral">&#39;horizon&#39;</span>]) {
<a name="l03148"></a>03148             <span class="keywordflow">case</span> <span class="stringliteral">&#39;civil&#39;</span> :
<a name="l03149"></a>03149                 <span class="keywordflow">return</span> -0.104528;
<a name="l03150"></a>03150                 <span class="keywordflow">break</span>;
<a name="l03151"></a>03151             <span class="keywordflow">case</span> <span class="stringliteral">&#39;nautic&#39;</span> :
<a name="l03152"></a>03152                 <span class="keywordflow">return</span> -0.207912;
<a name="l03153"></a>03153                 <span class="keywordflow">break</span>;
<a name="l03154"></a>03154             <span class="keywordflow">case</span> <span class="stringliteral">&#39;astronomic&#39;</span> :
<a name="l03155"></a>03155                 <span class="keywordflow">return</span> -0.309017;
<a name="l03156"></a>03156                 <span class="keywordflow">break</span>;
<a name="l03157"></a>03157             <span class="keywordflow">default</span> :
<a name="l03158"></a>03158                 <span class="keywordflow">return</span> -0.0145439;
<a name="l03159"></a>03159                 <span class="keywordflow">break</span>;
<a name="l03160"></a>03160         }
<a name="l03161"></a>03161     }
<a name="l03162"></a>03162 
<a name="l03163"></a>03163 
<a name="l03175"></a><a class="code" href="class_zend___date.html#acb2dd865e2a95e382eb2cf415e449d9f">03175</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#acb2dd865e2a95e382eb2cf415e449d9f">getSunrise</a>($location)
<a name="l03176"></a>03176     {
<a name="l03177"></a>03177         $horizon = $this-&gt;_checkLocation($location);
<a name="l03178"></a>03178         $result = clone $this;
<a name="l03179"></a>03179         $result-&gt;set($this-&gt;calcSun($location, $horizon, <span class="keyword">true</span>), self::TIMESTAMP);
<a name="l03180"></a>03180         <span class="keywordflow">return</span> $result;
<a name="l03181"></a>03181     }
<a name="l03182"></a>03182 
<a name="l03183"></a>03183 
<a name="l03195"></a><a class="code" href="class_zend___date.html#afa458787da1dc9c1b9b723f4441e4f59">03195</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#afa458787da1dc9c1b9b723f4441e4f59">getSunset</a>($location)
<a name="l03196"></a>03196     {
<a name="l03197"></a>03197         $horizon = $this-&gt;_checkLocation($location);
<a name="l03198"></a>03198         $result = clone $this;
<a name="l03199"></a>03199         $result-&gt;set($this-&gt;calcSun($location, $horizon, <span class="keyword">false</span>), self::TIMESTAMP);
<a name="l03200"></a>03200         <span class="keywordflow">return</span> $result;
<a name="l03201"></a>03201     }
<a name="l03202"></a>03202 
<a name="l03203"></a>03203 
<a name="l03215"></a><a class="code" href="class_zend___date.html#a4536b859579d1ae124c91bea739b1045">03215</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a4536b859579d1ae124c91bea739b1045">getSunInfo</a>($location)
<a name="l03216"></a>03216     {
<a name="l03217"></a>03217         $suninfo = array();
<a name="l03218"></a>03218         <span class="keywordflow">for</span> ($i = 0; $i &lt; 4; ++$i) {
<a name="l03219"></a>03219             <span class="keywordflow">switch</span> ($i) {
<a name="l03220"></a>03220                 <span class="keywordflow">case</span> 0 :
<a name="l03221"></a>03221                     $location[<span class="stringliteral">&#39;horizon&#39;</span>] = <span class="stringliteral">&#39;effective&#39;</span>;
<a name="l03222"></a>03222                     <span class="keywordflow">break</span>;
<a name="l03223"></a>03223                 <span class="keywordflow">case</span> 1 :
<a name="l03224"></a>03224                     $location[<span class="stringliteral">&#39;horizon&#39;</span>] = <span class="stringliteral">&#39;civil&#39;</span>;
<a name="l03225"></a>03225                     <span class="keywordflow">break</span>;
<a name="l03226"></a>03226                 <span class="keywordflow">case</span> 2 :
<a name="l03227"></a>03227                     $location[<span class="stringliteral">&#39;horizon&#39;</span>] = <span class="stringliteral">&#39;nautic&#39;</span>;
<a name="l03228"></a>03228                     <span class="keywordflow">break</span>;
<a name="l03229"></a>03229                 <span class="keywordflow">case</span> 3 :
<a name="l03230"></a>03230                     $location[<span class="stringliteral">&#39;horizon&#39;</span>] = <span class="stringliteral">&#39;astronomic&#39;</span>;
<a name="l03231"></a>03231                     <span class="keywordflow">break</span>;
<a name="l03232"></a>03232             }
<a name="l03233"></a>03233             $horizon = $this-&gt;_checkLocation($location);
<a name="l03234"></a>03234             $result = clone $this;
<a name="l03235"></a>03235             $result-&gt;set($this-&gt;calcSun($location, $horizon, <span class="keyword">true</span>), self::TIMESTAMP);
<a name="l03236"></a>03236             $suninfo[<span class="stringliteral">&#39;sunrise&#39;</span>][$location[<span class="stringliteral">&#39;horizon&#39;</span>]] = $result;
<a name="l03237"></a>03237             $result = clone $this;
<a name="l03238"></a>03238             $result-&gt;set($this-&gt;calcSun($location, $horizon, <span class="keyword">false</span>), self::TIMESTAMP);
<a name="l03239"></a>03239             $suninfo[<span class="stringliteral">&#39;sunset&#39;</span>][$location[<span class="stringliteral">&#39;horizon&#39;</span>]]  = $result;
<a name="l03240"></a>03240         }
<a name="l03241"></a>03241         <span class="keywordflow">return</span> $suninfo;
<a name="l03242"></a>03242     }
<a name="l03243"></a>03243 
<a name="l03244"></a>03244 
<a name="l03251"></a><a class="code" href="class_zend___date.html#ae137bfd3cb31a5164d75b642c99fcd27">03251</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___date.html#ae137bfd3cb31a5164d75b642c99fcd27">checkLeapYear</a>($year)
<a name="l03252"></a>03252     {
<a name="l03253"></a>03253         <span class="keywordflow">if</span> ($year instanceof Zend_Date) {
<a name="l03254"></a>03254             $year = (int) $year-&gt;get(self::YEAR);
<a name="l03255"></a>03255         }
<a name="l03256"></a>03256         <span class="keywordflow">if</span> (is_array($year)) {
<a name="l03257"></a>03257             <span class="keywordflow">if</span> (isset($year[<span class="stringliteral">&#39;year&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l03258"></a>03258                 $year = $year[<span class="stringliteral">&#39;year&#39;</span>];
<a name="l03259"></a>03259             } <span class="keywordflow">else</span> {
<a name="l03260"></a>03260                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03261"></a>03261                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;no year given in array&quot;</span>);
<a name="l03262"></a>03262             }
<a name="l03263"></a>03263         }
<a name="l03264"></a>03264         <span class="keywordflow">if</span> (!is_numeric($year)) {
<a name="l03265"></a>03265             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03266"></a>03266             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;year ($year) has to be integer for checkLeapYear()&quot;</span>, $year);
<a name="l03267"></a>03267         }
<a name="l03268"></a>03268 
<a name="l03269"></a>03269         <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) parent::isYearLeapYear($year);
<a name="l03270"></a>03270     }
<a name="l03271"></a>03271 
<a name="l03272"></a>03272 
<a name="l03278"></a><a class="code" href="class_zend___date.html#a7c7acc5dcd823781c3db16369895db1b">03278</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a7c7acc5dcd823781c3db16369895db1b">isLeapYear</a>()
<a name="l03279"></a>03279     {
<a name="l03280"></a>03280         <span class="keywordflow">return</span> <a class="code" href="class_zend___date.html#ae137bfd3cb31a5164d75b642c99fcd27">self::checkLeapYear</a>($this);
<a name="l03281"></a>03281     }
<a name="l03282"></a>03282 
<a name="l03283"></a>03283 
<a name="l03289"></a><a class="code" href="class_zend___date.html#a56353ab1f16bf8cb483676ed0d3e048a">03289</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a56353ab1f16bf8cb483676ed0d3e048a">isToday</a>()
<a name="l03290"></a>03290     {
<a name="l03291"></a>03291         $today = $this-&gt;date(<span class="stringliteral">&#39;Ymd&#39;</span>, $this-&gt;_getTime());
<a name="l03292"></a>03292         $day   = $this-&gt;date(<span class="stringliteral">&#39;Ymd&#39;</span>, $this-&gt;getUnixTimestamp());
<a name="l03293"></a>03293         <span class="keywordflow">return</span> ($today == $day);
<a name="l03294"></a>03294     }
<a name="l03295"></a>03295 
<a name="l03296"></a>03296 
<a name="l03302"></a><a class="code" href="class_zend___date.html#a666e8b5c3b6ef3b0905019db86f15102">03302</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a666e8b5c3b6ef3b0905019db86f15102">isYesterday</a>()
<a name="l03303"></a>03303     {
<a name="l03304"></a>03304         list($year, $month, $day) = explode(<span class="charliteral">&#39;-&#39;</span>, $this-&gt;date(<span class="stringliteral">&#39;Y-m-d&#39;</span>, $this-&gt;_getTime()));
<a name="l03305"></a>03305         <span class="comment">// adjusts for leap days and DST changes that are timezone specific</span>
<a name="l03306"></a>03306         $yesterday = $this-&gt;date(<span class="stringliteral">&#39;Ymd&#39;</span>, $this-&gt;mktime(0, 0, 0, $month, $day -1, $year));
<a name="l03307"></a>03307         $day   = $this-&gt;date(<span class="stringliteral">&#39;Ymd&#39;</span>, $this-&gt;getUnixTimestamp());
<a name="l03308"></a>03308         <span class="keywordflow">return</span> $day == $yesterday;
<a name="l03309"></a>03309     }
<a name="l03310"></a>03310 
<a name="l03311"></a>03311 
<a name="l03317"></a><a class="code" href="class_zend___date.html#a2a7a4ce57d40edc919e14b6d5d1270da">03317</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a2a7a4ce57d40edc919e14b6d5d1270da">isTomorrow</a>()
<a name="l03318"></a>03318     {
<a name="l03319"></a>03319         list($year, $month, $day) = explode(<span class="charliteral">&#39;-&#39;</span>, $this-&gt;date(<span class="stringliteral">&#39;Y-m-d&#39;</span>, $this-&gt;_getTime()));
<a name="l03320"></a>03320         <span class="comment">// adjusts for leap days and DST changes that are timezone specific</span>
<a name="l03321"></a>03321         $tomorrow = $this-&gt;date(<span class="stringliteral">&#39;Ymd&#39;</span>, $this-&gt;mktime(0, 0, 0, $month, $day +1, $year));
<a name="l03322"></a>03322         $day   = $this-&gt;date(<span class="stringliteral">&#39;Ymd&#39;</span>, $this-&gt;getUnixTimestamp());
<a name="l03323"></a>03323         <span class="keywordflow">return</span> $day == $tomorrow;
<a name="l03324"></a>03324     }
<a name="l03325"></a>03325 
<a name="l03332"></a><a class="code" href="class_zend___date.html#a45a5028322ce537215205b73165ecef4">03332</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___date.html#a45a5028322ce537215205b73165ecef4">now</a>($locale = null)
<a name="l03333"></a>03333     {
<a name="l03334"></a>03334         <span class="keywordflow">return</span> <span class="keyword">new</span> Zend_Date(time(), self::TIMESTAMP, $locale);
<a name="l03335"></a>03335     }
<a name="l03336"></a>03336 
<a name="l03347"></a>03347     <span class="keyword">private</span> function _calcdetail($calc, $date, $type, $locale)
<a name="l03348"></a>03348     {
<a name="l03349"></a>03349         <span class="keywordflow">switch</span>($calc) {
<a name="l03350"></a>03350             <span class="keywordflow">case</span> <span class="stringliteral">&#39;set&#39;</span> :
<a name="l03351"></a>03351                 <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>($date, $type, $locale);
<a name="l03352"></a>03352                 <span class="keywordflow">break</span>;
<a name="l03353"></a>03353             <span class="keywordflow">case</span> <span class="stringliteral">&#39;add&#39;</span> :
<a name="l03354"></a>03354                 <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#ace913ddc75571d75850d9fd8488ea5e2">add</a>($date, $type, $locale);
<a name="l03355"></a>03355                 <span class="keywordflow">break</span>;
<a name="l03356"></a>03356             <span class="keywordflow">case</span> <span class="stringliteral">&#39;sub&#39;</span> :
<a name="l03357"></a>03357                 <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#adde4d144b0986a76610eb1309fdf4a0b">sub</a>($date, $type, $locale);
<a name="l03358"></a>03358                 <span class="keywordflow">break</span>;
<a name="l03359"></a>03359         }
<a name="l03360"></a>03360         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#a97230b8cbf1567db4c67aa499fa23f3f">compare</a>($date, $type, $locale);
<a name="l03361"></a>03361     }
<a name="l03362"></a>03362 
<a name="l03372"></a>03372     <span class="keyword">private</span> function _calcvalue($calc, $value, $type, $parameter, $locale)
<a name="l03373"></a>03373     {
<a name="l03374"></a>03374         <span class="keywordflow">if</span> ($value === null) {
<a name="l03375"></a>03375             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03376"></a>03376             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;parameter $type must be set, null is not allowed&quot;</span>);
<a name="l03377"></a>03377         }
<a name="l03378"></a>03378 
<a name="l03379"></a>03379         <span class="keywordflow">if</span> ($locale === null) {
<a name="l03380"></a>03380             $locale = $this-&gt;<a class="code" href="class_zend___date.html#ad532b661eb33c3e755bd3fa8ff1bd7af">getLocale</a>();
<a name="l03381"></a>03381         }
<a name="l03382"></a>03382 
<a name="l03383"></a>03383         <span class="keywordflow">if</span> ($value instanceof Zend_Date) {
<a name="l03384"></a>03384             <span class="comment">// extract value from object</span>
<a name="l03385"></a>03385             $value = $value-&gt;get($parameter, $locale);
<a name="l03386"></a>03386         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!is_array($value) &amp;&amp; !is_numeric($value) &amp;&amp; ($type != <span class="stringliteral">&#39;iso&#39;</span>) &amp;&amp; ($type != <span class="stringliteral">&#39;arpa&#39;</span>)) {
<a name="l03387"></a>03387             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03388"></a>03388             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid $type ($value) operand&quot;</span>, $value);
<a name="l03389"></a>03389         }
<a name="l03390"></a>03390 
<a name="l03391"></a>03391         $return = $this-&gt;_calcdetail($calc, $value, $parameter, $locale);
<a name="l03392"></a>03392         <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;cmp&#39;</span>) {
<a name="l03393"></a>03393             <span class="keywordflow">return</span> $this;
<a name="l03394"></a>03394         }
<a name="l03395"></a>03395         <span class="keywordflow">return</span> $return;
<a name="l03396"></a>03396     }
<a name="l03397"></a>03397 
<a name="l03398"></a>03398 
<a name="l03406"></a><a class="code" href="class_zend___date.html#a064e5c7fc5820ba6dd2aefa3227f314d">03406</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a064e5c7fc5820ba6dd2aefa3227f314d">getYear</a>($locale = null)
<a name="l03407"></a>03407     {
<a name="l03408"></a>03408         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>(self::YEAR, $locale);
<a name="l03409"></a>03409     }
<a name="l03410"></a>03410 
<a name="l03411"></a>03411 
<a name="l03425"></a><a class="code" href="class_zend___date.html#a7a09fcc6121cd7a9cb084c0f4a6d0e5d">03425</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a7a09fcc6121cd7a9cb084c0f4a6d0e5d">setYear</a>($year, $locale = null)
<a name="l03426"></a>03426     {
<a name="l03427"></a>03427         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;set&#39;</span>, $year, <span class="stringliteral">&#39;year&#39;</span>, self::YEAR, $locale);
<a name="l03428"></a>03428     }
<a name="l03429"></a>03429 
<a name="l03430"></a>03430 
<a name="l03444"></a><a class="code" href="class_zend___date.html#a05d087f988496792b9edd0ae79610fbb">03444</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a05d087f988496792b9edd0ae79610fbb">addYear</a>($year, $locale = null)
<a name="l03445"></a>03445     {
<a name="l03446"></a>03446         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;add&#39;</span>, $year, <span class="stringliteral">&#39;year&#39;</span>, self::YEAR, $locale);
<a name="l03447"></a>03447     }
<a name="l03448"></a>03448 
<a name="l03449"></a>03449 
<a name="l03463"></a><a class="code" href="class_zend___date.html#ab4d02c205cfe80df9dc8cd4f0acee2dd">03463</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ab4d02c205cfe80df9dc8cd4f0acee2dd">subYear</a>($year, $locale = null)
<a name="l03464"></a>03464     {
<a name="l03465"></a>03465         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;sub&#39;</span>, $year, <span class="stringliteral">&#39;year&#39;</span>, self::YEAR, $locale);
<a name="l03466"></a>03466     }
<a name="l03467"></a>03467 
<a name="l03468"></a>03468 
<a name="l03479"></a><a class="code" href="class_zend___date.html#a72ce5004a83aa957874258bacf1ba964">03479</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a72ce5004a83aa957874258bacf1ba964">compareYear</a>($year, $locale = null)
<a name="l03480"></a>03480     {
<a name="l03481"></a>03481         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;cmp&#39;</span>, $year, <span class="stringliteral">&#39;year&#39;</span>, self::YEAR, $locale);
<a name="l03482"></a>03482     }
<a name="l03483"></a>03483 
<a name="l03484"></a>03484 
<a name="l03492"></a><a class="code" href="class_zend___date.html#aec8e0326496708e8323731148a5b1dba">03492</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#aec8e0326496708e8323731148a5b1dba">getMonth</a>($locale = null)
<a name="l03493"></a>03493     {
<a name="l03494"></a>03494         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>(self::MONTH, $locale);
<a name="l03495"></a>03495     }
<a name="l03496"></a>03496 
<a name="l03497"></a>03497 
<a name="l03507"></a>03507     <span class="keyword">private</span> function _month($calc, $month, $locale)
<a name="l03508"></a>03508     {
<a name="l03509"></a>03509         <span class="keywordflow">if</span> ($month === null) {
<a name="l03510"></a>03510             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03511"></a>03511             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;parameter $month must be set, null is not allowed&#39;</span>);
<a name="l03512"></a>03512         }
<a name="l03513"></a>03513 
<a name="l03514"></a>03514         <span class="keywordflow">if</span> ($locale === null) {
<a name="l03515"></a>03515             $locale = $this-&gt;<a class="code" href="class_zend___date.html#ad532b661eb33c3e755bd3fa8ff1bd7af">getLocale</a>();
<a name="l03516"></a>03516         }
<a name="l03517"></a>03517 
<a name="l03518"></a>03518         <span class="keywordflow">if</span> ($month instanceof Zend_Date) {
<a name="l03519"></a>03519             <span class="comment">// extract month from object</span>
<a name="l03520"></a>03520             $found = $month-&gt;get(self::MONTH_SHORT, $locale);
<a name="l03521"></a>03521         } <span class="keywordflow">else</span> {
<a name="l03522"></a>03522             <span class="keywordflow">if</span> (is_numeric($month)) {
<a name="l03523"></a>03523                 $found = $month;
<a name="l03524"></a>03524             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_array($month)) {
<a name="l03525"></a>03525                 <span class="keywordflow">if</span> (isset($month[<span class="stringliteral">&#39;month&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l03526"></a>03526                     $month = $month[<span class="stringliteral">&#39;month&#39;</span>];
<a name="l03527"></a>03527                 } <span class="keywordflow">else</span> {
<a name="l03528"></a>03528                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03529"></a>03529                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;no month given in array&quot;</span>);
<a name="l03530"></a>03530                 }
<a name="l03531"></a>03531             } <span class="keywordflow">else</span> {
<a name="l03532"></a>03532                 $monthlist  = <a class="code" href="class_zend___locale___data.html#afb7aafc4885ad882f4af6df7bb06e6f6">Zend_Locale_Data::getList</a>($locale, <span class="stringliteral">&#39;month&#39;</span>);
<a name="l03533"></a>03533                 $monthlist2 = <a class="code" href="class_zend___locale___data.html#afb7aafc4885ad882f4af6df7bb06e6f6">Zend_Locale_Data::getList</a>($locale, <span class="stringliteral">&#39;month&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;format&#39;</span>, <span class="stringliteral">&#39;abbreviated&#39;</span>));
<a name="l03534"></a>03534 
<a name="l03535"></a>03535                 $monthlist = array_merge($monthlist, $monthlist2);
<a name="l03536"></a>03536                 $found = 0;
<a name="l03537"></a>03537                 $cnt = 0;
<a name="l03538"></a>03538                 <span class="keywordflow">foreach</span> ($monthlist as $key =&gt; $value) {
<a name="l03539"></a>03539                     <span class="keywordflow">if</span> (strtoupper($value) == strtoupper($month)) {
<a name="l03540"></a>03540                         $found = ($key % 12) + 1;
<a name="l03541"></a>03541                         <span class="keywordflow">break</span>;
<a name="l03542"></a>03542                     }
<a name="l03543"></a>03543                     ++$cnt;
<a name="l03544"></a>03544                 }
<a name="l03545"></a>03545                 <span class="keywordflow">if</span> ($found == 0) {
<a name="l03546"></a>03546                     <span class="keywordflow">foreach</span> ($monthlist2 as $key =&gt; $value) {
<a name="l03547"></a>03547                         <span class="keywordflow">if</span> (strtoupper(iconv_substr($value, 0, 1, <span class="stringliteral">&#39;UTF-8&#39;</span>)) == strtoupper($month)) {
<a name="l03548"></a>03548                             $found = $key + 1;
<a name="l03549"></a>03549                             <span class="keywordflow">break</span>;
<a name="l03550"></a>03550                         }
<a name="l03551"></a>03551                         ++$cnt;
<a name="l03552"></a>03552                     }
<a name="l03553"></a>03553                 }
<a name="l03554"></a>03554                 <span class="keywordflow">if</span> ($found == 0) {
<a name="l03555"></a>03555                     require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03556"></a>03556                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;unknown month name ($month)&quot;</span>, $month);
<a name="l03557"></a>03557                 }
<a name="l03558"></a>03558             }
<a name="l03559"></a>03559         }
<a name="l03560"></a>03560         $return = $this-&gt;_calcdetail($calc, $found, self::MONTH_SHORT, $locale);
<a name="l03561"></a>03561         <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;cmp&#39;</span>) {
<a name="l03562"></a>03562             <span class="keywordflow">return</span> $this;
<a name="l03563"></a>03563         }
<a name="l03564"></a>03564         <span class="keywordflow">return</span> $return;
<a name="l03565"></a>03565     }
<a name="l03566"></a>03566 
<a name="l03567"></a>03567 
<a name="l03581"></a><a class="code" href="class_zend___date.html#ac3bc7c807ce4e64457e3a7112eb5125d">03581</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ac3bc7c807ce4e64457e3a7112eb5125d">setMonth</a>($month, $locale = null)
<a name="l03582"></a>03582     {
<a name="l03583"></a>03583         <span class="keywordflow">return</span> $this-&gt;_month(<span class="stringliteral">&#39;set&#39;</span>, $month, $locale);
<a name="l03584"></a>03584     }
<a name="l03585"></a>03585 
<a name="l03586"></a>03586 
<a name="l03600"></a><a class="code" href="class_zend___date.html#a1261c2230300fb47ef8e4a7e3bb74c0f">03600</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a1261c2230300fb47ef8e4a7e3bb74c0f">addMonth</a>($month, $locale = null)
<a name="l03601"></a>03601     {
<a name="l03602"></a>03602         <span class="keywordflow">return</span> $this-&gt;_month(<span class="stringliteral">&#39;add&#39;</span>, $month, $locale);
<a name="l03603"></a>03603     }
<a name="l03604"></a>03604 
<a name="l03605"></a>03605 
<a name="l03619"></a><a class="code" href="class_zend___date.html#a93f997e7301ec0d4d05f10fb7398a6e4">03619</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a93f997e7301ec0d4d05f10fb7398a6e4">subMonth</a>($month, $locale = null)
<a name="l03620"></a>03620     {
<a name="l03621"></a>03621         <span class="keywordflow">return</span> $this-&gt;_month(<span class="stringliteral">&#39;sub&#39;</span>, $month, $locale);
<a name="l03622"></a>03622     }
<a name="l03623"></a>03623 
<a name="l03624"></a>03624 
<a name="l03635"></a><a class="code" href="class_zend___date.html#a5fea2db5074e096b9032771c0f9c2f15">03635</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a5fea2db5074e096b9032771c0f9c2f15">compareMonth</a>($month, $locale = null)
<a name="l03636"></a>03636     {
<a name="l03637"></a>03637         <span class="keywordflow">return</span> $this-&gt;_month(<span class="stringliteral">&#39;cmp&#39;</span>, $month, $locale);
<a name="l03638"></a>03638     }
<a name="l03639"></a>03639 
<a name="l03640"></a>03640 
<a name="l03648"></a><a class="code" href="class_zend___date.html#a41a60551e6bdad04274e65f9c4f8129c">03648</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a41a60551e6bdad04274e65f9c4f8129c">getDay</a>($locale = null)
<a name="l03649"></a>03649     {
<a name="l03650"></a>03650         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>(self::DAY_SHORT, $locale);
<a name="l03651"></a>03651     }
<a name="l03652"></a>03652 
<a name="l03653"></a>03653 
<a name="l03662"></a>03662     <span class="keyword">private</span> function _day($calc, $day, $locale)
<a name="l03663"></a>03663     {
<a name="l03664"></a>03664         <span class="keywordflow">if</span> ($day === null) {
<a name="l03665"></a>03665             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03666"></a>03666             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;parameter $day must be set, null is not allowed&#39;</span>);
<a name="l03667"></a>03667         }
<a name="l03668"></a>03668 
<a name="l03669"></a>03669         <span class="keywordflow">if</span> ($locale === null) {
<a name="l03670"></a>03670             $locale = $this-&gt;<a class="code" href="class_zend___date.html#ad532b661eb33c3e755bd3fa8ff1bd7af">getLocale</a>();
<a name="l03671"></a>03671         }
<a name="l03672"></a>03672 
<a name="l03673"></a>03673         <span class="keywordflow">if</span> ($day instanceof Zend_Date) {
<a name="l03674"></a>03674             $day = $day-&gt;get(self::DAY_SHORT, $locale);
<a name="l03675"></a>03675         }
<a name="l03676"></a>03676 
<a name="l03677"></a>03677         <span class="keywordflow">if</span> (is_numeric($day)) {
<a name="l03678"></a>03678             $type = self::DAY_SHORT;
<a name="l03679"></a>03679         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_array($day)) {
<a name="l03680"></a>03680             <span class="keywordflow">if</span> (isset($day[<span class="stringliteral">&#39;day&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l03681"></a>03681                 $day = $day[<span class="stringliteral">&#39;day&#39;</span>];
<a name="l03682"></a>03682                 $type = self::WEEKDAY;
<a name="l03683"></a>03683             } <span class="keywordflow">else</span> {
<a name="l03684"></a>03684                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03685"></a>03685                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;no day given in array&quot;</span>);
<a name="l03686"></a>03686             }
<a name="l03687"></a>03687         } <span class="keywordflow">else</span> {
<a name="l03688"></a>03688             <span class="keywordflow">switch</span> (iconv_strlen($day, <span class="stringliteral">&#39;UTF-8&#39;</span>)) {
<a name="l03689"></a>03689                 <span class="keywordflow">case</span> 1 :
<a name="l03690"></a>03690                    $type = self::WEEKDAY_NARROW;
<a name="l03691"></a>03691                     <span class="keywordflow">break</span>;
<a name="l03692"></a>03692                 <span class="keywordflow">case</span> 2:
<a name="l03693"></a>03693                     $type = self::WEEKDAY_NAME;
<a name="l03694"></a>03694                     <span class="keywordflow">break</span>;
<a name="l03695"></a>03695                 <span class="keywordflow">case</span> 3:
<a name="l03696"></a>03696                     $type = self::WEEKDAY_SHORT;
<a name="l03697"></a>03697                     <span class="keywordflow">break</span>;
<a name="l03698"></a>03698                 <span class="keywordflow">default</span>:
<a name="l03699"></a>03699                     $type = self::WEEKDAY;
<a name="l03700"></a>03700                     <span class="keywordflow">break</span>;
<a name="l03701"></a>03701             }
<a name="l03702"></a>03702         }
<a name="l03703"></a>03703         $return = $this-&gt;_calcdetail($calc, $day, $type, $locale);
<a name="l03704"></a>03704         <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;cmp&#39;</span>) {
<a name="l03705"></a>03705             <span class="keywordflow">return</span> $this;
<a name="l03706"></a>03706         }
<a name="l03707"></a>03707         <span class="keywordflow">return</span> $return;
<a name="l03708"></a>03708     }
<a name="l03709"></a>03709 
<a name="l03710"></a>03710 
<a name="l03725"></a><a class="code" href="class_zend___date.html#a308908b3ec69777b0232d4c600ae1ddc">03725</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a308908b3ec69777b0232d4c600ae1ddc">setDay</a>($day, $locale = null)
<a name="l03726"></a>03726     {
<a name="l03727"></a>03727         <span class="keywordflow">return</span> $this-&gt;_day(<span class="stringliteral">&#39;set&#39;</span>, $day, $locale);
<a name="l03728"></a>03728     }
<a name="l03729"></a>03729 
<a name="l03730"></a>03730 
<a name="l03745"></a><a class="code" href="class_zend___date.html#ab2739506a1d5908a1776872ef82d9595">03745</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ab2739506a1d5908a1776872ef82d9595">addDay</a>($day, $locale = null)
<a name="l03746"></a>03746     {
<a name="l03747"></a>03747         <span class="keywordflow">return</span> $this-&gt;_day(<span class="stringliteral">&#39;add&#39;</span>, $day, $locale);
<a name="l03748"></a>03748     }
<a name="l03749"></a>03749 
<a name="l03750"></a>03750 
<a name="l03765"></a><a class="code" href="class_zend___date.html#af82edfbd90d04f27b3c686941d2f3a35">03765</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#af82edfbd90d04f27b3c686941d2f3a35">subDay</a>($day, $locale = null)
<a name="l03766"></a>03766     {
<a name="l03767"></a>03767         <span class="keywordflow">return</span> $this-&gt;_day(<span class="stringliteral">&#39;sub&#39;</span>, $day, $locale);
<a name="l03768"></a>03768     }
<a name="l03769"></a>03769 
<a name="l03770"></a>03770 
<a name="l03781"></a><a class="code" href="class_zend___date.html#ac4fdf0b569961a6890a17c9b0d70fca0">03781</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ac4fdf0b569961a6890a17c9b0d70fca0">compareDay</a>($day, $locale = null)
<a name="l03782"></a>03782     {
<a name="l03783"></a>03783         <span class="keywordflow">return</span> $this-&gt;_day(<span class="stringliteral">&#39;cmp&#39;</span>, $day, $locale);
<a name="l03784"></a>03784     }
<a name="l03785"></a>03785 
<a name="l03786"></a>03786 
<a name="l03795"></a><a class="code" href="class_zend___date.html#a48b613a26a2f3ea6865c80f06296f443">03795</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a48b613a26a2f3ea6865c80f06296f443">getWeekday</a>($locale = null)
<a name="l03796"></a>03796     {
<a name="l03797"></a>03797         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>(self::WEEKDAY, $locale);
<a name="l03798"></a>03798     }
<a name="l03799"></a>03799 
<a name="l03800"></a>03800 
<a name="l03810"></a>03810     <span class="keyword">private</span> function _weekday($calc, $weekday, $locale)
<a name="l03811"></a>03811     {
<a name="l03812"></a>03812         <span class="keywordflow">if</span> ($weekday === null) {
<a name="l03813"></a>03813             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03814"></a>03814             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;parameter $weekday must be set, null is not allowed&#39;</span>);
<a name="l03815"></a>03815         }
<a name="l03816"></a>03816 
<a name="l03817"></a>03817         <span class="keywordflow">if</span> ($locale === null) {
<a name="l03818"></a>03818             $locale = $this-&gt;<a class="code" href="class_zend___date.html#ad532b661eb33c3e755bd3fa8ff1bd7af">getLocale</a>();
<a name="l03819"></a>03819         }
<a name="l03820"></a>03820 
<a name="l03821"></a>03821         <span class="keywordflow">if</span> ($weekday instanceof Zend_Date) {
<a name="l03822"></a>03822             $weekday = $weekday-&gt;get(self::WEEKDAY_8601, $locale);
<a name="l03823"></a>03823         }
<a name="l03824"></a>03824 
<a name="l03825"></a>03825         <span class="keywordflow">if</span> (is_numeric($weekday)) {
<a name="l03826"></a>03826             $type = self::WEEKDAY_8601;
<a name="l03827"></a>03827         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_array($weekday)) {
<a name="l03828"></a>03828             <span class="keywordflow">if</span> (isset($weekday[<span class="stringliteral">&#39;weekday&#39;</span>]) === <span class="keyword">true</span>) {
<a name="l03829"></a>03829                 $weekday = $weekday[<span class="stringliteral">&#39;weekday&#39;</span>];
<a name="l03830"></a>03830                 $type = self::WEEKDAY;
<a name="l03831"></a>03831             } <span class="keywordflow">else</span> {
<a name="l03832"></a>03832                 require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l03833"></a>03833                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;no weekday given in array&quot;</span>);
<a name="l03834"></a>03834             }
<a name="l03835"></a>03835         } <span class="keywordflow">else</span> {
<a name="l03836"></a>03836             <span class="keywordflow">switch</span>(iconv_strlen($weekday, <span class="stringliteral">&#39;UTF-8&#39;</span>)) {
<a name="l03837"></a>03837                 <span class="keywordflow">case</span> 1:
<a name="l03838"></a>03838                    $type = self::WEEKDAY_NARROW;
<a name="l03839"></a>03839                     <span class="keywordflow">break</span>;
<a name="l03840"></a>03840                 <span class="keywordflow">case</span> 2:
<a name="l03841"></a>03841                     $type = self::WEEKDAY_NAME;
<a name="l03842"></a>03842                     <span class="keywordflow">break</span>;
<a name="l03843"></a>03843                 <span class="keywordflow">case</span> 3:
<a name="l03844"></a>03844                     $type = self::WEEKDAY_SHORT;
<a name="l03845"></a>03845                     <span class="keywordflow">break</span>;
<a name="l03846"></a>03846                 <span class="keywordflow">default</span>:
<a name="l03847"></a>03847                     $type = self::WEEKDAY;
<a name="l03848"></a>03848                     <span class="keywordflow">break</span>;
<a name="l03849"></a>03849             }
<a name="l03850"></a>03850         }
<a name="l03851"></a>03851         $return = $this-&gt;_calcdetail($calc, $weekday, $type, $locale);
<a name="l03852"></a>03852         <span class="keywordflow">if</span> ($calc != <span class="stringliteral">&#39;cmp&#39;</span>) {
<a name="l03853"></a>03853             <span class="keywordflow">return</span> $this;
<a name="l03854"></a>03854         }
<a name="l03855"></a>03855         <span class="keywordflow">return</span> $return;
<a name="l03856"></a>03856     }
<a name="l03857"></a>03857 
<a name="l03858"></a>03858 
<a name="l03871"></a><a class="code" href="class_zend___date.html#afb85e34ae4fe647265cbc4e7a32809f5">03871</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#afb85e34ae4fe647265cbc4e7a32809f5">setWeekday</a>($weekday, $locale = null)
<a name="l03872"></a>03872     {
<a name="l03873"></a>03873         <span class="keywordflow">return</span> $this-&gt;_weekday(<span class="stringliteral">&#39;set&#39;</span>, $weekday, $locale);
<a name="l03874"></a>03874     }
<a name="l03875"></a>03875 
<a name="l03876"></a>03876 
<a name="l03891"></a><a class="code" href="class_zend___date.html#a4f2b14ae80d961347742a5d5d9031b2a">03891</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a4f2b14ae80d961347742a5d5d9031b2a">addWeekday</a>($weekday, $locale = null)
<a name="l03892"></a>03892     {
<a name="l03893"></a>03893         <span class="keywordflow">return</span> $this-&gt;_weekday(<span class="stringliteral">&#39;add&#39;</span>, $weekday, $locale);
<a name="l03894"></a>03894     }
<a name="l03895"></a>03895 
<a name="l03896"></a>03896 
<a name="l03911"></a><a class="code" href="class_zend___date.html#a6851fbe742ac01f0997f6acb9074a9a9">03911</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a6851fbe742ac01f0997f6acb9074a9a9">subWeekday</a>($weekday, $locale = null)
<a name="l03912"></a>03912     {
<a name="l03913"></a>03913         <span class="keywordflow">return</span> $this-&gt;_weekday(<span class="stringliteral">&#39;sub&#39;</span>, $weekday, $locale);
<a name="l03914"></a>03914     }
<a name="l03915"></a>03915 
<a name="l03916"></a>03916 
<a name="l03927"></a><a class="code" href="class_zend___date.html#aa5f1518501359ef998a5a24981a27fb1">03927</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#aa5f1518501359ef998a5a24981a27fb1">compareWeekday</a>($weekday, $locale = null)
<a name="l03928"></a>03928     {
<a name="l03929"></a>03929         <span class="keywordflow">return</span> $this-&gt;_weekday(<span class="stringliteral">&#39;cmp&#39;</span>, $weekday, $locale);
<a name="l03930"></a>03930     }
<a name="l03931"></a>03931 
<a name="l03932"></a>03932 
<a name="l03940"></a><a class="code" href="class_zend___date.html#a3a5b5d859999d1cc14e0a8c2df6eeab6">03940</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a3a5b5d859999d1cc14e0a8c2df6eeab6">getDayOfYear</a>($locale = null)
<a name="l03941"></a>03941     {
<a name="l03942"></a>03942         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>(self::DAY_OF_YEAR, $locale);
<a name="l03943"></a>03943     }
<a name="l03944"></a>03944 
<a name="l03945"></a>03945 
<a name="l03957"></a><a class="code" href="class_zend___date.html#a02618ce083281aa40766b8acc50cca3e">03957</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a02618ce083281aa40766b8acc50cca3e">setDayOfYear</a>($day, $locale = null)
<a name="l03958"></a>03958     {
<a name="l03959"></a>03959         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;set&#39;</span>, $day, <span class="stringliteral">&#39;day of year&#39;</span>, self::DAY_OF_YEAR, $locale);
<a name="l03960"></a>03960     }
<a name="l03961"></a>03961 
<a name="l03962"></a>03962 
<a name="l03974"></a><a class="code" href="class_zend___date.html#a778c05ca82772783e2f34561ffd3a6fb">03974</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a778c05ca82772783e2f34561ffd3a6fb">addDayOfYear</a>($day, $locale = null)
<a name="l03975"></a>03975     {
<a name="l03976"></a>03976         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;add&#39;</span>, $day, <span class="stringliteral">&#39;day of year&#39;</span>, self::DAY_OF_YEAR, $locale);
<a name="l03977"></a>03977     }
<a name="l03978"></a>03978 
<a name="l03979"></a>03979 
<a name="l03991"></a><a class="code" href="class_zend___date.html#a2c8a81338272804c9d6b503f82ef742c">03991</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a2c8a81338272804c9d6b503f82ef742c">subDayOfYear</a>($day, $locale = null)
<a name="l03992"></a>03992     {
<a name="l03993"></a>03993         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;sub&#39;</span>, $day, <span class="stringliteral">&#39;day of year&#39;</span>, self::DAY_OF_YEAR, $locale);
<a name="l03994"></a>03994     }
<a name="l03995"></a>03995 
<a name="l03996"></a>03996 
<a name="l04007"></a><a class="code" href="class_zend___date.html#a81482ddb6ea0531ebadef239e155b691">04007</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a81482ddb6ea0531ebadef239e155b691">compareDayOfYear</a>($day, $locale = null)
<a name="l04008"></a>04008     {
<a name="l04009"></a>04009         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;cmp&#39;</span>, $day, <span class="stringliteral">&#39;day of year&#39;</span>, self::DAY_OF_YEAR, $locale);
<a name="l04010"></a>04010     }
<a name="l04011"></a>04011 
<a name="l04012"></a>04012 
<a name="l04020"></a><a class="code" href="class_zend___date.html#a29f14ebda707bc297643ef73ae9c7067">04020</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a29f14ebda707bc297643ef73ae9c7067">getHour</a>($locale = null)
<a name="l04021"></a>04021     {
<a name="l04022"></a>04022         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>(self::HOUR, $locale);
<a name="l04023"></a>04023     }
<a name="l04024"></a>04024 
<a name="l04025"></a>04025 
<a name="l04037"></a><a class="code" href="class_zend___date.html#afc03da8a0f77fe55c7a817504ba4ac59">04037</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#afc03da8a0f77fe55c7a817504ba4ac59">setHour</a>($hour, $locale = null)
<a name="l04038"></a>04038     {
<a name="l04039"></a>04039         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;set&#39;</span>, $hour, <span class="stringliteral">&#39;hour&#39;</span>, self::HOUR_SHORT, $locale);
<a name="l04040"></a>04040     }
<a name="l04041"></a>04041 
<a name="l04042"></a>04042 
<a name="l04054"></a><a class="code" href="class_zend___date.html#a93d2900bb540bba38610cf774f17637a">04054</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a93d2900bb540bba38610cf774f17637a">addHour</a>($hour, $locale = null)
<a name="l04055"></a>04055     {
<a name="l04056"></a>04056         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;add&#39;</span>, $hour, <span class="stringliteral">&#39;hour&#39;</span>, self::HOUR_SHORT, $locale);
<a name="l04057"></a>04057     }
<a name="l04058"></a>04058 
<a name="l04059"></a>04059 
<a name="l04071"></a><a class="code" href="class_zend___date.html#a27fd93afa321aa1010b19212ffaa1638">04071</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a27fd93afa321aa1010b19212ffaa1638">subHour</a>($hour, $locale = null)
<a name="l04072"></a>04072     {
<a name="l04073"></a>04073         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;sub&#39;</span>, $hour, <span class="stringliteral">&#39;hour&#39;</span>, self::HOUR_SHORT, $locale);
<a name="l04074"></a>04074     }
<a name="l04075"></a>04075 
<a name="l04076"></a>04076 
<a name="l04087"></a><a class="code" href="class_zend___date.html#a069b430b4959b69a467e8acf1f5a6f66">04087</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a069b430b4959b69a467e8acf1f5a6f66">compareHour</a>($hour, $locale = null)
<a name="l04088"></a>04088     {
<a name="l04089"></a>04089         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;cmp&#39;</span>, $hour, <span class="stringliteral">&#39;hour&#39;</span>, self::HOUR_SHORT, $locale);
<a name="l04090"></a>04090     }
<a name="l04091"></a>04091 
<a name="l04092"></a>04092 
<a name="l04100"></a><a class="code" href="class_zend___date.html#a4c921c8556c12f8635a72dfc7dff89b2">04100</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a4c921c8556c12f8635a72dfc7dff89b2">getMinute</a>($locale = null)
<a name="l04101"></a>04101     {
<a name="l04102"></a>04102         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>(self::MINUTE, $locale);
<a name="l04103"></a>04103     }
<a name="l04104"></a>04104 
<a name="l04105"></a>04105 
<a name="l04117"></a><a class="code" href="class_zend___date.html#a4722b1c82d69db17d33c6375566e83d2">04117</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a4722b1c82d69db17d33c6375566e83d2">setMinute</a>($minute, $locale = null)
<a name="l04118"></a>04118     {
<a name="l04119"></a>04119         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;set&#39;</span>, $minute, <span class="stringliteral">&#39;minute&#39;</span>, self::MINUTE_SHORT, $locale);
<a name="l04120"></a>04120     }
<a name="l04121"></a>04121 
<a name="l04122"></a>04122 
<a name="l04134"></a><a class="code" href="class_zend___date.html#a6c5c4420e58eaab24af5cf788212480d">04134</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a6c5c4420e58eaab24af5cf788212480d">addMinute</a>($minute, $locale = null)
<a name="l04135"></a>04135     {
<a name="l04136"></a>04136         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;add&#39;</span>, $minute, <span class="stringliteral">&#39;minute&#39;</span>, self::MINUTE_SHORT, $locale);
<a name="l04137"></a>04137     }
<a name="l04138"></a>04138 
<a name="l04139"></a>04139 
<a name="l04151"></a><a class="code" href="class_zend___date.html#a594de5d65b5421c0970dd151c44dd0ee">04151</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a594de5d65b5421c0970dd151c44dd0ee">subMinute</a>($minute, $locale = null)
<a name="l04152"></a>04152     {
<a name="l04153"></a>04153         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;sub&#39;</span>, $minute, <span class="stringliteral">&#39;minute&#39;</span>, self::MINUTE_SHORT, $locale);
<a name="l04154"></a>04154     }
<a name="l04155"></a>04155 
<a name="l04156"></a>04156 
<a name="l04167"></a><a class="code" href="class_zend___date.html#a037bf371dd880d2255b28dbe599a4297">04167</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a037bf371dd880d2255b28dbe599a4297">compareMinute</a>($minute, $locale = null)
<a name="l04168"></a>04168     {
<a name="l04169"></a>04169         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;cmp&#39;</span>, $minute, <span class="stringliteral">&#39;minute&#39;</span>, self::MINUTE_SHORT, $locale);
<a name="l04170"></a>04170     }
<a name="l04171"></a>04171 
<a name="l04172"></a>04172 
<a name="l04180"></a><a class="code" href="class_zend___date.html#a8f92c4bbdae73de7504827a9b9677112">04180</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a8f92c4bbdae73de7504827a9b9677112">getSecond</a>($locale = null)
<a name="l04181"></a>04181     {
<a name="l04182"></a>04182         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>(self::SECOND, $locale);
<a name="l04183"></a>04183     }
<a name="l04184"></a>04184 
<a name="l04185"></a>04185 
<a name="l04197"></a><a class="code" href="class_zend___date.html#a54e0fe27329f2b41ee22ef3ae64b7191">04197</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a54e0fe27329f2b41ee22ef3ae64b7191">setSecond</a>($second, $locale = null)
<a name="l04198"></a>04198     {
<a name="l04199"></a>04199         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;set&#39;</span>, $second, <span class="stringliteral">&#39;second&#39;</span>, self::SECOND_SHORT, $locale);
<a name="l04200"></a>04200     }
<a name="l04201"></a>04201 
<a name="l04202"></a>04202 
<a name="l04214"></a><a class="code" href="class_zend___date.html#a5b81e1390686d8b7211aca26f49ef3f4">04214</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a5b81e1390686d8b7211aca26f49ef3f4">addSecond</a>($second, $locale = null)
<a name="l04215"></a>04215     {
<a name="l04216"></a>04216         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;add&#39;</span>, $second, <span class="stringliteral">&#39;second&#39;</span>, self::SECOND_SHORT, $locale);
<a name="l04217"></a>04217     }
<a name="l04218"></a>04218 
<a name="l04219"></a>04219 
<a name="l04231"></a><a class="code" href="class_zend___date.html#a0ea3060311f24ff406997566ee8203cc">04231</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a0ea3060311f24ff406997566ee8203cc">subSecond</a>($second, $locale = null)
<a name="l04232"></a>04232     {
<a name="l04233"></a>04233         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;sub&#39;</span>, $second, <span class="stringliteral">&#39;second&#39;</span>, self::SECOND_SHORT, $locale);
<a name="l04234"></a>04234     }
<a name="l04235"></a>04235 
<a name="l04236"></a>04236 
<a name="l04247"></a><a class="code" href="class_zend___date.html#a9efd6b6e00d6ad24ed5811997af6238e">04247</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a9efd6b6e00d6ad24ed5811997af6238e">compareSecond</a>($second, $locale = null)
<a name="l04248"></a>04248     {
<a name="l04249"></a>04249         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;cmp&#39;</span>, $second, <span class="stringliteral">&#39;second&#39;</span>, self::SECOND_SHORT, $locale);
<a name="l04250"></a>04250     }
<a name="l04251"></a>04251 
<a name="l04252"></a>04252 
<a name="l04258"></a><a class="code" href="class_zend___date.html#a2ceab28ca675751ad16271a295212800">04258</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a2ceab28ca675751ad16271a295212800">getFractionalPrecision</a>()
<a name="l04259"></a>04259     {
<a name="l04260"></a>04260         <span class="keywordflow">return</span> $this-&gt;_precision;
<a name="l04261"></a>04261     }
<a name="l04262"></a>04262 
<a name="l04263"></a>04263 
<a name="l04271"></a><a class="code" href="class_zend___date.html#a986cf671ca82be7730040e915980f0ae">04271</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a986cf671ca82be7730040e915980f0ae">setFractionalPrecision</a>($precision)
<a name="l04272"></a>04272     {
<a name="l04273"></a>04273         <span class="keywordflow">if</span> (!intval($precision) or ($precision &lt; 0) or ($precision &gt; 9)) {
<a name="l04274"></a>04274             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l04275"></a>04275             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;precision ($precision) must be a positive integer less than 10&quot;</span>, $precision);
<a name="l04276"></a>04276         }
<a name="l04277"></a>04277         $this-&gt;_precision = (int) $precision;
<a name="l04278"></a>04278     }
<a name="l04279"></a>04279 
<a name="l04280"></a>04280 
<a name="l04286"></a><a class="code" href="class_zend___date.html#a0d19e9bbf471a68b06f3383cb4a87691">04286</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a0d19e9bbf471a68b06f3383cb4a87691">getMilliSecond</a>()
<a name="l04287"></a>04287     {
<a name="l04288"></a>04288         <span class="keywordflow">return</span> $this-&gt;_fractional;
<a name="l04289"></a>04289     }
<a name="l04290"></a>04290 
<a name="l04291"></a>04291 
<a name="l04300"></a><a class="code" href="class_zend___date.html#a9cd04540bd3d36a7a85fb06abdaec2d8">04300</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a9cd04540bd3d36a7a85fb06abdaec2d8">setMilliSecond</a>($milli = null, $precision = null)
<a name="l04301"></a>04301     {
<a name="l04302"></a>04302         <span class="keywordflow">if</span> ($milli === null) {
<a name="l04303"></a>04303             list($milli, $time) = explode(<span class="stringliteral">&quot; &quot;</span>, microtime());
<a name="l04304"></a>04304             $milli = intval($milli);
<a name="l04305"></a>04305             $precision = 6;
<a name="l04306"></a>04306         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!is_numeric($milli)) {
<a name="l04307"></a>04307             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l04308"></a>04308             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid milli second ($milli) operand&quot;</span>, $milli);
<a name="l04309"></a>04309         }
<a name="l04310"></a>04310 
<a name="l04311"></a>04311         <span class="keywordflow">if</span> ($precision === null) {
<a name="l04312"></a>04312             $precision = $this-&gt;_precision;
<a name="l04313"></a>04313         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!is_int($precision) || $precision &lt; 1 || $precision &gt; 9) {
<a name="l04314"></a>04314             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l04315"></a>04315             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;precision ($precision) must be a positive integer less than 10&quot;</span>, $precision);
<a name="l04316"></a>04316         }
<a name="l04317"></a>04317 
<a name="l04318"></a>04318         $this-&gt;_fractional = 0;
<a name="l04319"></a>04319         $this-&gt;<a class="code" href="class_zend___date.html#affdc98d8f893b9c50330d464d4eec208">addMilliSecond</a>($milli, $precision);
<a name="l04320"></a>04320         <span class="keywordflow">return</span> $this-&gt;_fractional;
<a name="l04321"></a>04321     }
<a name="l04322"></a>04322 
<a name="l04323"></a>04323 
<a name="l04331"></a><a class="code" href="class_zend___date.html#affdc98d8f893b9c50330d464d4eec208">04331</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#affdc98d8f893b9c50330d464d4eec208">addMilliSecond</a>($milli = null, $precision = null)
<a name="l04332"></a>04332     {
<a name="l04333"></a>04333         <span class="keywordflow">if</span> ($milli === null) {
<a name="l04334"></a>04334             list($milli, $time) = explode(<span class="stringliteral">&quot; &quot;</span>, microtime());
<a name="l04335"></a>04335             $milli = intval($milli);
<a name="l04336"></a>04336         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!is_numeric($milli)) {
<a name="l04337"></a>04337             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l04338"></a>04338             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid milli second ($milli) operand&quot;</span>, $milli);
<a name="l04339"></a>04339         }
<a name="l04340"></a>04340 
<a name="l04341"></a>04341         <span class="keywordflow">if</span> ($precision === null) {
<a name="l04342"></a>04342             $precision = $this-&gt;_precision;
<a name="l04343"></a>04343         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!is_int($precision) || $precision &lt; 1 || $precision &gt; 9) {
<a name="l04344"></a>04344             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l04345"></a>04345             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;precision ($precision) must be a positive integer less than 10&quot;</span>, $precision);
<a name="l04346"></a>04346         }
<a name="l04347"></a>04347 
<a name="l04348"></a>04348         <span class="keywordflow">if</span> ($precision != $this-&gt;_precision) {
<a name="l04349"></a>04349             <span class="keywordflow">if</span> ($precision &gt; $this-&gt;_precision) {
<a name="l04350"></a>04350                 $diff = $precision - $this-&gt;_precision;
<a name="l04351"></a>04351                 $milli = (int) ($milli / (10 * $diff));
<a name="l04352"></a>04352             } <span class="keywordflow">else</span> {
<a name="l04353"></a>04353                 $diff = $this-&gt;_precision - $precision;
<a name="l04354"></a>04354                 $milli = (int) ($milli * (10 * $diff));
<a name="l04355"></a>04355             }
<a name="l04356"></a>04356         }
<a name="l04357"></a>04357 
<a name="l04358"></a>04358         $this-&gt;_fractional += $milli;
<a name="l04359"></a>04359         <span class="comment">// Add/sub milliseconds + add/sub seconds</span>
<a name="l04360"></a>04360 
<a name="l04361"></a>04361         $max = pow(10, $this-&gt;_precision);
<a name="l04362"></a>04362         <span class="comment">// Milli includes seconds</span>
<a name="l04363"></a>04363         <span class="keywordflow">if</span> ($this-&gt;_fractional &gt;= $max) {
<a name="l04364"></a>04364             <span class="keywordflow">while</span> ($this-&gt;_fractional &gt;= $max) {
<a name="l04365"></a>04365                 $this-&gt;<a class="code" href="class_zend___date.html#a5b81e1390686d8b7211aca26f49ef3f4">addSecond</a>(1);
<a name="l04366"></a>04366                 $this-&gt;_fractional -= $max;
<a name="l04367"></a>04367             }
<a name="l04368"></a>04368         }
<a name="l04369"></a>04369 
<a name="l04370"></a>04370         <span class="keywordflow">if</span> ($this-&gt;_fractional &lt; 0) {
<a name="l04371"></a>04371             <span class="keywordflow">while</span> ($this-&gt;_fractional &lt; 0) {
<a name="l04372"></a>04372                 $this-&gt;<a class="code" href="class_zend___date.html#a0ea3060311f24ff406997566ee8203cc">subSecond</a>(1);
<a name="l04373"></a>04373                 $this-&gt;_fractional += $max;
<a name="l04374"></a>04374             }
<a name="l04375"></a>04375         }
<a name="l04376"></a>04376 
<a name="l04377"></a>04377         <span class="keywordflow">return</span> $this-&gt;_fractional;
<a name="l04378"></a>04378     }
<a name="l04379"></a>04379 
<a name="l04380"></a>04380 
<a name="l04388"></a><a class="code" href="class_zend___date.html#a8765915f28dfd836329363e4d9945c19">04388</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a8765915f28dfd836329363e4d9945c19">subMilliSecond</a>($milli = null, $precision = null)
<a name="l04389"></a>04389     {
<a name="l04390"></a>04390         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#affdc98d8f893b9c50330d464d4eec208">addMilliSecond</a>(0 - $milli, $precision);
<a name="l04391"></a>04391     }
<a name="l04392"></a>04392 
<a name="l04400"></a><a class="code" href="class_zend___date.html#afcb593b754225941d425981bf6dc58d3">04400</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#afcb593b754225941d425981bf6dc58d3">compareMilliSecond</a>($milli = null, $precision = null)
<a name="l04401"></a>04401     {
<a name="l04402"></a>04402         <span class="keywordflow">if</span> ($milli === null) {
<a name="l04403"></a>04403             list($milli, $time) = explode(<span class="stringliteral">&quot; &quot;</span>, microtime());
<a name="l04404"></a>04404             $milli = intval($milli);
<a name="l04405"></a>04405         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_numeric($milli) === <span class="keyword">false</span>) {
<a name="l04406"></a>04406             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l04407"></a>04407             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;invalid milli second ($milli) operand&quot;</span>, $milli);
<a name="l04408"></a>04408         }
<a name="l04409"></a>04409 
<a name="l04410"></a>04410         <span class="keywordflow">if</span> ($precision === null) {
<a name="l04411"></a>04411             $precision = $this-&gt;_precision;
<a name="l04412"></a>04412         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!is_int($precision) || $precision &lt; 1 || $precision &gt; 9) {
<a name="l04413"></a>04413             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l04414"></a>04414             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&quot;precision ($precision) must be a positive integer less than 10&quot;</span>, $precision);
<a name="l04415"></a>04415         }
<a name="l04416"></a>04416 
<a name="l04417"></a>04417         <span class="keywordflow">if</span> ($precision === 0) {
<a name="l04418"></a>04418             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l04419"></a>04419             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception(<span class="stringliteral">&#39;precision is 0&#39;</span>);
<a name="l04420"></a>04420         }
<a name="l04421"></a>04421 
<a name="l04422"></a>04422         <span class="keywordflow">if</span> ($precision != $this-&gt;_precision) {
<a name="l04423"></a>04423             <span class="keywordflow">if</span> ($precision &gt; $this-&gt;_precision) {
<a name="l04424"></a>04424                 $diff = $precision - $this-&gt;_precision;
<a name="l04425"></a>04425                 $milli = (int) ($milli / (10 * $diff));
<a name="l04426"></a>04426             } <span class="keywordflow">else</span> {
<a name="l04427"></a>04427                 $diff = $this-&gt;_precision - $precision;
<a name="l04428"></a>04428                 $milli = (int) ($milli * (10 * $diff));
<a name="l04429"></a>04429             }
<a name="l04430"></a>04430         }
<a name="l04431"></a>04431 
<a name="l04432"></a>04432         $comp = $this-&gt;_fractional - $milli;
<a name="l04433"></a>04433         <span class="keywordflow">if</span> ($comp &lt; 0) {
<a name="l04434"></a>04434             <span class="keywordflow">return</span> -1;
<a name="l04435"></a>04435         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($comp &gt; 0) {
<a name="l04436"></a>04436             <span class="keywordflow">return</span> 1;
<a name="l04437"></a>04437         }
<a name="l04438"></a>04438         <span class="keywordflow">return</span> 0;
<a name="l04439"></a>04439     }
<a name="l04440"></a>04440 
<a name="l04448"></a><a class="code" href="class_zend___date.html#ab087dbe77c7b5848d96a9ffb856927d6">04448</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ab087dbe77c7b5848d96a9ffb856927d6">getWeek</a>($locale = null)
<a name="l04449"></a>04449     {
<a name="l04450"></a>04450         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___date.html#a916f900590fd8aee46ac811f901e97a5">copyPart</a>(self::WEEK, $locale);
<a name="l04451"></a>04451     }
<a name="l04452"></a>04452 
<a name="l04463"></a><a class="code" href="class_zend___date.html#ae066a4a6d4532fdbe0b001e656f0b525">04463</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ae066a4a6d4532fdbe0b001e656f0b525">setWeek</a>($week, $locale = null)
<a name="l04464"></a>04464     {
<a name="l04465"></a>04465         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;set&#39;</span>, $week, <span class="stringliteral">&#39;week&#39;</span>, self::WEEK, $locale);
<a name="l04466"></a>04466     }
<a name="l04467"></a>04467 
<a name="l04478"></a><a class="code" href="class_zend___date.html#ab7f58cf7295b62d105e40260dd82c4cd">04478</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ab7f58cf7295b62d105e40260dd82c4cd">addWeek</a>($week, $locale = null)
<a name="l04479"></a>04479     {
<a name="l04480"></a>04480         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;add&#39;</span>, $week, <span class="stringliteral">&#39;week&#39;</span>, self::WEEK, $locale);
<a name="l04481"></a>04481     }
<a name="l04482"></a>04482 
<a name="l04493"></a><a class="code" href="class_zend___date.html#a5b0fea651d7a8700908ac4cce171ac45">04493</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a5b0fea651d7a8700908ac4cce171ac45">subWeek</a>($week, $locale = null)
<a name="l04494"></a>04494     {
<a name="l04495"></a>04495         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;sub&#39;</span>, $week, <span class="stringliteral">&#39;week&#39;</span>, self::WEEK, $locale);
<a name="l04496"></a>04496     }
<a name="l04497"></a>04497 
<a name="l04508"></a><a class="code" href="class_zend___date.html#af07e20e22dfb9d7175da7484a8a26c3c">04508</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#af07e20e22dfb9d7175da7484a8a26c3c">compareWeek</a>($week, $locale = null)
<a name="l04509"></a>04509     {
<a name="l04510"></a>04510         <span class="keywordflow">return</span> $this-&gt;_calcvalue(<span class="stringliteral">&#39;cmp&#39;</span>, $week, <span class="stringliteral">&#39;week&#39;</span>, self::WEEK, $locale);
<a name="l04511"></a>04511     }
<a name="l04512"></a>04512 
<a name="l04524"></a><a class="code" href="class_zend___date.html#a0fb89675983893dbf686b0d22111b8e5">04524</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#a0fb89675983893dbf686b0d22111b8e5">setLocale</a>($locale = null)
<a name="l04525"></a>04525     {
<a name="l04526"></a>04526         <span class="keywordflow">try</span> {
<a name="l04527"></a>04527             $this-&gt;_locale = <a class="code" href="class_zend___locale.html#ad0f5fea4be8b74d2f0049b418a275492">Zend_Locale::findLocale</a>($locale);
<a name="l04528"></a>04528         } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l04529"></a>04529             require_once <span class="stringliteral">&#39;Zend/Date/Exception.php&#39;</span>;
<a name="l04530"></a>04530             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Date_Exception($e-&gt;getMessage());
<a name="l04531"></a>04531         }
<a name="l04532"></a>04532 
<a name="l04533"></a>04533         <span class="keywordflow">return</span> $this;
<a name="l04534"></a>04534     }
<a name="l04535"></a>04535 
<a name="l04541"></a><a class="code" href="class_zend___date.html#ad532b661eb33c3e755bd3fa8ff1bd7af">04541</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___date.html#ad532b661eb33c3e755bd3fa8ff1bd7af">getLocale</a>()
<a name="l04542"></a>04542     {
<a name="l04543"></a>04543         <span class="keywordflow">return</span> $this-&gt;_locale;
<a name="l04544"></a>04544     }
<a name="l04545"></a>04545 
<a name="l04558"></a><a class="code" href="class_zend___date.html#aee512d1a9c20c2c34a9daa649731edb4">04558</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___date.html#aee512d1a9c20c2c34a9daa649731edb4">isDate</a>($date, $format = null, $locale = null)
<a name="l04559"></a>04559     {
<a name="l04560"></a>04560         <span class="keywordflow">if</span> (!is_string($date) &amp;&amp; !is_numeric($date) &amp;&amp; !($date instanceof Zend_Date) &amp;&amp;
<a name="l04561"></a>04561             !is_array($date)) {
<a name="l04562"></a>04562             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04563"></a>04563         }
<a name="l04564"></a>04564 
<a name="l04565"></a>04565         <span class="keywordflow">if</span> (($format !== null) and (<a class="code" href="class_zend___locale.html#a84c0df2fe97b8386edb88024b77c869b">Zend_Locale::isLocale</a>($format, null, <span class="keyword">false</span>))) {
<a name="l04566"></a>04566             $locale = $format;
<a name="l04567"></a>04567             $format = null;
<a name="l04568"></a>04568         }
<a name="l04569"></a>04569 
<a name="l04570"></a>04570         $locale = <a class="code" href="class_zend___locale.html#ad0f5fea4be8b74d2f0049b418a275492">Zend_Locale::findLocale</a>($locale);
<a name="l04571"></a>04571 
<a name="l04572"></a>04572         <span class="keywordflow">if</span> ($format === null) {
<a name="l04573"></a>04573             $format = <a class="code" href="class_zend___locale___format.html#aa1d208f5bf369b2103b6a9bfb0d6f2f8">Zend_Locale_Format::getDateFormat</a>($locale);
<a name="l04574"></a>04574         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (self::$_options[<span class="stringliteral">&#39;format_type&#39;</span>] == <span class="stringliteral">&#39;php&#39;</span>) {
<a name="l04575"></a>04575             $format = <a class="code" href="class_zend___locale___format.html#a95fc846144cd145417ec7516af6bc436">Zend_Locale_Format::convertPhpToIsoFormat</a>($format);
<a name="l04576"></a>04576         }
<a name="l04577"></a>04577 
<a name="l04578"></a>04578         $format = <a class="code" href="class_zend___date.html#a7bbca9092adac3181bd81bf7d8196eed">self::_getLocalizedToken</a>($format, $locale);
<a name="l04579"></a>04579         <span class="keywordflow">if</span> (!is_array($date)) {
<a name="l04580"></a>04580             <span class="keywordflow">try</span> {
<a name="l04581"></a>04581                 $parsed = <a class="code" href="class_zend___date.html#a795dca865c296fd703738c07003cb457">Zend_Locale_Format::getDate</a>($date, array(<span class="stringliteral">&#39;locale&#39;</span> =&gt; $locale,
<a name="l04582"></a>04582                                                       <span class="stringliteral">&#39;date_format&#39;</span> =&gt; $format, <span class="stringliteral">&#39;format_type&#39;</span> =&gt; <span class="stringliteral">&#39;iso&#39;</span>,
<a name="l04583"></a>04583                                                       <span class="stringliteral">&#39;fix_date&#39;</span> =&gt; <span class="keyword">false</span>));
<a name="l04584"></a>04584             } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___locale___exception.html">Zend_Locale_Exception</a> $e) {
<a name="l04585"></a>04585                 <span class="comment">// Date can not be parsed</span>
<a name="l04586"></a>04586                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04587"></a>04587             }
<a name="l04588"></a>04588         } <span class="keywordflow">else</span> {
<a name="l04589"></a>04589             $parsed = $date;
<a name="l04590"></a>04590         }
<a name="l04591"></a>04591 
<a name="l04592"></a>04592         <span class="keywordflow">if</span> (((strpos($format, <span class="charliteral">&#39;Y&#39;</span>) !== <span class="keyword">false</span>) or (strpos($format, <span class="charliteral">&#39;y&#39;</span>) !== <span class="keyword">false</span>)) and
<a name="l04593"></a>04593             (!isset($parsed[<span class="stringliteral">&#39;year&#39;</span>]))) {
<a name="l04594"></a>04594             <span class="comment">// Year expected but not found</span>
<a name="l04595"></a>04595                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04596"></a>04596         }
<a name="l04597"></a>04597 
<a name="l04598"></a>04598         <span class="keywordflow">if</span> ((strpos($format, <span class="charliteral">&#39;M&#39;</span>) !== <span class="keyword">false</span>) and (!isset($parsed[<span class="stringliteral">&#39;month&#39;</span>]))) {
<a name="l04599"></a>04599             <span class="comment">// Month expected but not found</span>
<a name="l04600"></a>04600             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04601"></a>04601         }
<a name="l04602"></a>04602 
<a name="l04603"></a>04603         <span class="keywordflow">if</span> ((strpos($format, <span class="charliteral">&#39;d&#39;</span>) !== <span class="keyword">false</span>) and (!isset($parsed[<span class="stringliteral">&#39;day&#39;</span>]))) {
<a name="l04604"></a>04604             <span class="comment">// Day expected but not found</span>
<a name="l04605"></a>04605             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04606"></a>04606         }
<a name="l04607"></a>04607 
<a name="l04608"></a>04608         <span class="keywordflow">if</span> (((strpos($format, <span class="charliteral">&#39;H&#39;</span>) !== <span class="keyword">false</span>) or (strpos($format, <span class="charliteral">&#39;h&#39;</span>) !== <span class="keyword">false</span>)) and
<a name="l04609"></a>04609             (!isset($parsed[<span class="stringliteral">&#39;hour&#39;</span>]))) {
<a name="l04610"></a>04610             <span class="comment">// Hour expected but not found</span>
<a name="l04611"></a>04611                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04612"></a>04612         }
<a name="l04613"></a>04613 
<a name="l04614"></a>04614         <span class="keywordflow">if</span> ((strpos($format, <span class="charliteral">&#39;m&#39;</span>) !== <span class="keyword">false</span>) and (!isset($parsed[<span class="stringliteral">&#39;minute&#39;</span>]))) {
<a name="l04615"></a>04615             <span class="comment">// Minute expected but not found</span>
<a name="l04616"></a>04616             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04617"></a>04617         }
<a name="l04618"></a>04618 
<a name="l04619"></a>04619         <span class="keywordflow">if</span> ((strpos($format, <span class="charliteral">&#39;s&#39;</span>) !== <span class="keyword">false</span>) and (!isset($parsed[<span class="stringliteral">&#39;second&#39;</span>]))) {
<a name="l04620"></a>04620             <span class="comment">// Second expected  but not found</span>
<a name="l04621"></a>04621             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04622"></a>04622         }
<a name="l04623"></a>04623 
<a name="l04624"></a>04624         <span class="comment">// Set not given dateparts</span>
<a name="l04625"></a>04625         <span class="keywordflow">if</span> (isset($parsed[<span class="stringliteral">&#39;hour&#39;</span>]) === <span class="keyword">false</span>) {
<a name="l04626"></a>04626             $parsed[<span class="stringliteral">&#39;hour&#39;</span>] = 12;
<a name="l04627"></a>04627         }
<a name="l04628"></a>04628 
<a name="l04629"></a>04629         <span class="keywordflow">if</span> (isset($parsed[<span class="stringliteral">&#39;minute&#39;</span>]) === <span class="keyword">false</span>) {
<a name="l04630"></a>04630             $parsed[<span class="stringliteral">&#39;minute&#39;</span>] = 0;
<a name="l04631"></a>04631         }
<a name="l04632"></a>04632 
<a name="l04633"></a>04633         <span class="keywordflow">if</span> (isset($parsed[<span class="stringliteral">&#39;second&#39;</span>]) === <span class="keyword">false</span>) {
<a name="l04634"></a>04634             $parsed[<span class="stringliteral">&#39;second&#39;</span>] = 0;
<a name="l04635"></a>04635         }
<a name="l04636"></a>04636 
<a name="l04637"></a>04637         <span class="keywordflow">if</span> (isset($parsed[<span class="stringliteral">&#39;month&#39;</span>]) === <span class="keyword">false</span>) {
<a name="l04638"></a>04638             $parsed[<span class="stringliteral">&#39;month&#39;</span>] = 1;
<a name="l04639"></a>04639         }
<a name="l04640"></a>04640 
<a name="l04641"></a>04641         <span class="keywordflow">if</span> (isset($parsed[<span class="stringliteral">&#39;day&#39;</span>]) === <span class="keyword">false</span>) {
<a name="l04642"></a>04642             $parsed[<span class="stringliteral">&#39;day&#39;</span>] = 1;
<a name="l04643"></a>04643         }
<a name="l04644"></a>04644 
<a name="l04645"></a>04645         <span class="keywordflow">if</span> (isset($parsed[<span class="stringliteral">&#39;year&#39;</span>]) === <span class="keyword">false</span>) {
<a name="l04646"></a>04646             $parsed[<span class="stringliteral">&#39;year&#39;</span>] = 1970;
<a name="l04647"></a>04647         }
<a name="l04648"></a>04648 
<a name="l04649"></a>04649         <span class="keywordflow">if</span> (self::isYearLeapYear($parsed[<span class="stringliteral">&#39;year&#39;</span>])) {
<a name="l04650"></a>04650             $parsed[<span class="stringliteral">&#39;year&#39;</span>] = 1972;
<a name="l04651"></a>04651         } <span class="keywordflow">else</span> {
<a name="l04652"></a>04652             $parsed[<span class="stringliteral">&#39;year&#39;</span>] = 1971;
<a name="l04653"></a>04653         }
<a name="l04654"></a>04654 
<a name="l04655"></a>04655         $date      = <span class="keyword">new</span> <span class="keyword">self</span>($parsed, null, $locale);
<a name="l04656"></a>04656         $timestamp = $date-&gt;mktime($parsed[<span class="stringliteral">&#39;hour&#39;</span>], $parsed[<span class="stringliteral">&#39;minute&#39;</span>], $parsed[<span class="stringliteral">&#39;second&#39;</span>],
<a name="l04657"></a>04657                                    $parsed[<span class="stringliteral">&#39;month&#39;</span>], $parsed[<span class="stringliteral">&#39;day&#39;</span>], $parsed[<span class="stringliteral">&#39;year&#39;</span>]);
<a name="l04658"></a>04658 
<a name="l04659"></a>04659         <span class="keywordflow">if</span> ($parsed[<span class="stringliteral">&#39;year&#39;</span>] != $date-&gt;date(<span class="charliteral">&#39;Y&#39;</span>, $timestamp)) {
<a name="l04660"></a>04660             <span class="comment">// Given year differs from parsed year</span>
<a name="l04661"></a>04661             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04662"></a>04662         }
<a name="l04663"></a>04663 
<a name="l04664"></a>04664         <span class="keywordflow">if</span> ($parsed[<span class="stringliteral">&#39;month&#39;</span>] != $date-&gt;date(<span class="charliteral">&#39;n&#39;</span>, $timestamp)) {
<a name="l04665"></a>04665             <span class="comment">// Given month differs from parsed month</span>
<a name="l04666"></a>04666             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04667"></a>04667         }
<a name="l04668"></a>04668 
<a name="l04669"></a>04669         <span class="keywordflow">if</span> ($parsed[<span class="stringliteral">&#39;day&#39;</span>] != $date-&gt;date(<span class="charliteral">&#39;j&#39;</span>, $timestamp)) {
<a name="l04670"></a>04670             <span class="comment">// Given day differs from parsed day</span>
<a name="l04671"></a>04671             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04672"></a>04672         }
<a name="l04673"></a>04673 
<a name="l04674"></a>04674         <span class="keywordflow">if</span> ($parsed[<span class="stringliteral">&#39;hour&#39;</span>] != $date-&gt;date(<span class="charliteral">&#39;G&#39;</span>, $timestamp)) {
<a name="l04675"></a>04675             <span class="comment">// Given hour differs from parsed hour</span>
<a name="l04676"></a>04676             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04677"></a>04677         }
<a name="l04678"></a>04678 
<a name="l04679"></a>04679         <span class="keywordflow">if</span> ($parsed[<span class="stringliteral">&#39;minute&#39;</span>] != $date-&gt;date(<span class="charliteral">&#39;i&#39;</span>, $timestamp)) {
<a name="l04680"></a>04680             <span class="comment">// Given minute differs from parsed minute</span>
<a name="l04681"></a>04681             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04682"></a>04682         }
<a name="l04683"></a>04683 
<a name="l04684"></a>04684         <span class="keywordflow">if</span> ($parsed[<span class="stringliteral">&#39;second&#39;</span>] != $date-&gt;date(<span class="charliteral">&#39;s&#39;</span>, $timestamp)) {
<a name="l04685"></a>04685             <span class="comment">// Given second differs from parsed second</span>
<a name="l04686"></a>04686             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04687"></a>04687         }
<a name="l04688"></a>04688 
<a name="l04689"></a>04689         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04690"></a>04690     }
<a name="l04691"></a>04691 
<a name="l04699"></a><a class="code" href="class_zend___date.html#a7bbca9092adac3181bd81bf7d8196eed">04699</a>     <span class="keyword">protected</span> <span class="keyword">static</span> function <a class="code" href="class_zend___date.html#a7bbca9092adac3181bd81bf7d8196eed">_getLocalizedToken</a>($token, $locale)
<a name="l04700"></a>04700     {
<a name="l04701"></a>04701         <span class="keywordflow">switch</span>($token) {
<a name="l04702"></a>04702             <span class="keywordflow">case</span> self::ISO_8601 :
<a name="l04703"></a>04703                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;dd mm yy&quot;</span>;
<a name="l04704"></a>04704                 <span class="keywordflow">break</span>;
<a name="l04705"></a>04705             <span class="keywordflow">case</span> self::RFC_2822 :
<a name="l04706"></a>04706                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;EEE, dd MMM yyyy HH:mm:ss&quot;</span>;
<a name="l04707"></a>04707                 <span class="keywordflow">break</span>;
<a name="l04708"></a>04708             <span class="keywordflow">case</span> self::DATES :
<a name="l04709"></a>04709                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>);
<a name="l04710"></a>04710                 <span class="keywordflow">break</span>;
<a name="l04711"></a>04711             <span class="keywordflow">case</span> self::DATE_FULL :
<a name="l04712"></a>04712                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;full&#39;</span>));
<a name="l04713"></a>04713                 <span class="keywordflow">break</span>;
<a name="l04714"></a>04714             <span class="keywordflow">case</span> self::DATE_LONG :
<a name="l04715"></a>04715                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;long&#39;</span>));
<a name="l04716"></a>04716                 <span class="keywordflow">break</span>;
<a name="l04717"></a>04717             <span class="keywordflow">case</span> self::DATE_MEDIUM :
<a name="l04718"></a>04718                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;medium&#39;</span>));
<a name="l04719"></a>04719                 <span class="keywordflow">break</span>;
<a name="l04720"></a>04720             <span class="keywordflow">case</span> self::DATE_SHORT :
<a name="l04721"></a>04721                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;short&#39;</span>));
<a name="l04722"></a>04722                 <span class="keywordflow">break</span>;
<a name="l04723"></a>04723             <span class="keywordflow">case</span> self::TIMES :
<a name="l04724"></a>04724                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>);
<a name="l04725"></a>04725                 <span class="keywordflow">break</span>;
<a name="l04726"></a>04726             <span class="keywordflow">case</span> self::TIME_FULL :
<a name="l04727"></a>04727                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;time&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;full&#39;</span>));
<a name="l04728"></a>04728                 <span class="keywordflow">break</span>;
<a name="l04729"></a>04729             <span class="keywordflow">case</span> self::TIME_LONG :
<a name="l04730"></a>04730                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;long&#39;</span>));
<a name="l04731"></a>04731                 <span class="keywordflow">break</span>;
<a name="l04732"></a>04732             <span class="keywordflow">case</span> self::TIME_MEDIUM :
<a name="l04733"></a>04733                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;medium&#39;</span>));
<a name="l04734"></a>04734                 <span class="keywordflow">break</span>;
<a name="l04735"></a>04735             <span class="keywordflow">case</span> self::TIME_SHORT :
<a name="l04736"></a>04736                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;date&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;short&#39;</span>));
<a name="l04737"></a>04737                 <span class="keywordflow">break</span>;
<a name="l04738"></a>04738             <span class="keywordflow">case</span> self::DATETIME :
<a name="l04739"></a>04739                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>);
<a name="l04740"></a>04740                 <span class="keywordflow">break</span>;
<a name="l04741"></a>04741             <span class="keywordflow">case</span> self::DATETIME_FULL :
<a name="l04742"></a>04742                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;full&#39;</span>));
<a name="l04743"></a>04743                 <span class="keywordflow">break</span>;
<a name="l04744"></a>04744             <span class="keywordflow">case</span> self::DATETIME_LONG :
<a name="l04745"></a>04745                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;long&#39;</span>));
<a name="l04746"></a>04746                 <span class="keywordflow">break</span>;
<a name="l04747"></a>04747             <span class="keywordflow">case</span> self::DATETIME_MEDIUM :
<a name="l04748"></a>04748                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;medium&#39;</span>));
<a name="l04749"></a>04749                 <span class="keywordflow">break</span>;
<a name="l04750"></a>04750             <span class="keywordflow">case</span> self::DATETIME_SHORT :
<a name="l04751"></a>04751                 <span class="keywordflow">return</span> <a class="code" href="class_zend___locale___data.html#a5196ea219889b1c33506b30580726988">Zend_Locale_Data::getContent</a>($locale, <span class="stringliteral">&#39;datetime&#39;</span>, array(<span class="stringliteral">&#39;gregorian&#39;</span>, <span class="stringliteral">&#39;short&#39;</span>));
<a name="l04752"></a>04752                 <span class="keywordflow">break</span>;
<a name="l04753"></a>04753             <span class="keywordflow">case</span> self::ATOM :
<a name="l04754"></a>04754             <span class="keywordflow">case</span> self::RFC_3339 :
<a name="l04755"></a>04755             <span class="keywordflow">case</span> self::W3C :
<a name="l04756"></a>04756                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;yyyy-MM-DD HH:mm:ss&quot;</span>;
<a name="l04757"></a>04757                 <span class="keywordflow">break</span>;
<a name="l04758"></a>04758             <span class="keywordflow">case</span> self::COOKIE :
<a name="l04759"></a>04759             <span class="keywordflow">case</span> self::RFC_850 :
<a name="l04760"></a>04760                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;EEEE, dd-MM-yyyy HH:mm:ss&quot;</span>;
<a name="l04761"></a>04761                 <span class="keywordflow">break</span>;
<a name="l04762"></a>04762             <span class="keywordflow">case</span> self::RFC_822 :
<a name="l04763"></a>04763             <span class="keywordflow">case</span> self::RFC_1036 :
<a name="l04764"></a>04764             <span class="keywordflow">case</span> self::RFC_1123 :
<a name="l04765"></a>04765             <span class="keywordflow">case</span> self::RSS :
<a name="l04766"></a>04766                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;EEE, dd MM yyyy HH:mm:ss&quot;</span>;
<a name="l04767"></a>04767                 <span class="keywordflow">break</span>;
<a name="l04768"></a>04768         }
<a name="l04769"></a>04769 
<a name="l04770"></a>04770         <span class="keywordflow">return</span> $token;
<a name="l04771"></a>04771     }
<a name="l04772"></a>04772 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Apr 19 2012 17:01:17 for openbiz by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
