<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>openbiz: E:/E/GEAMP/www/openbiz/openbiz/others/Zend/View/Helper/Navigation/HelperAbstract.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>E:/E/GEAMP/www/openbiz/openbiz/others/Zend/View/Helper/Navigation/HelperAbstract.php</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00026"></a>00026 require_once <span class="stringliteral">&#39;Zend/View/Helper/Navigation/Helper.php&#39;</span>;
<a name="l00027"></a>00027 
<a name="l00031"></a>00031 require_once <span class="stringliteral">&#39;Zend/View/Helper/HtmlElement.php&#39;</span>;
<a name="l00032"></a>00032 
<a name="l00042"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html">00042</a> <span class="keyword">abstract</span> <span class="keyword">class </span><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html">Zend_View_Helper_Navigation_HelperAbstract</a>
<a name="l00043"></a>00043     <span class="keyword">extends</span> <a class="code" href="class_zend___view___helper___html_element.html">Zend_View_Helper_HtmlElement</a>
<a name="l00044"></a>00044     implements <a class="code" href="interface_zend___view___helper___navigation___helper.html">Zend_View_Helper_Navigation_Helper</a>
<a name="l00045"></a>00045 {
<a name="l00051"></a>00051     <span class="keyword">protected</span> $_container;
<a name="l00052"></a>00052 
<a name="l00058"></a>00058     <span class="keyword">protected</span> $_minDepth;
<a name="l00059"></a>00059 
<a name="l00065"></a>00065     <span class="keyword">protected</span> $_maxDepth;
<a name="l00066"></a>00066 
<a name="l00072"></a>00072     <span class="keyword">protected</span> $_indent = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00073"></a>00073 
<a name="l00079"></a>00079     <span class="keyword">protected</span> $_translator;
<a name="l00080"></a>00080 
<a name="l00086"></a>00086     <span class="keyword">protected</span> $_acl;
<a name="l00087"></a>00087 
<a name="l00093"></a>00093     <span class="keyword">protected</span> $_renderInvisible = <span class="keyword">false</span>;
<a name="l00094"></a>00094 
<a name="l00100"></a>00100     <span class="keyword">protected</span> $_role;
<a name="l00101"></a>00101 
<a name="l00107"></a>00107     <span class="keyword">protected</span> $_useTranslator = <span class="keyword">true</span>;
<a name="l00108"></a>00108 
<a name="l00114"></a>00114     <span class="keyword">protected</span> $_useAcl = <span class="keyword">true</span>;
<a name="l00115"></a>00115 
<a name="l00122"></a>00122     <span class="keyword">protected</span> <span class="keyword">static</span> $_defaultAcl;
<a name="l00123"></a>00123 
<a name="l00130"></a>00130     <span class="keyword">protected</span> <span class="keyword">static</span> $_defaultRole;
<a name="l00131"></a>00131 
<a name="l00132"></a>00132     <span class="comment">// Accessors:</span>
<a name="l00133"></a>00133 
<a name="l00147"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a37c4c72db14a5f987396a241167560b6">00147</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a37c4c72db14a5f987396a241167560b6">setContainer</a>(Zend_Navigation_Container $container = null)
<a name="l00148"></a>00148     {
<a name="l00149"></a>00149         $this-&gt;_container = $container;
<a name="l00150"></a>00150         <span class="keywordflow">return</span> $this;
<a name="l00151"></a>00151     }
<a name="l00152"></a>00152 
<a name="l00168"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a53e2ca32cf29808b0b18cd5accf3c4db">00168</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a53e2ca32cf29808b0b18cd5accf3c4db">getContainer</a>()
<a name="l00169"></a>00169     {
<a name="l00170"></a>00170         <span class="keywordflow">if</span> (null === $this-&gt;_container) {
<a name="l00171"></a>00171             <span class="comment">// try to fetch from registry first</span>
<a name="l00172"></a>00172             require_once <span class="stringliteral">&#39;Zend/Registry.php&#39;</span>;
<a name="l00173"></a>00173             <span class="keywordflow">if</span> (<a class="code" href="class_zend___registry.html#ac8c396b3b76f72a1bac4e668721ddb2e">Zend_Registry::isRegistered</a>(<span class="stringliteral">&#39;Zend_Navigation&#39;</span>)) {
<a name="l00174"></a>00174                 $nav = <a class="code" href="class_zend___registry.html#a68c12da739beec9f01e66b9a8f0dd24d">Zend_Registry::get</a>(<span class="stringliteral">&#39;Zend_Navigation&#39;</span>);
<a name="l00175"></a>00175                 <span class="keywordflow">if</span> ($nav instanceof Zend_Navigation_Container) {
<a name="l00176"></a>00176                     <span class="keywordflow">return</span> $this-&gt;_container = $nav;
<a name="l00177"></a>00177                 }
<a name="l00178"></a>00178             }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180             <span class="comment">// nothing found in registry, create new container</span>
<a name="l00181"></a>00181             require_once <span class="stringliteral">&#39;Zend/Navigation.php&#39;</span>;
<a name="l00182"></a>00182             $this-&gt;_container = <span class="keyword">new</span> <a class="code" href="class_zend___navigation.html">Zend_Navigation</a>();
<a name="l00183"></a>00183         }
<a name="l00184"></a>00184 
<a name="l00185"></a>00185         <span class="keywordflow">return</span> $this-&gt;_container;
<a name="l00186"></a>00186     }
<a name="l00187"></a>00187 
<a name="l00198"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a4507c5e816239304ca64d2f20a2aea89">00198</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a4507c5e816239304ca64d2f20a2aea89">setMinDepth</a>($minDepth = null)
<a name="l00199"></a>00199     {
<a name="l00200"></a>00200         <span class="keywordflow">if</span> (null === $minDepth || is_int($minDepth)) {
<a name="l00201"></a>00201             $this-&gt;_minDepth = $minDepth;
<a name="l00202"></a>00202         } <span class="keywordflow">else</span> {
<a name="l00203"></a>00203             $this-&gt;_minDepth = (int) $minDepth;
<a name="l00204"></a>00204         }
<a name="l00205"></a>00205         <span class="keywordflow">return</span> $this;
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207 
<a name="l00213"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#aaf857f70cd06625b841d27c6516bb0c3">00213</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#aaf857f70cd06625b841d27c6516bb0c3">getMinDepth</a>()
<a name="l00214"></a>00214     {
<a name="l00215"></a>00215         <span class="keywordflow">if</span> (!is_int($this-&gt;_minDepth) || $this-&gt;_minDepth &lt; 0) {
<a name="l00216"></a>00216             <span class="keywordflow">return</span> 0;
<a name="l00217"></a>00217         }
<a name="l00218"></a>00218         <span class="keywordflow">return</span> $this-&gt;_minDepth;
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220 
<a name="l00231"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a28be34ac968e84bd4df000b446241584">00231</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a28be34ac968e84bd4df000b446241584">setMaxDepth</a>($maxDepth = null)
<a name="l00232"></a>00232     {
<a name="l00233"></a>00233         <span class="keywordflow">if</span> (null === $maxDepth || is_int($maxDepth)) {
<a name="l00234"></a>00234             $this-&gt;_maxDepth = $maxDepth;
<a name="l00235"></a>00235         } <span class="keywordflow">else</span> {
<a name="l00236"></a>00236             $this-&gt;_maxDepth = (int) $maxDepth;
<a name="l00237"></a>00237         }
<a name="l00238"></a>00238         <span class="keywordflow">return</span> $this;
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240 
<a name="l00246"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ad19103d4fff46dd1fce5dd8c1950533b">00246</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ad19103d4fff46dd1fce5dd8c1950533b">getMaxDepth</a>()
<a name="l00247"></a>00247     {
<a name="l00248"></a>00248         <span class="keywordflow">return</span> $this-&gt;_maxDepth;
<a name="l00249"></a>00249     }
<a name="l00250"></a>00250 
<a name="l00260"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#aa75c8f3baa0d5bed1135d416b6c3d29f">00260</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#aa75c8f3baa0d5bed1135d416b6c3d29f">setIndent</a>($indent)
<a name="l00261"></a>00261     {
<a name="l00262"></a>00262         $this-&gt;_indent = $this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a03e93f15a6c144ca7a4edb6a6932d6c2">_getWhitespace</a>($indent);
<a name="l00263"></a>00263         <span class="keywordflow">return</span> $this;
<a name="l00264"></a>00264     }
<a name="l00265"></a>00265 
<a name="l00271"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a0a09e0110a81470ca7791be5738f353f">00271</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a0a09e0110a81470ca7791be5738f353f">getIndent</a>()
<a name="l00272"></a>00272     {
<a name="l00273"></a>00273         <span class="keywordflow">return</span> $this-&gt;_indent;
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275 
<a name="l00292"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a7b015952a8f9c7a19c18b1990321276f">00292</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a7b015952a8f9c7a19c18b1990321276f">setTranslator</a>($translator = null)
<a name="l00293"></a>00293     {
<a name="l00294"></a>00294         <span class="keywordflow">if</span> (null == $translator ||
<a name="l00295"></a>00295             $translator instanceof <a class="code" href="class_zend___translate___adapter.html">Zend_Translate_Adapter</a>) {
<a name="l00296"></a>00296             $this-&gt;_translator = $translator;
<a name="l00297"></a>00297         } elseif ($translator instanceof <a class="code" href="class_zend___translate.html">Zend_Translate</a>) {
<a name="l00298"></a>00298             $this-&gt;_translator = $translator-&gt;getAdapter();
<a name="l00299"></a>00299         }
<a name="l00300"></a>00300 
<a name="l00301"></a>00301         <span class="keywordflow">return</span> $this;
<a name="l00302"></a>00302     }
<a name="l00303"></a>00303 
<a name="l00311"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a4b5bf5bf92166dc1c551fe8cfabfb5ae">00311</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a4b5bf5bf92166dc1c551fe8cfabfb5ae">getTranslator</a>()
<a name="l00312"></a>00312     {
<a name="l00313"></a>00313         <span class="keywordflow">if</span> (null === $this-&gt;_translator) {
<a name="l00314"></a>00314             require_once <span class="stringliteral">&#39;Zend/Registry.php&#39;</span>;
<a name="l00315"></a>00315             <span class="keywordflow">if</span> (<a class="code" href="class_zend___registry.html#ac8c396b3b76f72a1bac4e668721ddb2e">Zend_Registry::isRegistered</a>(<span class="stringliteral">&#39;Zend_Translate&#39;</span>)) {
<a name="l00316"></a>00316                 $this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a7b015952a8f9c7a19c18b1990321276f">setTranslator</a>(<a class="code" href="class_zend___registry.html#a68c12da739beec9f01e66b9a8f0dd24d">Zend_Registry::get</a>(<span class="stringliteral">&#39;Zend_Translate&#39;</span>));
<a name="l00317"></a>00317             }
<a name="l00318"></a>00318         }
<a name="l00319"></a>00319 
<a name="l00320"></a>00320         <span class="keywordflow">return</span> $this-&gt;_translator;
<a name="l00321"></a>00321     }
<a name="l00322"></a>00322 
<a name="l00333"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a02d2d310922ffbacb5f6a65204d5fe09">00333</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a02d2d310922ffbacb5f6a65204d5fe09">setAcl</a>(<a class="code" href="class_zend___acl.html">Zend_Acl</a> $acl = null)
<a name="l00334"></a>00334     {
<a name="l00335"></a>00335         $this-&gt;_acl = $acl;
<a name="l00336"></a>00336         <span class="keywordflow">return</span> $this;
<a name="l00337"></a>00337     }
<a name="l00338"></a>00338 
<a name="l00347"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a7fb5f7dd1770b45b460ad11431a0d783">00347</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a7fb5f7dd1770b45b460ad11431a0d783">getAcl</a>()
<a name="l00348"></a>00348     {
<a name="l00349"></a>00349         <span class="keywordflow">if</span> ($this-&gt;_acl === null &amp;&amp; self::$_defaultAcl !== null) {
<a name="l00350"></a>00350             <span class="keywordflow">return</span> self::$_defaultAcl;
<a name="l00351"></a>00351         }
<a name="l00352"></a>00352 
<a name="l00353"></a>00353         <span class="keywordflow">return</span> $this-&gt;_acl;
<a name="l00354"></a>00354     }
<a name="l00355"></a>00355 
<a name="l00372"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a1ed7a45ca1b0f738d8564c012e4200fe">00372</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a1ed7a45ca1b0f738d8564c012e4200fe">setRole</a>($role = null)
<a name="l00373"></a>00373     {
<a name="l00374"></a>00374         <span class="keywordflow">if</span> (null === $role || is_string($role) ||
<a name="l00375"></a>00375             $role instanceof Zend_Acl_Role_Interface) {
<a name="l00376"></a>00376             $this-&gt;_role = $role;
<a name="l00377"></a>00377         } <span class="keywordflow">else</span> {
<a name="l00378"></a>00378             require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l00379"></a>00379             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(sprintf(
<a name="l00380"></a>00380                     <span class="stringliteral">&#39;$role must be a string, null, or an instance of &#39;</span> .
<a name="l00381"></a>00381                             <span class="stringliteral">&#39;Zend_Acl_Role_Interface; %s given&#39;</span>,
<a name="l00382"></a>00382                     gettype($role)));
<a name="l00383"></a>00383         }
<a name="l00384"></a>00384 
<a name="l00385"></a>00385         <span class="keywordflow">return</span> $this;
<a name="l00386"></a>00386     }
<a name="l00387"></a>00387 
<a name="l00396"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a0b2e7098f1c48a7439a42bada5b69689">00396</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a0b2e7098f1c48a7439a42bada5b69689">getRole</a>()
<a name="l00397"></a>00397     {
<a name="l00398"></a>00398         <span class="keywordflow">if</span> ($this-&gt;_role === null &amp;&amp; self::$_defaultRole !== null) {
<a name="l00399"></a>00399             <span class="keywordflow">return</span> self::$_defaultRole;
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401 
<a name="l00402"></a>00402         <span class="keywordflow">return</span> $this-&gt;_role;
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 
<a name="l00416"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ac4188c94bcdc6a0ab1a1000fcc68d550">00416</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ac4188c94bcdc6a0ab1a1000fcc68d550">setUseAcl</a>($useAcl = <span class="keyword">true</span>)
<a name="l00417"></a>00417     {
<a name="l00418"></a>00418         $this-&gt;_useAcl = (bool) $useAcl;
<a name="l00419"></a>00419         <span class="keywordflow">return</span> $this;
<a name="l00420"></a>00420     }
<a name="l00421"></a>00421 
<a name="l00429"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a9e7bd3f83eabe63e4909ac72ad2b6643">00429</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a9e7bd3f83eabe63e4909ac72ad2b6643">getUseAcl</a>()
<a name="l00430"></a>00430     {
<a name="l00431"></a>00431         <span class="keywordflow">return</span> $this-&gt;_useAcl;
<a name="l00432"></a>00432     }
<a name="l00433"></a>00433 
<a name="l00439"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ae08246358b6684ea47f8bc83c2139615">00439</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ae08246358b6684ea47f8bc83c2139615">getRenderInvisible</a>()
<a name="l00440"></a>00440     {
<a name="l00441"></a>00441         <span class="keywordflow">return</span> $this-&gt;_renderInvisible;
<a name="l00442"></a>00442     }
<a name="l00443"></a>00443 
<a name="l00451"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a12438ae41c7d2f9278bfc3386a262a7b">00451</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a12438ae41c7d2f9278bfc3386a262a7b">setRenderInvisible</a>($renderInvisible = <span class="keyword">true</span>)
<a name="l00452"></a>00452     {
<a name="l00453"></a>00453         $this-&gt;_renderInvisible = (bool) $renderInvisible;
<a name="l00454"></a>00454         <span class="keywordflow">return</span> $this;
<a name="l00455"></a>00455     }
<a name="l00456"></a>00456 
<a name="l00468"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#acc9c85cf79ca9dfcc48119f93b0bd90a">00468</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#acc9c85cf79ca9dfcc48119f93b0bd90a">setUseTranslator</a>($useTranslator = <span class="keyword">true</span>)
<a name="l00469"></a>00469     {
<a name="l00470"></a>00470         $this-&gt;_useTranslator = (bool) $useTranslator;
<a name="l00471"></a>00471         <span class="keywordflow">return</span> $this;
<a name="l00472"></a>00472     }
<a name="l00473"></a>00473 
<a name="l00481"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a5a497267daecc033c852b8c687837031">00481</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a5a497267daecc033c852b8c687837031">getUseTranslator</a>()
<a name="l00482"></a>00482     {
<a name="l00483"></a>00483         <span class="keywordflow">return</span> $this-&gt;_useTranslator;
<a name="l00484"></a>00484     }
<a name="l00485"></a>00485 
<a name="l00486"></a>00486     <span class="comment">// Magic overloads:</span>
<a name="l00487"></a>00487 
<a name="l00496"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ac8f1383877f4b28e78dac7fc338982aa">00496</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ac8f1383877f4b28e78dac7fc338982aa">__call</a>($method, array $arguments = array())
<a name="l00497"></a>00497     {
<a name="l00498"></a>00498         <span class="keywordflow">return</span> call_user_func_array(
<a name="l00499"></a>00499                 array($this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a53e2ca32cf29808b0b18cd5accf3c4db">getContainer</a>(), $method),
<a name="l00500"></a>00500                 $arguments);
<a name="l00501"></a>00501     }
<a name="l00502"></a>00502 
<a name="l00513"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a7516ca30af0db3cdbf9a7739b48ce91d">00513</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a7516ca30af0db3cdbf9a7739b48ce91d">__toString</a>()
<a name="l00514"></a>00514     {
<a name="l00515"></a>00515         <span class="keywordflow">try</span> {
<a name="l00516"></a>00516             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="interface_zend___view___helper___navigation___helper.html#a2c590181ad57691158a1c2924e438554">render</a>();
<a name="l00517"></a>00517         } <span class="keywordflow">catch</span> (Exception $e) {
<a name="l00518"></a>00518             $msg = get_class($e) . <span class="stringliteral">&#39;: &#39;</span> . $e-&gt;getMessage();
<a name="l00519"></a>00519             trigger_error($msg, E_USER_ERROR);
<a name="l00520"></a>00520             <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;
<a name="l00521"></a>00521         }
<a name="l00522"></a>00522     }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524     <span class="comment">// Public methods:</span>
<a name="l00525"></a>00525 
<a name="l00547"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ab70dd20926800179b517b8fc5ccde069">00547</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ab70dd20926800179b517b8fc5ccde069">findActive</a>(Zend_Navigation_Container $container,
<a name="l00548"></a>00548                                $minDepth = null,
<a name="l00549"></a>00549                                $maxDepth = -1)
<a name="l00550"></a>00550     {
<a name="l00551"></a>00551         <span class="keywordflow">if</span> (!is_int($minDepth)) {
<a name="l00552"></a>00552             $minDepth = $this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#aaf857f70cd06625b841d27c6516bb0c3">getMinDepth</a>();
<a name="l00553"></a>00553         }
<a name="l00554"></a>00554         <span class="keywordflow">if</span> ((!is_int($maxDepth) || $maxDepth &lt; 0) &amp;&amp; null !== $maxDepth) {
<a name="l00555"></a>00555             $maxDepth = $this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ad19103d4fff46dd1fce5dd8c1950533b">getMaxDepth</a>();
<a name="l00556"></a>00556         }
<a name="l00557"></a>00557 
<a name="l00558"></a>00558         $found  = null;
<a name="l00559"></a>00559         $foundDepth = -1;
<a name="l00560"></a>00560         $iterator = <span class="keyword">new</span> RecursiveIteratorIterator($container,
<a name="l00561"></a>00561                 RecursiveIteratorIterator::CHILD_FIRST);
<a name="l00562"></a>00562 
<a name="l00563"></a>00563         <span class="keywordflow">foreach</span> ($iterator as $page) {
<a name="l00564"></a>00564             $currDepth = $iterator-&gt;getDepth();
<a name="l00565"></a>00565             <span class="keywordflow">if</span> ($currDepth &lt; $minDepth || !$this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ac36d82558e54f5f3dbb7cdb31520c39a">accept</a>($page)) {
<a name="l00566"></a>00566                 <span class="comment">// page is not accepted</span>
<a name="l00567"></a>00567                 <span class="keywordflow">continue</span>;
<a name="l00568"></a>00568             }
<a name="l00569"></a>00569 
<a name="l00570"></a>00570             <span class="keywordflow">if</span> ($page-&gt;isActive(<span class="keyword">false</span>) &amp;&amp; $currDepth &gt; $foundDepth) {
<a name="l00571"></a>00571                 <span class="comment">// found an active page at a deeper level than before</span>
<a name="l00572"></a>00572                 $found = $page;
<a name="l00573"></a>00573                 $foundDepth = $currDepth;
<a name="l00574"></a>00574             }
<a name="l00575"></a>00575         }
<a name="l00576"></a>00576 
<a name="l00577"></a>00577         <span class="keywordflow">if</span> (is_int($maxDepth) &amp;&amp; $foundDepth &gt; $maxDepth) {
<a name="l00578"></a>00578             <span class="keywordflow">while</span> ($foundDepth &gt; $maxDepth) {
<a name="l00579"></a>00579                 <span class="keywordflow">if</span> (--$foundDepth &lt; $minDepth) {
<a name="l00580"></a>00580                     $found = null;
<a name="l00581"></a>00581                     <span class="keywordflow">break</span>;
<a name="l00582"></a>00582                 }
<a name="l00583"></a>00583 
<a name="l00584"></a>00584                 $found = $found-&gt;getParent();
<a name="l00585"></a>00585                 <span class="keywordflow">if</span> (!$found instanceof Zend_Navigation_Page) {
<a name="l00586"></a>00586                     $found = null;
<a name="l00587"></a>00587                     <span class="keywordflow">break</span>;
<a name="l00588"></a>00588                 }
<a name="l00589"></a>00589             }
<a name="l00590"></a>00590         }
<a name="l00591"></a>00591 
<a name="l00592"></a>00592         <span class="keywordflow">if</span> ($found) {
<a name="l00593"></a>00593             <span class="keywordflow">return</span> array(<span class="stringliteral">&#39;page&#39;</span> =&gt; $found, <span class="stringliteral">&#39;depth&#39;</span> =&gt; $foundDepth);
<a name="l00594"></a>00594         } <span class="keywordflow">else</span> {
<a name="l00595"></a>00595             <span class="keywordflow">return</span> array();
<a name="l00596"></a>00596         }
<a name="l00597"></a>00597     }
<a name="l00598"></a>00598 
<a name="l00606"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a05c98d9754769b60da9024a300d8b78d">00606</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a05c98d9754769b60da9024a300d8b78d">hasContainer</a>()
<a name="l00607"></a>00607     {
<a name="l00608"></a>00608         <span class="keywordflow">return</span> null !== $this-&gt;_container;
<a name="l00609"></a>00609     }
<a name="l00610"></a>00610 
<a name="l00618"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a30c99336e4f7ecc3ae4f2da40878fe40">00618</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a30c99336e4f7ecc3ae4f2da40878fe40">hasAcl</a>()
<a name="l00619"></a>00619     {
<a name="l00620"></a>00620         <span class="keywordflow">return</span> null !== $this-&gt;_acl;
<a name="l00621"></a>00621     }
<a name="l00622"></a>00622 
<a name="l00630"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a065fde07ecb0037612ac8497e743ee06">00630</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a065fde07ecb0037612ac8497e743ee06">hasRole</a>()
<a name="l00631"></a>00631     {
<a name="l00632"></a>00632         <span class="keywordflow">return</span> null !== $this-&gt;_role;
<a name="l00633"></a>00633     }
<a name="l00634"></a>00634 
<a name="l00642"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a1b13c9c2da4cde0b296f00d2d004c967">00642</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a1b13c9c2da4cde0b296f00d2d004c967">hasTranslator</a>()
<a name="l00643"></a>00643     {
<a name="l00644"></a>00644         <span class="keywordflow">return</span> null !== $this-&gt;_translator;
<a name="l00645"></a>00645     }
<a name="l00646"></a>00646 
<a name="l00653"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a13a1eab32bba55c8ec29e28e9fd083f9">00653</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a13a1eab32bba55c8ec29e28e9fd083f9">htmlify</a>(Zend_Navigation_Page $page)
<a name="l00654"></a>00654     {
<a name="l00655"></a>00655         <span class="comment">// get label and title for translating</span>
<a name="l00656"></a>00656         $label = $page-&gt;getLabel();
<a name="l00657"></a>00657         $title = $page-&gt;getTitle();
<a name="l00658"></a>00658 
<a name="l00659"></a>00659         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a5a497267daecc033c852b8c687837031">getUseTranslator</a>() &amp;&amp; $t = $this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a4b5bf5bf92166dc1c551fe8cfabfb5ae">getTranslator</a>()) {
<a name="l00660"></a>00660             <span class="keywordflow">if</span> (is_string($label) &amp;&amp; !empty($label)) {
<a name="l00661"></a>00661                 $label = $t-&gt;translate($label);
<a name="l00662"></a>00662             }
<a name="l00663"></a>00663             <span class="keywordflow">if</span> (is_string($title) &amp;&amp; !empty($title)) {
<a name="l00664"></a>00664                 $title = $t-&gt;translate($title);
<a name="l00665"></a>00665             }
<a name="l00666"></a>00666         }
<a name="l00667"></a>00667 
<a name="l00668"></a>00668         <span class="comment">// get attribs for anchor element</span>
<a name="l00669"></a>00669         $attribs = array(
<a name="l00670"></a>00670             <span class="stringliteral">&#39;id&#39;</span>     =&gt; $page-&gt;getId(),
<a name="l00671"></a>00671             <span class="stringliteral">&#39;title&#39;</span>  =&gt; $title,
<a name="l00672"></a>00672             <span class="stringliteral">&#39;class&#39;</span>  =&gt; $page-&gt;getClass(),
<a name="l00673"></a>00673             <span class="stringliteral">&#39;href&#39;</span>   =&gt; $page-&gt;getHref(),
<a name="l00674"></a>00674             <span class="stringliteral">&#39;target&#39;</span> =&gt; $page-&gt;getTarget()
<a name="l00675"></a>00675         );
<a name="l00676"></a>00676 
<a name="l00677"></a>00677         <span class="keywordflow">return</span> <span class="stringliteral">&#39;&lt;a&#39;</span> . $this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ace08c584bb4e68a329bf718780e64f24">_htmlAttribs</a>($attribs) . <span class="charliteral">&#39;&gt;&#39;</span>
<a name="l00678"></a>00678              . $this-&gt;view-&gt;escape($label)
<a name="l00679"></a>00679              . <span class="stringliteral">&#39;&lt;/a&gt;&#39;</span>;
<a name="l00680"></a>00680     }
<a name="l00681"></a>00681 
<a name="l00682"></a>00682     <span class="comment">// Iterator filter methods:</span>
<a name="l00683"></a>00683 
<a name="l00705"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ac36d82558e54f5f3dbb7cdb31520c39a">00705</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ac36d82558e54f5f3dbb7cdb31520c39a">accept</a>(Zend_Navigation_Page $page, $recursive = <span class="keyword">true</span>)
<a name="l00706"></a>00706     {
<a name="l00707"></a>00707         <span class="comment">// accept by default</span>
<a name="l00708"></a>00708         $accept = <span class="keyword">true</span>;
<a name="l00709"></a>00709 
<a name="l00710"></a>00710         <span class="keywordflow">if</span> (!$page-&gt;isVisible(<span class="keyword">false</span>) &amp;&amp; !$this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ae08246358b6684ea47f8bc83c2139615">getRenderInvisible</a>()) {
<a name="l00711"></a>00711             <span class="comment">// don&#39;t accept invisible pages</span>
<a name="l00712"></a>00712             $accept = <span class="keyword">false</span>;
<a name="l00713"></a>00713         } elseif ($this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a9e7bd3f83eabe63e4909ac72ad2b6643">getUseAcl</a>() &amp;&amp; !$this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a44eeb5a8bc89a5f24537f848ec0ad51c">_acceptAcl</a>($page)) {
<a name="l00714"></a>00714             <span class="comment">// acl is not amused</span>
<a name="l00715"></a>00715             $accept = <span class="keyword">false</span>;
<a name="l00716"></a>00716         }
<a name="l00717"></a>00717 
<a name="l00718"></a>00718         <span class="keywordflow">if</span> ($accept &amp;&amp; $recursive) {
<a name="l00719"></a>00719             $parent = $page-&gt;getParent();
<a name="l00720"></a>00720             <span class="keywordflow">if</span> ($parent instanceof Zend_Navigation_Page) {
<a name="l00721"></a>00721                 $accept = $this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ac36d82558e54f5f3dbb7cdb31520c39a">accept</a>($parent, <span class="keyword">true</span>);
<a name="l00722"></a>00722             }
<a name="l00723"></a>00723         }
<a name="l00724"></a>00724 
<a name="l00725"></a>00725         <span class="keywordflow">return</span> $accept;
<a name="l00726"></a>00726     }
<a name="l00727"></a>00727 
<a name="l00740"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a44eeb5a8bc89a5f24537f848ec0ad51c">00740</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a44eeb5a8bc89a5f24537f848ec0ad51c">_acceptAcl</a>(Zend_Navigation_Page $page)
<a name="l00741"></a>00741     {
<a name="l00742"></a>00742         <span class="keywordflow">if</span> (!$acl = $this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a7fb5f7dd1770b45b460ad11431a0d783">getAcl</a>()) {
<a name="l00743"></a>00743             <span class="comment">// no acl registered means don&#39;t use acl</span>
<a name="l00744"></a>00744             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00745"></a>00745         }
<a name="l00746"></a>00746 
<a name="l00747"></a>00747         $role = $this-&gt;<a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a0b2e7098f1c48a7439a42bada5b69689">getRole</a>();
<a name="l00748"></a>00748         $resource = $page-&gt;getResource();
<a name="l00749"></a>00749         $privilege = $page-&gt;getPrivilege();
<a name="l00750"></a>00750 
<a name="l00751"></a>00751         <span class="keywordflow">if</span> ($resource || $privilege) {
<a name="l00752"></a>00752             <span class="comment">// determine using helper role and page resource/privilege</span>
<a name="l00753"></a>00753             <span class="keywordflow">return</span> $acl-&gt;isAllowed($role, $resource, $privilege);
<a name="l00754"></a>00754         }
<a name="l00755"></a>00755 
<a name="l00756"></a>00756         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00757"></a>00757     }
<a name="l00758"></a>00758 
<a name="l00759"></a>00759     <span class="comment">// Util methods:</span>
<a name="l00760"></a>00760 
<a name="l00767"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a03e93f15a6c144ca7a4edb6a6932d6c2">00767</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a03e93f15a6c144ca7a4edb6a6932d6c2">_getWhitespace</a>($indent)
<a name="l00768"></a>00768     {
<a name="l00769"></a>00769         <span class="keywordflow">if</span> (is_int($indent)) {
<a name="l00770"></a>00770             $indent = str_repeat(<span class="charliteral">&#39; &#39;</span>, $indent);
<a name="l00771"></a>00771         }
<a name="l00772"></a>00772 
<a name="l00773"></a>00773         <span class="keywordflow">return</span> (<span class="keywordtype">string</span>) $indent;
<a name="l00774"></a>00774     }
<a name="l00775"></a>00775 
<a name="l00785"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ace08c584bb4e68a329bf718780e64f24">00785</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ace08c584bb4e68a329bf718780e64f24">_htmlAttribs</a>($attribs)
<a name="l00786"></a>00786     {
<a name="l00787"></a>00787         <span class="comment">// filter out null values and empty string values</span>
<a name="l00788"></a>00788         <span class="keywordflow">foreach</span> ($attribs as $key =&gt; $value) {
<a name="l00789"></a>00789             <span class="keywordflow">if</span> ($value === null || (is_string($value) &amp;&amp; !strlen($value))) {
<a name="l00790"></a>00790                 unset($attribs[$key]);
<a name="l00791"></a>00791             }
<a name="l00792"></a>00792         }
<a name="l00793"></a>00793 
<a name="l00794"></a>00794         <span class="keywordflow">return</span> <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#ace08c584bb4e68a329bf718780e64f24">parent::_htmlAttribs</a>($attribs);
<a name="l00795"></a>00795     }
<a name="l00796"></a>00796 
<a name="l00805"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#aa63e0f3f2006d762ccf68a0eaf692920">00805</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#aa63e0f3f2006d762ccf68a0eaf692920">_normalizeId</a>($value)
<a name="l00806"></a>00806     {
<a name="l00807"></a>00807         $prefix = get_class($this);
<a name="l00808"></a>00808         $prefix = strtolower(trim(substr($prefix, strrpos($prefix, <span class="charliteral">&#39;_&#39;</span>)), <span class="charliteral">&#39;_&#39;</span>));
<a name="l00809"></a>00809 
<a name="l00810"></a>00810         <span class="keywordflow">return</span> $prefix . <span class="charliteral">&#39;-&#39;</span> . $value;
<a name="l00811"></a>00811     }
<a name="l00812"></a>00812 
<a name="l00813"></a>00813     <span class="comment">// Static methods:</span>
<a name="l00814"></a>00814 
<a name="l00822"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a4c57b7e9cd721e36cf688ade31acbd86">00822</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a4c57b7e9cd721e36cf688ade31acbd86">setDefaultAcl</a>(<a class="code" href="class_zend___acl.html">Zend_Acl</a> $acl = null)
<a name="l00823"></a>00823     {
<a name="l00824"></a>00824         self::$_defaultAcl = $acl;
<a name="l00825"></a>00825     }
<a name="l00826"></a>00826 
<a name="l00839"></a><a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a302fded36764088f96bec2b11154c62b">00839</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___view___helper___navigation___helper_abstract.html#a302fded36764088f96bec2b11154c62b">setDefaultRole</a>($role = null)
<a name="l00840"></a>00840     {
<a name="l00841"></a>00841         <span class="keywordflow">if</span> (null === $role ||
<a name="l00842"></a>00842             is_string($role) ||
<a name="l00843"></a>00843             $role instanceof Zend_Acl_Role_Interface) {
<a name="l00844"></a>00844             self::$_defaultRole = $role;
<a name="l00845"></a>00845         } <span class="keywordflow">else</span> {
<a name="l00846"></a>00846             require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l00847"></a>00847             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(
<a name="l00848"></a>00848                     <span class="stringliteral">&#39;$role must be null|string|Zend_Acl_Role_Interface&#39;</span>);
<a name="l00849"></a>00849         }
<a name="l00850"></a>00850     }
<a name="l00851"></a>00851 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Apr 19 2012 17:01:18 for openbiz by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
