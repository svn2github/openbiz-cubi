<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>openbiz: E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Paginator.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Paginator.php</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00025"></a>00025 require_once <span class="stringliteral">&#39;Zend/Loader/PluginLoader.php&#39;</span>;
<a name="l00026"></a>00026 
<a name="l00030"></a>00030 require_once <span class="stringliteral">&#39;Zend/Json.php&#39;</span>;
<a name="l00031"></a>00031 
<a name="l00038"></a><a class="code" href="class_zend___paginator.html">00038</a> <span class="keyword">class </span><a class="code" href="class_zend___paginator.html">Zend_Paginator</a> <span class="keyword">implements</span> Countable, IteratorAggregate
<a name="l00039"></a>00039 {
<a name="l00045"></a>00045     <span class="keyword">const</span> INTERNAL_ADAPTER = <span class="stringliteral">&#39;Zend_Paginator_Adapter_Internal&#39;</span>;
<a name="l00046"></a>00046 
<a name="l00051"></a><a class="code" href="class_zend___paginator.html#a5f90c029707ca64b0fd45d8ab2ee1043">00051</a>     <span class="keyword">const</span> <a class="code" href="class_zend___paginator.html#a5f90c029707ca64b0fd45d8ab2ee1043">CACHE_TAG_PREFIX</a> = <span class="stringliteral">&#39;Zend_Paginator_&#39;</span>;
<a name="l00052"></a>00052 
<a name="l00058"></a>00058     <span class="keyword">protected</span> <span class="keyword">static</span> $_adapterLoader = null;
<a name="l00059"></a>00059 
<a name="l00065"></a>00065     <span class="keyword">protected</span> <span class="keyword">static</span> $_config = null;
<a name="l00066"></a>00066 
<a name="l00072"></a>00072     <span class="keyword">protected</span> <span class="keyword">static</span> $_defaultScrollingStyle = <span class="stringliteral">&#39;Sliding&#39;</span>;
<a name="l00073"></a>00073 
<a name="l00079"></a>00079     <span class="keyword">protected</span> <span class="keyword">static</span> $_defaultItemCountPerPage = 10;
<a name="l00080"></a>00080 
<a name="l00086"></a>00086     <span class="keyword">protected</span> <span class="keyword">static</span> $_scrollingStyleLoader = null;
<a name="l00087"></a>00087 
<a name="l00093"></a>00093     <span class="keyword">protected</span> <span class="keyword">static</span> $_cache;
<a name="l00094"></a>00094 
<a name="l00100"></a>00100     <span class="keyword">protected</span> $_cacheEnabled = <span class="keyword">true</span>;
<a name="l00101"></a>00101 
<a name="l00107"></a>00107     <span class="keyword">protected</span> $_adapter = null;
<a name="l00108"></a>00108 
<a name="l00114"></a>00114     <span class="keyword">protected</span> $_currentItemCount = null;
<a name="l00115"></a>00115 
<a name="l00121"></a>00121     <span class="keyword">protected</span> $_currentItems = null;
<a name="l00122"></a>00122 
<a name="l00128"></a>00128     <span class="keyword">protected</span> $_currentPageNumber = 1;
<a name="l00129"></a>00129 
<a name="l00135"></a>00135     <span class="keyword">protected</span> $_filter = null;
<a name="l00136"></a>00136 
<a name="l00142"></a>00142     <span class="keyword">protected</span> $_itemCountPerPage = null;
<a name="l00143"></a>00143 
<a name="l00149"></a>00149     <span class="keyword">protected</span> $_pageCount = null;
<a name="l00150"></a>00150 
<a name="l00157"></a>00157     <span class="keyword">protected</span> $_pageRange = 10;
<a name="l00158"></a>00158 
<a name="l00164"></a>00164     <span class="keyword">protected</span> $_pages = null;
<a name="l00165"></a>00165 
<a name="l00171"></a>00171     <span class="keyword">protected</span> $_view = null;
<a name="l00172"></a>00172 
<a name="l00179"></a><a class="code" href="class_zend___paginator.html#a56188e088f3ff1d6ec125dc411719283">00179</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#a56188e088f3ff1d6ec125dc411719283">addAdapterPrefixPath</a>($prefix, $path)
<a name="l00180"></a>00180     {
<a name="l00181"></a>00181         <a class="code" href="class_zend___paginator.html#abb1196cba3e414b4b2042829f1c12539">self::getAdapterLoader</a>()-&gt;addPrefixPath($prefix, $path);
<a name="l00182"></a>00182     }
<a name="l00183"></a>00183 
<a name="l00197"></a><a class="code" href="class_zend___paginator.html#a050b31965bb82d87f17119a04f2e7054">00197</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#a050b31965bb82d87f17119a04f2e7054">addAdapterPrefixPaths</a>(array $prefixPaths)
<a name="l00198"></a>00198     {
<a name="l00199"></a>00199         <span class="keywordflow">if</span> (isset($prefixPaths[<span class="stringliteral">&#39;prefix&#39;</span>]) &amp;&amp; isset($prefixPaths[<span class="stringliteral">&#39;path&#39;</span>])) {
<a name="l00200"></a>00200             <a class="code" href="class_zend___paginator.html#a56188e088f3ff1d6ec125dc411719283">self::addAdapterPrefixPath</a>($prefixPaths[<span class="stringliteral">&#39;prefix&#39;</span>], $prefixPaths[<span class="stringliteral">&#39;path&#39;</span>]);
<a name="l00201"></a>00201         } <span class="keywordflow">else</span> {
<a name="l00202"></a>00202             <span class="keywordflow">foreach</span> ($prefixPaths as $prefix =&gt; $path) {
<a name="l00203"></a>00203                 <span class="keywordflow">if</span> (is_array($path) &amp;&amp; isset($path[<span class="stringliteral">&#39;prefix&#39;</span>]) &amp;&amp; isset($path[<span class="stringliteral">&#39;path&#39;</span>])) {
<a name="l00204"></a>00204                     $prefix = $path[<span class="stringliteral">&#39;prefix&#39;</span>];
<a name="l00205"></a>00205                     $path   = $path[<span class="stringliteral">&#39;path&#39;</span>];
<a name="l00206"></a>00206                 }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208                 <a class="code" href="class_zend___paginator.html#a56188e088f3ff1d6ec125dc411719283">self::addAdapterPrefixPath</a>($prefix, $path);
<a name="l00209"></a>00209             }
<a name="l00210"></a>00210         }
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212 
<a name="l00219"></a><a class="code" href="class_zend___paginator.html#a467845c5efb0a95eb887b16d6a1b8200">00219</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#a467845c5efb0a95eb887b16d6a1b8200">addScrollingStylePrefixPath</a>($prefix, $path)
<a name="l00220"></a>00220     {
<a name="l00221"></a>00221         <a class="code" href="class_zend___paginator.html#a565223639515e257168f9eca4d38ee5d">self::getScrollingStyleLoader</a>()-&gt;addPrefixPath($prefix, $path);
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223 
<a name="l00237"></a><a class="code" href="class_zend___paginator.html#ac7b156bcb42df80c553e78659cd01223">00237</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#ac7b156bcb42df80c553e78659cd01223">addScrollingStylePrefixPaths</a>(array $prefixPaths)
<a name="l00238"></a>00238     {
<a name="l00239"></a>00239         <span class="keywordflow">if</span> (isset($prefixPaths[<span class="stringliteral">&#39;prefix&#39;</span>]) &amp;&amp; isset($prefixPaths[<span class="stringliteral">&#39;path&#39;</span>])) {
<a name="l00240"></a>00240             <a class="code" href="class_zend___paginator.html#a467845c5efb0a95eb887b16d6a1b8200">self::addScrollingStylePrefixPath</a>($prefixPaths[<span class="stringliteral">&#39;prefix&#39;</span>], $prefixPaths[<span class="stringliteral">&#39;path&#39;</span>]);
<a name="l00241"></a>00241         } <span class="keywordflow">else</span> {
<a name="l00242"></a>00242             <span class="keywordflow">foreach</span> ($prefixPaths as $prefix =&gt; $path) {
<a name="l00243"></a>00243                 <span class="keywordflow">if</span> (is_array($path) &amp;&amp; isset($path[<span class="stringliteral">&#39;prefix&#39;</span>]) &amp;&amp; isset($path[<span class="stringliteral">&#39;path&#39;</span>])) {
<a name="l00244"></a>00244                     $prefix = $path[<span class="stringliteral">&#39;prefix&#39;</span>];
<a name="l00245"></a>00245                     $path   = $path[<span class="stringliteral">&#39;path&#39;</span>];
<a name="l00246"></a>00246                 }
<a name="l00247"></a>00247 
<a name="l00248"></a>00248                 <a class="code" href="class_zend___paginator.html#a467845c5efb0a95eb887b16d6a1b8200">self::addScrollingStylePrefixPath</a>($prefix, $path);
<a name="l00249"></a>00249             }
<a name="l00250"></a>00250         }
<a name="l00251"></a>00251     }
<a name="l00252"></a>00252 
<a name="l00261"></a><a class="code" href="class_zend___paginator.html#a0e449726eb82565c79a8987ea6e3b30e">00261</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#a0e449726eb82565c79a8987ea6e3b30e">factory</a>($data, $adapter = self::INTERNAL_ADAPTER,
<a name="l00262"></a>00262                                    array $prefixPaths = null)
<a name="l00263"></a>00263     {
<a name="l00264"></a>00264         <span class="keywordflow">if</span> ($data instanceof Zend_Paginator_AdapterAggregate) {
<a name="l00265"></a>00265             <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keyword">self</span>($data-&gt;getPaginatorAdapter());
<a name="l00266"></a>00266         } <span class="keywordflow">else</span> {
<a name="l00267"></a>00267             <span class="keywordflow">if</span> ($adapter == self::INTERNAL_ADAPTER) {
<a name="l00268"></a>00268                 <span class="keywordflow">if</span> (is_array($data)) {
<a name="l00269"></a>00269                     $adapter = <span class="stringliteral">&#39;Array&#39;</span>;
<a name="l00270"></a>00270                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($data instanceof <a class="code" href="class_zend___db___table___select.html">Zend_Db_Table_Select</a>) {
<a name="l00271"></a>00271                     $adapter = <span class="stringliteral">&#39;DbTableSelect&#39;</span>;
<a name="l00272"></a>00272                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($data instanceof <a class="code" href="class_zend___db___select.html">Zend_Db_Select</a>) {
<a name="l00273"></a>00273                     $adapter = <span class="stringliteral">&#39;DbSelect&#39;</span>;
<a name="l00274"></a>00274                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($data instanceof Iterator) {
<a name="l00275"></a>00275                     $adapter = <span class="stringliteral">&#39;Iterator&#39;</span>;
<a name="l00276"></a>00276                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_integer($data)) {
<a name="l00277"></a>00277                     $adapter = <span class="stringliteral">&#39;Null&#39;</span>;
<a name="l00278"></a>00278                 } <span class="keywordflow">else</span> {
<a name="l00279"></a>00279                     $type = (is_object($data)) ? get_class($data) : gettype($data);
<a name="l00280"></a>00280 
<a name="l00284"></a>00284                     require_once <span class="stringliteral">&#39;Zend/Paginator/Exception.php&#39;</span>;
<a name="l00285"></a>00285 
<a name="l00286"></a>00286                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Paginator_Exception(<span class="stringliteral">&#39;No adapter for type &#39;</span> . $type);
<a name="l00287"></a>00287                 }
<a name="l00288"></a>00288             }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290             $pluginLoader = <a class="code" href="class_zend___paginator.html#abb1196cba3e414b4b2042829f1c12539">self::getAdapterLoader</a>();
<a name="l00291"></a>00291 
<a name="l00292"></a>00292             <span class="keywordflow">if</span> (null !== $prefixPaths) {
<a name="l00293"></a>00293                 <span class="keywordflow">foreach</span> ($prefixPaths as $prefix =&gt; $path) {
<a name="l00294"></a>00294                     $pluginLoader-&gt;addPrefixPath($prefix, $path);
<a name="l00295"></a>00295                 }
<a name="l00296"></a>00296             }
<a name="l00297"></a>00297 
<a name="l00298"></a>00298             $adapterClassName = $pluginLoader-&gt;load($adapter);
<a name="l00299"></a>00299 
<a name="l00300"></a>00300             <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keyword">self</span>(<span class="keyword">new</span> $adapterClassName($data));
<a name="l00301"></a>00301         }
<a name="l00302"></a>00302     }
<a name="l00303"></a>00303 
<a name="l00309"></a><a class="code" href="class_zend___paginator.html#abb1196cba3e414b4b2042829f1c12539">00309</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#abb1196cba3e414b4b2042829f1c12539">getAdapterLoader</a>()
<a name="l00310"></a>00310     {
<a name="l00311"></a>00311         <span class="keywordflow">if</span> (self::$_adapterLoader === null) {
<a name="l00312"></a>00312             self::$_adapterLoader = <span class="keyword">new</span> <a class="code" href="class_zend___loader___plugin_loader.html">Zend_Loader_PluginLoader</a>(
<a name="l00313"></a>00313                 array(<span class="stringliteral">&#39;Zend_Paginator_Adapter&#39;</span> =&gt; <span class="stringliteral">&#39;Zend/Paginator/Adapter&#39;</span>)
<a name="l00314"></a>00314             );
<a name="l00315"></a>00315         }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317         <span class="keywordflow">return</span> self::$_adapterLoader;
<a name="l00318"></a>00318     }
<a name="l00319"></a>00319 
<a name="l00325"></a><a class="code" href="class_zend___paginator.html#a2c8cab6b3513e355a85208ab58fd5841">00325</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#a2c8cab6b3513e355a85208ab58fd5841">setConfig</a>(<a class="code" href="class_zend___config.html">Zend_Config</a> $config)
<a name="l00326"></a>00326     {
<a name="l00327"></a>00327         self::$_config = $config;
<a name="l00328"></a>00328 
<a name="l00329"></a>00329         $adapterPaths = $config-&gt;<a class="code" href="class_zend___config.html#a0f4ee84415fb0af205502dc664acde81">get</a>(<span class="stringliteral">&#39;adapterpaths&#39;</span>);
<a name="l00330"></a>00330 
<a name="l00331"></a>00331         <span class="keywordflow">if</span> ($adapterPaths != null) {
<a name="l00332"></a>00332             <a class="code" href="class_zend___paginator.html#a050b31965bb82d87f17119a04f2e7054">self::addAdapterPrefixPaths</a>($adapterPaths-&gt;adapterpath-&gt;toArray());
<a name="l00333"></a>00333         }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335         $prefixPaths = $config-&gt;<a class="code" href="class_zend___config.html#a0f4ee84415fb0af205502dc664acde81">get</a>(<span class="stringliteral">&#39;prefixpaths&#39;</span>);
<a name="l00336"></a>00336 
<a name="l00337"></a>00337         <span class="keywordflow">if</span> ($prefixPaths != null) {
<a name="l00338"></a>00338             <a class="code" href="class_zend___paginator.html#ac7b156bcb42df80c553e78659cd01223">self::addScrollingStylePrefixPaths</a>($prefixPaths-&gt;prefixpath-&gt;toArray());
<a name="l00339"></a>00339         }
<a name="l00340"></a>00340 
<a name="l00341"></a>00341         $scrollingStyle = $config-&gt;<a class="code" href="class_zend___config.html#a0f4ee84415fb0af205502dc664acde81">get</a>(<span class="stringliteral">&#39;scrollingstyle&#39;</span>);
<a name="l00342"></a>00342 
<a name="l00343"></a>00343         <span class="keywordflow">if</span> ($scrollingStyle != null) {
<a name="l00344"></a>00344             <a class="code" href="class_zend___paginator.html#a02d166d350ef7844c93e2be551fc4329">self::setDefaultScrollingStyle</a>($scrollingStyle);
<a name="l00345"></a>00345         }
<a name="l00346"></a>00346     }
<a name="l00347"></a>00347 
<a name="l00353"></a><a class="code" href="class_zend___paginator.html#a31cb75a686135b8cf1f68cd7e28051f9">00353</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#a31cb75a686135b8cf1f68cd7e28051f9">getDefaultScrollingStyle</a>()
<a name="l00354"></a>00354     {
<a name="l00355"></a>00355         <span class="keywordflow">return</span> self::$_defaultScrollingStyle;
<a name="l00356"></a>00356     }
<a name="l00357"></a>00357 
<a name="l00363"></a><a class="code" href="class_zend___paginator.html#ab40e0f362ba6d17dcabb732e69efdc89">00363</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#ab40e0f362ba6d17dcabb732e69efdc89">getDefaultItemCountPerPage</a>()
<a name="l00364"></a>00364     {
<a name="l00365"></a>00365         <span class="keywordflow">return</span> self::$_defaultItemCountPerPage;
<a name="l00366"></a>00366     }
<a name="l00367"></a>00367 
<a name="l00373"></a><a class="code" href="class_zend___paginator.html#adb49528bf71f7707c09f4f542b26dafd">00373</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#adb49528bf71f7707c09f4f542b26dafd">setDefaultItemCountPerPage</a>($count)
<a name="l00374"></a>00374     {
<a name="l00375"></a>00375         self::$_defaultItemCountPerPage = (int) $count;
<a name="l00376"></a>00376     }
<a name="l00377"></a>00377 
<a name="l00383"></a><a class="code" href="class_zend___paginator.html#a01c39a05983592df3a63cb5bb464a4df">00383</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#a01c39a05983592df3a63cb5bb464a4df">setCache</a>(<a class="code" href="class_zend___cache___core.html">Zend_Cache_Core</a> $cache)
<a name="l00384"></a>00384     {
<a name="l00385"></a>00385         self::$_cache = $cache;
<a name="l00386"></a>00386     }
<a name="l00387"></a>00387 
<a name="l00393"></a><a class="code" href="class_zend___paginator.html#a02d166d350ef7844c93e2be551fc4329">00393</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#a02d166d350ef7844c93e2be551fc4329">setDefaultScrollingStyle</a>($scrollingStyle = <span class="stringliteral">&#39;Sliding&#39;</span>)
<a name="l00394"></a>00394     {
<a name="l00395"></a>00395         self::$_defaultScrollingStyle = $scrollingStyle;
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397 
<a name="l00404"></a><a class="code" href="class_zend___paginator.html#a565223639515e257168f9eca4d38ee5d">00404</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___paginator.html#a565223639515e257168f9eca4d38ee5d">getScrollingStyleLoader</a>()
<a name="l00405"></a>00405     {
<a name="l00406"></a>00406         <span class="keywordflow">if</span> (self::$_scrollingStyleLoader === null) {
<a name="l00407"></a>00407             self::$_scrollingStyleLoader = <span class="keyword">new</span> <a class="code" href="class_zend___loader___plugin_loader.html">Zend_Loader_PluginLoader</a>(
<a name="l00408"></a>00408                 array(<span class="stringliteral">&#39;Zend_Paginator_ScrollingStyle&#39;</span> =&gt; <span class="stringliteral">&#39;Zend/Paginator/ScrollingStyle&#39;</span>)
<a name="l00409"></a>00409             );
<a name="l00410"></a>00410         }
<a name="l00411"></a>00411 
<a name="l00412"></a>00412         <span class="keywordflow">return</span> self::$_scrollingStyleLoader;
<a name="l00413"></a>00413     }
<a name="l00414"></a>00414 
<a name="l00420"></a><a class="code" href="class_zend___paginator.html#ac64cd38cccc2e20ba5838368de9f712e">00420</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#ac64cd38cccc2e20ba5838368de9f712e">__construct</a>($adapter)
<a name="l00421"></a>00421     {
<a name="l00422"></a>00422         <span class="keywordflow">if</span> ($adapter instanceof Zend_Paginator_Adapter_Interface) {
<a name="l00423"></a>00423             $this-&gt;_adapter = $adapter;
<a name="l00424"></a>00424         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($adapter instanceof Zend_Paginator_AdapterAggregate) {
<a name="l00425"></a>00425             $this-&gt;_adapter = $adapter-&gt;getPaginatorAdapter();
<a name="l00426"></a>00426         } <span class="keywordflow">else</span> {
<a name="l00430"></a>00430             require_once <span class="stringliteral">&#39;Zend/Paginator/Exception.php&#39;</span>;
<a name="l00431"></a>00431 
<a name="l00432"></a>00432             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Paginator_Exception(
<a name="l00433"></a>00433                 <span class="stringliteral">&#39;Zend_Paginator only accepts instances of the type &#39;</span> .
<a name="l00434"></a>00434                 <span class="stringliteral">&#39;Zend_Paginator_Adapter_Interface or Zend_Paginator_AdapterAggregate.&#39;</span>
<a name="l00435"></a>00435             );
<a name="l00436"></a>00436         }
<a name="l00437"></a>00437 
<a name="l00438"></a>00438         $config = self::$_config;
<a name="l00439"></a>00439 
<a name="l00440"></a>00440         <span class="keywordflow">if</span> ($config != null) {
<a name="l00441"></a>00441             $setupMethods = array(<span class="stringliteral">&#39;ItemCountPerPage&#39;</span>, <span class="stringliteral">&#39;PageRange&#39;</span>);
<a name="l00442"></a>00442 
<a name="l00443"></a>00443             <span class="keywordflow">foreach</span> ($setupMethods as $setupMethod) {
<a name="l00444"></a>00444                 $value = $config-&gt;get(strtolower($setupMethod));
<a name="l00445"></a>00445 
<a name="l00446"></a>00446                 <span class="keywordflow">if</span> ($value != null) {
<a name="l00447"></a>00447                     $setupMethod = <span class="stringliteral">&#39;set&#39;</span> . $setupMethod;
<a name="l00448"></a>00448                     $this-&gt;$setupMethod($value);
<a name="l00449"></a>00449                 }
<a name="l00450"></a>00450             }
<a name="l00451"></a>00451         }
<a name="l00452"></a>00452     }
<a name="l00453"></a>00453 
<a name="l00459"></a><a class="code" href="class_zend___paginator.html#a7516ca30af0db3cdbf9a7739b48ce91d">00459</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a7516ca30af0db3cdbf9a7739b48ce91d">__toString</a>()
<a name="l00460"></a>00460     {
<a name="l00461"></a>00461         <span class="keywordflow">try</span> {
<a name="l00462"></a>00462             $return = $this-&gt;<a class="code" href="class_zend___paginator.html#ae9f2525c3fcee4734df28dbd14e49718">render</a>();
<a name="l00463"></a>00463             <span class="keywordflow">return</span> $return;
<a name="l00464"></a>00464         } <span class="keywordflow">catch</span> (Exception $e) {
<a name="l00465"></a>00465             trigger_error($e-&gt;getMessage(), E_USER_WARNING);
<a name="l00466"></a>00466         }
<a name="l00467"></a>00467 
<a name="l00468"></a>00468         <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;
<a name="l00469"></a>00469     }
<a name="l00470"></a>00470 
<a name="l00477"></a><a class="code" href="class_zend___paginator.html#aed5f2cc4243766207a4bdb29869cde02">00477</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#aed5f2cc4243766207a4bdb29869cde02">setCacheEnabled</a>($enable)
<a name="l00478"></a>00478     {
<a name="l00479"></a>00479         $this-&gt;<a class="code" href="class_zend___paginator.html#a8efc8743a2bc43192d13e12e9f9ea639">_cacheEnabled</a> = (bool)$enable;
<a name="l00480"></a>00480         <span class="keywordflow">return</span> $this;
<a name="l00481"></a>00481     }
<a name="l00482"></a>00482 
<a name="l00488"></a><a class="code" href="class_zend___paginator.html#ac751e87b3d4c4bf2feb03bee8b092755">00488</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>()
<a name="l00489"></a>00489     {
<a name="l00490"></a>00490         <span class="keywordflow">if</span> (!$this-&gt;_pageCount) {
<a name="l00491"></a>00491             $this-&gt;_pageCount = $this-&gt;<a class="code" href="class_zend___paginator.html#a14e2af4779a1ceb0e45b303aba7ef77a">_calculatePageCount</a>();
<a name="l00492"></a>00492         }
<a name="l00493"></a>00493 
<a name="l00494"></a>00494         <span class="keywordflow">return</span> $this-&gt;_pageCount;
<a name="l00495"></a>00495     }
<a name="l00496"></a>00496 
<a name="l00502"></a><a class="code" href="class_zend___paginator.html#a187cc10d6b94385277e8626bfea266cd">00502</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a187cc10d6b94385277e8626bfea266cd">getTotalItemCount</a>()
<a name="l00503"></a>00503     {
<a name="l00504"></a>00504         <span class="keywordflow">return</span> <a class="code" href="class_zend___paginator.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>($this-&gt;<a class="code" href="class_zend___paginator.html#a23a4c71383d4d2dfc4ccade9fc78e5b9">getAdapter</a>());
<a name="l00505"></a>00505     }
<a name="l00506"></a>00506 
<a name="l00513"></a><a class="code" href="class_zend___paginator.html#a721f25aa8b6ecc927f0af6c616bebebe">00513</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a721f25aa8b6ecc927f0af6c616bebebe">clearPageItemCache</a>($pageNumber = null)
<a name="l00514"></a>00514     {
<a name="l00515"></a>00515         <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="class_zend___paginator.html#a8efc8743a2bc43192d13e12e9f9ea639">_cacheEnabled</a>()) {
<a name="l00516"></a>00516             <span class="keywordflow">return</span> $this;
<a name="l00517"></a>00517         }
<a name="l00518"></a>00518 
<a name="l00519"></a>00519         <span class="keywordflow">if</span> (null === $pageNumber) {
<a name="l00520"></a>00520             $cleanTags = <a class="code" href="class_zend___paginator.html#a5f90c029707ca64b0fd45d8ab2ee1043">self::CACHE_TAG_PREFIX</a>;
<a name="l00521"></a>00521             <span class="keywordflow">foreach</span> (self::$_cache-&gt;getIdsMatchingTags(array($this-&gt;<a class="code" href="class_zend___paginator.html#ad9caa6830da91b769d5c887a5d4dd5d3">_getCacheInternalId</a>())) as $id) {
<a name="l00522"></a>00522                 <span class="keywordflow">if</span> (preg_match(<span class="charliteral">&#39;|&#39;</span>.self::CACHE_TAG_PREFIX.<span class="stringliteral">&quot;(\d+)_.*|&quot;</span>, $id, $page)) {
<a name="l00523"></a>00523                     self::$_cache-&gt;remove($this-&gt;<a class="code" href="class_zend___paginator.html#aa042753506be131fc39dafd97f6fd71e">_getCacheId</a>($page[1]));
<a name="l00524"></a>00524                 }
<a name="l00525"></a>00525             }
<a name="l00526"></a>00526         } <span class="keywordflow">else</span> {
<a name="l00527"></a>00527             $cleanId = $this-&gt;<a class="code" href="class_zend___paginator.html#aa042753506be131fc39dafd97f6fd71e">_getCacheId</a>($pageNumber);
<a name="l00528"></a>00528             self::$_cache-&gt;remove($cleanId);
<a name="l00529"></a>00529         }
<a name="l00530"></a>00530         <span class="keywordflow">return</span> $this;
<a name="l00531"></a>00531     }
<a name="l00532"></a>00532 
<a name="l00540"></a><a class="code" href="class_zend___paginator.html#a7596c66f96f7addfd1a7a041f30b6d2b">00540</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a7596c66f96f7addfd1a7a041f30b6d2b">getAbsoluteItemNumber</a>($relativeItemNumber, $pageNumber = null)
<a name="l00541"></a>00541     {
<a name="l00542"></a>00542         $relativeItemNumber = $this-&gt;<a class="code" href="class_zend___paginator.html#ab0faf7bb1b70cd8945da12ea7746580d">normalizeItemNumber</a>($relativeItemNumber);
<a name="l00543"></a>00543 
<a name="l00544"></a>00544         <span class="keywordflow">if</span> ($pageNumber == null) {
<a name="l00545"></a>00545             $pageNumber = $this-&gt;<a class="code" href="class_zend___paginator.html#ae42c1c3b6849a0c7cbc05f85e5eb3992">getCurrentPageNumber</a>();
<a name="l00546"></a>00546         }
<a name="l00547"></a>00547 
<a name="l00548"></a>00548         $pageNumber = $this-&gt;<a class="code" href="class_zend___paginator.html#a75976e7c7d0f907169b1bad14d9a33c5">normalizePageNumber</a>($pageNumber);
<a name="l00549"></a>00549 
<a name="l00550"></a>00550         <span class="keywordflow">return</span> (($pageNumber - 1) * $this-&gt;<a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>()) + $relativeItemNumber;
<a name="l00551"></a>00551     }
<a name="l00552"></a>00552 
<a name="l00558"></a><a class="code" href="class_zend___paginator.html#a23a4c71383d4d2dfc4ccade9fc78e5b9">00558</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a23a4c71383d4d2dfc4ccade9fc78e5b9">getAdapter</a>()
<a name="l00559"></a>00559     {
<a name="l00560"></a>00560         <span class="keywordflow">return</span> $this-&gt;_adapter;
<a name="l00561"></a>00561     }
<a name="l00562"></a>00562 
<a name="l00568"></a><a class="code" href="class_zend___paginator.html#a1754f0894104d1cdd5f0911921da339e">00568</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a1754f0894104d1cdd5f0911921da339e">getCurrentItemCount</a>()
<a name="l00569"></a>00569     {
<a name="l00570"></a>00570         <span class="keywordflow">if</span> ($this-&gt;_currentItemCount === null) {
<a name="l00571"></a>00571             $this-&gt;_currentItemCount = $this-&gt;<a class="code" href="class_zend___paginator.html#a0ecce006cffafbf7de12dea5c9dc7e81">getItemCount</a>($this-&gt;<a class="code" href="class_zend___paginator.html#a9d13c22ae5a10b67213dc4ed57082a34">getCurrentItems</a>());
<a name="l00572"></a>00572         }
<a name="l00573"></a>00573 
<a name="l00574"></a>00574         <span class="keywordflow">return</span> $this-&gt;_currentItemCount;
<a name="l00575"></a>00575     }
<a name="l00576"></a>00576 
<a name="l00582"></a><a class="code" href="class_zend___paginator.html#a9d13c22ae5a10b67213dc4ed57082a34">00582</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a9d13c22ae5a10b67213dc4ed57082a34">getCurrentItems</a>()
<a name="l00583"></a>00583     {
<a name="l00584"></a>00584         <span class="keywordflow">if</span> ($this-&gt;_currentItems === null) {
<a name="l00585"></a>00585             $this-&gt;_currentItems = $this-&gt;<a class="code" href="class_zend___paginator.html#a7634f10bbaa56785d0a4ee3326129070">getItemsByPage</a>($this-&gt;<a class="code" href="class_zend___paginator.html#ae42c1c3b6849a0c7cbc05f85e5eb3992">getCurrentPageNumber</a>());
<a name="l00586"></a>00586         }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588         <span class="keywordflow">return</span> $this-&gt;_currentItems;
<a name="l00589"></a>00589     }
<a name="l00590"></a>00590 
<a name="l00596"></a><a class="code" href="class_zend___paginator.html#ae42c1c3b6849a0c7cbc05f85e5eb3992">00596</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#ae42c1c3b6849a0c7cbc05f85e5eb3992">getCurrentPageNumber</a>()
<a name="l00597"></a>00597     {
<a name="l00598"></a>00598         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___paginator.html#a75976e7c7d0f907169b1bad14d9a33c5">normalizePageNumber</a>($this-&gt;_currentPageNumber);
<a name="l00599"></a>00599     }
<a name="l00600"></a>00600 
<a name="l00607"></a><a class="code" href="class_zend___paginator.html#ace88e19a4eed13d4ff9e5c25a171214a">00607</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#ace88e19a4eed13d4ff9e5c25a171214a">setCurrentPageNumber</a>($pageNumber)
<a name="l00608"></a>00608     {
<a name="l00609"></a>00609         $this-&gt;_currentPageNumber = (integer) $pageNumber;
<a name="l00610"></a>00610         $this-&gt;_currentItems      = null;
<a name="l00611"></a>00611         $this-&gt;_currentItemCount  = null;
<a name="l00612"></a>00612 
<a name="l00613"></a>00613         <span class="keywordflow">return</span> $this;
<a name="l00614"></a>00614     }
<a name="l00615"></a>00615 
<a name="l00621"></a><a class="code" href="class_zend___paginator.html#a2ce3342ac043ecadecff91b1321445f4">00621</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a2ce3342ac043ecadecff91b1321445f4">getFilter</a>()
<a name="l00622"></a>00622     {
<a name="l00623"></a>00623         <span class="keywordflow">return</span> $this-&gt;_filter;
<a name="l00624"></a>00624     }
<a name="l00625"></a>00625 
<a name="l00632"></a><a class="code" href="class_zend___paginator.html#a0c139087733cb0880a0d09fbf2bd8b27">00632</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a0c139087733cb0880a0d09fbf2bd8b27">setFilter</a>(Zend_Filter_Interface $filter)
<a name="l00633"></a>00633     {
<a name="l00634"></a>00634         $this-&gt;_filter = $filter;
<a name="l00635"></a>00635 
<a name="l00636"></a>00636         <span class="keywordflow">return</span> $this;
<a name="l00637"></a>00637     }
<a name="l00638"></a>00638 
<a name="l00647"></a><a class="code" href="class_zend___paginator.html#a941d87a52b04f95da718376fe6f0b435">00647</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a941d87a52b04f95da718376fe6f0b435">getItem</a>($itemNumber, $pageNumber = null)
<a name="l00648"></a>00648     {
<a name="l00649"></a>00649         $itemNumber = $this-&gt;<a class="code" href="class_zend___paginator.html#ab0faf7bb1b70cd8945da12ea7746580d">normalizeItemNumber</a>($itemNumber);
<a name="l00650"></a>00650 
<a name="l00651"></a>00651         <span class="keywordflow">if</span> ($pageNumber == null) {
<a name="l00652"></a>00652             $pageNumber = $this-&gt;<a class="code" href="class_zend___paginator.html#ae42c1c3b6849a0c7cbc05f85e5eb3992">getCurrentPageNumber</a>();
<a name="l00653"></a>00653         }
<a name="l00654"></a>00654 
<a name="l00655"></a>00655         $page = $this-&gt;<a class="code" href="class_zend___paginator.html#a7634f10bbaa56785d0a4ee3326129070">getItemsByPage</a>($pageNumber);
<a name="l00656"></a>00656         $itemCount = $this-&gt;<a class="code" href="class_zend___paginator.html#a0ecce006cffafbf7de12dea5c9dc7e81">getItemCount</a>($page);
<a name="l00657"></a>00657 
<a name="l00658"></a>00658         <span class="keywordflow">if</span> ($itemCount == 0) {
<a name="l00662"></a>00662             require_once <span class="stringliteral">&#39;Zend/Paginator/Exception.php&#39;</span>;
<a name="l00663"></a>00663 
<a name="l00664"></a>00664             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Paginator_Exception(<span class="stringliteral">&#39;Page &#39;</span> . $pageNumber . <span class="stringliteral">&#39; does not exist&#39;</span>);
<a name="l00665"></a>00665         }
<a name="l00666"></a>00666 
<a name="l00667"></a>00667         <span class="keywordflow">if</span> ($itemNumber &gt; $itemCount) {
<a name="l00671"></a>00671             require_once <span class="stringliteral">&#39;Zend/Paginator/Exception.php&#39;</span>;
<a name="l00672"></a>00672 
<a name="l00673"></a>00673             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Paginator_Exception(<span class="stringliteral">&#39;Page &#39;</span> . $pageNumber . <span class="stringliteral">&#39; does not&#39;</span>
<a name="l00674"></a>00674                                              . <span class="stringliteral">&#39; contain item number &#39;</span> . $itemNumber);
<a name="l00675"></a>00675         }
<a name="l00676"></a>00676 
<a name="l00677"></a>00677         <span class="keywordflow">return</span> $page[$itemNumber - 1];
<a name="l00678"></a>00678     }
<a name="l00679"></a>00679 
<a name="l00685"></a><a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">00685</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>()
<a name="l00686"></a>00686     {
<a name="l00687"></a>00687         <span class="keywordflow">if</span> (empty($this-&gt;_itemCountPerPage)) {
<a name="l00688"></a>00688             $this-&gt;_itemCountPerPage = <a class="code" href="class_zend___paginator.html#ab40e0f362ba6d17dcabb732e69efdc89">self::getDefaultItemCountPerPage</a>();
<a name="l00689"></a>00689         }
<a name="l00690"></a>00690 
<a name="l00691"></a>00691         <span class="keywordflow">return</span> $this-&gt;_itemCountPerPage;
<a name="l00692"></a>00692     }
<a name="l00693"></a>00693 
<a name="l00700"></a><a class="code" href="class_zend___paginator.html#a52a6121389daf4d88887e9db541f25d6">00700</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a52a6121389daf4d88887e9db541f25d6">setItemCountPerPage</a>($itemCountPerPage)
<a name="l00701"></a>00701     {
<a name="l00702"></a>00702         $this-&gt;_itemCountPerPage = (integer) $itemCountPerPage;
<a name="l00703"></a>00703         <span class="keywordflow">if</span> ($this-&gt;_itemCountPerPage &lt; 1) {
<a name="l00704"></a>00704             $this-&gt;_itemCountPerPage = $this-&gt;<a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>();
<a name="l00705"></a>00705         }
<a name="l00706"></a>00706         $this-&gt;_pageCount        = $this-&gt;<a class="code" href="class_zend___paginator.html#a14e2af4779a1ceb0e45b303aba7ef77a">_calculatePageCount</a>();
<a name="l00707"></a>00707         $this-&gt;_currentItems     = null;
<a name="l00708"></a>00708         $this-&gt;_currentItemCount = null;
<a name="l00709"></a>00709 
<a name="l00710"></a>00710         <span class="keywordflow">return</span> $this;
<a name="l00711"></a>00711     }
<a name="l00712"></a>00712 
<a name="l00719"></a><a class="code" href="class_zend___paginator.html#a0ecce006cffafbf7de12dea5c9dc7e81">00719</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a0ecce006cffafbf7de12dea5c9dc7e81">getItemCount</a>($items)
<a name="l00720"></a>00720     {
<a name="l00721"></a>00721         $itemCount = 0;
<a name="l00722"></a>00722 
<a name="l00723"></a>00723         <span class="keywordflow">if</span> (is_array($items) || $items instanceof Countable) {
<a name="l00724"></a>00724             $itemCount = <a class="code" href="class_zend___paginator.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>($items);
<a name="l00725"></a>00725         } <span class="keywordflow">else</span> { <span class="comment">// $items is something like LimitIterator</span>
<a name="l00726"></a>00726             $itemCount = iterator_count($items);
<a name="l00727"></a>00727         }
<a name="l00728"></a>00728 
<a name="l00729"></a>00729         <span class="keywordflow">return</span> $itemCount;
<a name="l00730"></a>00730     }
<a name="l00731"></a>00731 
<a name="l00737"></a><a class="code" href="class_zend___paginator.html#a7634f10bbaa56785d0a4ee3326129070">00737</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a7634f10bbaa56785d0a4ee3326129070">getItemsByPage</a>($pageNumber)
<a name="l00738"></a>00738     {
<a name="l00739"></a>00739         $pageNumber = $this-&gt;<a class="code" href="class_zend___paginator.html#a75976e7c7d0f907169b1bad14d9a33c5">normalizePageNumber</a>($pageNumber);
<a name="l00740"></a>00740 
<a name="l00741"></a>00741         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___paginator.html#a8efc8743a2bc43192d13e12e9f9ea639">_cacheEnabled</a>()) {
<a name="l00742"></a>00742             $data = self::$_cache-&gt;load($this-&gt;<a class="code" href="class_zend___paginator.html#aa042753506be131fc39dafd97f6fd71e">_getCacheId</a>($pageNumber));
<a name="l00743"></a>00743             <span class="keywordflow">if</span> ($data !== <span class="keyword">false</span>) {
<a name="l00744"></a>00744                 <span class="keywordflow">return</span> $data;
<a name="l00745"></a>00745             }
<a name="l00746"></a>00746         }
<a name="l00747"></a>00747 
<a name="l00748"></a>00748         $offset = ($pageNumber - 1) * $this-&gt;<a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>();
<a name="l00749"></a>00749 
<a name="l00750"></a>00750         $items = $this-&gt;_adapter-&gt;getItems($offset, $this-&gt;<a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>());
<a name="l00751"></a>00751 
<a name="l00752"></a>00752         $filter = $this-&gt;<a class="code" href="class_zend___paginator.html#a2ce3342ac043ecadecff91b1321445f4">getFilter</a>();
<a name="l00753"></a>00753 
<a name="l00754"></a>00754         <span class="keywordflow">if</span> ($filter !== null) {
<a name="l00755"></a>00755             $items = $filter-&gt;filter($items);
<a name="l00756"></a>00756         }
<a name="l00757"></a>00757 
<a name="l00758"></a>00758         <span class="keywordflow">if</span> (!$items instanceof Traversable) {
<a name="l00759"></a>00759             $items = <span class="keyword">new</span> ArrayIterator($items);
<a name="l00760"></a>00760         }
<a name="l00761"></a>00761 
<a name="l00762"></a>00762         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___paginator.html#a8efc8743a2bc43192d13e12e9f9ea639">_cacheEnabled</a>()) {
<a name="l00763"></a>00763             self::$_cache-&gt;save($items, $this-&gt;<a class="code" href="class_zend___paginator.html#aa042753506be131fc39dafd97f6fd71e">_getCacheId</a>($pageNumber), array($this-&gt;<a class="code" href="class_zend___paginator.html#ad9caa6830da91b769d5c887a5d4dd5d3">_getCacheInternalId</a>()));
<a name="l00764"></a>00764         }
<a name="l00765"></a>00765 
<a name="l00766"></a>00766         <span class="keywordflow">return</span> $items;
<a name="l00767"></a>00767     }
<a name="l00768"></a>00768 
<a name="l00774"></a><a class="code" href="class_zend___paginator.html#a7a9f937c2958e6f4dd7b030f86fb70b7">00774</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a7a9f937c2958e6f4dd7b030f86fb70b7">getIterator</a>()
<a name="l00775"></a>00775     {
<a name="l00776"></a>00776         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___paginator.html#a9d13c22ae5a10b67213dc4ed57082a34">getCurrentItems</a>();
<a name="l00777"></a>00777     }
<a name="l00778"></a>00778 
<a name="l00784"></a><a class="code" href="class_zend___paginator.html#ac8f852fac05784f82db15c90eaafdcea">00784</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#ac8f852fac05784f82db15c90eaafdcea">getPageRange</a>()
<a name="l00785"></a>00785     {
<a name="l00786"></a>00786         <span class="keywordflow">return</span> $this-&gt;_pageRange;
<a name="l00787"></a>00787     }
<a name="l00788"></a>00788 
<a name="l00795"></a><a class="code" href="class_zend___paginator.html#aa3f450a89d07ba4a7a3b74f4a65eb35c">00795</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#aa3f450a89d07ba4a7a3b74f4a65eb35c">setPageRange</a>($pageRange)
<a name="l00796"></a>00796     {
<a name="l00797"></a>00797         $this-&gt;_pageRange = (integer) $pageRange;
<a name="l00798"></a>00798 
<a name="l00799"></a>00799         <span class="keywordflow">return</span> $this;
<a name="l00800"></a>00800     }
<a name="l00801"></a>00801 
<a name="l00808"></a><a class="code" href="class_zend___paginator.html#ace495ca34285214f1fe6d6669ed3099b">00808</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#ace495ca34285214f1fe6d6669ed3099b">getPages</a>($scrollingStyle = null)
<a name="l00809"></a>00809     {
<a name="l00810"></a>00810         <span class="keywordflow">if</span> ($this-&gt;_pages === null) {
<a name="l00811"></a>00811             $this-&gt;_pages = $this-&gt;<a class="code" href="class_zend___paginator.html#aaf4f687cc1aae40687771d24ad76c930">_createPages</a>($scrollingStyle);
<a name="l00812"></a>00812         }
<a name="l00813"></a>00813 
<a name="l00814"></a>00814         <span class="keywordflow">return</span> $this-&gt;_pages;
<a name="l00815"></a>00815     }
<a name="l00816"></a>00816 
<a name="l00824"></a><a class="code" href="class_zend___paginator.html#a19743b23081426b9323b763cba3f0a21">00824</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a19743b23081426b9323b763cba3f0a21">getPagesInRange</a>($lowerBound, $upperBound)
<a name="l00825"></a>00825     {
<a name="l00826"></a>00826         $lowerBound = $this-&gt;<a class="code" href="class_zend___paginator.html#a75976e7c7d0f907169b1bad14d9a33c5">normalizePageNumber</a>($lowerBound);
<a name="l00827"></a>00827         $upperBound = $this-&gt;<a class="code" href="class_zend___paginator.html#a75976e7c7d0f907169b1bad14d9a33c5">normalizePageNumber</a>($upperBound);
<a name="l00828"></a>00828 
<a name="l00829"></a>00829         $pages = array();
<a name="l00830"></a>00830 
<a name="l00831"></a>00831         <span class="keywordflow">for</span> ($pageNumber = $lowerBound; $pageNumber &lt;= $upperBound; $pageNumber++) {
<a name="l00832"></a>00832             $pages[$pageNumber] = $pageNumber;
<a name="l00833"></a>00833         }
<a name="l00834"></a>00834 
<a name="l00835"></a>00835         <span class="keywordflow">return</span> $pages;
<a name="l00836"></a>00836     }
<a name="l00837"></a>00837 
<a name="l00843"></a><a class="code" href="class_zend___paginator.html#a53ff954d4385afdb769a8d92e2d8f500">00843</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a53ff954d4385afdb769a8d92e2d8f500">getPageItemCache</a>()
<a name="l00844"></a>00844     {
<a name="l00845"></a>00845         $data = array();
<a name="l00846"></a>00846         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___paginator.html#a8efc8743a2bc43192d13e12e9f9ea639">_cacheEnabled</a>()) {
<a name="l00847"></a>00847             <span class="keywordflow">foreach</span> (self::$_cache-&gt;getIdsMatchingTags(array($this-&gt;<a class="code" href="class_zend___paginator.html#ad9caa6830da91b769d5c887a5d4dd5d3">_getCacheInternalId</a>())) as $id) {
<a name="l00848"></a>00848                     <span class="keywordflow">if</span> (preg_match(<span class="charliteral">&#39;|&#39;</span>.self::CACHE_TAG_PREFIX.<span class="stringliteral">&quot;(\d+)_.*|&quot;</span>, $id, $page)) {
<a name="l00849"></a>00849                         $data[$page[1]] = self::$_cache-&gt;load($this-&gt;<a class="code" href="class_zend___paginator.html#aa042753506be131fc39dafd97f6fd71e">_getCacheId</a>($page[1]));
<a name="l00850"></a>00850                     }
<a name="l00851"></a>00851             }
<a name="l00852"></a>00852         }
<a name="l00853"></a>00853         <span class="keywordflow">return</span> $data;
<a name="l00854"></a>00854     }
<a name="l00855"></a>00855 
<a name="l00862"></a><a class="code" href="class_zend___paginator.html#a50677812ea3f0258f7d03bbac5265413">00862</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a50677812ea3f0258f7d03bbac5265413">getView</a>()
<a name="l00863"></a>00863     {
<a name="l00864"></a>00864         <span class="keywordflow">if</span> ($this-&gt;_view === null) {
<a name="l00868"></a>00868             require_once <span class="stringliteral">&#39;Zend/Controller/Action/HelperBroker.php&#39;</span>;
<a name="l00869"></a>00869 
<a name="l00870"></a>00870             $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(<span class="stringliteral">&#39;viewRenderer&#39;</span>);
<a name="l00871"></a>00871             <span class="keywordflow">if</span> ($viewRenderer-&gt;view === null) {
<a name="l00872"></a>00872                 $viewRenderer-&gt;initView();
<a name="l00873"></a>00873             }
<a name="l00874"></a>00874             $this-&gt;_view = $viewRenderer-&gt;view;
<a name="l00875"></a>00875         }
<a name="l00876"></a>00876 
<a name="l00877"></a>00877         <span class="keywordflow">return</span> $this-&gt;_view;
<a name="l00878"></a>00878     }
<a name="l00879"></a>00879 
<a name="l00886"></a><a class="code" href="class_zend___paginator.html#a6efcef1ebce82b7e972f451c92574b78">00886</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a6efcef1ebce82b7e972f451c92574b78">setView</a>(<a class="code" href="interface_zend___view___interface.html">Zend_View_Interface</a> $view = null)
<a name="l00887"></a>00887     {
<a name="l00888"></a>00888         $this-&gt;_view = $view;
<a name="l00889"></a>00889 
<a name="l00890"></a>00890         <span class="keywordflow">return</span> $this;
<a name="l00891"></a>00891     }
<a name="l00892"></a>00892 
<a name="l00899"></a><a class="code" href="class_zend___paginator.html#ab0faf7bb1b70cd8945da12ea7746580d">00899</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#ab0faf7bb1b70cd8945da12ea7746580d">normalizeItemNumber</a>($itemNumber)
<a name="l00900"></a>00900     {
<a name="l00901"></a>00901         <span class="keywordflow">if</span> ($itemNumber &lt; 1) {
<a name="l00902"></a>00902             $itemNumber = 1;
<a name="l00903"></a>00903         }
<a name="l00904"></a>00904 
<a name="l00905"></a>00905         <span class="keywordflow">if</span> ($itemNumber &gt; $this-&gt;<a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>()) {
<a name="l00906"></a>00906             $itemNumber = $this-&gt;<a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>();
<a name="l00907"></a>00907         }
<a name="l00908"></a>00908 
<a name="l00909"></a>00909         <span class="keywordflow">return</span> $itemNumber;
<a name="l00910"></a>00910     }
<a name="l00911"></a>00911 
<a name="l00918"></a><a class="code" href="class_zend___paginator.html#a75976e7c7d0f907169b1bad14d9a33c5">00918</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#a75976e7c7d0f907169b1bad14d9a33c5">normalizePageNumber</a>($pageNumber)
<a name="l00919"></a>00919     {
<a name="l00920"></a>00920         <span class="keywordflow">if</span> ($pageNumber &lt; 1) {
<a name="l00921"></a>00921             $pageNumber = 1;
<a name="l00922"></a>00922         }
<a name="l00923"></a>00923 
<a name="l00924"></a>00924         $pageCount = $this-&gt;<a class="code" href="class_zend___paginator.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>();
<a name="l00925"></a>00925 
<a name="l00926"></a>00926         <span class="keywordflow">if</span> ($pageCount &gt; 0 &amp;&amp; $pageNumber &gt; $pageCount) {
<a name="l00927"></a>00927             $pageNumber = $pageCount;
<a name="l00928"></a>00928         }
<a name="l00929"></a>00929 
<a name="l00930"></a>00930         <span class="keywordflow">return</span> $pageNumber;
<a name="l00931"></a>00931     }
<a name="l00932"></a>00932 
<a name="l00939"></a><a class="code" href="class_zend___paginator.html#ae9f2525c3fcee4734df28dbd14e49718">00939</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#ae9f2525c3fcee4734df28dbd14e49718">render</a>(<a class="code" href="interface_zend___view___interface.html">Zend_View_Interface</a> $view = null)
<a name="l00940"></a>00940     {
<a name="l00941"></a>00941         <span class="keywordflow">if</span> (null !== $view) {
<a name="l00942"></a>00942             $this-&gt;<a class="code" href="class_zend___paginator.html#a6efcef1ebce82b7e972f451c92574b78">setView</a>($view);
<a name="l00943"></a>00943         }
<a name="l00944"></a>00944 
<a name="l00945"></a>00945         $view = $this-&gt;<a class="code" href="class_zend___paginator.html#a50677812ea3f0258f7d03bbac5265413">getView</a>();
<a name="l00946"></a>00946 
<a name="l00947"></a>00947         <span class="keywordflow">return</span> $view-&gt;paginationControl($this);
<a name="l00948"></a>00948     }
<a name="l00949"></a>00949 
<a name="l00955"></a><a class="code" href="class_zend___paginator.html#abb4e56e2f91e542d8ce2c9f2a7a944c1">00955</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___paginator.html#abb4e56e2f91e542d8ce2c9f2a7a944c1">toJson</a>()
<a name="l00956"></a>00956     {
<a name="l00957"></a>00957         $currentItems = $this-&gt;<a class="code" href="class_zend___paginator.html#a9d13c22ae5a10b67213dc4ed57082a34">getCurrentItems</a>();
<a name="l00958"></a>00958 
<a name="l00959"></a>00959         <span class="keywordflow">if</span> ($currentItems instanceof <a class="code" href="class_zend___db___table___rowset___abstract.html">Zend_Db_Table_Rowset_Abstract</a>) {
<a name="l00960"></a>00960             <span class="keywordflow">return</span> <a class="code" href="class_zend___json.html#a08a9eac5e7042af1e08b87614e41ec25">Zend_Json::encode</a>($currentItems-&gt;toArray());
<a name="l00961"></a>00961         } <span class="keywordflow">else</span> {
<a name="l00962"></a>00962             <span class="keywordflow">return</span> <a class="code" href="class_zend___json.html#a08a9eac5e7042af1e08b87614e41ec25">Zend_Json::encode</a>($currentItems);
<a name="l00963"></a>00963         }
<a name="l00964"></a>00964     }
<a name="l00965"></a>00965 
<a name="l00972"></a><a class="code" href="class_zend___paginator.html#a8efc8743a2bc43192d13e12e9f9ea639">00972</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___paginator.html#a8efc8743a2bc43192d13e12e9f9ea639">_cacheEnabled</a>()
<a name="l00973"></a>00973     {
<a name="l00974"></a>00974         <span class="keywordflow">return</span> ((self::$_cache !== null) &amp;&amp; $this-&gt;<a class="code" href="class_zend___paginator.html#a8efc8743a2bc43192d13e12e9f9ea639">_cacheEnabled</a>);
<a name="l00975"></a>00975     }
<a name="l00976"></a>00976 
<a name="l00987"></a><a class="code" href="class_zend___paginator.html#aa042753506be131fc39dafd97f6fd71e">00987</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___paginator.html#aa042753506be131fc39dafd97f6fd71e">_getCacheId</a>($page = null)
<a name="l00988"></a>00988     {
<a name="l00989"></a>00989         <span class="keywordflow">if</span> ($page === null) {
<a name="l00990"></a>00990             $page = $this-&gt;<a class="code" href="class_zend___paginator.html#ae42c1c3b6849a0c7cbc05f85e5eb3992">getCurrentPageNumber</a>();
<a name="l00991"></a>00991         }
<a name="l00992"></a>00992         <span class="keywordflow">return</span> self::CACHE_TAG_PREFIX . $page . <span class="charliteral">&#39;_&#39;</span> . $this-&gt;<a class="code" href="class_zend___paginator.html#ad9caa6830da91b769d5c887a5d4dd5d3">_getCacheInternalId</a>();
<a name="l00993"></a>00993     }
<a name="l00994"></a>00994 
<a name="l01003"></a><a class="code" href="class_zend___paginator.html#ad9caa6830da91b769d5c887a5d4dd5d3">01003</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___paginator.html#ad9caa6830da91b769d5c887a5d4dd5d3">_getCacheInternalId</a>()
<a name="l01004"></a>01004     {
<a name="l01005"></a>01005         <span class="keywordflow">return</span> md5(serialize($this-&gt;<a class="code" href="class_zend___paginator.html#a23a4c71383d4d2dfc4ccade9fc78e5b9">getAdapter</a>()) . $this-&gt;<a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>());
<a name="l01006"></a>01006     }
<a name="l01007"></a>01007 
<a name="l01013"></a><a class="code" href="class_zend___paginator.html#a14e2af4779a1ceb0e45b303aba7ef77a">01013</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___paginator.html#a14e2af4779a1ceb0e45b303aba7ef77a">_calculatePageCount</a>()
<a name="l01014"></a>01014     {
<a name="l01015"></a>01015         <span class="keywordflow">return</span> (integer) ceil($this-&gt;<a class="code" href="class_zend___paginator.html#a23a4c71383d4d2dfc4ccade9fc78e5b9">getAdapter</a>()-&gt;<a class="code" href="class_zend___paginator.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>() / $this-&gt;<a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>());
<a name="l01016"></a>01016     }
<a name="l01017"></a>01017 
<a name="l01024"></a><a class="code" href="class_zend___paginator.html#aaf4f687cc1aae40687771d24ad76c930">01024</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___paginator.html#aaf4f687cc1aae40687771d24ad76c930">_createPages</a>($scrollingStyle = null)
<a name="l01025"></a>01025     {
<a name="l01026"></a>01026         $pageCount         = $this-&gt;<a class="code" href="class_zend___paginator.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>();
<a name="l01027"></a>01027         $currentPageNumber = $this-&gt;<a class="code" href="class_zend___paginator.html#ae42c1c3b6849a0c7cbc05f85e5eb3992">getCurrentPageNumber</a>();
<a name="l01028"></a>01028 
<a name="l01029"></a>01029         $pages = <span class="keyword">new</span> stdClass();
<a name="l01030"></a>01030         $pages-&gt;pageCount        = $pageCount;
<a name="l01031"></a>01031         $pages-&gt;itemCountPerPage = $this-&gt;<a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>();
<a name="l01032"></a>01032         $pages-&gt;first            = 1;
<a name="l01033"></a>01033         $pages-&gt;current          = $currentPageNumber;
<a name="l01034"></a>01034         $pages-&gt;last             = $pageCount;
<a name="l01035"></a>01035 
<a name="l01036"></a>01036         <span class="comment">// Previous and next</span>
<a name="l01037"></a>01037         <span class="keywordflow">if</span> ($currentPageNumber - 1 &gt; 0) {
<a name="l01038"></a>01038             $pages-&gt;previous = $currentPageNumber - 1;
<a name="l01039"></a>01039         }
<a name="l01040"></a>01040 
<a name="l01041"></a>01041         <span class="keywordflow">if</span> ($currentPageNumber + 1 &lt;= $pageCount) {
<a name="l01042"></a>01042             $pages-&gt;next = $currentPageNumber + 1;
<a name="l01043"></a>01043         }
<a name="l01044"></a>01044 
<a name="l01045"></a>01045         <span class="comment">// Pages in range</span>
<a name="l01046"></a>01046         $scrollingStyle = $this-&gt;<a class="code" href="class_zend___paginator.html#ab7b73507bbabe3f3db308df639b506b7">_loadScrollingStyle</a>($scrollingStyle);
<a name="l01047"></a>01047         $pages-&gt;pagesInRange     = $scrollingStyle-&gt;getPages($this);
<a name="l01048"></a>01048         $pages-&gt;firstPageInRange = min($pages-&gt;pagesInRange);
<a name="l01049"></a>01049         $pages-&gt;lastPageInRange  = max($pages-&gt;pagesInRange);
<a name="l01050"></a>01050 
<a name="l01051"></a>01051         <span class="comment">// Item numbers</span>
<a name="l01052"></a>01052         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___paginator.html#a9d13c22ae5a10b67213dc4ed57082a34">getCurrentItems</a>() !== null) {
<a name="l01053"></a>01053             $pages-&gt;currentItemCount = $this-&gt;<a class="code" href="class_zend___paginator.html#a1754f0894104d1cdd5f0911921da339e">getCurrentItemCount</a>();
<a name="l01054"></a>01054             $pages-&gt;itemCountPerPage = $this-&gt;<a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>();
<a name="l01055"></a>01055             $pages-&gt;totalItemCount   = $this-&gt;<a class="code" href="class_zend___paginator.html#a187cc10d6b94385277e8626bfea266cd">getTotalItemCount</a>();
<a name="l01056"></a>01056             $pages-&gt;firstItemNumber  = (($currentPageNumber - 1) * $this-&gt;<a class="code" href="class_zend___paginator.html#af05ce5f234e1d582ffcc22430f5ce21c">getItemCountPerPage</a>()) + 1;
<a name="l01057"></a>01057             $pages-&gt;lastItemNumber   = $pages-&gt;firstItemNumber + $pages-&gt;currentItemCount - 1;
<a name="l01058"></a>01058         }
<a name="l01059"></a>01059 
<a name="l01060"></a>01060         <span class="keywordflow">return</span> $pages;
<a name="l01061"></a>01061     }
<a name="l01062"></a>01062 
<a name="l01069"></a><a class="code" href="class_zend___paginator.html#ab7b73507bbabe3f3db308df639b506b7">01069</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___paginator.html#ab7b73507bbabe3f3db308df639b506b7">_loadScrollingStyle</a>($scrollingStyle = null)
<a name="l01070"></a>01070     {
<a name="l01071"></a>01071         <span class="keywordflow">if</span> ($scrollingStyle === null) {
<a name="l01072"></a>01072             $scrollingStyle = self::$_defaultScrollingStyle;
<a name="l01073"></a>01073         }
<a name="l01074"></a>01074 
<a name="l01075"></a>01075         <span class="keywordflow">switch</span> (strtolower(gettype($scrollingStyle))) {
<a name="l01076"></a>01076             <span class="keywordflow">case</span> <span class="stringliteral">&#39;object&#39;</span>:
<a name="l01077"></a>01077                 <span class="keywordflow">if</span> (!$scrollingStyle instanceof Zend_Paginator_ScrollingStyle_Interface) {
<a name="l01081"></a>01081                     require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l01082"></a>01082 
<a name="l01083"></a>01083                     <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(<span class="stringliteral">&#39;Scrolling style must implement &#39;</span> .
<a name="l01084"></a>01084                         <span class="stringliteral">&#39;Zend_Paginator_ScrollingStyle_Interface&#39;</span>);
<a name="l01085"></a>01085                 }
<a name="l01086"></a>01086 
<a name="l01087"></a>01087                 <span class="keywordflow">return</span> $scrollingStyle;
<a name="l01088"></a>01088 
<a name="l01089"></a>01089             <span class="keywordflow">case</span> <span class="stringliteral">&#39;string&#39;</span>:
<a name="l01090"></a>01090                 $className = <a class="code" href="class_zend___paginator.html#a565223639515e257168f9eca4d38ee5d">self::getScrollingStyleLoader</a>()-&gt;load($scrollingStyle);
<a name="l01091"></a>01091 
<a name="l01092"></a>01092                 <span class="keywordflow">return</span> <span class="keyword">new</span> $className();
<a name="l01093"></a>01093 
<a name="l01094"></a>01094             <span class="keywordflow">case</span> <span class="stringliteral">&#39;null&#39;</span>:
<a name="l01095"></a>01095                 <span class="comment">// Fall through to default case</span>
<a name="l01096"></a>01096 
<a name="l01097"></a>01097             <span class="keywordflow">default</span>:
<a name="l01101"></a>01101                 require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l01102"></a>01102 
<a name="l01103"></a>01103                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(<span class="stringliteral">&#39;Scrolling style must be a class &#39;</span> .
<a name="l01104"></a>01104                     <span class="stringliteral">&#39;name or object implementing Zend_Paginator_ScrollingStyle_Interface&#39;</span>);
<a name="l01105"></a>01105         }
<a name="l01106"></a>01106     }
<a name="l01107"></a>01107 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Apr 19 2012 17:01:18 for openbiz by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
