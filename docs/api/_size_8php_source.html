<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>openbiz: E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Validate/File/Size.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Validate/File/Size.php</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00025"></a>00025 require_once <span class="stringliteral">&#39;Zend/Validate/Abstract.php&#39;</span>;
<a name="l00026"></a>00026 
<a name="l00035"></a><a class="code" href="class_zend___validate___file___size.html">00035</a> <span class="keyword">class </span><a class="code" href="class_zend___validate___file___size.html">Zend_Validate_File_Size</a> <span class="keyword">extends</span> <a class="code" href="class_zend___validate___abstract.html">Zend_Validate_Abstract</a>
<a name="l00036"></a>00036 {
<a name="l00040"></a><a class="code" href="class_zend___validate___file___size.html#ab43ff78b9c9b5e6dad881adcbfe533bf">00040</a>     <span class="keyword">const</span> <a class="code" href="class_zend___validate___file___size.html#ab43ff78b9c9b5e6dad881adcbfe533bf">TOO_BIG</a>   = <span class="stringliteral">&#39;fileSizeTooBig&#39;</span>;
<a name="l00041"></a>00041     <span class="keyword">const</span> TOO_SMALL = <span class="stringliteral">&#39;fileSizeTooSmall&#39;</span>;
<a name="l00042"></a>00042     <span class="keyword">const</span> NOT_FOUND = <span class="stringliteral">&#39;fileSizeNotFound&#39;</span>;
<a name="l00048"></a>00048     <span class="keyword">protected</span> $_messageTemplates = array(
<a name="l00049"></a>00049         self::TOO_BIG   =&gt; <span class="stringliteral">&quot;Maximum allowed size for file &#39;%value%&#39; is &#39;%max%&#39; but &#39;%size%&#39; detected&quot;</span>,
<a name="l00050"></a>00050         self::TOO_SMALL =&gt; <span class="stringliteral">&quot;Minimum expected size for file &#39;%value%&#39; is &#39;%min%&#39; but &#39;%size%&#39; detected&quot;</span>,
<a name="l00051"></a>00051         self::NOT_FOUND =&gt; <span class="stringliteral">&quot;The file &#39;%value%&#39; could not be found&quot;</span>
<a name="l00052"></a>00052     );
<a name="l00053"></a>00053 
<a name="l00057"></a>00057     <span class="keyword">protected</span> $_messageVariables = array(
<a name="l00058"></a>00058         <span class="stringliteral">&#39;min&#39;</span>  =&gt; <span class="stringliteral">&#39;_min&#39;</span>,
<a name="l00059"></a>00059         <span class="stringliteral">&#39;max&#39;</span>  =&gt; <span class="stringliteral">&#39;_max&#39;</span>,
<a name="l00060"></a>00060         <span class="stringliteral">&#39;size&#39;</span> =&gt; <span class="stringliteral">&#39;_size&#39;</span>,
<a name="l00061"></a>00061     );
<a name="l00062"></a>00062 
<a name="l00067"></a>00067     <span class="keyword">protected</span> $_min;
<a name="l00068"></a>00068 
<a name="l00076"></a>00076     <span class="keyword">protected</span> $_max;
<a name="l00077"></a>00077 
<a name="l00083"></a>00083     <span class="keyword">protected</span> $_size;
<a name="l00084"></a>00084 
<a name="l00090"></a>00090     <span class="keyword">protected</span> $_useByteString = <span class="keyword">true</span>;
<a name="l00091"></a>00091 
<a name="l00103"></a><a class="code" href="class_zend___validate___file___size.html#ae8b8e1144b807ac13f20a916fd073b32">00103</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___validate___file___size.html#ae8b8e1144b807ac13f20a916fd073b32">__construct</a>($options)
<a name="l00104"></a>00104     {
<a name="l00105"></a>00105         <span class="keywordflow">if</span> ($options instanceof <a class="code" href="class_zend___config.html">Zend_Config</a>) {
<a name="l00106"></a>00106             $options = $options-&gt;toArray();
<a name="l00107"></a>00107         } elseif (is_string($options) || is_numeric($options)) {
<a name="l00108"></a>00108             $options = array(<span class="stringliteral">&#39;max&#39;</span> =&gt; $options);
<a name="l00109"></a>00109         } elseif (!is_array($options)) {
<a name="l00110"></a>00110             require_once <span class="stringliteral">&#39;Zend/Validate/Exception.php&#39;</span>;
<a name="l00111"></a>00111             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___validate___exception.html">Zend_Validate_Exception</a> (<span class="stringliteral">&#39;Invalid options to validator provided&#39;</span>);
<a name="l00112"></a>00112         }
<a name="l00113"></a>00113 
<a name="l00114"></a>00114         <span class="keywordflow">if</span> (1 &lt; func_num_args()) {
<a name="l00115"></a>00115 <span class="comment">// @todo: Preperation for 2.0... needs to be cleared with the dev-team</span>
<a name="l00116"></a>00116 <span class="comment">//          trigger_error(&#39;Multiple constructor options are deprecated in favor of a single options array&#39;, E_USER_NOTICE);</span>
<a name="l00117"></a>00117             $argv = func_get_args();
<a name="l00118"></a>00118             array_shift($argv);
<a name="l00119"></a>00119             $options[<span class="stringliteral">&#39;max&#39;</span>] = array_shift($argv);
<a name="l00120"></a>00120             <span class="keywordflow">if</span> (!empty($argv)) {
<a name="l00121"></a>00121                 $options[<span class="stringliteral">&#39;bytestring&#39;</span>] = array_shift($argv);
<a name="l00122"></a>00122             }
<a name="l00123"></a>00123         }
<a name="l00124"></a>00124 
<a name="l00125"></a>00125         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;bytestring&#39;</span>])) {
<a name="l00126"></a>00126             $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a927f1f26887b22adaf719ce0198d60df">setUseByteString</a>($options[<span class="stringliteral">&#39;bytestring&#39;</span>]);
<a name="l00127"></a>00127         }
<a name="l00128"></a>00128 
<a name="l00129"></a>00129         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;min&#39;</span>])) {
<a name="l00130"></a>00130             $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a84e58d78d0b53edec6ee6f18f7855e2e">setMin</a>($options[<span class="stringliteral">&#39;min&#39;</span>]);
<a name="l00131"></a>00131         }
<a name="l00132"></a>00132 
<a name="l00133"></a>00133         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;max&#39;</span>])) {
<a name="l00134"></a>00134             $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a093b1809e991c58b31276ce42e36b838">setMax</a>($options[<span class="stringliteral">&#39;max&#39;</span>]);
<a name="l00135"></a>00135         }
<a name="l00136"></a>00136     }
<a name="l00137"></a>00137 
<a name="l00144"></a><a class="code" href="class_zend___validate___file___size.html#a927f1f26887b22adaf719ce0198d60df">00144</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___validate___file___size.html#a927f1f26887b22adaf719ce0198d60df">setUseByteString</a>($byteString = <span class="keyword">true</span>)
<a name="l00145"></a>00145     {
<a name="l00146"></a>00146         $this-&gt;_useByteString = (bool) $byteString;
<a name="l00147"></a>00147         <span class="keywordflow">return</span> $this;
<a name="l00148"></a>00148     }
<a name="l00149"></a>00149 
<a name="l00155"></a><a class="code" href="class_zend___validate___file___size.html#ada9a00b13b208db87fad0ab92d15d708">00155</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___validate___file___size.html#ada9a00b13b208db87fad0ab92d15d708">useByteString</a>()
<a name="l00156"></a>00156     {
<a name="l00157"></a>00157         <span class="keywordflow">return</span> $this-&gt;_useByteString;
<a name="l00158"></a>00158     }
<a name="l00159"></a>00159 
<a name="l00166"></a><a class="code" href="class_zend___validate___file___size.html#aa09e1d5acede0532b07c9f9f1268e8ad">00166</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___validate___file___size.html#aa09e1d5acede0532b07c9f9f1268e8ad">getMin</a>($raw = <span class="keyword">false</span>)
<a name="l00167"></a>00167     {
<a name="l00168"></a>00168         $min = $this-&gt;_min;
<a name="l00169"></a>00169         <span class="keywordflow">if</span> (!$raw &amp;&amp; $this-&gt;<a class="code" href="class_zend___validate___file___size.html#ada9a00b13b208db87fad0ab92d15d708">useByteString</a>()) {
<a name="l00170"></a>00170             $min = $this-&gt;<a class="code" href="class_zend___validate___file___size.html#ac2b63e2d59001df4494925a9ad2408b7">_toByteString</a>($min);
<a name="l00171"></a>00171         }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173         <span class="keywordflow">return</span> $min;
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175 
<a name="l00183"></a><a class="code" href="class_zend___validate___file___size.html#a84e58d78d0b53edec6ee6f18f7855e2e">00183</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___validate___file___size.html#a84e58d78d0b53edec6ee6f18f7855e2e">setMin</a>($min)
<a name="l00184"></a>00184     {
<a name="l00185"></a>00185         <span class="keywordflow">if</span> (!is_string($min) and !is_numeric($min)) {
<a name="l00186"></a>00186             require_once <span class="stringliteral">&#39;Zend/Validate/Exception.php&#39;</span>;
<a name="l00187"></a>00187             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___validate___exception.html">Zend_Validate_Exception</a> (<span class="stringliteral">&#39;Invalid options to validator provided&#39;</span>);
<a name="l00188"></a>00188         }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190         $min = (integer) $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a048f3a1f43076702aead2ef632a2dd25">_fromByteString</a>($min);
<a name="l00191"></a>00191         $max = $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a8e968c1f7c3bef40e647654624d12544">getMax</a>(<span class="keyword">true</span>);
<a name="l00192"></a>00192         <span class="keywordflow">if</span> (($max !== null) &amp;&amp; ($min &gt; $max)) {
<a name="l00193"></a>00193             require_once <span class="stringliteral">&#39;Zend/Validate/Exception.php&#39;</span>;
<a name="l00194"></a>00194             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___validate___exception.html">Zend_Validate_Exception</a>(<span class="stringliteral">&quot;The minimum must be less than or equal to the maximum filesize, but $min &gt;&quot;</span>
<a name="l00195"></a>00195                                             . <span class="stringliteral">&quot; $max&quot;</span>);
<a name="l00196"></a>00196         }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198         $this-&gt;_min = $min;
<a name="l00199"></a>00199         <span class="keywordflow">return</span> $this;
<a name="l00200"></a>00200     }
<a name="l00201"></a>00201 
<a name="l00208"></a><a class="code" href="class_zend___validate___file___size.html#a8e968c1f7c3bef40e647654624d12544">00208</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___validate___file___size.html#a8e968c1f7c3bef40e647654624d12544">getMax</a>($raw = <span class="keyword">false</span>)
<a name="l00209"></a>00209     {
<a name="l00210"></a>00210         $max = $this-&gt;_max;
<a name="l00211"></a>00211         <span class="keywordflow">if</span> (!$raw &amp;&amp; $this-&gt;<a class="code" href="class_zend___validate___file___size.html#ada9a00b13b208db87fad0ab92d15d708">useByteString</a>()) {
<a name="l00212"></a>00212             $max = $this-&gt;<a class="code" href="class_zend___validate___file___size.html#ac2b63e2d59001df4494925a9ad2408b7">_toByteString</a>($max);
<a name="l00213"></a>00213         }
<a name="l00214"></a>00214 
<a name="l00215"></a>00215         <span class="keywordflow">return</span> $max;
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217 
<a name="l00225"></a><a class="code" href="class_zend___validate___file___size.html#a093b1809e991c58b31276ce42e36b838">00225</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___validate___file___size.html#a093b1809e991c58b31276ce42e36b838">setMax</a>($max)
<a name="l00226"></a>00226     {
<a name="l00227"></a>00227         <span class="keywordflow">if</span> (!is_string($max) &amp;&amp; !is_numeric($max)) {
<a name="l00228"></a>00228             require_once <span class="stringliteral">&#39;Zend/Validate/Exception.php&#39;</span>;
<a name="l00229"></a>00229             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___validate___exception.html">Zend_Validate_Exception</a> (<span class="stringliteral">&#39;Invalid options to validator provided&#39;</span>);
<a name="l00230"></a>00230         }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232         $max = (integer) $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a048f3a1f43076702aead2ef632a2dd25">_fromByteString</a>($max);
<a name="l00233"></a>00233         $min = $this-&gt;<a class="code" href="class_zend___validate___file___size.html#aa09e1d5acede0532b07c9f9f1268e8ad">getMin</a>(<span class="keyword">true</span>);
<a name="l00234"></a>00234         <span class="keywordflow">if</span> (($min !== null) &amp;&amp; ($max &lt; $min)) {
<a name="l00235"></a>00235             require_once <span class="stringliteral">&#39;Zend/Validate/Exception.php&#39;</span>;
<a name="l00236"></a>00236             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___validate___exception.html">Zend_Validate_Exception</a>(<span class="stringliteral">&quot;The maximum must be greater than or equal to the minimum filesize, but &quot;</span>
<a name="l00237"></a>00237                                             . <span class="stringliteral">&quot;$max &lt; $min&quot;</span>);
<a name="l00238"></a>00238         }
<a name="l00239"></a>00239 
<a name="l00240"></a>00240         $this-&gt;_max = $max;
<a name="l00241"></a>00241         <span class="keywordflow">return</span> $this;
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243 
<a name="l00249"></a><a class="code" href="class_zend___validate___file___size.html#a3d12a91a297f88c36e191e69a5b171fa">00249</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___validate___file___size.html#a3d12a91a297f88c36e191e69a5b171fa">_getSize</a>()
<a name="l00250"></a>00250     {
<a name="l00251"></a>00251         <span class="keywordflow">return</span> $this-&gt;_size;
<a name="l00252"></a>00252     }
<a name="l00253"></a>00253 
<a name="l00260"></a><a class="code" href="class_zend___validate___file___size.html#a7d01c8f3c231ecbde436f14c4f7ce963">00260</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___validate___file___size.html#a7d01c8f3c231ecbde436f14c4f7ce963">_setSize</a>($size)
<a name="l00261"></a>00261     {
<a name="l00262"></a>00262         $this-&gt;_size = $size;
<a name="l00263"></a>00263         <span class="keywordflow">return</span> $this;
<a name="l00264"></a>00264     }
<a name="l00265"></a>00265 
<a name="l00276"></a><a class="code" href="class_zend___validate___file___size.html#a4c64e22c3400b190836ceb80b2fdf41a">00276</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___validate___file___size.html#a4c64e22c3400b190836ceb80b2fdf41a">isValid</a>($value, $file = null)
<a name="l00277"></a>00277     {
<a name="l00278"></a>00278         <span class="comment">// Is file readable ?</span>
<a name="l00279"></a>00279         require_once <span class="stringliteral">&#39;Zend/Loader.php&#39;</span>;
<a name="l00280"></a>00280         <span class="keywordflow">if</span> (!<a class="code" href="class_zend___loader.html#a994c67ffb8518bf6228fef12b47d6934">Zend_Loader::isReadable</a>($value)) {
<a name="l00281"></a>00281             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a02eddf80afa4a9e9e3d345d297905dc0">_throw</a>($file, self::NOT_FOUND);
<a name="l00282"></a>00282         }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284         <span class="comment">// limited to 4GB files</span>
<a name="l00285"></a>00285         $size = sprintf(<span class="stringliteral">&quot;%u&quot;</span>, @filesize($value));
<a name="l00286"></a>00286 
<a name="l00287"></a>00287         <span class="comment">// Check to see if it&#39;s smaller than min size</span>
<a name="l00288"></a>00288         $min = $this-&gt;<a class="code" href="class_zend___validate___file___size.html#aa09e1d5acede0532b07c9f9f1268e8ad">getMin</a>(<span class="keyword">true</span>);
<a name="l00289"></a>00289         $max = $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a8e968c1f7c3bef40e647654624d12544">getMax</a>(<span class="keyword">true</span>);
<a name="l00290"></a>00290         <span class="keywordflow">if</span> (($min !== null) &amp;&amp; ($size &lt; $min)) {
<a name="l00291"></a>00291             <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___validate___file___size.html#ada9a00b13b208db87fad0ab92d15d708">useByteString</a>()) {
<a name="l00292"></a>00292                 $this-&gt;_min  = $this-&gt;<a class="code" href="class_zend___validate___file___size.html#ac2b63e2d59001df4494925a9ad2408b7">_toByteString</a>($min);
<a name="l00293"></a>00293                 $this-&gt;_size = $this-&gt;<a class="code" href="class_zend___validate___file___size.html#ac2b63e2d59001df4494925a9ad2408b7">_toByteString</a>($size);
<a name="l00294"></a>00294                 $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a02eddf80afa4a9e9e3d345d297905dc0">_throw</a>($file, self::TOO_SMALL);
<a name="l00295"></a>00295                 $this-&gt;_min  = $min;
<a name="l00296"></a>00296                 $this-&gt;_size = $size;
<a name="l00297"></a>00297             } <span class="keywordflow">else</span> {
<a name="l00298"></a>00298                 $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a02eddf80afa4a9e9e3d345d297905dc0">_throw</a>($file, self::TOO_SMALL);
<a name="l00299"></a>00299             }
<a name="l00300"></a>00300         }
<a name="l00301"></a>00301 
<a name="l00302"></a>00302         <span class="comment">// Check to see if it&#39;s larger than max size</span>
<a name="l00303"></a>00303         <span class="keywordflow">if</span> (($max !== null) &amp;&amp; ($max &lt; $size)) {
<a name="l00304"></a>00304             <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___validate___file___size.html#ada9a00b13b208db87fad0ab92d15d708">useByteString</a>()) {
<a name="l00305"></a>00305                 $this-&gt;_max  = $this-&gt;<a class="code" href="class_zend___validate___file___size.html#ac2b63e2d59001df4494925a9ad2408b7">_toByteString</a>($max);
<a name="l00306"></a>00306                 $this-&gt;_size = $this-&gt;<a class="code" href="class_zend___validate___file___size.html#ac2b63e2d59001df4494925a9ad2408b7">_toByteString</a>($size);
<a name="l00307"></a>00307                 $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a02eddf80afa4a9e9e3d345d297905dc0">_throw</a>($file, self::TOO_BIG);
<a name="l00308"></a>00308                 $this-&gt;_max  = $max;
<a name="l00309"></a>00309                 $this-&gt;_size = $size;
<a name="l00310"></a>00310             } <span class="keywordflow">else</span> {
<a name="l00311"></a>00311                 $this-&gt;<a class="code" href="class_zend___validate___file___size.html#a02eddf80afa4a9e9e3d345d297905dc0">_throw</a>($file, self::TOO_BIG);
<a name="l00312"></a>00312             }
<a name="l00313"></a>00313         }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315         <span class="keywordflow">if</span> (count($this-&gt;_messages) &gt; 0) {
<a name="l00316"></a>00316             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00317"></a>00317         }
<a name="l00318"></a>00318 
<a name="l00319"></a>00319         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00320"></a>00320     }
<a name="l00321"></a>00321 
<a name="l00328"></a><a class="code" href="class_zend___validate___file___size.html#ac2b63e2d59001df4494925a9ad2408b7">00328</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___validate___file___size.html#ac2b63e2d59001df4494925a9ad2408b7">_toByteString</a>($size)
<a name="l00329"></a>00329     {
<a name="l00330"></a>00330         $sizes = array(<span class="charliteral">&#39;B&#39;</span>, <span class="stringliteral">&#39;kB&#39;</span>, <span class="stringliteral">&#39;MB&#39;</span>, <span class="stringliteral">&#39;GB&#39;</span>, <span class="stringliteral">&#39;TB&#39;</span>, <span class="stringliteral">&#39;PB&#39;</span>, <span class="stringliteral">&#39;EB&#39;</span>, <span class="stringliteral">&#39;ZB&#39;</span>, <span class="stringliteral">&#39;YB&#39;</span>);
<a name="l00331"></a>00331         <span class="keywordflow">for</span> ($i=0; $size &gt;= 1024 &amp;&amp; $i &lt; 9; $i++) {
<a name="l00332"></a>00332             $size /= 1024;
<a name="l00333"></a>00333         }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335         <span class="keywordflow">return</span> round($size, 2) . $sizes[$i];
<a name="l00336"></a>00336     }
<a name="l00337"></a>00337 
<a name="l00344"></a><a class="code" href="class_zend___validate___file___size.html#a048f3a1f43076702aead2ef632a2dd25">00344</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___validate___file___size.html#a048f3a1f43076702aead2ef632a2dd25">_fromByteString</a>($size)
<a name="l00345"></a>00345     {
<a name="l00346"></a>00346         <span class="keywordflow">if</span> (is_numeric($size)) {
<a name="l00347"></a>00347             <span class="keywordflow">return</span> (integer) $size;
<a name="l00348"></a>00348         }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350         $type  = trim(substr($size, -2, 1));
<a name="l00351"></a>00351 
<a name="l00352"></a>00352         $value = substr($size, 0, -1);
<a name="l00353"></a>00353         <span class="keywordflow">if</span> (!is_numeric($value)) {
<a name="l00354"></a>00354             $value = substr($value, 0, -1);
<a name="l00355"></a>00355         }
<a name="l00356"></a>00356 
<a name="l00357"></a>00357         <span class="keywordflow">switch</span> (strtoupper($type)) {
<a name="l00358"></a>00358             <span class="keywordflow">case</span> <span class="charliteral">&#39;Y&#39;</span>:
<a name="l00359"></a>00359                 $value *= (1024 * 1024 * 1024 * 1024 * 1024 * 1024 * 1024 * 1024);
<a name="l00360"></a>00360                 <span class="keywordflow">break</span>;
<a name="l00361"></a>00361             <span class="keywordflow">case</span> <span class="charliteral">&#39;Z&#39;</span>:
<a name="l00362"></a>00362                 $value *= (1024 * 1024 * 1024 * 1024 * 1024 * 1024 * 1024);
<a name="l00363"></a>00363                 <span class="keywordflow">break</span>;
<a name="l00364"></a>00364             <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>:
<a name="l00365"></a>00365                 $value *= (1024 * 1024 * 1024 * 1024 * 1024 * 1024);
<a name="l00366"></a>00366                 <span class="keywordflow">break</span>;
<a name="l00367"></a>00367             <span class="keywordflow">case</span> <span class="charliteral">&#39;P&#39;</span>:
<a name="l00368"></a>00368                 $value *= (1024 * 1024 * 1024 * 1024 * 1024);
<a name="l00369"></a>00369                 <span class="keywordflow">break</span>;
<a name="l00370"></a>00370             <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>:
<a name="l00371"></a>00371                 $value *= (1024 * 1024 * 1024 * 1024);
<a name="l00372"></a>00372                 <span class="keywordflow">break</span>;
<a name="l00373"></a>00373             <span class="keywordflow">case</span> <span class="charliteral">&#39;G&#39;</span>:
<a name="l00374"></a>00374                 $value *= (1024 * 1024 * 1024);
<a name="l00375"></a>00375                 <span class="keywordflow">break</span>;
<a name="l00376"></a>00376             <span class="keywordflow">case</span> <span class="charliteral">&#39;M&#39;</span>:
<a name="l00377"></a>00377                 $value *= (1024 * 1024);
<a name="l00378"></a>00378                 <span class="keywordflow">break</span>;
<a name="l00379"></a>00379             <span class="keywordflow">case</span> <span class="charliteral">&#39;K&#39;</span>:
<a name="l00380"></a>00380                 $value *= 1024;
<a name="l00381"></a>00381                 <span class="keywordflow">break</span>;
<a name="l00382"></a>00382             <span class="keywordflow">default</span>:
<a name="l00383"></a>00383                 <span class="keywordflow">break</span>;
<a name="l00384"></a>00384         }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386         <span class="keywordflow">return</span> $value;
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388 
<a name="l00396"></a><a class="code" href="class_zend___validate___file___size.html#a02eddf80afa4a9e9e3d345d297905dc0">00396</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___validate___file___size.html#a02eddf80afa4a9e9e3d345d297905dc0">_throw</a>($file, $errorType)
<a name="l00397"></a>00397     {
<a name="l00398"></a>00398         <span class="keywordflow">if</span> ($file !== null) {
<a name="l00399"></a>00399             $this-&gt;_value = $file[<span class="stringliteral">&#39;name&#39;</span>];
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401 
<a name="l00402"></a>00402         $this-&gt;<a class="code" href="class_zend___validate___abstract.html#a76e75e85108a86fcefa1e9d7d4b833f9">_error</a>($errorType);
<a name="l00403"></a>00403         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00404"></a>00404     }
<a name="l00405"></a>00405 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Apr 19 2012 17:01:18 for openbiz by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
