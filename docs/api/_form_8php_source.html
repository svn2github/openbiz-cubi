<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>openbiz: E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Form.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Form.php</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00022"></a>00022 require_once <span class="stringliteral">&#39;Zend/Validate/Interface.php&#39;</span>;
<a name="l00023"></a>00023 
<a name="l00033"></a><a class="code" href="class_zend___form.html">00033</a> <span class="keyword">class </span><a class="code" href="class_zend___form.html">Zend_Form</a> <span class="keyword">implements</span> Iterator, Countable, <a class="code" href="interface_zend___validate___interface.html">Zend_Validate_Interface</a>
<a name="l00034"></a>00034 {
<a name="l00038"></a><a class="code" href="class_zend___form.html#a17a2a0358e8bb2b700101e74628a0299">00038</a>     <span class="keyword">const</span> <a class="code" href="class_zend___form.html#a17a2a0358e8bb2b700101e74628a0299">DECORATOR</a> = <span class="stringliteral">&#39;DECORATOR&#39;</span>;
<a name="l00039"></a>00039     <span class="keyword">const</span> ELEMENT = <span class="stringliteral">&#39;ELEMENT&#39;</span>;
<a name="l00045"></a><a class="code" href="class_zend___form.html#a696713675b01d88c6828af7b19d91bb7">00045</a>     <span class="keyword">const</span> <a class="code" href="class_zend___form.html#a696713675b01d88c6828af7b19d91bb7">METHOD_DELETE</a> = <span class="stringliteral">&#39;delete&#39;</span>;
<a name="l00046"></a>00046     <span class="keyword">const</span> METHOD_GET    = <span class="stringliteral">&#39;get&#39;</span>;
<a name="l00047"></a>00047     <span class="keyword">const</span> METHOD_POST   = <span class="stringliteral">&#39;post&#39;</span>;
<a name="l00048"></a>00048     <span class="keyword">const</span> METHOD_PUT    = <span class="stringliteral">&#39;put&#39;</span>;
<a name="l00054"></a><a class="code" href="class_zend___form.html#a513e52dc4f1429b5000e65896c3a55f5">00054</a>     <span class="keyword">const</span> <a class="code" href="class_zend___form.html#a513e52dc4f1429b5000e65896c3a55f5">ENCTYPE_URLENCODED</a> = <span class="stringliteral">&#39;application/x-www-form-urlencoded&#39;</span>;
<a name="l00055"></a>00055     <span class="keyword">const</span> ENCTYPE_MULTIPART  = <span class="stringliteral">&#39;multipart/form-data&#39;</span>;
<a name="l00062"></a>00062     <span class="keyword">protected</span> $_attribs = array();
<a name="l00063"></a>00063 
<a name="l00068"></a>00068     <span class="keyword">protected</span> $_decorators = array();
<a name="l00069"></a>00069 
<a name="l00074"></a>00074     <span class="keyword">protected</span> $_defaultDisplayGroupClass = <span class="stringliteral">&#39;Zend_Form_DisplayGroup&#39;</span>;
<a name="l00075"></a>00075 
<a name="l00080"></a>00080     <span class="keyword">protected</span> $_description;
<a name="l00081"></a>00081 
<a name="l00086"></a>00086     <span class="keyword">protected</span> $_disableLoadDefaultDecorators = <span class="keyword">false</span>;
<a name="l00087"></a>00087 
<a name="l00092"></a>00092     <span class="keyword">protected</span> $_displayGroupPrefixPaths = array();
<a name="l00093"></a>00093 
<a name="l00098"></a>00098     <span class="keyword">protected</span> $_displayGroups = array();
<a name="l00099"></a>00099 
<a name="l00104"></a>00104     <span class="keyword">protected</span> $_elementDecorators;
<a name="l00105"></a>00105 
<a name="l00110"></a>00110     <span class="keyword">protected</span> $_elementPrefixPaths = array();
<a name="l00111"></a>00111 
<a name="l00116"></a>00116     <span class="keyword">protected</span> $_elements = array();
<a name="l00117"></a>00117 
<a name="l00122"></a>00122     <span class="keyword">protected</span> $_elementsBelongTo;
<a name="l00123"></a>00123 
<a name="l00128"></a>00128     <span class="keyword">protected</span> $_errorMessages = array();
<a name="l00129"></a>00129 
<a name="l00134"></a>00134     <span class="keyword">protected</span> $_errorsExist = <span class="keyword">false</span>;
<a name="l00135"></a>00135 
<a name="l00140"></a>00140     <span class="keyword">protected</span> $_errorsForced = <span class="keyword">false</span>;
<a name="l00141"></a>00141 
<a name="l00146"></a>00146     <span class="keyword">protected</span> $_formOrder;
<a name="l00147"></a>00147 
<a name="l00152"></a>00152     <span class="keyword">protected</span> $_isArray = <span class="keyword">false</span>;
<a name="l00153"></a>00153 
<a name="l00158"></a>00158     <span class="keyword">protected</span> $_legend;
<a name="l00159"></a>00159 
<a name="l00164"></a>00164     <span class="keyword">protected</span> $_loaders = array();
<a name="l00165"></a>00165 
<a name="l00170"></a>00170     <span class="keyword">protected</span> $_methods = array(<span class="stringliteral">&#39;delete&#39;</span>, <span class="stringliteral">&#39;get&#39;</span>, <span class="stringliteral">&#39;post&#39;</span>, <span class="stringliteral">&#39;put&#39;</span>);
<a name="l00171"></a>00171 
<a name="l00176"></a>00176     <span class="keyword">protected</span> $_order = array();
<a name="l00177"></a>00177 
<a name="l00182"></a>00182     <span class="keyword">protected</span> $_orderUpdated = <span class="keyword">false</span>;
<a name="l00183"></a>00183 
<a name="l00188"></a>00188     <span class="keyword">protected</span> $_subFormPrefixPaths = array();
<a name="l00189"></a>00189 
<a name="l00194"></a>00194     <span class="keyword">protected</span> $_subForms = array();
<a name="l00195"></a>00195 
<a name="l00199"></a>00199     <span class="keyword">protected</span> $_translator;
<a name="l00200"></a>00200 
<a name="l00205"></a>00205     <span class="keyword">protected</span> <span class="keyword">static</span> $_translatorDefault;
<a name="l00206"></a>00206 
<a name="l00211"></a>00211     <span class="keyword">protected</span> $_translatorDisabled = <span class="keyword">false</span>;
<a name="l00212"></a>00212 
<a name="l00216"></a>00216     <span class="keyword">protected</span> $_view;
<a name="l00217"></a>00217 
<a name="l00226"></a><a class="code" href="class_zend___form.html#ae8cda3b1eced24bb5ffaab1fcb107cf7">00226</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ae8cda3b1eced24bb5ffaab1fcb107cf7">__construct</a>($options = null)
<a name="l00227"></a>00227     {
<a name="l00228"></a>00228         <span class="keywordflow">if</span> (is_array($options)) {
<a name="l00229"></a>00229             $this-&gt;<a class="code" href="class_zend___form.html#a673b5e9db470a52ea28b56a44e23e2d0">setOptions</a>($options);
<a name="l00230"></a>00230         } elseif ($options instanceof <a class="code" href="class_zend___config.html">Zend_Config</a>) {
<a name="l00231"></a>00231             $this-&gt;<a class="code" href="class_zend___form.html#a573debdd5f0c95c901bca358f162fa43">setConfig</a>($options);
<a name="l00232"></a>00232         }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234         <span class="comment">// Extensions...</span>
<a name="l00235"></a>00235         $this-&gt;<a class="code" href="class_zend___form.html#a4be4055f3361d4800e16bc2e2e38cda6">init</a>();
<a name="l00236"></a>00236 
<a name="l00237"></a>00237         $this-&gt;<a class="code" href="class_zend___form.html#aa9e0138685a7ef88f4f670e379e7cae3">loadDefaultDecorators</a>();
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239 
<a name="l00245"></a><a class="code" href="class_zend___form.html#ad0cb87b388bc74d63dc884accdca8713">00245</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ad0cb87b388bc74d63dc884accdca8713">__clone</a>()
<a name="l00246"></a>00246     {
<a name="l00247"></a>00247         $elements = array();
<a name="l00248"></a>00248         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>() as $name =&gt; $element) {
<a name="l00249"></a>00249             $elements[] = clone $element;
<a name="l00250"></a>00250         }
<a name="l00251"></a>00251         $this-&gt;<a class="code" href="class_zend___form.html#aae0e22d6a0050c670c28f24e7ebc5eb0">setElements</a>($elements);
<a name="l00252"></a>00252 
<a name="l00253"></a>00253         $subForms = array();
<a name="l00254"></a>00254         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $name =&gt; $subForm) {
<a name="l00255"></a>00255             $subForms[$name] = clone $subForm;
<a name="l00256"></a>00256         }
<a name="l00257"></a>00257         $this-&gt;<a class="code" href="class_zend___form.html#afcb3855fdde596b39dfaef1730f0792f">setSubForms</a>($subForms);
<a name="l00258"></a>00258 
<a name="l00259"></a>00259         $displayGroups = array();
<a name="l00260"></a>00260         <span class="keywordflow">foreach</span> ($this-&gt;_displayGroups as $group)  {
<a name="l00261"></a>00261             $clone    = clone $group;
<a name="l00262"></a>00262             $elements = array();
<a name="l00263"></a>00263             <span class="keywordflow">foreach</span> ($clone-&gt;getElements() as $name =&gt; $e) {
<a name="l00264"></a>00264                 $elements[] = $this-&gt;<a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($name);
<a name="l00265"></a>00265             }
<a name="l00266"></a>00266             $clone-&gt;setElements($elements);
<a name="l00267"></a>00267             $displayGroups[] = $clone;
<a name="l00268"></a>00268         }
<a name="l00269"></a>00269         $this-&gt;<a class="code" href="class_zend___form.html#a63ec112f7c3c8290401ca3de21d7d0b4">setDisplayGroups</a>($displayGroups);
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271 
<a name="l00277"></a><a class="code" href="class_zend___form.html#a4a20559544fdf4dcb457e258dc976cf8">00277</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a4a20559544fdf4dcb457e258dc976cf8">reset</a>()
<a name="l00278"></a>00278     {
<a name="l00279"></a>00279         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>() as $element) {
<a name="l00280"></a>00280             $element-&gt;setValue(null);
<a name="l00281"></a>00281         }
<a name="l00282"></a>00282         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $subForm) {
<a name="l00283"></a>00283             $subForm-&gt;reset();
<a name="l00284"></a>00284         }
<a name="l00285"></a>00285 
<a name="l00286"></a>00286         <span class="keywordflow">return</span> $this;
<a name="l00287"></a>00287     }
<a name="l00288"></a>00288 
<a name="l00294"></a><a class="code" href="class_zend___form.html#a4be4055f3361d4800e16bc2e2e38cda6">00294</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a4be4055f3361d4800e16bc2e2e38cda6">init</a>()
<a name="l00295"></a>00295     {
<a name="l00296"></a>00296     }
<a name="l00297"></a>00297 
<a name="l00304"></a><a class="code" href="class_zend___form.html#a673b5e9db470a52ea28b56a44e23e2d0">00304</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a673b5e9db470a52ea28b56a44e23e2d0">setOptions</a>(array $options)
<a name="l00305"></a>00305     {
<a name="l00306"></a>00306         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;prefixPath&#39;</span>])) {
<a name="l00307"></a>00307             $this-&gt;<a class="code" href="class_zend___form.html#a771b25540be194aa10e4d5df1565703f">addPrefixPaths</a>($options[<span class="stringliteral">&#39;prefixPath&#39;</span>]);
<a name="l00308"></a>00308             unset($options[<span class="stringliteral">&#39;prefixPath&#39;</span>]);
<a name="l00309"></a>00309         }
<a name="l00310"></a>00310 
<a name="l00311"></a>00311         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;elementPrefixPath&#39;</span>])) {
<a name="l00312"></a>00312             $this-&gt;<a class="code" href="class_zend___form.html#ae1757f323488bf76360b65b447a0ebc8">addElementPrefixPaths</a>($options[<span class="stringliteral">&#39;elementPrefixPath&#39;</span>]);
<a name="l00313"></a>00313             unset($options[<span class="stringliteral">&#39;elementPrefixPath&#39;</span>]);
<a name="l00314"></a>00314         }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;displayGroupPrefixPath&#39;</span>])) {
<a name="l00317"></a>00317             $this-&gt;<a class="code" href="class_zend___form.html#a7be1ecc31f9383df8d375dfad9cf0653">addDisplayGroupPrefixPaths</a>($options[<span class="stringliteral">&#39;displayGroupPrefixPath&#39;</span>]);
<a name="l00318"></a>00318             unset($options[<span class="stringliteral">&#39;displayGroupPrefixPath&#39;</span>]);
<a name="l00319"></a>00319         }
<a name="l00320"></a>00320 
<a name="l00321"></a>00321         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;elementDecorators&#39;</span>])) {
<a name="l00322"></a>00322             $this-&gt;_elementDecorators = $options[<span class="stringliteral">&#39;elementDecorators&#39;</span>];
<a name="l00323"></a>00323             unset($options[<span class="stringliteral">&#39;elementDecorators&#39;</span>]);
<a name="l00324"></a>00324         }
<a name="l00325"></a>00325 
<a name="l00326"></a>00326         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;elements&#39;</span>])) {
<a name="l00327"></a>00327             $this-&gt;<a class="code" href="class_zend___form.html#aae0e22d6a0050c670c28f24e7ebc5eb0">setElements</a>($options[<span class="stringliteral">&#39;elements&#39;</span>]);
<a name="l00328"></a>00328             unset($options[<span class="stringliteral">&#39;elements&#39;</span>]);
<a name="l00329"></a>00329         }
<a name="l00330"></a>00330 
<a name="l00331"></a>00331         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;defaultDisplayGroupClass&#39;</span>])) {
<a name="l00332"></a>00332             $this-&gt;<a class="code" href="class_zend___form.html#aeca5fbb4449426cd8fa65d58a6774821">setDefaultDisplayGroupClass</a>($options[<span class="stringliteral">&#39;defaultDisplayGroupClass&#39;</span>]);
<a name="l00333"></a>00333             unset($options[<span class="stringliteral">&#39;defaultDisplayGroupClass&#39;</span>]);
<a name="l00334"></a>00334         }
<a name="l00335"></a>00335 
<a name="l00336"></a>00336         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;displayGroupDecorators&#39;</span>])) {
<a name="l00337"></a>00337             $displayGroupDecorators = $options[<span class="stringliteral">&#39;displayGroupDecorators&#39;</span>];
<a name="l00338"></a>00338             unset($options[<span class="stringliteral">&#39;displayGroupDecorators&#39;</span>]);
<a name="l00339"></a>00339         }
<a name="l00340"></a>00340 
<a name="l00341"></a>00341         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;elementsBelongTo&#39;</span>])) {
<a name="l00342"></a>00342             $elementsBelongTo = $options[<span class="stringliteral">&#39;elementsBelongTo&#39;</span>];
<a name="l00343"></a>00343             unset($options[<span class="stringliteral">&#39;elementsBelongTo&#39;</span>]);
<a name="l00344"></a>00344         }
<a name="l00345"></a>00345 
<a name="l00346"></a>00346         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;attribs&#39;</span>])) {
<a name="l00347"></a>00347             $this-&gt;<a class="code" href="class_zend___form.html#a01080fa2aacacb7f8bc9e270c29653a6">addAttribs</a>($options[<span class="stringliteral">&#39;attribs&#39;</span>]);
<a name="l00348"></a>00348             unset($options[<span class="stringliteral">&#39;attribs&#39;</span>]);
<a name="l00349"></a>00349         }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351         $forbidden = array(
<a name="l00352"></a>00352             <span class="stringliteral">&#39;Options&#39;</span>, <span class="stringliteral">&#39;Config&#39;</span>, <span class="stringliteral">&#39;PluginLoader&#39;</span>, <span class="stringliteral">&#39;SubForms&#39;</span>, <span class="stringliteral">&#39;View&#39;</span>, <span class="stringliteral">&#39;Translator&#39;</span>,
<a name="l00353"></a>00353             <span class="stringliteral">&#39;Attrib&#39;</span>, <span class="stringliteral">&#39;Default&#39;</span>,
<a name="l00354"></a>00354         );
<a name="l00355"></a>00355 
<a name="l00356"></a>00356         <span class="keywordflow">foreach</span> ($options as $key =&gt; $value) {
<a name="l00357"></a>00357             $normalized = ucfirst($key);
<a name="l00358"></a>00358             <span class="keywordflow">if</span> (in_array($normalized, $forbidden)) {
<a name="l00359"></a>00359                 <span class="keywordflow">continue</span>;
<a name="l00360"></a>00360             }
<a name="l00361"></a>00361 
<a name="l00362"></a>00362             $method = <span class="stringliteral">&#39;set&#39;</span> . $normalized;
<a name="l00363"></a>00363             <span class="keywordflow">if</span> (method_exists($this, $method)) {
<a name="l00364"></a>00364                 $this-&gt;$method($value);
<a name="l00365"></a>00365             } <span class="keywordflow">else</span> {
<a name="l00366"></a>00366                 $this-&gt;<a class="code" href="class_zend___form.html#acd94451895bae9995855d22b263e0a72">setAttrib</a>($key, $value);
<a name="l00367"></a>00367             }
<a name="l00368"></a>00368         }
<a name="l00369"></a>00369 
<a name="l00370"></a>00370         <span class="keywordflow">if</span> (isset($displayGroupDecorators)) {
<a name="l00371"></a>00371             $this-&gt;<a class="code" href="class_zend___form.html#a722de47b9c47013a9aa037db91ee0006">setDisplayGroupDecorators</a>($displayGroupDecorators);
<a name="l00372"></a>00372         }
<a name="l00373"></a>00373 
<a name="l00374"></a>00374         <span class="keywordflow">if</span> (isset($elementsBelongTo)) {
<a name="l00375"></a>00375             $this-&gt;<a class="code" href="class_zend___form.html#a388a3f8450af214f4e5df499b3a19d72">setElementsBelongTo</a>($elementsBelongTo);
<a name="l00376"></a>00376         }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378         <span class="keywordflow">return</span> $this;
<a name="l00379"></a>00379     }
<a name="l00380"></a>00380 
<a name="l00387"></a><a class="code" href="class_zend___form.html#a573debdd5f0c95c901bca358f162fa43">00387</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a573debdd5f0c95c901bca358f162fa43">setConfig</a>(<a class="code" href="class_zend___config.html">Zend_Config</a> $config)
<a name="l00388"></a>00388     {
<a name="l00389"></a>00389         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a673b5e9db470a52ea28b56a44e23e2d0">setOptions</a>($config-&gt;<a class="code" href="class_zend___config.html#a658defb34762c8f40085aec87e16ba1a">toArray</a>());
<a name="l00390"></a>00390     }
<a name="l00391"></a>00391 
<a name="l00392"></a>00392 
<a name="l00393"></a>00393     <span class="comment">// Loaders</span>
<a name="l00394"></a>00394 
<a name="l00403"></a><a class="code" href="class_zend___form.html#af858cba6456199d95cf01a32e6c04aef">00403</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#af858cba6456199d95cf01a32e6c04aef">setPluginLoader</a>(<a class="code" href="interface_zend___loader___plugin_loader___interface.html">Zend_Loader_PluginLoader_Interface</a> $loader, $type = null)
<a name="l00404"></a>00404     {
<a name="l00405"></a>00405         $type = strtoupper($type);
<a name="l00406"></a>00406         <span class="keywordflow">switch</span> ($type) {
<a name="l00407"></a>00407             <span class="keywordflow">case</span> self::DECORATOR:
<a name="l00408"></a>00408             <span class="keywordflow">case</span> self::ELEMENT:
<a name="l00409"></a>00409                 $this-&gt;_loaders[$type] = $loader;
<a name="l00410"></a>00410                 <span class="keywordflow">return</span> $this;
<a name="l00411"></a>00411             <span class="keywordflow">default</span>:
<a name="l00412"></a>00412                 require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l00413"></a>00413                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(sprintf(<span class="stringliteral">&#39;Invalid type &quot;%s&quot; provided to setPluginLoader()&#39;</span>, $type));
<a name="l00414"></a>00414         }
<a name="l00415"></a>00415     }
<a name="l00416"></a>00416 
<a name="l00430"></a><a class="code" href="class_zend___form.html#ab4aeb03f8ff437caf852db28fe6e23c9">00430</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ab4aeb03f8ff437caf852db28fe6e23c9">getPluginLoader</a>($type = null)
<a name="l00431"></a>00431     {
<a name="l00432"></a>00432         $type = strtoupper($type);
<a name="l00433"></a>00433         <span class="keywordflow">if</span> (!isset($this-&gt;_loaders[$type])) {
<a name="l00434"></a>00434             <span class="keywordflow">switch</span> ($type) {
<a name="l00435"></a>00435                 <span class="keywordflow">case</span> self::DECORATOR:
<a name="l00436"></a>00436                     $prefixSegment = <span class="stringliteral">&#39;Form_Decorator&#39;</span>;
<a name="l00437"></a>00437                     $pathSegment   = <span class="stringliteral">&#39;Form/Decorator&#39;</span>;
<a name="l00438"></a>00438                     <span class="keywordflow">break</span>;
<a name="l00439"></a>00439                 <span class="keywordflow">case</span> self::ELEMENT:
<a name="l00440"></a>00440                     $prefixSegment = <span class="stringliteral">&#39;Form_Element&#39;</span>;
<a name="l00441"></a>00441                     $pathSegment   = <span class="stringliteral">&#39;Form/Element&#39;</span>;
<a name="l00442"></a>00442                     <span class="keywordflow">break</span>;
<a name="l00443"></a>00443                 <span class="keywordflow">default</span>:
<a name="l00444"></a>00444                     require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l00445"></a>00445                     <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(sprintf(<span class="stringliteral">&#39;Invalid type &quot;%s&quot; provided to getPluginLoader()&#39;</span>, $type));
<a name="l00446"></a>00446             }
<a name="l00447"></a>00447 
<a name="l00448"></a>00448             require_once <span class="stringliteral">&#39;Zend/Loader/PluginLoader.php&#39;</span>;
<a name="l00449"></a>00449             $this-&gt;_loaders[$type] = <span class="keyword">new</span> <a class="code" href="class_zend___loader___plugin_loader.html">Zend_Loader_PluginLoader</a>(
<a name="l00450"></a>00450                 array(<span class="stringliteral">&#39;Zend_&#39;</span> . $prefixSegment . <span class="charliteral">&#39;_&#39;</span> =&gt; <span class="stringliteral">&#39;Zend/&#39;</span> . $pathSegment . <span class="charliteral">&#39;/&#39;</span>)
<a name="l00451"></a>00451             );
<a name="l00452"></a>00452         }
<a name="l00453"></a>00453 
<a name="l00454"></a>00454         <span class="keywordflow">return</span> $this-&gt;_loaders[$type];
<a name="l00455"></a>00455     }
<a name="l00456"></a>00456 
<a name="l00477"></a><a class="code" href="class_zend___form.html#adfed525c43d039d03910784b04a67ac7">00477</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#adfed525c43d039d03910784b04a67ac7">addPrefixPath</a>($prefix, $path, $type = null)
<a name="l00478"></a>00478     {
<a name="l00479"></a>00479         $type = strtoupper($type);
<a name="l00480"></a>00480         <span class="keywordflow">switch</span> ($type) {
<a name="l00481"></a>00481             <span class="keywordflow">case</span> self::DECORATOR:
<a name="l00482"></a>00482             <span class="keywordflow">case</span> self::ELEMENT:
<a name="l00483"></a>00483                 $loader = $this-&gt;<a class="code" href="class_zend___form.html#ab4aeb03f8ff437caf852db28fe6e23c9">getPluginLoader</a>($type);
<a name="l00484"></a>00484                 $loader-&gt;addPrefixPath($prefix, $path);
<a name="l00485"></a>00485                 <span class="keywordflow">return</span> $this;
<a name="l00486"></a>00486             <span class="keywordflow">case</span> null:
<a name="l00487"></a>00487                 $prefix = rtrim($prefix, <span class="charliteral">&#39;_&#39;</span>);
<a name="l00488"></a>00488                 $path   = rtrim($path, DIRECTORY_SEPARATOR);
<a name="l00489"></a>00489                 <span class="keywordflow">foreach</span> (array(self::DECORATOR, self::ELEMENT) as $type) {
<a name="l00490"></a>00490                     $cType        = ucfirst(strtolower($type));
<a name="l00491"></a>00491                     $pluginPath   = $path . DIRECTORY_SEPARATOR . $cType . DIRECTORY_SEPARATOR;
<a name="l00492"></a>00492                     $pluginPrefix = $prefix . <span class="charliteral">&#39;_&#39;</span> . $cType;
<a name="l00493"></a>00493                     $loader       = $this-&gt;<a class="code" href="class_zend___form.html#ab4aeb03f8ff437caf852db28fe6e23c9">getPluginLoader</a>($type);
<a name="l00494"></a>00494                     $loader-&gt;addPrefixPath($pluginPrefix, $pluginPath);
<a name="l00495"></a>00495                 }
<a name="l00496"></a>00496                 <span class="keywordflow">return</span> $this;
<a name="l00497"></a>00497             <span class="keywordflow">default</span>:
<a name="l00498"></a>00498                 require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l00499"></a>00499                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(sprintf(<span class="stringliteral">&#39;Invalid type &quot;%s&quot; provided to getPluginLoader()&#39;</span>, $type));
<a name="l00500"></a>00500         }
<a name="l00501"></a>00501     }
<a name="l00502"></a>00502 
<a name="l00509"></a><a class="code" href="class_zend___form.html#a771b25540be194aa10e4d5df1565703f">00509</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a771b25540be194aa10e4d5df1565703f">addPrefixPaths</a>(array $spec)
<a name="l00510"></a>00510     {
<a name="l00511"></a>00511         <span class="keywordflow">if</span> (isset($spec[<span class="stringliteral">&#39;prefix&#39;</span>]) &amp;&amp; isset($spec[<span class="stringliteral">&#39;path&#39;</span>])) {
<a name="l00512"></a>00512             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#adfed525c43d039d03910784b04a67ac7">addPrefixPath</a>($spec[<span class="stringliteral">&#39;prefix&#39;</span>], $spec[<span class="stringliteral">&#39;path&#39;</span>]);
<a name="l00513"></a>00513         }
<a name="l00514"></a>00514         <span class="keywordflow">foreach</span> ($spec as $type =&gt; $paths) {
<a name="l00515"></a>00515             <span class="keywordflow">if</span> (is_numeric($type) &amp;&amp; is_array($paths)) {
<a name="l00516"></a>00516                 $type = null;
<a name="l00517"></a>00517                 <span class="keywordflow">if</span> (isset($paths[<span class="stringliteral">&#39;prefix&#39;</span>]) &amp;&amp; isset($paths[<span class="stringliteral">&#39;path&#39;</span>])) {
<a name="l00518"></a>00518                     <span class="keywordflow">if</span> (isset($paths[<span class="stringliteral">&#39;type&#39;</span>])) {
<a name="l00519"></a>00519                         $type = $paths[<span class="stringliteral">&#39;type&#39;</span>];
<a name="l00520"></a>00520                     }
<a name="l00521"></a>00521                     $this-&gt;<a class="code" href="class_zend___form.html#adfed525c43d039d03910784b04a67ac7">addPrefixPath</a>($paths[<span class="stringliteral">&#39;prefix&#39;</span>], $paths[<span class="stringliteral">&#39;path&#39;</span>], $type);
<a name="l00522"></a>00522                 }
<a name="l00523"></a>00523             } elseif (!is_numeric($type)) {
<a name="l00524"></a>00524                 <span class="keywordflow">if</span> (!isset($paths[<span class="stringliteral">&#39;prefix&#39;</span>]) || !isset($paths[<span class="stringliteral">&#39;path&#39;</span>])) {
<a name="l00525"></a>00525                     <span class="keywordflow">continue</span>;
<a name="l00526"></a>00526                 }
<a name="l00527"></a>00527                 $this-&gt;<a class="code" href="class_zend___form.html#adfed525c43d039d03910784b04a67ac7">addPrefixPath</a>($paths[<span class="stringliteral">&#39;prefix&#39;</span>], $paths[<span class="stringliteral">&#39;path&#39;</span>], $type);
<a name="l00528"></a>00528             }
<a name="l00529"></a>00529         }
<a name="l00530"></a>00530         <span class="keywordflow">return</span> $this;
<a name="l00531"></a>00531     }
<a name="l00532"></a>00532 
<a name="l00541"></a><a class="code" href="class_zend___form.html#a9ac362efa656e378f6b60f56e23953a2">00541</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a9ac362efa656e378f6b60f56e23953a2">addElementPrefixPath</a>($prefix, $path, $type = null)
<a name="l00542"></a>00542     {
<a name="l00543"></a>00543         $this-&gt;_elementPrefixPaths[] = array(
<a name="l00544"></a>00544             <span class="stringliteral">&#39;prefix&#39;</span> =&gt; $prefix,
<a name="l00545"></a>00545             <span class="stringliteral">&#39;path&#39;</span>   =&gt; $path,
<a name="l00546"></a>00546             <span class="stringliteral">&#39;type&#39;</span>   =&gt; $type,
<a name="l00547"></a>00547         );
<a name="l00548"></a>00548 
<a name="l00549"></a>00549         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>() as $element) {
<a name="l00550"></a>00550             $element-&gt;addPrefixPath($prefix, $path, $type);
<a name="l00551"></a>00551         }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $subForm) {
<a name="l00554"></a>00554             $subForm-&gt;addElementPrefixPath($prefix, $path, $type);
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556 
<a name="l00557"></a>00557         <span class="keywordflow">return</span> $this;
<a name="l00558"></a>00558     }
<a name="l00559"></a>00559 
<a name="l00566"></a><a class="code" href="class_zend___form.html#ae1757f323488bf76360b65b447a0ebc8">00566</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ae1757f323488bf76360b65b447a0ebc8">addElementPrefixPaths</a>(array $spec)
<a name="l00567"></a>00567     {
<a name="l00568"></a>00568         $this-&gt;_elementPrefixPaths = $this-&gt;_elementPrefixPaths + $spec;
<a name="l00569"></a>00569 
<a name="l00570"></a>00570         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>() as $element) {
<a name="l00571"></a>00571             $element-&gt;addPrefixPaths($spec);
<a name="l00572"></a>00572         }
<a name="l00573"></a>00573 
<a name="l00574"></a>00574         <span class="keywordflow">return</span> $this;
<a name="l00575"></a>00575     }
<a name="l00576"></a>00576 
<a name="l00584"></a><a class="code" href="class_zend___form.html#a9a993f181269b1b02b0ae889dcb71d25">00584</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a9a993f181269b1b02b0ae889dcb71d25">addDisplayGroupPrefixPath</a>($prefix, $path)
<a name="l00585"></a>00585     {
<a name="l00586"></a>00586         $this-&gt;_displayGroupPrefixPaths[] = array(
<a name="l00587"></a>00587             <span class="stringliteral">&#39;prefix&#39;</span> =&gt; $prefix,
<a name="l00588"></a>00588             <span class="stringliteral">&#39;path&#39;</span>   =&gt; $path,
<a name="l00589"></a>00589         );
<a name="l00590"></a>00590 
<a name="l00591"></a>00591         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a158ed78e51ed1ea113b085c79decb0ba">getDisplayGroups</a>() as $group) {
<a name="l00592"></a>00592             $group-&gt;addPrefixPath($prefix, $path);
<a name="l00593"></a>00593         }
<a name="l00594"></a>00594 
<a name="l00595"></a>00595         <span class="keywordflow">return</span> $this;
<a name="l00596"></a>00596     }
<a name="l00597"></a>00597 
<a name="l00604"></a><a class="code" href="class_zend___form.html#a7be1ecc31f9383df8d375dfad9cf0653">00604</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a7be1ecc31f9383df8d375dfad9cf0653">addDisplayGroupPrefixPaths</a>(array $spec)
<a name="l00605"></a>00605     {
<a name="l00606"></a>00606         <span class="keywordflow">foreach</span> ($spec as $key =&gt; $value) {
<a name="l00607"></a>00607             <span class="keywordflow">if</span> (is_string($value) &amp;&amp; !is_numeric($key)) {
<a name="l00608"></a>00608                 $this-&gt;<a class="code" href="class_zend___form.html#a9a993f181269b1b02b0ae889dcb71d25">addDisplayGroupPrefixPath</a>($key, $value);
<a name="l00609"></a>00609                 <span class="keywordflow">continue</span>;
<a name="l00610"></a>00610             }
<a name="l00611"></a>00611 
<a name="l00612"></a>00612             <span class="keywordflow">if</span> (is_string($value) &amp;&amp; is_numeric($key)) {
<a name="l00613"></a>00613                 <span class="keywordflow">continue</span>;
<a name="l00614"></a>00614             }
<a name="l00615"></a>00615 
<a name="l00616"></a>00616             <span class="keywordflow">if</span> (is_array($value)) {
<a name="l00617"></a>00617                 $count = <a class="code" href="class_zend___form.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>($value);
<a name="l00618"></a>00618                 <span class="keywordflow">if</span> (array_keys($value) === range(0, $count - 1)) {
<a name="l00619"></a>00619                     <span class="keywordflow">if</span> ($count &lt; 2) {
<a name="l00620"></a>00620                         <span class="keywordflow">continue</span>;
<a name="l00621"></a>00621                     }
<a name="l00622"></a>00622                     $prefix = array_shift($value);
<a name="l00623"></a>00623                     $path   = array_shift($value);
<a name="l00624"></a>00624                     $this-&gt;<a class="code" href="class_zend___form.html#a9a993f181269b1b02b0ae889dcb71d25">addDisplayGroupPrefixPath</a>($prefix, $path);
<a name="l00625"></a>00625                     <span class="keywordflow">continue</span>;
<a name="l00626"></a>00626                 }
<a name="l00627"></a>00627                 <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;prefix&#39;</span>, $value) &amp;&amp; array_key_exists(<span class="stringliteral">&#39;path&#39;</span>, $value)) {
<a name="l00628"></a>00628                     $this-&gt;<a class="code" href="class_zend___form.html#a9a993f181269b1b02b0ae889dcb71d25">addDisplayGroupPrefixPath</a>($value[<span class="stringliteral">&#39;prefix&#39;</span>], $value[<span class="stringliteral">&#39;path&#39;</span>]);
<a name="l00629"></a>00629                 }
<a name="l00630"></a>00630             }
<a name="l00631"></a>00631         }
<a name="l00632"></a>00632         <span class="keywordflow">return</span> $this;
<a name="l00633"></a>00633     }
<a name="l00634"></a>00634 
<a name="l00635"></a>00635     <span class="comment">// Form metadata:</span>
<a name="l00636"></a>00636 
<a name="l00644"></a><a class="code" href="class_zend___form.html#acd94451895bae9995855d22b263e0a72">00644</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#acd94451895bae9995855d22b263e0a72">setAttrib</a>($key, $value)
<a name="l00645"></a>00645     {
<a name="l00646"></a>00646         $key = (string) $key;
<a name="l00647"></a>00647         $this-&gt;_attribs[$key] = $value;
<a name="l00648"></a>00648         <span class="keywordflow">return</span> $this;
<a name="l00649"></a>00649     }
<a name="l00650"></a>00650 
<a name="l00657"></a><a class="code" href="class_zend___form.html#a01080fa2aacacb7f8bc9e270c29653a6">00657</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a01080fa2aacacb7f8bc9e270c29653a6">addAttribs</a>(array $attribs)
<a name="l00658"></a>00658     {
<a name="l00659"></a>00659         <span class="keywordflow">foreach</span> ($attribs as $key =&gt; $value) {
<a name="l00660"></a>00660             $this-&gt;<a class="code" href="class_zend___form.html#acd94451895bae9995855d22b263e0a72">setAttrib</a>($key, $value);
<a name="l00661"></a>00661         }
<a name="l00662"></a>00662         <span class="keywordflow">return</span> $this;
<a name="l00663"></a>00663     }
<a name="l00664"></a>00664 
<a name="l00673"></a><a class="code" href="class_zend___form.html#a82bf41efaa04bf7debaafb837d2c0cf7">00673</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a82bf41efaa04bf7debaafb837d2c0cf7">setAttribs</a>(array $attribs)
<a name="l00674"></a>00674     {
<a name="l00675"></a>00675         $this-&gt;<a class="code" href="class_zend___form.html#af9863d91222f4c4e3ee4e75849052286">clearAttribs</a>();
<a name="l00676"></a>00676         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a01080fa2aacacb7f8bc9e270c29653a6">addAttribs</a>($attribs);
<a name="l00677"></a>00677     }
<a name="l00678"></a>00678 
<a name="l00685"></a><a class="code" href="class_zend___form.html#aa08ace30c1f6388917607bb3524f830d">00685</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#aa08ace30c1f6388917607bb3524f830d">getAttrib</a>($key)
<a name="l00686"></a>00686     {
<a name="l00687"></a>00687         $key = (string) $key;
<a name="l00688"></a>00688         <span class="keywordflow">if</span> (!isset($this-&gt;_attribs[$key])) {
<a name="l00689"></a>00689             <span class="keywordflow">return</span> null;
<a name="l00690"></a>00690         }
<a name="l00691"></a>00691 
<a name="l00692"></a>00692         <span class="keywordflow">return</span> $this-&gt;_attribs[$key];
<a name="l00693"></a>00693     }
<a name="l00694"></a>00694 
<a name="l00700"></a><a class="code" href="class_zend___form.html#aff2776e51eb5b8dc8a0263e5a2a5f9a6">00700</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#aff2776e51eb5b8dc8a0263e5a2a5f9a6">getAttribs</a>()
<a name="l00701"></a>00701     {
<a name="l00702"></a>00702         <span class="keywordflow">return</span> $this-&gt;_attribs;
<a name="l00703"></a>00703     }
<a name="l00704"></a>00704 
<a name="l00711"></a><a class="code" href="class_zend___form.html#ae8908a304ab3bf5828bd6d9d5be521fd">00711</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ae8908a304ab3bf5828bd6d9d5be521fd">removeAttrib</a>($key)
<a name="l00712"></a>00712     {
<a name="l00713"></a>00713         <span class="keywordflow">if</span> (isset($this-&gt;_attribs[$key])) {
<a name="l00714"></a>00714             unset($this-&gt;_attribs[$key]);
<a name="l00715"></a>00715             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00716"></a>00716         }
<a name="l00717"></a>00717 
<a name="l00718"></a>00718         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00719"></a>00719     }
<a name="l00720"></a>00720 
<a name="l00726"></a><a class="code" href="class_zend___form.html#af9863d91222f4c4e3ee4e75849052286">00726</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#af9863d91222f4c4e3ee4e75849052286">clearAttribs</a>()
<a name="l00727"></a>00727     {
<a name="l00728"></a>00728         $this-&gt;_attribs = array();
<a name="l00729"></a>00729         <span class="keywordflow">return</span> $this;
<a name="l00730"></a>00730     }
<a name="l00731"></a>00731 
<a name="l00738"></a><a class="code" href="class_zend___form.html#a0366b3b0db0bd90abfc461c372f86599">00738</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a0366b3b0db0bd90abfc461c372f86599">setAction</a>($action)
<a name="l00739"></a>00739     {
<a name="l00740"></a>00740         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#acd94451895bae9995855d22b263e0a72">setAttrib</a>(<span class="stringliteral">&#39;action&#39;</span>, (<span class="keywordtype">string</span>) $action);
<a name="l00741"></a>00741     }
<a name="l00742"></a>00742 
<a name="l00750"></a><a class="code" href="class_zend___form.html#a189a4abe5faf11f4320d5d3f1d3d1715">00750</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a189a4abe5faf11f4320d5d3f1d3d1715">getAction</a>()
<a name="l00751"></a>00751     {
<a name="l00752"></a>00752         $action = $this-&gt;<a class="code" href="class_zend___form.html#aa08ace30c1f6388917607bb3524f830d">getAttrib</a>(<span class="stringliteral">&#39;action&#39;</span>);
<a name="l00753"></a>00753         <span class="keywordflow">if</span> (null === $action) {
<a name="l00754"></a>00754             $action = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00755"></a>00755             $this-&gt;<a class="code" href="class_zend___form.html#a0366b3b0db0bd90abfc461c372f86599">setAction</a>($action);
<a name="l00756"></a>00756         }
<a name="l00757"></a>00757         <span class="keywordflow">return</span> $action;
<a name="l00758"></a>00758     }
<a name="l00759"></a>00759 
<a name="l00769"></a><a class="code" href="class_zend___form.html#a643c65610f8b3179a8c147cab7cbb652">00769</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a643c65610f8b3179a8c147cab7cbb652">setMethod</a>($method)
<a name="l00770"></a>00770     {
<a name="l00771"></a>00771         $method = strtolower($method);
<a name="l00772"></a>00772         <span class="keywordflow">if</span> (!in_array($method, $this-&gt;_methods)) {
<a name="l00773"></a>00773             require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l00774"></a>00774             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(sprintf(<span class="stringliteral">&#39;&quot;%s&quot; is an invalid form method&#39;</span>, $method));
<a name="l00775"></a>00775         }
<a name="l00776"></a>00776         $this-&gt;<a class="code" href="class_zend___form.html#acd94451895bae9995855d22b263e0a72">setAttrib</a>(<span class="stringliteral">&#39;method&#39;</span>, $method);
<a name="l00777"></a>00777         <span class="keywordflow">return</span> $this;
<a name="l00778"></a>00778     }
<a name="l00779"></a>00779 
<a name="l00785"></a><a class="code" href="class_zend___form.html#af3e37e1a6ed9b8c87f86f659873a83b7">00785</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#af3e37e1a6ed9b8c87f86f659873a83b7">getMethod</a>()
<a name="l00786"></a>00786     {
<a name="l00787"></a>00787         <span class="keywordflow">if</span> (null === ($method = $this-&gt;<a class="code" href="class_zend___form.html#aa08ace30c1f6388917607bb3524f830d">getAttrib</a>(<span class="stringliteral">&#39;method&#39;</span>))) {
<a name="l00788"></a>00788             $method = self::METHOD_POST;
<a name="l00789"></a>00789             $this-&gt;<a class="code" href="class_zend___form.html#acd94451895bae9995855d22b263e0a72">setAttrib</a>(<span class="stringliteral">&#39;method&#39;</span>, $method);
<a name="l00790"></a>00790         }
<a name="l00791"></a>00791         <span class="keywordflow">return</span> strtolower($method);
<a name="l00792"></a>00792     }
<a name="l00793"></a>00793 
<a name="l00800"></a><a class="code" href="class_zend___form.html#a05db5e84b4fde0a101c111b2c30ae8f6">00800</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a05db5e84b4fde0a101c111b2c30ae8f6">setEnctype</a>($value)
<a name="l00801"></a>00801     {
<a name="l00802"></a>00802         $this-&gt;<a class="code" href="class_zend___form.html#acd94451895bae9995855d22b263e0a72">setAttrib</a>(<span class="stringliteral">&#39;enctype&#39;</span>, $value);
<a name="l00803"></a>00803         <span class="keywordflow">return</span> $this;
<a name="l00804"></a>00804     }
<a name="l00805"></a>00805 
<a name="l00811"></a><a class="code" href="class_zend___form.html#a589cc02a465d9cda054b375d85c3f6c2">00811</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a589cc02a465d9cda054b375d85c3f6c2">getEnctype</a>()
<a name="l00812"></a>00812     {
<a name="l00813"></a>00813         <span class="keywordflow">if</span> (null === ($enctype = $this-&gt;<a class="code" href="class_zend___form.html#aa08ace30c1f6388917607bb3524f830d">getAttrib</a>(<span class="stringliteral">&#39;enctype&#39;</span>))) {
<a name="l00814"></a>00814             $enctype = <a class="code" href="class_zend___form.html#a513e52dc4f1429b5000e65896c3a55f5">self::ENCTYPE_URLENCODED</a>;
<a name="l00815"></a>00815             $this-&gt;<a class="code" href="class_zend___form.html#acd94451895bae9995855d22b263e0a72">setAttrib</a>(<span class="stringliteral">&#39;enctype&#39;</span>, $enctype);
<a name="l00816"></a>00816         }
<a name="l00817"></a>00817         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#aa08ace30c1f6388917607bb3524f830d">getAttrib</a>(<span class="stringliteral">&#39;enctype&#39;</span>);
<a name="l00818"></a>00818     }
<a name="l00819"></a>00819 
<a name="l00827"></a><a class="code" href="class_zend___form.html#a6a23f1804f1dd89c6f9f604ce2c2fe63">00827</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a6a23f1804f1dd89c6f9f604ce2c2fe63">filterName</a>($value, $allowBrackets = <span class="keyword">false</span>)
<a name="l00828"></a>00828     {
<a name="l00829"></a>00829         $charset = <span class="stringliteral">&#39;^a-zA-Z0-9_\x7f-\xff&#39;</span>;
<a name="l00830"></a>00830         <span class="keywordflow">if</span> ($allowBrackets) {
<a name="l00831"></a>00831             $charset .= <span class="stringliteral">&#39;\[\]&#39;</span>;
<a name="l00832"></a>00832         }
<a name="l00833"></a>00833         <span class="keywordflow">return</span> preg_replace(<span class="stringliteral">&#39;/[&#39;</span> . $charset . <span class="stringliteral">&#39;]/&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, (<span class="keywordtype">string</span>) $value);
<a name="l00834"></a>00834     }
<a name="l00835"></a>00835 
<a name="l00842"></a><a class="code" href="class_zend___form.html#a2fe666694997d047711d7653eca2f132">00842</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a2fe666694997d047711d7653eca2f132">setName</a>($name)
<a name="l00843"></a>00843     {
<a name="l00844"></a>00844         $name = $this-&gt;<a class="code" href="class_zend___form.html#a6a23f1804f1dd89c6f9f604ce2c2fe63">filterName</a>($name);
<a name="l00845"></a>00845         <span class="keywordflow">if</span> ((<span class="charliteral">&#39;0&#39;</span> !== $name) &amp;&amp; empty($name)) {
<a name="l00846"></a>00846             require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l00847"></a>00847             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;Invalid name provided; must contain only valid variable characters and be non-empty&#39;</span>);
<a name="l00848"></a>00848         }
<a name="l00849"></a>00849 
<a name="l00850"></a>00850         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#acd94451895bae9995855d22b263e0a72">setAttrib</a>(<span class="stringliteral">&#39;name&#39;</span>, $name);
<a name="l00851"></a>00851     }
<a name="l00852"></a>00852 
<a name="l00858"></a><a class="code" href="class_zend___form.html#a3d0963e68bb313b163a73f2803c64600">00858</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a3d0963e68bb313b163a73f2803c64600">getName</a>()
<a name="l00859"></a>00859     {
<a name="l00860"></a>00860         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#aa08ace30c1f6388917607bb3524f830d">getAttrib</a>(<span class="stringliteral">&#39;name&#39;</span>);
<a name="l00861"></a>00861     }
<a name="l00862"></a>00862 
<a name="l00870"></a><a class="code" href="class_zend___form.html#aea3cb2aa71e0bb7ddd7e2bfa4965d2c9">00870</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#aea3cb2aa71e0bb7ddd7e2bfa4965d2c9">getFullyQualifiedName</a>()
<a name="l00871"></a>00871     {
<a name="l00872"></a>00872         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a3d0963e68bb313b163a73f2803c64600">getName</a>();
<a name="l00873"></a>00873     }
<a name="l00874"></a>00874 
<a name="l00880"></a><a class="code" href="class_zend___form.html#a12251d0c022e9e21c137a105ff683f13">00880</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a12251d0c022e9e21c137a105ff683f13">getId</a>()
<a name="l00881"></a>00881     {
<a name="l00882"></a>00882         <span class="keywordflow">if</span> (null !== ($id = $this-&gt;<a class="code" href="class_zend___form.html#aa08ace30c1f6388917607bb3524f830d">getAttrib</a>(<span class="stringliteral">&#39;id&#39;</span>))) {
<a name="l00883"></a>00883             <span class="keywordflow">return</span> $id;
<a name="l00884"></a>00884         }
<a name="l00885"></a>00885 
<a name="l00886"></a>00886         $id = $this-&gt;<a class="code" href="class_zend___form.html#aea3cb2aa71e0bb7ddd7e2bfa4965d2c9">getFullyQualifiedName</a>();
<a name="l00887"></a>00887 
<a name="l00888"></a>00888         <span class="comment">// Bail early if no array notation detected</span>
<a name="l00889"></a>00889         <span class="keywordflow">if</span> (!strstr($id, <span class="charliteral">&#39;[&#39;</span>)) {
<a name="l00890"></a>00890             <span class="keywordflow">return</span> $id;
<a name="l00891"></a>00891         }
<a name="l00892"></a>00892 
<a name="l00893"></a>00893         <span class="comment">// Strip array notation</span>
<a name="l00894"></a>00894         <span class="keywordflow">if</span> (<span class="stringliteral">&#39;[]&#39;</span> == substr($id, -2)) {
<a name="l00895"></a>00895             $id = substr($id, 0, strlen($id) - 2);
<a name="l00896"></a>00896         }
<a name="l00897"></a>00897         $id = str_replace(<span class="stringliteral">&#39;][&#39;</span>, <span class="charliteral">&#39;-&#39;</span>, $id);
<a name="l00898"></a>00898         $id = str_replace(array(<span class="charliteral">&#39;]&#39;</span>, <span class="charliteral">&#39;[&#39;</span>), <span class="charliteral">&#39;-&#39;</span>, $id);
<a name="l00899"></a>00899         $id = trim($id, <span class="charliteral">&#39;-&#39;</span>);
<a name="l00900"></a>00900 
<a name="l00901"></a>00901         <span class="keywordflow">return</span> $id;
<a name="l00902"></a>00902     }
<a name="l00903"></a>00903 
<a name="l00910"></a><a class="code" href="class_zend___form.html#a1bd33551886187fa9ae201ba5f94915c">00910</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a1bd33551886187fa9ae201ba5f94915c">setLegend</a>($value)
<a name="l00911"></a>00911     {
<a name="l00912"></a>00912         $this-&gt;_legend = (string) $value;
<a name="l00913"></a>00913         <span class="keywordflow">return</span> $this;
<a name="l00914"></a>00914     }
<a name="l00915"></a>00915 
<a name="l00921"></a><a class="code" href="class_zend___form.html#ac08220dc73e70766279019a77c5c4150">00921</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ac08220dc73e70766279019a77c5c4150">getLegend</a>()
<a name="l00922"></a>00922     {
<a name="l00923"></a>00923         <span class="keywordflow">return</span> $this-&gt;_legend;
<a name="l00924"></a>00924     }
<a name="l00925"></a>00925 
<a name="l00932"></a><a class="code" href="class_zend___form.html#a2ed6c5b54d1ed017bd03b67b50dd8837">00932</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a2ed6c5b54d1ed017bd03b67b50dd8837">setDescription</a>($value)
<a name="l00933"></a>00933     {
<a name="l00934"></a>00934         $this-&gt;_description = (string) $value;
<a name="l00935"></a>00935         <span class="keywordflow">return</span> $this;
<a name="l00936"></a>00936     }
<a name="l00937"></a>00937 
<a name="l00943"></a><a class="code" href="class_zend___form.html#a2e7bb35c71bf1824456ceb944cb7a845">00943</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a2e7bb35c71bf1824456ceb944cb7a845">getDescription</a>()
<a name="l00944"></a>00944     {
<a name="l00945"></a>00945         <span class="keywordflow">return</span> $this-&gt;_description;
<a name="l00946"></a>00946     }
<a name="l00947"></a>00947 
<a name="l00954"></a><a class="code" href="class_zend___form.html#acf6e7c3297629af2b2b0eb36a6b9cf29">00954</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#acf6e7c3297629af2b2b0eb36a6b9cf29">setOrder</a>($index)
<a name="l00955"></a>00955     {
<a name="l00956"></a>00956         $this-&gt;_formOrder = (int) $index;
<a name="l00957"></a>00957         <span class="keywordflow">return</span> $this;
<a name="l00958"></a>00958     }
<a name="l00959"></a>00959 
<a name="l00965"></a><a class="code" href="class_zend___form.html#a52f1787c1a4941f65bf728ff3289b626">00965</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a52f1787c1a4941f65bf728ff3289b626">getOrder</a>()
<a name="l00966"></a>00966     {
<a name="l00967"></a>00967         <span class="keywordflow">return</span> $this-&gt;_formOrder;
<a name="l00968"></a>00968     }
<a name="l00969"></a>00969 
<a name="l00970"></a>00970     <span class="comment">// Element interaction:</span>
<a name="l00971"></a>00971 
<a name="l00988"></a><a class="code" href="class_zend___form.html#a08c595ad4e33c864edee7dc6b36609ad">00988</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a08c595ad4e33c864edee7dc6b36609ad">addElement</a>($element, $name = null, $options = null)
<a name="l00989"></a>00989     {
<a name="l00990"></a>00990         <span class="keywordflow">if</span> (is_string($element)) {
<a name="l00991"></a>00991             <span class="keywordflow">if</span> (null === $name) {
<a name="l00992"></a>00992                 require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l00993"></a>00993                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;Elements specified by string must have an accompanying name&#39;</span>);
<a name="l00994"></a>00994             }
<a name="l00995"></a>00995 
<a name="l00996"></a>00996             <span class="keywordflow">if</span> (is_array($this-&gt;_elementDecorators)) {
<a name="l00997"></a>00997                 <span class="keywordflow">if</span> (null === $options) {
<a name="l00998"></a>00998                     $options = array(<span class="stringliteral">&#39;decorators&#39;</span> =&gt; $this-&gt;_elementDecorators);
<a name="l00999"></a>00999                 } elseif ($options instanceof <a class="code" href="class_zend___config.html">Zend_Config</a>) {
<a name="l01000"></a>01000                     $options = $options-&gt;toArray();
<a name="l01001"></a>01001                 }
<a name="l01002"></a>01002                 <span class="keywordflow">if</span> (is_array($options)
<a name="l01003"></a>01003                     &amp;&amp; !array_key_exists(<span class="stringliteral">&#39;decorators&#39;</span>, $options)
<a name="l01004"></a>01004                 ) {
<a name="l01005"></a>01005                     $options[<span class="stringliteral">&#39;decorators&#39;</span>] = $this-&gt;_elementDecorators;
<a name="l01006"></a>01006                 }
<a name="l01007"></a>01007             }
<a name="l01008"></a>01008 
<a name="l01009"></a>01009             $this-&gt;_elements[$name] = $this-&gt;<a class="code" href="class_zend___form.html#a8b50d35c2ceff2f9fa16fd19be1fcd2c">createElement</a>($element, $name, $options);
<a name="l01010"></a>01010         } elseif ($element instanceof Zend_Form_Element) {
<a name="l01011"></a>01011             $prefixPaths              = array();
<a name="l01012"></a>01012             $prefixPaths[<span class="stringliteral">&#39;decorator&#39;</span>] = $this-&gt;<a class="code" href="class_zend___form.html#ab4aeb03f8ff437caf852db28fe6e23c9">getPluginLoader</a>(<span class="stringliteral">&#39;decorator&#39;</span>)-&gt;getPaths();
<a name="l01013"></a>01013             <span class="keywordflow">if</span> (!empty($this-&gt;_elementPrefixPaths)) {
<a name="l01014"></a>01014                 $prefixPaths = array_merge($prefixPaths, $this-&gt;_elementPrefixPaths);
<a name="l01015"></a>01015             }
<a name="l01016"></a>01016 
<a name="l01017"></a>01017             <span class="keywordflow">if</span> (null === $name) {
<a name="l01018"></a>01018                 $name = $element-&gt;getName();
<a name="l01019"></a>01019             }
<a name="l01020"></a>01020 
<a name="l01021"></a>01021             $this-&gt;_elements[$name] = $element;
<a name="l01022"></a>01022             $this-&gt;_elements[$name]-&gt;addPrefixPaths($prefixPaths);
<a name="l01023"></a>01023         }
<a name="l01024"></a>01024 
<a name="l01025"></a>01025         $this-&gt;_order[$name] = $this-&gt;_elements[$name]-&gt;getOrder();
<a name="l01026"></a>01026         $this-&gt;_orderUpdated = <span class="keyword">true</span>;
<a name="l01027"></a>01027         $this-&gt;<a class="code" href="class_zend___form.html#a521b19eaefaffcd5ea2d927f92bdd506">_setElementsBelongTo</a>($name);
<a name="l01028"></a>01028 
<a name="l01029"></a>01029         <span class="keywordflow">return</span> $this;
<a name="l01030"></a>01030     }
<a name="l01031"></a>01031 
<a name="l01045"></a><a class="code" href="class_zend___form.html#a8b50d35c2ceff2f9fa16fd19be1fcd2c">01045</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a8b50d35c2ceff2f9fa16fd19be1fcd2c">createElement</a>($type, $name, $options = null)
<a name="l01046"></a>01046     {
<a name="l01047"></a>01047         <span class="keywordflow">if</span> (!is_string($type)) {
<a name="l01048"></a>01048             require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l01049"></a>01049             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;Element type must be a string indicating type&#39;</span>);
<a name="l01050"></a>01050         }
<a name="l01051"></a>01051 
<a name="l01052"></a>01052         <span class="keywordflow">if</span> (!is_string($name)) {
<a name="l01053"></a>01053             require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l01054"></a>01054             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;Element name must be a string&#39;</span>);
<a name="l01055"></a>01055         }
<a name="l01056"></a>01056 
<a name="l01057"></a>01057         $prefixPaths              = array();
<a name="l01058"></a>01058         $prefixPaths[<span class="stringliteral">&#39;decorator&#39;</span>] = $this-&gt;<a class="code" href="class_zend___form.html#ab4aeb03f8ff437caf852db28fe6e23c9">getPluginLoader</a>(<span class="stringliteral">&#39;decorator&#39;</span>)-&gt;getPaths();
<a name="l01059"></a>01059         <span class="keywordflow">if</span> (!empty($this-&gt;_elementPrefixPaths)) {
<a name="l01060"></a>01060             $prefixPaths = array_merge($prefixPaths, $this-&gt;_elementPrefixPaths);
<a name="l01061"></a>01061         }
<a name="l01062"></a>01062 
<a name="l01063"></a>01063         <span class="keywordflow">if</span> ($options instanceof <a class="code" href="class_zend___config.html">Zend_Config</a>) {
<a name="l01064"></a>01064             $options = $options-&gt;toArray();
<a name="l01065"></a>01065         }
<a name="l01066"></a>01066 
<a name="l01067"></a>01067         <span class="keywordflow">if</span> ((null === $options) || !is_array($options)) {
<a name="l01068"></a>01068             $options = array(<span class="stringliteral">&#39;prefixPath&#39;</span> =&gt; $prefixPaths);
<a name="l01069"></a>01069         } elseif (is_array($options)) {
<a name="l01070"></a>01070             <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;prefixPath&#39;</span>, $options)) {
<a name="l01071"></a>01071                 $options[<span class="stringliteral">&#39;prefixPath&#39;</span>] = array_merge($prefixPaths, $options[<span class="stringliteral">&#39;prefixPath&#39;</span>]);
<a name="l01072"></a>01072             } <span class="keywordflow">else</span> {
<a name="l01073"></a>01073                 $options[<span class="stringliteral">&#39;prefixPath&#39;</span>] = $prefixPaths;
<a name="l01074"></a>01074             }
<a name="l01075"></a>01075         }
<a name="l01076"></a>01076 
<a name="l01077"></a>01077         $class = $this-&gt;<a class="code" href="class_zend___form.html#ab4aeb03f8ff437caf852db28fe6e23c9">getPluginLoader</a>(self::ELEMENT)-&gt;load($type);
<a name="l01078"></a>01078         $element = <span class="keyword">new</span> $class($name, $options);
<a name="l01079"></a>01079 
<a name="l01080"></a>01080         <span class="keywordflow">return</span> $element;
<a name="l01081"></a>01081     }
<a name="l01082"></a>01082 
<a name="l01089"></a><a class="code" href="class_zend___form.html#a54d5676870f33cc7859a3b3214752c53">01089</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a54d5676870f33cc7859a3b3214752c53">addElements</a>(array $elements)
<a name="l01090"></a>01090     {
<a name="l01091"></a>01091         <span class="keywordflow">foreach</span> ($elements as $key =&gt; $spec) {
<a name="l01092"></a>01092             $name = null;
<a name="l01093"></a>01093             <span class="keywordflow">if</span> (!is_numeric($key)) {
<a name="l01094"></a>01094                 $name = $key;
<a name="l01095"></a>01095             }
<a name="l01096"></a>01096 
<a name="l01097"></a>01097             <span class="keywordflow">if</span> (is_string($spec) || ($spec instanceof Zend_Form_Element)) {
<a name="l01098"></a>01098                 $this-&gt;<a class="code" href="class_zend___form.html#a08c595ad4e33c864edee7dc6b36609ad">addElement</a>($spec, $name);
<a name="l01099"></a>01099                 <span class="keywordflow">continue</span>;
<a name="l01100"></a>01100             }
<a name="l01101"></a>01101 
<a name="l01102"></a>01102             <span class="keywordflow">if</span> (is_array($spec)) {
<a name="l01103"></a>01103                 $argc = <a class="code" href="class_zend___form.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>($spec);
<a name="l01104"></a>01104                 $options = array();
<a name="l01105"></a>01105                 <span class="keywordflow">if</span> (isset($spec[<span class="stringliteral">&#39;type&#39;</span>])) {
<a name="l01106"></a>01106                     $type = $spec[<span class="stringliteral">&#39;type&#39;</span>];
<a name="l01107"></a>01107                     <span class="keywordflow">if</span> (isset($spec[<span class="stringliteral">&#39;name&#39;</span>])) {
<a name="l01108"></a>01108                         $name = $spec[<span class="stringliteral">&#39;name&#39;</span>];
<a name="l01109"></a>01109                     }
<a name="l01110"></a>01110                     <span class="keywordflow">if</span> (isset($spec[<span class="stringliteral">&#39;options&#39;</span>])) {
<a name="l01111"></a>01111                         $options = $spec[<span class="stringliteral">&#39;options&#39;</span>];
<a name="l01112"></a>01112                     }
<a name="l01113"></a>01113                     $this-&gt;<a class="code" href="class_zend___form.html#a08c595ad4e33c864edee7dc6b36609ad">addElement</a>($type, $name, $options);
<a name="l01114"></a>01114                 } <span class="keywordflow">else</span> {
<a name="l01115"></a>01115                     <span class="keywordflow">switch</span> ($argc) {
<a name="l01116"></a>01116                         <span class="keywordflow">case</span> 0:
<a name="l01117"></a>01117                             <span class="keywordflow">continue</span>;
<a name="l01118"></a>01118                         <span class="keywordflow">case</span> (1 &lt;= $argc):
<a name="l01119"></a>01119                             $type = array_shift($spec);
<a name="l01120"></a>01120                         <span class="keywordflow">case</span> (2 &lt;= $argc):
<a name="l01121"></a>01121                             <span class="keywordflow">if</span> (null === $name) {
<a name="l01122"></a>01122                                 $name = array_shift($spec);
<a name="l01123"></a>01123                             } <span class="keywordflow">else</span> {
<a name="l01124"></a>01124                                 $options = array_shift($spec);
<a name="l01125"></a>01125                             }
<a name="l01126"></a>01126                         <span class="keywordflow">case</span> (3 &lt;= $argc):
<a name="l01127"></a>01127                             <span class="keywordflow">if</span> (empty($options)) {
<a name="l01128"></a>01128                                 $options = array_shift($spec);
<a name="l01129"></a>01129                             }
<a name="l01130"></a>01130                         <span class="keywordflow">default</span>:
<a name="l01131"></a>01131                             $this-&gt;<a class="code" href="class_zend___form.html#a08c595ad4e33c864edee7dc6b36609ad">addElement</a>($type, $name, $options);
<a name="l01132"></a>01132                     }
<a name="l01133"></a>01133                 }
<a name="l01134"></a>01134             }
<a name="l01135"></a>01135         }
<a name="l01136"></a>01136         <span class="keywordflow">return</span> $this;
<a name="l01137"></a>01137     }
<a name="l01138"></a>01138 
<a name="l01145"></a><a class="code" href="class_zend___form.html#aae0e22d6a0050c670c28f24e7ebc5eb0">01145</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#aae0e22d6a0050c670c28f24e7ebc5eb0">setElements</a>(array $elements)
<a name="l01146"></a>01146     {
<a name="l01147"></a>01147         $this-&gt;<a class="code" href="class_zend___form.html#acc0339877f1ea0e23f658a4bd5d3f822">clearElements</a>();
<a name="l01148"></a>01148         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a54d5676870f33cc7859a3b3214752c53">addElements</a>($elements);
<a name="l01149"></a>01149     }
<a name="l01150"></a>01150 
<a name="l01157"></a><a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">01157</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($name)
<a name="l01158"></a>01158     {
<a name="l01159"></a>01159         <span class="keywordflow">if</span> (array_key_exists($name, $this-&gt;_elements)) {
<a name="l01160"></a>01160             <span class="keywordflow">return</span> $this-&gt;_elements[$name];
<a name="l01161"></a>01161         }
<a name="l01162"></a>01162         <span class="keywordflow">return</span> null;
<a name="l01163"></a>01163     }
<a name="l01164"></a>01164 
<a name="l01170"></a><a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">01170</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>()
<a name="l01171"></a>01171     {
<a name="l01172"></a>01172         <span class="keywordflow">return</span> $this-&gt;_elements;
<a name="l01173"></a>01173     }
<a name="l01174"></a>01174 
<a name="l01181"></a><a class="code" href="class_zend___form.html#aa92215392d2ea215d41404df084e6f84">01181</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#aa92215392d2ea215d41404df084e6f84">removeElement</a>($name)
<a name="l01182"></a>01182     {
<a name="l01183"></a>01183         $name = (string) $name;
<a name="l01184"></a>01184         <span class="keywordflow">if</span> (isset($this-&gt;_elements[$name])) {
<a name="l01185"></a>01185             unset($this-&gt;_elements[$name]);
<a name="l01186"></a>01186             <span class="keywordflow">if</span> (array_key_exists($name, $this-&gt;_order)) {
<a name="l01187"></a>01187                 unset($this-&gt;_order[$name]);
<a name="l01188"></a>01188                 $this-&gt;_orderUpdated = <span class="keyword">true</span>;
<a name="l01189"></a>01189             } <span class="keywordflow">else</span> {
<a name="l01190"></a>01190                 <span class="keywordflow">foreach</span> ($this-&gt;_displayGroups as $group) {
<a name="l01191"></a>01191                     <span class="keywordflow">if</span> (null !== $group-&gt;getElement($name)) {
<a name="l01192"></a>01192                         $group-&gt;removeElement($name);
<a name="l01193"></a>01193                     }
<a name="l01194"></a>01194                 }
<a name="l01195"></a>01195             }
<a name="l01196"></a>01196             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01197"></a>01197         }
<a name="l01198"></a>01198 
<a name="l01199"></a>01199         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01200"></a>01200     }
<a name="l01201"></a>01201 
<a name="l01207"></a><a class="code" href="class_zend___form.html#acc0339877f1ea0e23f658a4bd5d3f822">01207</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#acc0339877f1ea0e23f658a4bd5d3f822">clearElements</a>()
<a name="l01208"></a>01208     {
<a name="l01209"></a>01209         <span class="keywordflow">foreach</span> (array_keys($this-&gt;_elements) as $key) {
<a name="l01210"></a>01210             <span class="keywordflow">if</span> (array_key_exists($key, $this-&gt;_order)) {
<a name="l01211"></a>01211                 unset($this-&gt;_order[$key]);
<a name="l01212"></a>01212             }
<a name="l01213"></a>01213         }
<a name="l01214"></a>01214         $this-&gt;_elements     = array();
<a name="l01215"></a>01215         $this-&gt;_orderUpdated = <span class="keyword">true</span>;
<a name="l01216"></a>01216         <span class="keywordflow">return</span> $this;
<a name="l01217"></a>01217     }
<a name="l01218"></a>01218 
<a name="l01227"></a><a class="code" href="class_zend___form.html#ac3461dbb37c3af02c1e8f092e2268f0c">01227</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ac3461dbb37c3af02c1e8f092e2268f0c">setDefaults</a>(array $defaults)
<a name="l01228"></a>01228     {
<a name="l01229"></a>01229         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>() as $name =&gt; $element) {
<a name="l01230"></a>01230             <span class="keywordflow">if</span> (array_key_exists($name, $defaults)) {
<a name="l01231"></a>01231                 $this-&gt;<a class="code" href="class_zend___form.html#a88e983d97da70a0850b4fbc8ef3b3161">setDefault</a>($name, $defaults[$name]);
<a name="l01232"></a>01232             }
<a name="l01233"></a>01233         }
<a name="l01234"></a>01234         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $name =&gt; $form) {
<a name="l01235"></a>01235             <span class="keywordflow">if</span> (array_key_exists($name, $defaults)) {
<a name="l01236"></a>01236                 $form-&gt;setDefaults($defaults[$name]);
<a name="l01237"></a>01237             } <span class="keywordflow">else</span> {
<a name="l01238"></a>01238                 $form-&gt;setDefaults($defaults);
<a name="l01239"></a>01239             }
<a name="l01240"></a>01240         }
<a name="l01241"></a>01241         <span class="keywordflow">return</span> $this;
<a name="l01242"></a>01242     }
<a name="l01243"></a>01243 
<a name="l01251"></a><a class="code" href="class_zend___form.html#a88e983d97da70a0850b4fbc8ef3b3161">01251</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a88e983d97da70a0850b4fbc8ef3b3161">setDefault</a>($name, $value)
<a name="l01252"></a>01252     {
<a name="l01253"></a>01253         $name = (string) $name;
<a name="l01254"></a>01254         <span class="keywordflow">if</span> ($element = $this-&gt;<a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($name)) {
<a name="l01255"></a>01255             $element-&gt;setValue($value);
<a name="l01256"></a>01256         } <span class="keywordflow">else</span> {
<a name="l01257"></a>01257             <span class="keywordflow">if</span> (is_scalar($value)) {
<a name="l01258"></a>01258                 <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $subForm) {
<a name="l01259"></a>01259                     $subForm-&gt;setDefault($name, $value);
<a name="l01260"></a>01260                 }
<a name="l01261"></a>01261             } elseif (is_array($value) &amp;&amp; ($subForm = $this-&gt;<a class="code" href="class_zend___form.html#a8a11191a98f62faf1bb6c0bd3bdab781">getSubForm</a>($name))) {
<a name="l01262"></a>01262                 $subForm-&gt;setDefaults($value);
<a name="l01263"></a>01263             }
<a name="l01264"></a>01264         }
<a name="l01265"></a>01265         <span class="keywordflow">return</span> $this;
<a name="l01266"></a>01266     }
<a name="l01267"></a>01267 
<a name="l01274"></a><a class="code" href="class_zend___form.html#a8c584efa272687554bd9abe5e83fe10c">01274</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a8c584efa272687554bd9abe5e83fe10c">getValue</a>($name)
<a name="l01275"></a>01275     {
<a name="l01276"></a>01276         <span class="keywordflow">if</span> ($element = $this-&gt;<a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($name)) {
<a name="l01277"></a>01277             <span class="keywordflow">return</span> $element-&gt;getValue();
<a name="l01278"></a>01278         }
<a name="l01279"></a>01279 
<a name="l01280"></a>01280         <span class="keywordflow">if</span> ($subForm = $this-&gt;<a class="code" href="class_zend___form.html#a8a11191a98f62faf1bb6c0bd3bdab781">getSubForm</a>($name)) {
<a name="l01281"></a>01281             <span class="keywordflow">return</span> $subForm-&gt;getValues(<span class="keyword">true</span>);
<a name="l01282"></a>01282         }
<a name="l01283"></a>01283 
<a name="l01284"></a>01284         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $subForm) {
<a name="l01285"></a>01285             <span class="keywordflow">if</span> ($name == $subForm-&gt;getElementsBelongTo()) {
<a name="l01286"></a>01286                 <span class="keywordflow">return</span> $subForm-&gt;getValues(<span class="keyword">true</span>);
<a name="l01287"></a>01287             }
<a name="l01288"></a>01288         }
<a name="l01289"></a>01289         <span class="keywordflow">return</span> null;
<a name="l01290"></a>01290     }
<a name="l01291"></a>01291 
<a name="l01298"></a><a class="code" href="class_zend___form.html#a4c348be692e8020312693691519b90a0">01298</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a4c348be692e8020312693691519b90a0">getValues</a>($suppressArrayNotation = <span class="keyword">false</span>)
<a name="l01299"></a>01299     {
<a name="l01300"></a>01300         $values = array();
<a name="l01301"></a>01301         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>() as $key =&gt; $element) {
<a name="l01302"></a>01302             <span class="keywordflow">if</span> (!$element-&gt;getIgnore()) {
<a name="l01303"></a>01303                 $values[$key] = $element-&gt;getValue();
<a name="l01304"></a>01304             }
<a name="l01305"></a>01305         }
<a name="l01306"></a>01306         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $key =&gt; $subForm) {
<a name="l01307"></a>01307             $fValues = $this-&gt;<a class="code" href="class_zend___form.html#af03c261627502a08bb0dae2767abcc69">_attachToArray</a>($subForm-&gt;getValues(<span class="keyword">true</span>), $subForm-&gt;getElementsBelongTo());
<a name="l01308"></a>01308             $values = array_merge($values, $fValues);
<a name="l01309"></a>01309         }
<a name="l01310"></a>01310 
<a name="l01311"></a>01311         <span class="keywordflow">if</span> (!$suppressArrayNotation &amp;&amp; $this-&gt;<a class="code" href="class_zend___form.html#a2f0ab131ec6fa3f6f91721eb72ca10f0">isArray</a>()) {
<a name="l01312"></a>01312             $values = $this-&gt;<a class="code" href="class_zend___form.html#af03c261627502a08bb0dae2767abcc69">_attachToArray</a>($values, $this-&gt;<a class="code" href="class_zend___form.html#a7d0945dd408b8cf28aa0e96e6fb82ac3">getElementsBelongTo</a>());
<a name="l01313"></a>01313         }
<a name="l01314"></a>01314 
<a name="l01315"></a>01315         <span class="keywordflow">return</span> $values;
<a name="l01316"></a>01316     }
<a name="l01317"></a>01317 
<a name="l01324"></a><a class="code" href="class_zend___form.html#a43cdaa14851720ca98522d1db98cdc8d">01324</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a43cdaa14851720ca98522d1db98cdc8d">getUnfilteredValue</a>($name)
<a name="l01325"></a>01325     {
<a name="l01326"></a>01326         <span class="keywordflow">if</span> ($element = $this-&gt;<a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($name)) {
<a name="l01327"></a>01327             <span class="keywordflow">return</span> $element-&gt;getUnfilteredValue();
<a name="l01328"></a>01328         }
<a name="l01329"></a>01329         <span class="keywordflow">return</span> null;
<a name="l01330"></a>01330     }
<a name="l01331"></a>01331 
<a name="l01337"></a><a class="code" href="class_zend___form.html#a5a976af4df32ba81a86ca19fe08451e9">01337</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a5a976af4df32ba81a86ca19fe08451e9">getUnfilteredValues</a>()
<a name="l01338"></a>01338     {
<a name="l01339"></a>01339         $values = array();
<a name="l01340"></a>01340         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>() as $key =&gt; $element) {
<a name="l01341"></a>01341             $values[$key] = $element-&gt;getUnfilteredValue();
<a name="l01342"></a>01342         }
<a name="l01343"></a>01343 
<a name="l01344"></a>01344         <span class="keywordflow">return</span> $values;
<a name="l01345"></a>01345     }
<a name="l01346"></a>01346 
<a name="l01353"></a><a class="code" href="class_zend___form.html#a4c51c9f3e708223e35cb371ec0ac2731">01353</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a4c51c9f3e708223e35cb371ec0ac2731">setElementFilters</a>(array $filters)
<a name="l01354"></a>01354     {
<a name="l01355"></a>01355         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>() as $element) {
<a name="l01356"></a>01356             $element-&gt;setFilters($filters);
<a name="l01357"></a>01357         }
<a name="l01358"></a>01358         <span class="keywordflow">return</span> $this;
<a name="l01359"></a>01359     }
<a name="l01360"></a>01360 
<a name="l01367"></a><a class="code" href="class_zend___form.html#a388a3f8450af214f4e5df499b3a19d72">01367</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a388a3f8450af214f4e5df499b3a19d72">setElementsBelongTo</a>($array)
<a name="l01368"></a>01368     {
<a name="l01369"></a>01369         $origName = $this-&gt;<a class="code" href="class_zend___form.html#a7d0945dd408b8cf28aa0e96e6fb82ac3">getElementsBelongTo</a>();
<a name="l01370"></a>01370         $name = $this-&gt;<a class="code" href="class_zend___form.html#a6a23f1804f1dd89c6f9f604ce2c2fe63">filterName</a>($array, <span class="keyword">true</span>);
<a name="l01371"></a>01371         <span class="keywordflow">if</span> (empty($name)) {
<a name="l01372"></a>01372             $name = null;
<a name="l01373"></a>01373         }
<a name="l01374"></a>01374         $this-&gt;_elementsBelongTo = $name;
<a name="l01375"></a>01375 
<a name="l01376"></a>01376         <span class="keywordflow">if</span> (null === $name) {
<a name="l01377"></a>01377             $this-&gt;<a class="code" href="class_zend___form.html#a4931374d12368919cd2b2b7660ac5118">setIsArray</a>(<span class="keyword">false</span>);
<a name="l01378"></a>01378             <span class="keywordflow">if</span> (null !== $origName) {
<a name="l01379"></a>01379                 $this-&gt;<a class="code" href="class_zend___form.html#a521b19eaefaffcd5ea2d927f92bdd506">_setElementsBelongTo</a>();
<a name="l01380"></a>01380             }
<a name="l01381"></a>01381         } <span class="keywordflow">else</span> {
<a name="l01382"></a>01382             $this-&gt;<a class="code" href="class_zend___form.html#a4931374d12368919cd2b2b7660ac5118">setIsArray</a>(<span class="keyword">true</span>);
<a name="l01383"></a>01383             $this-&gt;<a class="code" href="class_zend___form.html#a521b19eaefaffcd5ea2d927f92bdd506">_setElementsBelongTo</a>();
<a name="l01384"></a>01384         }
<a name="l01385"></a>01385 
<a name="l01386"></a>01386         <span class="keywordflow">return</span> $this;
<a name="l01387"></a>01387     }
<a name="l01388"></a>01388 
<a name="l01395"></a><a class="code" href="class_zend___form.html#a521b19eaefaffcd5ea2d927f92bdd506">01395</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___form.html#a521b19eaefaffcd5ea2d927f92bdd506">_setElementsBelongTo</a>($name = null)
<a name="l01396"></a>01396     {
<a name="l01397"></a>01397         $array = $this-&gt;<a class="code" href="class_zend___form.html#a7d0945dd408b8cf28aa0e96e6fb82ac3">getElementsBelongTo</a>();
<a name="l01398"></a>01398 
<a name="l01399"></a>01399         <span class="keywordflow">if</span> (null === $array) {
<a name="l01400"></a>01400             <span class="keywordflow">return</span>;
<a name="l01401"></a>01401         }
<a name="l01402"></a>01402 
<a name="l01403"></a>01403         <span class="keywordflow">if</span> (null === $name) {
<a name="l01404"></a>01404             <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>() as $element) {
<a name="l01405"></a>01405                 $element-&gt;setBelongsTo($array);
<a name="l01406"></a>01406             }
<a name="l01407"></a>01407         } <span class="keywordflow">else</span> {
<a name="l01408"></a>01408             <span class="keywordflow">if</span> (null !== ($element = $this-&gt;<a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($name))) {
<a name="l01409"></a>01409                 $element-&gt;setBelongsTo($array);
<a name="l01410"></a>01410             }
<a name="l01411"></a>01411         }
<a name="l01412"></a>01412     }
<a name="l01413"></a>01413 
<a name="l01419"></a><a class="code" href="class_zend___form.html#a7d0945dd408b8cf28aa0e96e6fb82ac3">01419</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a7d0945dd408b8cf28aa0e96e6fb82ac3">getElementsBelongTo</a>()
<a name="l01420"></a>01420     {
<a name="l01421"></a>01421         <span class="keywordflow">if</span> ((null === $this-&gt;_elementsBelongTo) &amp;&amp; $this-&gt;<a class="code" href="class_zend___form.html#a2f0ab131ec6fa3f6f91721eb72ca10f0">isArray</a>()) {
<a name="l01422"></a>01422             $name = $this-&gt;<a class="code" href="class_zend___form.html#a3d0963e68bb313b163a73f2803c64600">getName</a>();
<a name="l01423"></a>01423             <span class="keywordflow">if</span> (!empty($name)) {
<a name="l01424"></a>01424                 <span class="keywordflow">return</span> $name;
<a name="l01425"></a>01425             }
<a name="l01426"></a>01426         }
<a name="l01427"></a>01427         <span class="keywordflow">return</span> $this-&gt;_elementsBelongTo;
<a name="l01428"></a>01428     }
<a name="l01429"></a>01429 
<a name="l01436"></a><a class="code" href="class_zend___form.html#a4931374d12368919cd2b2b7660ac5118">01436</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a4931374d12368919cd2b2b7660ac5118">setIsArray</a>($flag)
<a name="l01437"></a>01437     {
<a name="l01438"></a>01438         $this-&gt;_isArray = (bool) $flag;
<a name="l01439"></a>01439         <span class="keywordflow">return</span> $this;
<a name="l01440"></a>01440     }
<a name="l01441"></a>01441 
<a name="l01447"></a><a class="code" href="class_zend___form.html#a2f0ab131ec6fa3f6f91721eb72ca10f0">01447</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a2f0ab131ec6fa3f6f91721eb72ca10f0">isArray</a>()
<a name="l01448"></a>01448     {
<a name="l01449"></a>01449         <span class="keywordflow">return</span> $this-&gt;_isArray;
<a name="l01450"></a>01450     }
<a name="l01451"></a>01451 
<a name="l01452"></a>01452     <span class="comment">// Element groups:</span>
<a name="l01453"></a>01453 
<a name="l01462"></a><a class="code" href="class_zend___form.html#a1bf34f062245adb86756029bce4fe1d9">01462</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a1bf34f062245adb86756029bce4fe1d9">addSubForm</a>(<a class="code" href="class_zend___form.html">Zend_Form</a> $form, $name, $order = null)
<a name="l01463"></a>01463     {
<a name="l01464"></a>01464         $name = (string) $name;
<a name="l01465"></a>01465         <span class="keywordflow">foreach</span> ($this-&gt;_loaders as $type =&gt; $loader) {
<a name="l01466"></a>01466             $loaderPaths = $loader-&gt;getPaths();
<a name="l01467"></a>01467             <span class="keywordflow">foreach</span> ($loaderPaths as $prefix =&gt; $paths) {
<a name="l01468"></a>01468                 <span class="keywordflow">foreach</span> ($paths as $path) {
<a name="l01469"></a>01469                     $form-&gt;<a class="code" href="class_zend___form.html#adfed525c43d039d03910784b04a67ac7">addPrefixPath</a>($prefix, $path, $type);
<a name="l01470"></a>01470                 }
<a name="l01471"></a>01471             }
<a name="l01472"></a>01472         }
<a name="l01473"></a>01473 
<a name="l01474"></a>01474         <span class="keywordflow">if</span> (!empty($this-&gt;_elementPrefixPaths)) {
<a name="l01475"></a>01475             <span class="keywordflow">foreach</span> ($this-&gt;_elementPrefixPaths as $spec) {
<a name="l01476"></a>01476                 list($prefix, $path, $type) = array_values($spec);
<a name="l01477"></a>01477                 $form-&gt;<a class="code" href="class_zend___form.html#a9ac362efa656e378f6b60f56e23953a2">addElementPrefixPath</a>($prefix, $path, $type);
<a name="l01478"></a>01478             }
<a name="l01479"></a>01479         }
<a name="l01480"></a>01480 
<a name="l01481"></a>01481         <span class="keywordflow">if</span> (!empty($this-&gt;_displayGroupPrefixPaths)) {
<a name="l01482"></a>01482             <span class="keywordflow">foreach</span> ($this-&gt;_displayGroupPrefixPaths as $spec) {
<a name="l01483"></a>01483                 list($prefix, $path) = array_values($spec);
<a name="l01484"></a>01484                 $form-&gt;<a class="code" href="class_zend___form.html#a9a993f181269b1b02b0ae889dcb71d25">addDisplayGroupPrefixPath</a>($prefix, $path);
<a name="l01485"></a>01485             }
<a name="l01486"></a>01486         }
<a name="l01487"></a>01487 
<a name="l01488"></a>01488         <span class="keywordflow">if</span> (null !== $order) {
<a name="l01489"></a>01489             $form-&gt;<a class="code" href="class_zend___form.html#acf6e7c3297629af2b2b0eb36a6b9cf29">setOrder</a>($order);
<a name="l01490"></a>01490         }
<a name="l01491"></a>01491 
<a name="l01492"></a>01492         $form-&gt;<a class="code" href="class_zend___form.html#a2fe666694997d047711d7653eca2f132">setName</a>($name);
<a name="l01493"></a>01493         $this-&gt;_subForms[$name] = $form;
<a name="l01494"></a>01494         $this-&gt;_order[$name]    = $order;
<a name="l01495"></a>01495         $this-&gt;_orderUpdated    = <span class="keyword">true</span>;
<a name="l01496"></a>01496         <span class="keywordflow">return</span> $this;
<a name="l01497"></a>01497     }
<a name="l01498"></a>01498 
<a name="l01505"></a><a class="code" href="class_zend___form.html#a2de7a132cd6e6b605c892730ca0aa567">01505</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a2de7a132cd6e6b605c892730ca0aa567">addSubForms</a>(array $subForms)
<a name="l01506"></a>01506     {
<a name="l01507"></a>01507         <span class="keywordflow">foreach</span> ($subForms as $key =&gt; $spec) {
<a name="l01508"></a>01508             $name = null;
<a name="l01509"></a>01509             <span class="keywordflow">if</span> (!is_numeric($key)) {
<a name="l01510"></a>01510                 $name = $key;
<a name="l01511"></a>01511             }
<a name="l01512"></a>01512 
<a name="l01513"></a>01513             <span class="keywordflow">if</span> ($spec instanceof <a class="code" href="class_zend___form.html">Zend_Form</a>) {
<a name="l01514"></a>01514                 $this-&gt;<a class="code" href="class_zend___form.html#a1bf34f062245adb86756029bce4fe1d9">addSubForm</a>($spec, $name);
<a name="l01515"></a>01515                 <span class="keywordflow">continue</span>;
<a name="l01516"></a>01516             }
<a name="l01517"></a>01517 
<a name="l01518"></a>01518             <span class="keywordflow">if</span> (is_array($spec)) {
<a name="l01519"></a>01519                 $argc  = <a class="code" href="class_zend___form.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>($spec);
<a name="l01520"></a>01520                 $order = null;
<a name="l01521"></a>01521                 <span class="keywordflow">switch</span> ($argc) {
<a name="l01522"></a>01522                     <span class="keywordflow">case</span> 0:
<a name="l01523"></a>01523                         <span class="keywordflow">continue</span>;
<a name="l01524"></a>01524                     <span class="keywordflow">case</span> (1 &lt;= $argc):
<a name="l01525"></a>01525                         $subForm = array_shift($spec);
<a name="l01526"></a>01526                     <span class="keywordflow">case</span> (2 &lt;= $argc):
<a name="l01527"></a>01527                         $name  = array_shift($spec);
<a name="l01528"></a>01528                     <span class="keywordflow">case</span> (3 &lt;= $argc):
<a name="l01529"></a>01529                         $order = array_shift($spec);
<a name="l01530"></a>01530                     <span class="keywordflow">default</span>:
<a name="l01531"></a>01531                         $this-&gt;<a class="code" href="class_zend___form.html#a1bf34f062245adb86756029bce4fe1d9">addSubForm</a>($subForm, $name, $order);
<a name="l01532"></a>01532                 }
<a name="l01533"></a>01533             }
<a name="l01534"></a>01534         }
<a name="l01535"></a>01535         <span class="keywordflow">return</span> $this;
<a name="l01536"></a>01536     }
<a name="l01537"></a>01537 
<a name="l01544"></a><a class="code" href="class_zend___form.html#afcb3855fdde596b39dfaef1730f0792f">01544</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#afcb3855fdde596b39dfaef1730f0792f">setSubForms</a>(array $subForms)
<a name="l01545"></a>01545     {
<a name="l01546"></a>01546         $this-&gt;<a class="code" href="class_zend___form.html#ad8512e8e9fd381bc64a51de4a9ed8834">clearSubForms</a>();
<a name="l01547"></a>01547         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a2de7a132cd6e6b605c892730ca0aa567">addSubForms</a>($subForms);
<a name="l01548"></a>01548     }
<a name="l01549"></a>01549 
<a name="l01556"></a><a class="code" href="class_zend___form.html#a8a11191a98f62faf1bb6c0bd3bdab781">01556</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a8a11191a98f62faf1bb6c0bd3bdab781">getSubForm</a>($name)
<a name="l01557"></a>01557     {
<a name="l01558"></a>01558         $name = (string) $name;
<a name="l01559"></a>01559         <span class="keywordflow">if</span> (isset($this-&gt;_subForms[$name])) {
<a name="l01560"></a>01560             <span class="keywordflow">return</span> $this-&gt;_subForms[$name];
<a name="l01561"></a>01561         }
<a name="l01562"></a>01562         <span class="keywordflow">return</span> null;
<a name="l01563"></a>01563     }
<a name="l01564"></a>01564 
<a name="l01570"></a><a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">01570</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>()
<a name="l01571"></a>01571     {
<a name="l01572"></a>01572         <span class="keywordflow">return</span> $this-&gt;_subForms;
<a name="l01573"></a>01573     }
<a name="l01574"></a>01574 
<a name="l01581"></a><a class="code" href="class_zend___form.html#a7f55e5dd1b4e9c732b456b4da397bd32">01581</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a7f55e5dd1b4e9c732b456b4da397bd32">removeSubForm</a>($name)
<a name="l01582"></a>01582     {
<a name="l01583"></a>01583         $name = (string) $name;
<a name="l01584"></a>01584         <span class="keywordflow">if</span> (array_key_exists($name, $this-&gt;_subForms)) {
<a name="l01585"></a>01585             unset($this-&gt;_subForms[$name]);
<a name="l01586"></a>01586             <span class="keywordflow">if</span> (array_key_exists($name, $this-&gt;_order)) {
<a name="l01587"></a>01587                 unset($this-&gt;_order[$name]);
<a name="l01588"></a>01588                 $this-&gt;_orderUpdated = <span class="keyword">true</span>;
<a name="l01589"></a>01589             }
<a name="l01590"></a>01590             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01591"></a>01591         }
<a name="l01592"></a>01592 
<a name="l01593"></a>01593         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01594"></a>01594     }
<a name="l01595"></a>01595 
<a name="l01601"></a><a class="code" href="class_zend___form.html#ad8512e8e9fd381bc64a51de4a9ed8834">01601</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ad8512e8e9fd381bc64a51de4a9ed8834">clearSubForms</a>()
<a name="l01602"></a>01602     {
<a name="l01603"></a>01603         <span class="keywordflow">foreach</span> (array_keys($this-&gt;_subForms) as $key) {
<a name="l01604"></a>01604             <span class="keywordflow">if</span> (array_key_exists($key, $this-&gt;_order)) {
<a name="l01605"></a>01605                 unset($this-&gt;_order[$key]);
<a name="l01606"></a>01606             }
<a name="l01607"></a>01607         }
<a name="l01608"></a>01608         $this-&gt;_subForms     = array();
<a name="l01609"></a>01609         $this-&gt;_orderUpdated = <span class="keyword">true</span>;
<a name="l01610"></a>01610         <span class="keywordflow">return</span> $this;
<a name="l01611"></a>01611     }
<a name="l01612"></a>01612 
<a name="l01613"></a>01613 
<a name="l01614"></a>01614     <span class="comment">// Display groups:</span>
<a name="l01615"></a>01615 
<a name="l01622"></a><a class="code" href="class_zend___form.html#aeca5fbb4449426cd8fa65d58a6774821">01622</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#aeca5fbb4449426cd8fa65d58a6774821">setDefaultDisplayGroupClass</a>($class)
<a name="l01623"></a>01623     {
<a name="l01624"></a>01624         $this-&gt;_defaultDisplayGroupClass = (string) $class;
<a name="l01625"></a>01625         <span class="keywordflow">return</span> $this;
<a name="l01626"></a>01626     }
<a name="l01627"></a>01627 
<a name="l01633"></a><a class="code" href="class_zend___form.html#a4dab04eb477322089ab7b3df260f6826">01633</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a4dab04eb477322089ab7b3df260f6826">getDefaultDisplayGroupClass</a>()
<a name="l01634"></a>01634     {
<a name="l01635"></a>01635         <span class="keywordflow">return</span> $this-&gt;_defaultDisplayGroupClass;
<a name="l01636"></a>01636     }
<a name="l01637"></a>01637 
<a name="l01651"></a><a class="code" href="class_zend___form.html#af0b3cca15df8d75b22abe7aa8394980b">01651</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#af0b3cca15df8d75b22abe7aa8394980b">addDisplayGroup</a>(array $elements, $name, $options = null)
<a name="l01652"></a>01652     {
<a name="l01653"></a>01653         $group = array();
<a name="l01654"></a>01654         <span class="keywordflow">foreach</span> ($elements as $element) {
<a name="l01655"></a>01655             <span class="keywordflow">if</span> (isset($this-&gt;_elements[$element])) {
<a name="l01656"></a>01656                 $add = $this-&gt;<a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($element);
<a name="l01657"></a>01657                 <span class="keywordflow">if</span> (null !== $add) {
<a name="l01658"></a>01658                     unset($this-&gt;_order[$element]);
<a name="l01659"></a>01659                     $group[] = $add;
<a name="l01660"></a>01660                 }
<a name="l01661"></a>01661             }
<a name="l01662"></a>01662         }
<a name="l01663"></a>01663         <span class="keywordflow">if</span> (empty($group)) {
<a name="l01664"></a>01664             require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l01665"></a>01665             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;No valid elements specified for display group&#39;</span>);
<a name="l01666"></a>01666         }
<a name="l01667"></a>01667 
<a name="l01668"></a>01668         $name = (string) $name;
<a name="l01669"></a>01669 
<a name="l01670"></a>01670         <span class="keywordflow">if</span> (is_array($options)) {
<a name="l01671"></a>01671             $options[<span class="stringliteral">&#39;elements&#39;</span>] = $group;
<a name="l01672"></a>01672         } elseif ($options instanceof <a class="code" href="class_zend___config.html">Zend_Config</a>) {
<a name="l01673"></a>01673             $options = $options-&gt;toArray();
<a name="l01674"></a>01674             $options[<span class="stringliteral">&#39;elements&#39;</span>] = $group;
<a name="l01675"></a>01675         } <span class="keywordflow">else</span> {
<a name="l01676"></a>01676             $options = array(<span class="stringliteral">&#39;elements&#39;</span> =&gt; $group);
<a name="l01677"></a>01677         }
<a name="l01678"></a>01678 
<a name="l01679"></a>01679         <span class="keywordflow">if</span> (isset($options[<span class="stringliteral">&#39;displayGroupClass&#39;</span>])) {
<a name="l01680"></a>01680             $class = $options[<span class="stringliteral">&#39;displayGroupClass&#39;</span>];
<a name="l01681"></a>01681             unset($options[<span class="stringliteral">&#39;displayGroupClass&#39;</span>]);
<a name="l01682"></a>01682         } <span class="keywordflow">else</span> {
<a name="l01683"></a>01683             $class = $this-&gt;<a class="code" href="class_zend___form.html#a4dab04eb477322089ab7b3df260f6826">getDefaultDisplayGroupClass</a>();
<a name="l01684"></a>01684         }
<a name="l01685"></a>01685 
<a name="l01686"></a>01686         <span class="keywordflow">if</span> (!class_exists($class)) {
<a name="l01687"></a>01687             require_once <span class="stringliteral">&#39;Zend/Loader.php&#39;</span>;
<a name="l01688"></a>01688             <a class="code" href="class_zend___loader.html#a3d4b9877e0dcc1904b8e41d86be11d93">Zend_Loader::loadClass</a>($class);
<a name="l01689"></a>01689         }
<a name="l01690"></a>01690         $this-&gt;_displayGroups[$name] = <span class="keyword">new</span> $class(
<a name="l01691"></a>01691             $name,
<a name="l01692"></a>01692             $this-&gt;<a class="code" href="class_zend___form.html#ab4aeb03f8ff437caf852db28fe6e23c9">getPluginLoader</a>(self::DECORATOR),
<a name="l01693"></a>01693             $options
<a name="l01694"></a>01694         );
<a name="l01695"></a>01695 
<a name="l01696"></a>01696         <span class="keywordflow">if</span> (!empty($this-&gt;_displayGroupPrefixPaths)) {
<a name="l01697"></a>01697             $this-&gt;_displayGroups[$name]-&gt;addPrefixPaths($this-&gt;_displayGroupPrefixPaths);
<a name="l01698"></a>01698         }
<a name="l01699"></a>01699 
<a name="l01700"></a>01700         $this-&gt;_order[$name] = $this-&gt;_displayGroups[$name]-&gt;getOrder();
<a name="l01701"></a>01701         $this-&gt;_orderUpdated = <span class="keyword">true</span>;
<a name="l01702"></a>01702         <span class="keywordflow">return</span> $this;
<a name="l01703"></a>01703     }
<a name="l01704"></a>01704 
<a name="l01712"></a><a class="code" href="class_zend___form.html#a27b4102dc538bc4656c141803fde45b1">01712</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___form.html#a27b4102dc538bc4656c141803fde45b1">_addDisplayGroupObject</a>(Zend_Form_DisplayGroup $group, $name = null)
<a name="l01713"></a>01713     {
<a name="l01714"></a>01714         <span class="keywordflow">if</span> (null === $name) {
<a name="l01715"></a>01715             $name = $group-&gt;getName();
<a name="l01716"></a>01716             <span class="keywordflow">if</span> (empty($name)) {
<a name="l01717"></a>01717                 require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l01718"></a>01718                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;Invalid display group added; requires name&#39;</span>);
<a name="l01719"></a>01719             }
<a name="l01720"></a>01720         }
<a name="l01721"></a>01721 
<a name="l01722"></a>01722         $this-&gt;_displayGroups[$name] = $group;
<a name="l01723"></a>01723 
<a name="l01724"></a>01724         <span class="keywordflow">if</span> (!empty($this-&gt;_displayGroupPrefixPaths)) {
<a name="l01725"></a>01725             $this-&gt;_displayGroups[$name]-&gt;addPrefixPaths($this-&gt;_displayGroupPrefixPaths);
<a name="l01726"></a>01726         }
<a name="l01727"></a>01727 
<a name="l01728"></a>01728         $this-&gt;_order[$name] = $this-&gt;_displayGroups[$name]-&gt;getOrder();
<a name="l01729"></a>01729         $this-&gt;_orderUpdated = <span class="keyword">true</span>;
<a name="l01730"></a>01730         <span class="keywordflow">return</span> $this;
<a name="l01731"></a>01731     }
<a name="l01732"></a>01732 
<a name="l01739"></a><a class="code" href="class_zend___form.html#a4ddafbc881cb79a9ff1a92b7ee43c56e">01739</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a4ddafbc881cb79a9ff1a92b7ee43c56e">addDisplayGroups</a>(array $groups)
<a name="l01740"></a>01740     {
<a name="l01741"></a>01741         <span class="keywordflow">foreach</span> ($groups as $key =&gt; $spec) {
<a name="l01742"></a>01742             $name = null;
<a name="l01743"></a>01743             <span class="keywordflow">if</span> (!is_numeric($key)) {
<a name="l01744"></a>01744                 $name = $key;
<a name="l01745"></a>01745             }
<a name="l01746"></a>01746 
<a name="l01747"></a>01747             <span class="keywordflow">if</span> ($spec instanceof Zend_Form_DisplayGroup) {
<a name="l01748"></a>01748                 $this-&gt;<a class="code" href="class_zend___form.html#a27b4102dc538bc4656c141803fde45b1">_addDisplayGroupObject</a>($spec);
<a name="l01749"></a>01749             }
<a name="l01750"></a>01750 
<a name="l01751"></a>01751             <span class="keywordflow">if</span> (!is_array($spec) || empty($spec)) {
<a name="l01752"></a>01752                 <span class="keywordflow">continue</span>;
<a name="l01753"></a>01753             }
<a name="l01754"></a>01754 
<a name="l01755"></a>01755             $argc    = <a class="code" href="class_zend___form.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>($spec);
<a name="l01756"></a>01756             $options = array();
<a name="l01757"></a>01757 
<a name="l01758"></a>01758             <span class="keywordflow">if</span> (isset($spec[<span class="stringliteral">&#39;elements&#39;</span>])) {
<a name="l01759"></a>01759                 $elements = $spec[<span class="stringliteral">&#39;elements&#39;</span>];
<a name="l01760"></a>01760                 <span class="keywordflow">if</span> (isset($spec[<span class="stringliteral">&#39;name&#39;</span>])) {
<a name="l01761"></a>01761                     $name = $spec[<span class="stringliteral">&#39;name&#39;</span>];
<a name="l01762"></a>01762                 }
<a name="l01763"></a>01763                 <span class="keywordflow">if</span> (isset($spec[<span class="stringliteral">&#39;options&#39;</span>])) {
<a name="l01764"></a>01764                     $options = $spec[<span class="stringliteral">&#39;options&#39;</span>];
<a name="l01765"></a>01765                 }
<a name="l01766"></a>01766                 $this-&gt;<a class="code" href="class_zend___form.html#af0b3cca15df8d75b22abe7aa8394980b">addDisplayGroup</a>($elements, $name, $options);
<a name="l01767"></a>01767             } <span class="keywordflow">else</span> {
<a name="l01768"></a>01768                 <span class="keywordflow">switch</span> ($argc) {
<a name="l01769"></a>01769                     <span class="keywordflow">case</span> (1 &lt;= $argc):
<a name="l01770"></a>01770                         $elements = array_shift($spec);
<a name="l01771"></a>01771                         <span class="keywordflow">if</span> (!is_array($elements) &amp;&amp; (null !== $name)) {
<a name="l01772"></a>01772                             $elements = array_merge((array) $elements, $spec);
<a name="l01773"></a>01773                             $this-&gt;<a class="code" href="class_zend___form.html#af0b3cca15df8d75b22abe7aa8394980b">addDisplayGroup</a>($elements, $name);
<a name="l01774"></a>01774                             <span class="keywordflow">break</span>;
<a name="l01775"></a>01775                         }
<a name="l01776"></a>01776                     <span class="keywordflow">case</span> (2 &lt;= $argc):
<a name="l01777"></a>01777                         <span class="keywordflow">if</span> (null !== $name) {
<a name="l01778"></a>01778                             $options = array_shift($spec);
<a name="l01779"></a>01779                             $this-&gt;<a class="code" href="class_zend___form.html#af0b3cca15df8d75b22abe7aa8394980b">addDisplayGroup</a>($elements, $name, $options);
<a name="l01780"></a>01780                             <span class="keywordflow">break</span>;
<a name="l01781"></a>01781                         }
<a name="l01782"></a>01782                         $name = array_shift($spec);
<a name="l01783"></a>01783                     <span class="keywordflow">case</span> (3 &lt;= $argc):
<a name="l01784"></a>01784                         $options = array_shift($spec);
<a name="l01785"></a>01785                     <span class="keywordflow">default</span>:
<a name="l01786"></a>01786                         $this-&gt;<a class="code" href="class_zend___form.html#af0b3cca15df8d75b22abe7aa8394980b">addDisplayGroup</a>($elements, $name, $options);
<a name="l01787"></a>01787                 }
<a name="l01788"></a>01788             }
<a name="l01789"></a>01789         }
<a name="l01790"></a>01790         <span class="keywordflow">return</span> $this;
<a name="l01791"></a>01791     }
<a name="l01792"></a>01792 
<a name="l01799"></a><a class="code" href="class_zend___form.html#a63ec112f7c3c8290401ca3de21d7d0b4">01799</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a63ec112f7c3c8290401ca3de21d7d0b4">setDisplayGroups</a>(array $groups)
<a name="l01800"></a>01800     {
<a name="l01801"></a>01801         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a6793beed2b67cf22c68286eccebc1eb0">clearDisplayGroups</a>()
<a name="l01802"></a>01802                     -&gt;addDisplayGroups($groups);
<a name="l01803"></a>01803     }
<a name="l01804"></a>01804 
<a name="l01811"></a><a class="code" href="class_zend___form.html#a5246c9416f3a6bb94f6025d44df39571">01811</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a5246c9416f3a6bb94f6025d44df39571">getDisplayGroup</a>($name)
<a name="l01812"></a>01812     {
<a name="l01813"></a>01813         $name = (string) $name;
<a name="l01814"></a>01814         <span class="keywordflow">if</span> (isset($this-&gt;_displayGroups[$name])) {
<a name="l01815"></a>01815             <span class="keywordflow">return</span> $this-&gt;_displayGroups[$name];
<a name="l01816"></a>01816         }
<a name="l01817"></a>01817 
<a name="l01818"></a>01818         <span class="keywordflow">return</span> null;
<a name="l01819"></a>01819     }
<a name="l01820"></a>01820 
<a name="l01826"></a><a class="code" href="class_zend___form.html#a158ed78e51ed1ea113b085c79decb0ba">01826</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a158ed78e51ed1ea113b085c79decb0ba">getDisplayGroups</a>()
<a name="l01827"></a>01827     {
<a name="l01828"></a>01828         <span class="keywordflow">return</span> $this-&gt;_displayGroups;
<a name="l01829"></a>01829     }
<a name="l01830"></a>01830 
<a name="l01837"></a><a class="code" href="class_zend___form.html#aba589d74a04fe12e12afa557cca7beef">01837</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#aba589d74a04fe12e12afa557cca7beef">removeDisplayGroup</a>($name)
<a name="l01838"></a>01838     {
<a name="l01839"></a>01839         $name = (string) $name;
<a name="l01840"></a>01840         <span class="keywordflow">if</span> (array_key_exists($name, $this-&gt;_displayGroups)) {
<a name="l01841"></a>01841             <span class="keywordflow">foreach</span> ($this-&gt;_displayGroups[$name] as $key =&gt; $element) {
<a name="l01842"></a>01842                 <span class="keywordflow">if</span> (array_key_exists($key, $this-&gt;_elements)) {
<a name="l01843"></a>01843                     $this-&gt;_order[$key]  = $element-&gt;getOrder();
<a name="l01844"></a>01844                     $this-&gt;_orderUpdated = <span class="keyword">true</span>;
<a name="l01845"></a>01845                 }
<a name="l01846"></a>01846             }
<a name="l01847"></a>01847             unset($this-&gt;_displayGroups[$name]);
<a name="l01848"></a>01848 
<a name="l01849"></a>01849             <span class="keywordflow">if</span> (array_key_exists($name, $this-&gt;_order)) {
<a name="l01850"></a>01850                 unset($this-&gt;_order[$name]);
<a name="l01851"></a>01851                 $this-&gt;_orderUpdated = <span class="keyword">true</span>;
<a name="l01852"></a>01852             }
<a name="l01853"></a>01853             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01854"></a>01854         }
<a name="l01855"></a>01855 
<a name="l01856"></a>01856         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01857"></a>01857     }
<a name="l01858"></a>01858 
<a name="l01864"></a><a class="code" href="class_zend___form.html#a6793beed2b67cf22c68286eccebc1eb0">01864</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a6793beed2b67cf22c68286eccebc1eb0">clearDisplayGroups</a>()
<a name="l01865"></a>01865     {
<a name="l01866"></a>01866         <span class="keywordflow">foreach</span> ($this-&gt;_displayGroups as $key =&gt; $group) {
<a name="l01867"></a>01867             <span class="keywordflow">if</span> (array_key_exists($key, $this-&gt;_order)) {
<a name="l01868"></a>01868                 unset($this-&gt;_order[$key]);
<a name="l01869"></a>01869             }
<a name="l01870"></a>01870             <span class="keywordflow">foreach</span> ($group as $name =&gt; $element) {
<a name="l01871"></a>01871                 <span class="keywordflow">if</span> (isset($this-&gt;_elements[$name])) {
<a name="l01872"></a>01872                     $this-&gt;_order[$name] = $element-&gt;getOrder();
<a name="l01873"></a>01873                 }
<a name="l01874"></a>01874                 $this-&gt;_order[$name] = $element-&gt;getOrder();
<a name="l01875"></a>01875             }
<a name="l01876"></a>01876         }
<a name="l01877"></a>01877         $this-&gt;_displayGroups = array();
<a name="l01878"></a>01878         $this-&gt;_orderUpdated  = <span class="keyword">true</span>;
<a name="l01879"></a>01879         <span class="keywordflow">return</span> $this;
<a name="l01880"></a>01880     }
<a name="l01881"></a>01881 
<a name="l01882"></a>01882 
<a name="l01883"></a>01883     <span class="comment">// Processing</span>
<a name="l01884"></a>01884 
<a name="l01893"></a><a class="code" href="class_zend___form.html#a8a5a7e2a8a27e02e0e68243d88ee339c">01893</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a8a5a7e2a8a27e02e0e68243d88ee339c">populate</a>(array $values)
<a name="l01894"></a>01894     {
<a name="l01895"></a>01895         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#ac3461dbb37c3af02c1e8f092e2268f0c">setDefaults</a>($values);
<a name="l01896"></a>01896     }
<a name="l01897"></a>01897 
<a name="l01906"></a><a class="code" href="class_zend___form.html#a9a020a3cce78e3e6c22c5475ba51a10a">01906</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___form.html#a9a020a3cce78e3e6c22c5475ba51a10a">_getArrayName</a>($value)
<a name="l01907"></a>01907     {
<a name="l01908"></a>01908         <span class="keywordflow">if</span> (empty($value) || !is_string($value)) {
<a name="l01909"></a>01909             <span class="keywordflow">return</span> $value;
<a name="l01910"></a>01910         }
<a name="l01911"></a>01911 
<a name="l01912"></a>01912         <span class="keywordflow">if</span> (!strstr($value, <span class="charliteral">&#39;[&#39;</span>)) {
<a name="l01913"></a>01913             <span class="keywordflow">return</span> $value;
<a name="l01914"></a>01914         }
<a name="l01915"></a>01915 
<a name="l01916"></a>01916         $endPos = strlen($value) - 1;
<a name="l01917"></a>01917         <span class="keywordflow">if</span> (<span class="charliteral">&#39;]&#39;</span> != $value[$endPos]) {
<a name="l01918"></a>01918             <span class="keywordflow">return</span> $value;
<a name="l01919"></a>01919         }
<a name="l01920"></a>01920 
<a name="l01921"></a>01921         $start = strrpos($value, <span class="charliteral">&#39;[&#39;</span>) + 1;
<a name="l01922"></a>01922         $name = substr($value, $start, $endPos - $start);
<a name="l01923"></a>01923         <span class="keywordflow">return</span> $name;
<a name="l01924"></a>01924     }
<a name="l01925"></a>01925 
<a name="l01936"></a><a class="code" href="class_zend___form.html#a3fdfd838922338c0fc1df4e45533b1d2">01936</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___form.html#a3fdfd838922338c0fc1df4e45533b1d2">_dissolveArrayValue</a>($value, $arrayPath)
<a name="l01937"></a>01937     {
<a name="l01938"></a>01938         <span class="comment">// As long as we have more levels</span>
<a name="l01939"></a>01939         <span class="keywordflow">while</span> ($arrayPos = strpos($arrayPath, <span class="charliteral">&#39;[&#39;</span>)) {
<a name="l01940"></a>01940             <span class="comment">// Get the next key in the path</span>
<a name="l01941"></a>01941             $arrayKey = trim(substr($arrayPath, 0, $arrayPos), <span class="charliteral">&#39;]&#39;</span>);
<a name="l01942"></a>01942 
<a name="l01943"></a>01943             <span class="comment">// Set the potentially final value or the next search point in the array</span>
<a name="l01944"></a>01944             <span class="keywordflow">if</span> (isset($value[$arrayKey])) {
<a name="l01945"></a>01945                 $value = $value[$arrayKey];
<a name="l01946"></a>01946             }
<a name="l01947"></a>01947 
<a name="l01948"></a>01948             <span class="comment">// Set the next search point in the path</span>
<a name="l01949"></a>01949             $arrayPath = trim(substr($arrayPath, $arrayPos + 1), <span class="charliteral">&#39;]&#39;</span>);
<a name="l01950"></a>01950         }
<a name="l01951"></a>01951 
<a name="l01952"></a>01952         <span class="keywordflow">if</span> (isset($value[$arrayPath])) {
<a name="l01953"></a>01953             $value = $value[$arrayPath];
<a name="l01954"></a>01954         }
<a name="l01955"></a>01955 
<a name="l01956"></a>01956         <span class="keywordflow">return</span> $value;
<a name="l01957"></a>01957     }
<a name="l01958"></a>01958 
<a name="l01966"></a><a class="code" href="class_zend___form.html#af03c261627502a08bb0dae2767abcc69">01966</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___form.html#af03c261627502a08bb0dae2767abcc69">_attachToArray</a>($value, $arrayPath)
<a name="l01967"></a>01967     {
<a name="l01968"></a>01968         <span class="comment">// As long as we have more levels</span>
<a name="l01969"></a>01969         <span class="keywordflow">while</span> ($arrayPos = strrpos($arrayPath, <span class="charliteral">&#39;[&#39;</span>)) {
<a name="l01970"></a>01970             <span class="comment">// Get the next key in the path</span>
<a name="l01971"></a>01971             $arrayKey = trim(substr($arrayPath, $arrayPos + 1), <span class="charliteral">&#39;]&#39;</span>);
<a name="l01972"></a>01972 
<a name="l01973"></a>01973             <span class="comment">// Attach</span>
<a name="l01974"></a>01974             $value = array($arrayKey =&gt; $value);
<a name="l01975"></a>01975 
<a name="l01976"></a>01976             <span class="comment">// Set the next search point in the path</span>
<a name="l01977"></a>01977             $arrayPath = trim(substr($arrayPath, 0, $arrayPos), <span class="charliteral">&#39;]&#39;</span>);
<a name="l01978"></a>01978         }
<a name="l01979"></a>01979 
<a name="l01980"></a>01980         $value = array($arrayPath =&gt; $value);
<a name="l01981"></a>01981 
<a name="l01982"></a>01982         <span class="keywordflow">return</span> $value;
<a name="l01983"></a>01983     }
<a name="l01984"></a>01984 
<a name="l01991"></a><a class="code" href="class_zend___form.html#a68db183fe28ef3dc17b3bc4bcd456e02">01991</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a68db183fe28ef3dc17b3bc4bcd456e02">isValid</a>($data)
<a name="l01992"></a>01992     {
<a name="l01993"></a>01993         <span class="keywordflow">if</span> (!is_array($data)) {
<a name="l01994"></a>01994             require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l01995"></a>01995             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(__CLASS__ . <span class="stringliteral">&#39;::&#39;</span> . __METHOD__ . <span class="stringliteral">&#39; expects an array&#39;</span>);
<a name="l01996"></a>01996         }
<a name="l01997"></a>01997         $translator = $this-&gt;<a class="code" href="class_zend___form.html#a4b5bf5bf92166dc1c551fe8cfabfb5ae">getTranslator</a>();
<a name="l01998"></a>01998         $valid      = <span class="keyword">true</span>;
<a name="l01999"></a>01999 
<a name="l02000"></a>02000         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___form.html#a2f0ab131ec6fa3f6f91721eb72ca10f0">isArray</a>()) {
<a name="l02001"></a>02001             $data = $this-&gt;<a class="code" href="class_zend___form.html#a3fdfd838922338c0fc1df4e45533b1d2">_dissolveArrayValue</a>($data, $this-&gt;<a class="code" href="class_zend___form.html#a7d0945dd408b8cf28aa0e96e6fb82ac3">getElementsBelongTo</a>());
<a name="l02002"></a>02002         }
<a name="l02003"></a>02003 
<a name="l02004"></a>02004         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>() as $key =&gt; $element) {
<a name="l02005"></a>02005             $element-&gt;setTranslator($translator);
<a name="l02006"></a>02006             <span class="keywordflow">if</span> (!isset($data[$key])) {
<a name="l02007"></a>02007                 $valid = $element-&gt;isValid(null, $data) &amp;&amp; $valid;
<a name="l02008"></a>02008             } <span class="keywordflow">else</span> {
<a name="l02009"></a>02009                 $valid = $element-&gt;isValid($data[$key], $data) &amp;&amp; $valid;
<a name="l02010"></a>02010             }
<a name="l02011"></a>02011         }
<a name="l02012"></a>02012         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $key =&gt; $form) {
<a name="l02013"></a>02013             $form-&gt;setTranslator($translator);
<a name="l02014"></a>02014             <span class="keywordflow">if</span> (isset($data[$key])) {
<a name="l02015"></a>02015                 $valid = $form-&gt;isValid($data[$key]) &amp;&amp; $valid;
<a name="l02016"></a>02016             } <span class="keywordflow">else</span> {
<a name="l02017"></a>02017                 $valid = $form-&gt;isValid($data) &amp;&amp; $valid;
<a name="l02018"></a>02018             }
<a name="l02019"></a>02019         }
<a name="l02020"></a>02020 
<a name="l02021"></a>02021         $this-&gt;_errorsExist = !$valid;
<a name="l02022"></a>02022 
<a name="l02023"></a>02023         <span class="comment">// If manually flagged as an error, return invalid status</span>
<a name="l02024"></a>02024         <span class="keywordflow">if</span> ($this-&gt;_errorsForced) {
<a name="l02025"></a>02025             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02026"></a>02026         }
<a name="l02027"></a>02027 
<a name="l02028"></a>02028         <span class="keywordflow">return</span> $valid;
<a name="l02029"></a>02029     }
<a name="l02030"></a>02030 
<a name="l02039"></a><a class="code" href="class_zend___form.html#a24305de3a12907853cf7616621f3d02a">02039</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a24305de3a12907853cf7616621f3d02a">isValidPartial</a>(array $data)
<a name="l02040"></a>02040     {
<a name="l02041"></a>02041         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___form.html#a2f0ab131ec6fa3f6f91721eb72ca10f0">isArray</a>()) {
<a name="l02042"></a>02042             $data = $this-&gt;<a class="code" href="class_zend___form.html#a3fdfd838922338c0fc1df4e45533b1d2">_dissolveArrayValue</a>($data, $this-&gt;<a class="code" href="class_zend___form.html#a7d0945dd408b8cf28aa0e96e6fb82ac3">getElementsBelongTo</a>());
<a name="l02043"></a>02043         }
<a name="l02044"></a>02044 
<a name="l02045"></a>02045         $translator        = $this-&gt;<a class="code" href="class_zend___form.html#a4b5bf5bf92166dc1c551fe8cfabfb5ae">getTranslator</a>();
<a name="l02046"></a>02046         $valid             = <span class="keyword">true</span>;
<a name="l02047"></a>02047         $validatedSubForms = array();
<a name="l02048"></a>02048 
<a name="l02049"></a>02049         <span class="keywordflow">foreach</span> ($data as $key =&gt; $value) {
<a name="l02050"></a>02050             <span class="keywordflow">if</span> (null !== ($element = $this-&gt;<a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($key))) {
<a name="l02051"></a>02051                 <span class="keywordflow">if</span> (null !== $translator) {
<a name="l02052"></a>02052                     $element-&gt;setTranslator($translator);
<a name="l02053"></a>02053                 }
<a name="l02054"></a>02054                 $valid = $element-&gt;isValid($value, $data) &amp;&amp; $valid;
<a name="l02055"></a>02055             } elseif (null !== ($subForm = $this-&gt;<a class="code" href="class_zend___form.html#a8a11191a98f62faf1bb6c0bd3bdab781">getSubForm</a>($key))) {
<a name="l02056"></a>02056                 <span class="keywordflow">if</span> (null !== $translator) {
<a name="l02057"></a>02057                     $subForm-&gt;setTranslator($translator);
<a name="l02058"></a>02058                 }
<a name="l02059"></a>02059                 $valid = $subForm-&gt;isValidPartial($data[$key]) &amp;&amp; $valid;
<a name="l02060"></a>02060                 $validatedSubForms[] = $key;
<a name="l02061"></a>02061             }
<a name="l02062"></a>02062         }
<a name="l02063"></a>02063         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $key =&gt; $subForm) {
<a name="l02064"></a>02064             <span class="keywordflow">if</span> (!in_array($key, $validatedSubForms)) {
<a name="l02065"></a>02065                 <span class="keywordflow">if</span> (null !== $translator) {
<a name="l02066"></a>02066                     $subForm-&gt;setTranslator($translator);
<a name="l02067"></a>02067                 }
<a name="l02068"></a>02068 
<a name="l02069"></a>02069                 $valid = $subForm-&gt;isValidPartial($data) &amp;&amp; $valid;
<a name="l02070"></a>02070             }
<a name="l02071"></a>02071         }
<a name="l02072"></a>02072 
<a name="l02073"></a>02073         $this-&gt;_errorsExist = !$valid;
<a name="l02074"></a>02074         <span class="keywordflow">return</span> $valid;
<a name="l02075"></a>02075     }
<a name="l02076"></a>02076 
<a name="l02087"></a><a class="code" href="class_zend___form.html#abe7aca25bdad13d655c1253d0da766be">02087</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#abe7aca25bdad13d655c1253d0da766be">processAjax</a>(array $data)
<a name="l02088"></a>02088     {
<a name="l02089"></a>02089         require_once <span class="stringliteral">&#39;Zend/Json.php&#39;</span>;
<a name="l02090"></a>02090         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___form.html#a24305de3a12907853cf7616621f3d02a">isValidPartial</a>($data)) {
<a name="l02091"></a>02091             <span class="keywordflow">return</span> <a class="code" href="class_zend___json.html#a08a9eac5e7042af1e08b87614e41ec25">Zend_Json::encode</a>(<span class="keyword">true</span>);
<a name="l02092"></a>02092         }
<a name="l02093"></a>02093         $messages = $this-&gt;<a class="code" href="interface_zend___validate___interface.html#a7347b0b89cca1d7604e93f5b5e896fc4">getMessages</a>();
<a name="l02094"></a>02094         <span class="keywordflow">return</span> <a class="code" href="class_zend___json.html#a08a9eac5e7042af1e08b87614e41ec25">Zend_Json::encode</a>($messages);
<a name="l02095"></a>02095     }
<a name="l02096"></a>02096 
<a name="l02103"></a><a class="code" href="class_zend___form.html#a689bb6d76c48e093d3a7430948ce30b5">02103</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a689bb6d76c48e093d3a7430948ce30b5">addErrorMessage</a>($message)
<a name="l02104"></a>02104     {
<a name="l02105"></a>02105         $this-&gt;_errorMessages[] = (string) $message;
<a name="l02106"></a>02106         <span class="keywordflow">return</span> $this;
<a name="l02107"></a>02107     }
<a name="l02108"></a>02108 
<a name="l02115"></a><a class="code" href="class_zend___form.html#a8dbe935a14c200f4f69bf46faa55ca1a">02115</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a8dbe935a14c200f4f69bf46faa55ca1a">addErrorMessages</a>(array $messages)
<a name="l02116"></a>02116     {
<a name="l02117"></a>02117         <span class="keywordflow">foreach</span> ($messages as $message) {
<a name="l02118"></a>02118             $this-&gt;<a class="code" href="class_zend___form.html#a689bb6d76c48e093d3a7430948ce30b5">addErrorMessage</a>($message);
<a name="l02119"></a>02119         }
<a name="l02120"></a>02120         <span class="keywordflow">return</span> $this;
<a name="l02121"></a>02121     }
<a name="l02122"></a>02122 
<a name="l02129"></a><a class="code" href="class_zend___form.html#a8e78eff986f94788eba5cb4f83dd463c">02129</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a8e78eff986f94788eba5cb4f83dd463c">setErrorMessages</a>(array $messages)
<a name="l02130"></a>02130     {
<a name="l02131"></a>02131         $this-&gt;<a class="code" href="class_zend___form.html#ac51b046d8e2d93266274a63aa329961f">clearErrorMessages</a>();
<a name="l02132"></a>02132         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a8dbe935a14c200f4f69bf46faa55ca1a">addErrorMessages</a>($messages);
<a name="l02133"></a>02133     }
<a name="l02134"></a>02134 
<a name="l02140"></a><a class="code" href="class_zend___form.html#ade0940404502eeaa9a9881362094871a">02140</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ade0940404502eeaa9a9881362094871a">getErrorMessages</a>()
<a name="l02141"></a>02141     {
<a name="l02142"></a>02142         <span class="keywordflow">return</span> $this-&gt;_errorMessages;
<a name="l02143"></a>02143     }
<a name="l02144"></a>02144 
<a name="l02150"></a><a class="code" href="class_zend___form.html#ac51b046d8e2d93266274a63aa329961f">02150</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ac51b046d8e2d93266274a63aa329961f">clearErrorMessages</a>()
<a name="l02151"></a>02151     {
<a name="l02152"></a>02152         $this-&gt;_errorMessages = array();
<a name="l02153"></a>02153         <span class="keywordflow">return</span> $this;
<a name="l02154"></a>02154     }
<a name="l02155"></a>02155 
<a name="l02161"></a><a class="code" href="class_zend___form.html#acf4dc099650872eec4bcc24bf6e30ac3">02161</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#acf4dc099650872eec4bcc24bf6e30ac3">markAsError</a>()
<a name="l02162"></a>02162     {
<a name="l02163"></a>02163         $this-&gt;_errorsExist  = <span class="keyword">true</span>;
<a name="l02164"></a>02164         $this-&gt;_errorsForced = <span class="keyword">true</span>;
<a name="l02165"></a>02165         <span class="keywordflow">return</span> $this;
<a name="l02166"></a>02166     }
<a name="l02167"></a>02167 
<a name="l02174"></a><a class="code" href="class_zend___form.html#af24b41ff81be328cb4a68cee95f35be5">02174</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#af24b41ff81be328cb4a68cee95f35be5">addError</a>($message)
<a name="l02175"></a>02175     {
<a name="l02176"></a>02176         $this-&gt;<a class="code" href="class_zend___form.html#a689bb6d76c48e093d3a7430948ce30b5">addErrorMessage</a>($message);
<a name="l02177"></a>02177         $this-&gt;<a class="code" href="class_zend___form.html#acf4dc099650872eec4bcc24bf6e30ac3">markAsError</a>();
<a name="l02178"></a>02178         <span class="keywordflow">return</span> $this;
<a name="l02179"></a>02179     }
<a name="l02180"></a>02180 
<a name="l02187"></a><a class="code" href="class_zend___form.html#a6b6568142591bb2e9c367237a484a45c">02187</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a6b6568142591bb2e9c367237a484a45c">addErrors</a>(array $messages)
<a name="l02188"></a>02188     {
<a name="l02189"></a>02189         <span class="keywordflow">foreach</span> ($messages as $message) {
<a name="l02190"></a>02190             $this-&gt;<a class="code" href="class_zend___form.html#af24b41ff81be328cb4a68cee95f35be5">addError</a>($message);
<a name="l02191"></a>02191         }
<a name="l02192"></a>02192         <span class="keywordflow">return</span> $this;
<a name="l02193"></a>02193     }
<a name="l02194"></a>02194 
<a name="l02201"></a><a class="code" href="class_zend___form.html#a61d1741368e5d4b1a96012d513a63f97">02201</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a61d1741368e5d4b1a96012d513a63f97">setErrors</a>(array $messages)
<a name="l02202"></a>02202     {
<a name="l02203"></a>02203         $this-&gt;<a class="code" href="class_zend___form.html#ac51b046d8e2d93266274a63aa329961f">clearErrorMessages</a>();
<a name="l02204"></a>02204         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a6b6568142591bb2e9c367237a484a45c">addErrors</a>($messages);
<a name="l02205"></a>02205     }
<a name="l02206"></a>02206 
<a name="l02207"></a>02207 
<a name="l02208"></a>02208     <span class="keyword">public</span> function persistData()
<a name="l02209"></a>02209     {
<a name="l02210"></a>02210     }
<a name="l02211"></a>02211 
<a name="l02217"></a><a class="code" href="class_zend___form.html#acf070090bea41c9bb98713c500d90296">02217</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#acf070090bea41c9bb98713c500d90296">isErrors</a>()
<a name="l02218"></a>02218     {
<a name="l02219"></a>02219         <span class="keywordflow">return</span> $this-&gt;_errorsExist;
<a name="l02220"></a>02220     }
<a name="l02221"></a>02221 
<a name="l02228"></a><a class="code" href="class_zend___form.html#ac62a077fbf1427d95f8f17dafb50987f">02228</a>     <span class="keyword">public</span> function <a class="code" href="interface_zend___validate___interface.html#a6e548ebf2656742bfd19939ead923ed2">getErrors</a>($name = null)
<a name="l02229"></a>02229     {
<a name="l02230"></a>02230         $errors = array();
<a name="l02231"></a>02231         <span class="keywordflow">if</span> ((null !== $name) &amp;&amp; isset($this-&gt;_elements[$name])) {
<a name="l02232"></a>02232             $errors = $this-&gt;<a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($name)-&gt;getErrors();
<a name="l02233"></a>02233         } elseif ((null !== $name) &amp;&amp; isset($this-&gt;_subForms[$name])) {
<a name="l02234"></a>02234             $errors = $this-&gt;<a class="code" href="class_zend___form.html#a8a11191a98f62faf1bb6c0bd3bdab781">getSubForm</a>($name)-&gt;getErrors();
<a name="l02235"></a>02235         } <span class="keywordflow">else</span> {
<a name="l02236"></a>02236             <span class="keywordflow">foreach</span> ($this-&gt;_elements as $key =&gt; $element) {
<a name="l02237"></a>02237                 $errors[$key] = $element-&gt;getErrors();
<a name="l02238"></a>02238             }
<a name="l02239"></a>02239             <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $key =&gt; $subForm) {
<a name="l02240"></a>02240                 $fErrors = $this-&gt;<a class="code" href="class_zend___form.html#af03c261627502a08bb0dae2767abcc69">_attachToArray</a>($subForm-&gt;getErrors(), $subForm-&gt;getElementsBelongTo());
<a name="l02241"></a>02241                 $errors = array_merge($errors, $fErrors);
<a name="l02242"></a>02242             }
<a name="l02243"></a>02243         }
<a name="l02244"></a>02244         <span class="keywordflow">return</span> $errors;
<a name="l02245"></a>02245     }
<a name="l02246"></a>02246 
<a name="l02254"></a><a class="code" href="class_zend___form.html#a930664fd65dd5fcb8cf7a8dc3fe498b8">02254</a>     <span class="keyword">public</span> function <a class="code" href="interface_zend___validate___interface.html#a7347b0b89cca1d7604e93f5b5e896fc4">getMessages</a>($name = null, $suppressArrayNotation = <span class="keyword">false</span>)
<a name="l02255"></a>02255     {
<a name="l02256"></a>02256         <span class="keywordflow">if</span> ((null !== $name) &amp;&amp; isset($this-&gt;_elements[$name])) {
<a name="l02257"></a>02257             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($name)-&gt;getMessages();
<a name="l02258"></a>02258         }
<a name="l02259"></a>02259 
<a name="l02260"></a>02260         <span class="keywordflow">if</span> ((null !== $name) &amp;&amp; isset($this-&gt;_subForms[$name])) {
<a name="l02261"></a>02261             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a8a11191a98f62faf1bb6c0bd3bdab781">getSubForm</a>($name)-&gt;getMessages(null, <span class="keyword">true</span>);
<a name="l02262"></a>02262         }
<a name="l02263"></a>02263 
<a name="l02264"></a>02264         $arrayKeys = array();
<a name="l02265"></a>02265         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $key =&gt; $subForm) {
<a name="l02266"></a>02266             $array = $this-&gt;<a class="code" href="class_zend___form.html#a9a020a3cce78e3e6c22c5475ba51a10a">_getArrayName</a>($subForm-&gt;getElementsBelongTo());
<a name="l02267"></a>02267             <span class="keywordflow">if</span> (!empty($array)) {
<a name="l02268"></a>02268                 <span class="keywordflow">if</span> ($name == $array) {
<a name="l02269"></a>02269                     <span class="keywordflow">return</span> $subForm-&gt;getMessages(null, <span class="keyword">true</span>);
<a name="l02270"></a>02270                 }
<a name="l02271"></a>02271                 $arrayKeys[$key] = $subForm-&gt;getElementsBelongTo();
<a name="l02272"></a>02272             }
<a name="l02273"></a>02273         }
<a name="l02274"></a>02274 
<a name="l02275"></a>02275         $customMessages = $this-&gt;<a class="code" href="class_zend___form.html#a0fb3791c7a70f8911824df4a1176cdc5">_getErrorMessages</a>();
<a name="l02276"></a>02276         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___form.html#acf070090bea41c9bb98713c500d90296">isErrors</a>() &amp;&amp; !empty($customMessages)) {
<a name="l02277"></a>02277             <span class="keywordflow">return</span> $customMessages;
<a name="l02278"></a>02278         }
<a name="l02279"></a>02279 
<a name="l02280"></a>02280         $messages = array();
<a name="l02281"></a>02281 
<a name="l02282"></a>02282         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>() as $name =&gt; $element) {
<a name="l02283"></a>02283             $eMessages = $element-&gt;getMessages();
<a name="l02284"></a>02284             <span class="keywordflow">if</span> (!empty($eMessages)) {
<a name="l02285"></a>02285                 $messages[$name] = $eMessages;
<a name="l02286"></a>02286             }
<a name="l02287"></a>02287         }
<a name="l02288"></a>02288 
<a name="l02289"></a>02289         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $key =&gt; $subForm) {
<a name="l02290"></a>02290             $fMessages = $subForm-&gt;getMessages(null, <span class="keyword">true</span>);
<a name="l02291"></a>02291             <span class="keywordflow">if</span> (!empty($fMessages)) {
<a name="l02292"></a>02292                 <span class="keywordflow">if</span> (array_key_exists($key, $arrayKeys)) {
<a name="l02293"></a>02293                     $fMessages = $this-&gt;<a class="code" href="class_zend___form.html#af03c261627502a08bb0dae2767abcc69">_attachToArray</a>($fMessages, $arrayKeys[$key]);
<a name="l02294"></a>02294                     $messages = array_merge($messages, $fMessages);
<a name="l02295"></a>02295                 } <span class="keywordflow">else</span> {
<a name="l02296"></a>02296                     $messages[$key] = $fMessages;
<a name="l02297"></a>02297                 }
<a name="l02298"></a>02298             }
<a name="l02299"></a>02299         }
<a name="l02300"></a>02300 
<a name="l02301"></a>02301         <span class="keywordflow">if</span> (!$suppressArrayNotation &amp;&amp; $this-&gt;<a class="code" href="class_zend___form.html#a2f0ab131ec6fa3f6f91721eb72ca10f0">isArray</a>()) {
<a name="l02302"></a>02302             $messages = $this-&gt;<a class="code" href="class_zend___form.html#af03c261627502a08bb0dae2767abcc69">_attachToArray</a>($messages, $this-&gt;<a class="code" href="class_zend___form.html#a7d0945dd408b8cf28aa0e96e6fb82ac3">getElementsBelongTo</a>());
<a name="l02303"></a>02303         }
<a name="l02304"></a>02304 
<a name="l02305"></a>02305         <span class="keywordflow">return</span> $messages;
<a name="l02306"></a>02306     }
<a name="l02307"></a>02307 
<a name="l02308"></a>02308 
<a name="l02309"></a>02309     <span class="comment">// Rendering</span>
<a name="l02310"></a>02310 
<a name="l02317"></a><a class="code" href="class_zend___form.html#a6efcef1ebce82b7e972f451c92574b78">02317</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a6efcef1ebce82b7e972f451c92574b78">setView</a>(<a class="code" href="interface_zend___view___interface.html">Zend_View_Interface</a> $view = null)
<a name="l02318"></a>02318     {
<a name="l02319"></a>02319         $this-&gt;_view = $view;
<a name="l02320"></a>02320         <span class="keywordflow">return</span> $this;
<a name="l02321"></a>02321     }
<a name="l02322"></a>02322 
<a name="l02330"></a><a class="code" href="class_zend___form.html#a50677812ea3f0258f7d03bbac5265413">02330</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a50677812ea3f0258f7d03bbac5265413">getView</a>()
<a name="l02331"></a>02331     {
<a name="l02332"></a>02332         <span class="keywordflow">if</span> (null === $this-&gt;_view) {
<a name="l02333"></a>02333             require_once <span class="stringliteral">&#39;Zend/Controller/Action/HelperBroker.php&#39;</span>;
<a name="l02334"></a>02334             $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(<span class="stringliteral">&#39;viewRenderer&#39;</span>);
<a name="l02335"></a>02335             $this-&gt;<a class="code" href="class_zend___form.html#a6efcef1ebce82b7e972f451c92574b78">setView</a>($viewRenderer-&gt;view);
<a name="l02336"></a>02336         }
<a name="l02337"></a>02337 
<a name="l02338"></a>02338         <span class="keywordflow">return</span> $this-&gt;_view;
<a name="l02339"></a>02339     }
<a name="l02340"></a>02340 
<a name="l02348"></a><a class="code" href="class_zend___form.html#a9872cc115fbab24f0c3de7fed1e08726">02348</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___form.html#a9872cc115fbab24f0c3de7fed1e08726">_getDecorator</a>($name, $options)
<a name="l02349"></a>02349     {
<a name="l02350"></a>02350         $class = $this-&gt;<a class="code" href="class_zend___form.html#ab4aeb03f8ff437caf852db28fe6e23c9">getPluginLoader</a>(self::DECORATOR)-&gt;load($name);
<a name="l02351"></a>02351         <span class="keywordflow">if</span> (null === $options) {
<a name="l02352"></a>02352             $decorator = <span class="keyword">new</span> $class;
<a name="l02353"></a>02353         } <span class="keywordflow">else</span> {
<a name="l02354"></a>02354             $decorator = <span class="keyword">new</span> $class($options);
<a name="l02355"></a>02355         }
<a name="l02356"></a>02356 
<a name="l02357"></a>02357         <span class="keywordflow">return</span> $decorator;
<a name="l02358"></a>02358     }
<a name="l02359"></a>02359 
<a name="l02367"></a><a class="code" href="class_zend___form.html#a52126c33d89f43fc1e3e78e0dfe937af">02367</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a52126c33d89f43fc1e3e78e0dfe937af">addDecorator</a>($decorator, $options = null)
<a name="l02368"></a>02368     {
<a name="l02369"></a>02369         <span class="keywordflow">if</span> ($decorator instanceof Zend_Form_Decorator_Interface) {
<a name="l02370"></a>02370             $name = get_class($decorator);
<a name="l02371"></a>02371         } elseif (is_string($decorator)) {
<a name="l02372"></a>02372             $name      = $decorator;
<a name="l02373"></a>02373             $decorator = array(
<a name="l02374"></a>02374                 <span class="stringliteral">&#39;decorator&#39;</span> =&gt; $name,
<a name="l02375"></a>02375                 <span class="stringliteral">&#39;options&#39;</span>   =&gt; $options,
<a name="l02376"></a>02376             );
<a name="l02377"></a>02377         } elseif (is_array($decorator)) {
<a name="l02378"></a>02378             <span class="keywordflow">foreach</span> ($decorator as $name =&gt; $spec) {
<a name="l02379"></a>02379                 <span class="keywordflow">break</span>;
<a name="l02380"></a>02380             }
<a name="l02381"></a>02381             <span class="keywordflow">if</span> (is_numeric($name)) {
<a name="l02382"></a>02382                 require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l02383"></a>02383                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;Invalid alias provided to addDecorator; must be alphanumeric string&#39;</span>);
<a name="l02384"></a>02384             }
<a name="l02385"></a>02385             <span class="keywordflow">if</span> (is_string($spec)) {
<a name="l02386"></a>02386                 $decorator = array(
<a name="l02387"></a>02387                     <span class="stringliteral">&#39;decorator&#39;</span> =&gt; $spec,
<a name="l02388"></a>02388                     <span class="stringliteral">&#39;options&#39;</span>   =&gt; $options,
<a name="l02389"></a>02389                 );
<a name="l02390"></a>02390             } elseif ($spec instanceof Zend_Form_Decorator_Interface) {
<a name="l02391"></a>02391                 $decorator = $spec;
<a name="l02392"></a>02392             }
<a name="l02393"></a>02393         } <span class="keywordflow">else</span> {
<a name="l02394"></a>02394             require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l02395"></a>02395             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;Invalid decorator provided to addDecorator; must be string or Zend_Form_Decorator_Interface&#39;</span>);
<a name="l02396"></a>02396         }
<a name="l02397"></a>02397 
<a name="l02398"></a>02398         $this-&gt;_decorators[$name] = $decorator;
<a name="l02399"></a>02399 
<a name="l02400"></a>02400         <span class="keywordflow">return</span> $this;
<a name="l02401"></a>02401     }
<a name="l02402"></a>02402 
<a name="l02409"></a><a class="code" href="class_zend___form.html#a5e25340c26b2af0d7c252cea16d29730">02409</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a5e25340c26b2af0d7c252cea16d29730">addDecorators</a>(array $decorators)
<a name="l02410"></a>02410     {
<a name="l02411"></a>02411         <span class="keywordflow">foreach</span> ($decorators as $decoratorInfo) {
<a name="l02412"></a>02412             <span class="keywordflow">if</span> (is_string($decoratorInfo)) {
<a name="l02413"></a>02413                 $this-&gt;<a class="code" href="class_zend___form.html#a52126c33d89f43fc1e3e78e0dfe937af">addDecorator</a>($decoratorInfo);
<a name="l02414"></a>02414             } elseif ($decoratorInfo instanceof Zend_Form_Decorator_Interface) {
<a name="l02415"></a>02415                 $this-&gt;<a class="code" href="class_zend___form.html#a52126c33d89f43fc1e3e78e0dfe937af">addDecorator</a>($decoratorInfo);
<a name="l02416"></a>02416             } elseif (is_array($decoratorInfo)) {
<a name="l02417"></a>02417                 $argc    = <a class="code" href="class_zend___form.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>($decoratorInfo);
<a name="l02418"></a>02418                 $options = array();
<a name="l02419"></a>02419                 <span class="keywordflow">if</span> (isset($decoratorInfo[<span class="stringliteral">&#39;decorator&#39;</span>])) {
<a name="l02420"></a>02420                     $decorator = $decoratorInfo[<span class="stringliteral">&#39;decorator&#39;</span>];
<a name="l02421"></a>02421                     <span class="keywordflow">if</span> (isset($decoratorInfo[<span class="stringliteral">&#39;options&#39;</span>])) {
<a name="l02422"></a>02422                         $options = $decoratorInfo[<span class="stringliteral">&#39;options&#39;</span>];
<a name="l02423"></a>02423                     }
<a name="l02424"></a>02424                     $this-&gt;<a class="code" href="class_zend___form.html#a52126c33d89f43fc1e3e78e0dfe937af">addDecorator</a>($decorator, $options);
<a name="l02425"></a>02425                 } <span class="keywordflow">else</span> {
<a name="l02426"></a>02426                     <span class="keywordflow">switch</span> (<span class="keyword">true</span>) {
<a name="l02427"></a>02427                         <span class="keywordflow">case</span> (0 == $argc):
<a name="l02428"></a>02428                             <span class="keywordflow">break</span>;
<a name="l02429"></a>02429                         <span class="keywordflow">case</span> (1 &lt;= $argc):
<a name="l02430"></a>02430                             $decorator  = array_shift($decoratorInfo);
<a name="l02431"></a>02431                         <span class="keywordflow">case</span> (2 &lt;= $argc):
<a name="l02432"></a>02432                             $options = array_shift($decoratorInfo);
<a name="l02433"></a>02433                         <span class="keywordflow">default</span>:
<a name="l02434"></a>02434                             $this-&gt;<a class="code" href="class_zend___form.html#a52126c33d89f43fc1e3e78e0dfe937af">addDecorator</a>($decorator, $options);
<a name="l02435"></a>02435                             <span class="keywordflow">break</span>;
<a name="l02436"></a>02436                     }
<a name="l02437"></a>02437                 }
<a name="l02438"></a>02438             } <span class="keywordflow">else</span> {
<a name="l02439"></a>02439                 require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l02440"></a>02440                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;Invalid decorator passed to addDecorators()&#39;</span>);
<a name="l02441"></a>02441             }
<a name="l02442"></a>02442         }
<a name="l02443"></a>02443 
<a name="l02444"></a>02444         <span class="keywordflow">return</span> $this;
<a name="l02445"></a>02445     }
<a name="l02446"></a>02446 
<a name="l02453"></a><a class="code" href="class_zend___form.html#a38e589966924ae0bdb43d7cfde3b385b">02453</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a38e589966924ae0bdb43d7cfde3b385b">setDecorators</a>(array $decorators)
<a name="l02454"></a>02454     {
<a name="l02455"></a>02455         $this-&gt;<a class="code" href="class_zend___form.html#a57e7217861fd20d96dd76460e79b79b0">clearDecorators</a>();
<a name="l02456"></a>02456         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a5e25340c26b2af0d7c252cea16d29730">addDecorators</a>($decorators);
<a name="l02457"></a>02457     }
<a name="l02458"></a>02458 
<a name="l02465"></a><a class="code" href="class_zend___form.html#a15366634c307e792212e6535d2a19044">02465</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a15366634c307e792212e6535d2a19044">getDecorator</a>($name)
<a name="l02466"></a>02466     {
<a name="l02467"></a>02467         <span class="keywordflow">if</span> (!isset($this-&gt;_decorators[$name])) {
<a name="l02468"></a>02468             $len = strlen($name);
<a name="l02469"></a>02469             <span class="keywordflow">foreach</span> ($this-&gt;_decorators as $localName =&gt; $decorator) {
<a name="l02470"></a>02470                 <span class="keywordflow">if</span> ($len &gt; strlen($localName)) {
<a name="l02471"></a>02471                     <span class="keywordflow">continue</span>;
<a name="l02472"></a>02472                 }
<a name="l02473"></a>02473 
<a name="l02474"></a>02474                 <span class="keywordflow">if</span> (0 === substr_compare($localName, $name, -$len, $len, <span class="keyword">true</span>)) {
<a name="l02475"></a>02475                     <span class="keywordflow">if</span> (is_array($decorator)) {
<a name="l02476"></a>02476                         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a144d69e80e5d3746d32e82bb5144eb07">_loadDecorator</a>($decorator, $localName);
<a name="l02477"></a>02477                     }
<a name="l02478"></a>02478                     <span class="keywordflow">return</span> $decorator;
<a name="l02479"></a>02479                 }
<a name="l02480"></a>02480             }
<a name="l02481"></a>02481             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02482"></a>02482         }
<a name="l02483"></a>02483 
<a name="l02484"></a>02484         <span class="keywordflow">if</span> (is_array($this-&gt;_decorators[$name])) {
<a name="l02485"></a>02485             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a144d69e80e5d3746d32e82bb5144eb07">_loadDecorator</a>($this-&gt;_decorators[$name], $name);
<a name="l02486"></a>02486         }
<a name="l02487"></a>02487 
<a name="l02488"></a>02488         <span class="keywordflow">return</span> $this-&gt;_decorators[$name];
<a name="l02489"></a>02489     }
<a name="l02490"></a>02490 
<a name="l02496"></a><a class="code" href="class_zend___form.html#a14709784de42ac1565c64a09debb7db8">02496</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a14709784de42ac1565c64a09debb7db8">getDecorators</a>()
<a name="l02497"></a>02497     {
<a name="l02498"></a>02498         <span class="keywordflow">foreach</span> ($this-&gt;_decorators as $key =&gt; $value) {
<a name="l02499"></a>02499             <span class="keywordflow">if</span> (is_array($value)) {
<a name="l02500"></a>02500                 $this-&gt;<a class="code" href="class_zend___form.html#a144d69e80e5d3746d32e82bb5144eb07">_loadDecorator</a>($value, $key);
<a name="l02501"></a>02501             }
<a name="l02502"></a>02502         }
<a name="l02503"></a>02503         <span class="keywordflow">return</span> $this-&gt;_decorators;
<a name="l02504"></a>02504     }
<a name="l02505"></a>02505 
<a name="l02512"></a><a class="code" href="class_zend___form.html#a013698c2025fbd07f17a9c04d26af36f">02512</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a013698c2025fbd07f17a9c04d26af36f">removeDecorator</a>($name)
<a name="l02513"></a>02513     {
<a name="l02514"></a>02514         $decorator = $this-&gt;<a class="code" href="class_zend___form.html#a15366634c307e792212e6535d2a19044">getDecorator</a>($name);
<a name="l02515"></a>02515         <span class="keywordflow">if</span> ($decorator) {
<a name="l02516"></a>02516             <span class="keywordflow">if</span> (array_key_exists($name, $this-&gt;_decorators)) {
<a name="l02517"></a>02517                 unset($this-&gt;_decorators[$name]);
<a name="l02518"></a>02518             } <span class="keywordflow">else</span> {
<a name="l02519"></a>02519                 $class = get_class($decorator);
<a name="l02520"></a>02520                 <span class="keywordflow">if</span> (!array_key_exists($class, $this-&gt;_decorators)) {
<a name="l02521"></a>02521                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02522"></a>02522                 }
<a name="l02523"></a>02523                 unset($this-&gt;_decorators[$class]);
<a name="l02524"></a>02524             }
<a name="l02525"></a>02525             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02526"></a>02526         }
<a name="l02527"></a>02527 
<a name="l02528"></a>02528         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02529"></a>02529     }
<a name="l02530"></a>02530 
<a name="l02536"></a><a class="code" href="class_zend___form.html#a57e7217861fd20d96dd76460e79b79b0">02536</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a57e7217861fd20d96dd76460e79b79b0">clearDecorators</a>()
<a name="l02537"></a>02537     {
<a name="l02538"></a>02538         $this-&gt;_decorators = array();
<a name="l02539"></a>02539         <span class="keywordflow">return</span> $this;
<a name="l02540"></a>02540     }
<a name="l02541"></a>02541 
<a name="l02550"></a><a class="code" href="class_zend___form.html#a0cecebfd7acc452a58e465d26e64ae63">02550</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a0cecebfd7acc452a58e465d26e64ae63">setElementDecorators</a>(array $decorators, array $elements = null, $include = <span class="keyword">true</span>)
<a name="l02551"></a>02551     {
<a name="l02552"></a>02552         <span class="keywordflow">if</span> (is_array($elements)) {
<a name="l02553"></a>02553             <span class="keywordflow">if</span> ($include) {
<a name="l02554"></a>02554                 $elementObjs = array();
<a name="l02555"></a>02555                 <span class="keywordflow">foreach</span> ($elements as $name) {
<a name="l02556"></a>02556                     <span class="keywordflow">if</span> (null !== ($element = $this-&gt;<a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($name))) {
<a name="l02557"></a>02557                         $elementObjs[] = $element;
<a name="l02558"></a>02558                     }
<a name="l02559"></a>02559                 }
<a name="l02560"></a>02560             } <span class="keywordflow">else</span> {
<a name="l02561"></a>02561                 $elementObjs = $this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>();
<a name="l02562"></a>02562                 <span class="keywordflow">foreach</span> ($elements as $name) {
<a name="l02563"></a>02563                     <span class="keywordflow">if</span> (array_key_exists($name, $elementObjs)) {
<a name="l02564"></a>02564                         unset($elementObjs[$name]);
<a name="l02565"></a>02565                     }
<a name="l02566"></a>02566                 }
<a name="l02567"></a>02567             }
<a name="l02568"></a>02568         } <span class="keywordflow">else</span> {
<a name="l02569"></a>02569             $elementObjs = $this-&gt;<a class="code" href="class_zend___form.html#a97a3a3e912139aa222a7ca13fdb27d33">getElements</a>();
<a name="l02570"></a>02570         }
<a name="l02571"></a>02571 
<a name="l02572"></a>02572         <span class="keywordflow">foreach</span> ($elementObjs as $element) {
<a name="l02573"></a>02573             $element-&gt;setDecorators($decorators);
<a name="l02574"></a>02574         }
<a name="l02575"></a>02575 
<a name="l02576"></a>02576         $this-&gt;_elementDecorators = $decorators;
<a name="l02577"></a>02577 
<a name="l02578"></a>02578         <span class="keywordflow">return</span> $this;
<a name="l02579"></a>02579     }
<a name="l02580"></a>02580 
<a name="l02587"></a><a class="code" href="class_zend___form.html#a722de47b9c47013a9aa037db91ee0006">02587</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a722de47b9c47013a9aa037db91ee0006">setDisplayGroupDecorators</a>(array $decorators)
<a name="l02588"></a>02588     {
<a name="l02589"></a>02589         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a158ed78e51ed1ea113b085c79decb0ba">getDisplayGroups</a>() as $group) {
<a name="l02590"></a>02590             $group-&gt;setDecorators($decorators);
<a name="l02591"></a>02591         }
<a name="l02592"></a>02592 
<a name="l02593"></a>02593         <span class="keywordflow">return</span> $this;
<a name="l02594"></a>02594     }
<a name="l02595"></a>02595 
<a name="l02602"></a><a class="code" href="class_zend___form.html#a1496539e78267b9759b228d565a6f4b3">02602</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a1496539e78267b9759b228d565a6f4b3">setSubFormDecorators</a>(array $decorators)
<a name="l02603"></a>02603     {
<a name="l02604"></a>02604         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#ae5a3541cd79bde8e9366f992a19e7c5b">getSubForms</a>() as $form) {
<a name="l02605"></a>02605             $form-&gt;setDecorators($decorators);
<a name="l02606"></a>02606         }
<a name="l02607"></a>02607 
<a name="l02608"></a>02608         <span class="keywordflow">return</span> $this;
<a name="l02609"></a>02609     }
<a name="l02610"></a>02610 
<a name="l02617"></a><a class="code" href="class_zend___form.html#ae9f2525c3fcee4734df28dbd14e49718">02617</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ae9f2525c3fcee4734df28dbd14e49718">render</a>(<a class="code" href="interface_zend___view___interface.html">Zend_View_Interface</a> $view = null)
<a name="l02618"></a>02618     {
<a name="l02619"></a>02619         <span class="keywordflow">if</span> (null !== $view) {
<a name="l02620"></a>02620             $this-&gt;<a class="code" href="class_zend___form.html#a6efcef1ebce82b7e972f451c92574b78">setView</a>($view);
<a name="l02621"></a>02621         }
<a name="l02622"></a>02622 
<a name="l02623"></a>02623         $content = <span class="stringliteral">&#39;&#39;</span>;
<a name="l02624"></a>02624         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___form.html#a14709784de42ac1565c64a09debb7db8">getDecorators</a>() as $decorator) {
<a name="l02625"></a>02625             $decorator-&gt;setElement($this);
<a name="l02626"></a>02626             $content = $decorator-&gt;render($content);
<a name="l02627"></a>02627         }
<a name="l02628"></a>02628         <span class="keywordflow">return</span> $content;
<a name="l02629"></a>02629     }
<a name="l02630"></a>02630 
<a name="l02638"></a><a class="code" href="class_zend___form.html#a7516ca30af0db3cdbf9a7739b48ce91d">02638</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a7516ca30af0db3cdbf9a7739b48ce91d">__toString</a>()
<a name="l02639"></a>02639     {
<a name="l02640"></a>02640         <span class="keywordflow">try</span> {
<a name="l02641"></a>02641             $return = $this-&gt;<a class="code" href="class_zend___form.html#ae9f2525c3fcee4734df28dbd14e49718">render</a>();
<a name="l02642"></a>02642             <span class="keywordflow">return</span> $return;
<a name="l02643"></a>02643         } <span class="keywordflow">catch</span> (Exception $e) {
<a name="l02644"></a>02644             $message = <span class="stringliteral">&quot;Exception caught by form: &quot;</span> . $e-&gt;getMessage()
<a name="l02645"></a>02645                      . <span class="stringliteral">&quot;\nStack Trace:\n&quot;</span> . $e-&gt;getTraceAsString();
<a name="l02646"></a>02646             trigger_error($message, E_USER_WARNING);
<a name="l02647"></a>02647             <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;
<a name="l02648"></a>02648         }
<a name="l02649"></a>02649     }
<a name="l02650"></a>02650 
<a name="l02651"></a>02651 
<a name="l02652"></a>02652     <span class="comment">// Localization:</span>
<a name="l02653"></a>02653 
<a name="l02660"></a><a class="code" href="class_zend___form.html#a7b015952a8f9c7a19c18b1990321276f">02660</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a7b015952a8f9c7a19c18b1990321276f">setTranslator</a>($translator = null)
<a name="l02661"></a>02661     {
<a name="l02662"></a>02662         <span class="keywordflow">if</span> (null === $translator) {
<a name="l02663"></a>02663             $this-&gt;_translator = null;
<a name="l02664"></a>02664         } elseif ($translator instanceof <a class="code" href="class_zend___translate___adapter.html">Zend_Translate_Adapter</a>) {
<a name="l02665"></a>02665             $this-&gt;_translator = $translator;
<a name="l02666"></a>02666         } elseif ($translator instanceof <a class="code" href="class_zend___translate.html">Zend_Translate</a>) {
<a name="l02667"></a>02667             $this-&gt;_translator = $translator-&gt;getAdapter();
<a name="l02668"></a>02668         } <span class="keywordflow">else</span> {
<a name="l02669"></a>02669             require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l02670"></a>02670             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;Invalid translator specified&#39;</span>);
<a name="l02671"></a>02671         }
<a name="l02672"></a>02672 
<a name="l02673"></a>02673         <span class="keywordflow">return</span> $this;
<a name="l02674"></a>02674     }
<a name="l02675"></a>02675 
<a name="l02682"></a><a class="code" href="class_zend___form.html#a51afe3d923d916efa0837ecd8deae181">02682</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___form.html#a51afe3d923d916efa0837ecd8deae181">setDefaultTranslator</a>($translator = null)
<a name="l02683"></a>02683     {
<a name="l02684"></a>02684         <span class="keywordflow">if</span> (null === $translator) {
<a name="l02685"></a>02685             self::$_translatorDefault = null;
<a name="l02686"></a>02686         } elseif ($translator instanceof <a class="code" href="class_zend___translate___adapter.html">Zend_Translate_Adapter</a>) {
<a name="l02687"></a>02687             self::$_translatorDefault = $translator;
<a name="l02688"></a>02688         } elseif ($translator instanceof <a class="code" href="class_zend___translate.html">Zend_Translate</a>) {
<a name="l02689"></a>02689             self::$_translatorDefault = $translator-&gt;getAdapter();
<a name="l02690"></a>02690         } <span class="keywordflow">else</span> {
<a name="l02691"></a>02691             require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l02692"></a>02692             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;Invalid translator specified&#39;</span>);
<a name="l02693"></a>02693         }
<a name="l02694"></a>02694     }
<a name="l02695"></a>02695 
<a name="l02701"></a><a class="code" href="class_zend___form.html#a4b5bf5bf92166dc1c551fe8cfabfb5ae">02701</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a4b5bf5bf92166dc1c551fe8cfabfb5ae">getTranslator</a>()
<a name="l02702"></a>02702     {
<a name="l02703"></a>02703         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___form.html#a29dbd67c1901bc685c173c6853f6796d">translatorIsDisabled</a>()) {
<a name="l02704"></a>02704             <span class="keywordflow">return</span> null;
<a name="l02705"></a>02705         }
<a name="l02706"></a>02706 
<a name="l02707"></a>02707         <span class="keywordflow">if</span> (null === $this-&gt;_translator) {
<a name="l02708"></a>02708             <span class="keywordflow">return</span> <a class="code" href="class_zend___form.html#ad9e19a52e9744e0d32b8c786b2f51a45">self::getDefaultTranslator</a>();
<a name="l02709"></a>02709         }
<a name="l02710"></a>02710 
<a name="l02711"></a>02711         <span class="keywordflow">return</span> $this-&gt;_translator;
<a name="l02712"></a>02712     }
<a name="l02713"></a>02713 
<a name="l02719"></a><a class="code" href="class_zend___form.html#ad9e19a52e9744e0d32b8c786b2f51a45">02719</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___form.html#ad9e19a52e9744e0d32b8c786b2f51a45">getDefaultTranslator</a>()
<a name="l02720"></a>02720     {
<a name="l02721"></a>02721         <span class="keywordflow">if</span> (null === self::$_translatorDefault) {
<a name="l02722"></a>02722             require_once <span class="stringliteral">&#39;Zend/Registry.php&#39;</span>;
<a name="l02723"></a>02723             <span class="keywordflow">if</span> (<a class="code" href="class_zend___registry.html#ac8c396b3b76f72a1bac4e668721ddb2e">Zend_Registry::isRegistered</a>(<span class="stringliteral">&#39;Zend_Translate&#39;</span>)) {
<a name="l02724"></a>02724                 $translator = <a class="code" href="class_zend___registry.html#a68c12da739beec9f01e66b9a8f0dd24d">Zend_Registry::get</a>(<span class="stringliteral">&#39;Zend_Translate&#39;</span>);
<a name="l02725"></a>02725                 <span class="keywordflow">if</span> ($translator instanceof <a class="code" href="class_zend___translate___adapter.html">Zend_Translate_Adapter</a>) {
<a name="l02726"></a>02726                     <span class="keywordflow">return</span> $translator;
<a name="l02727"></a>02727                 } elseif ($translator instanceof <a class="code" href="class_zend___translate.html">Zend_Translate</a>) {
<a name="l02728"></a>02728                     <span class="keywordflow">return</span> $translator-&gt;getAdapter();
<a name="l02729"></a>02729                 }
<a name="l02730"></a>02730             }
<a name="l02731"></a>02731         }
<a name="l02732"></a>02732         <span class="keywordflow">return</span> self::$_translatorDefault;
<a name="l02733"></a>02733     }
<a name="l02734"></a>02734 
<a name="l02741"></a><a class="code" href="class_zend___form.html#a84365d0eea810b2a327fe849e3947057">02741</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a84365d0eea810b2a327fe849e3947057">setDisableTranslator</a>($flag)
<a name="l02742"></a>02742     {
<a name="l02743"></a>02743         $this-&gt;_translatorDisabled = (bool) $flag;
<a name="l02744"></a>02744         <span class="keywordflow">return</span> $this;
<a name="l02745"></a>02745     }
<a name="l02746"></a>02746 
<a name="l02752"></a><a class="code" href="class_zend___form.html#a29dbd67c1901bc685c173c6853f6796d">02752</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a29dbd67c1901bc685c173c6853f6796d">translatorIsDisabled</a>()
<a name="l02753"></a>02753     {
<a name="l02754"></a>02754         <span class="keywordflow">return</span> $this-&gt;_translatorDisabled;
<a name="l02755"></a>02755     }
<a name="l02756"></a>02756 
<a name="l02763"></a><a class="code" href="class_zend___form.html#abc8e9e31bb15c8a44c3210ec551407c8">02763</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#abc8e9e31bb15c8a44c3210ec551407c8">__get</a>($name)
<a name="l02764"></a>02764     {
<a name="l02765"></a>02765         <span class="keywordflow">if</span> (isset($this-&gt;_elements[$name])) {
<a name="l02766"></a>02766             <span class="keywordflow">return</span> $this-&gt;_elements[$name];
<a name="l02767"></a>02767         } elseif (isset($this-&gt;_subForms[$name])) {
<a name="l02768"></a>02768             <span class="keywordflow">return</span> $this-&gt;_subForms[$name];
<a name="l02769"></a>02769         } elseif (isset($this-&gt;_displayGroups[$name])) {
<a name="l02770"></a>02770             <span class="keywordflow">return</span> $this-&gt;_displayGroups[$name];
<a name="l02771"></a>02771         }
<a name="l02772"></a>02772 
<a name="l02773"></a>02773         <span class="keywordflow">return</span> null;
<a name="l02774"></a>02774     }
<a name="l02775"></a>02775 
<a name="l02784"></a><a class="code" href="class_zend___form.html#a83c2703c91959192f759992ad5640b67">02784</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a83c2703c91959192f759992ad5640b67">__set</a>($name, $value)
<a name="l02785"></a>02785     {
<a name="l02786"></a>02786         <span class="keywordflow">if</span> ($value instanceof Zend_Form_Element) {
<a name="l02787"></a>02787             $this-&gt;<a class="code" href="class_zend___form.html#a08c595ad4e33c864edee7dc6b36609ad">addElement</a>($value, $name);
<a name="l02788"></a>02788             <span class="keywordflow">return</span>;
<a name="l02789"></a>02789         } elseif ($value instanceof <a class="code" href="class_zend___form.html">Zend_Form</a>) {
<a name="l02790"></a>02790             $this-&gt;<a class="code" href="class_zend___form.html#a1bf34f062245adb86756029bce4fe1d9">addSubForm</a>($value, $name);
<a name="l02791"></a>02791             <span class="keywordflow">return</span>;
<a name="l02792"></a>02792         } elseif (is_array($value)) {
<a name="l02793"></a>02793             $this-&gt;<a class="code" href="class_zend___form.html#af0b3cca15df8d75b22abe7aa8394980b">addDisplayGroup</a>($value, $name);
<a name="l02794"></a>02794             <span class="keywordflow">return</span>;
<a name="l02795"></a>02795         }
<a name="l02796"></a>02796 
<a name="l02797"></a>02797         require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l02798"></a>02798         <span class="keywordflow">if</span> (is_object($value)) {
<a name="l02799"></a>02799             $type = get_class($value);
<a name="l02800"></a>02800         } <span class="keywordflow">else</span> {
<a name="l02801"></a>02801             $type = gettype($value);
<a name="l02802"></a>02802         }
<a name="l02803"></a>02803         <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(<span class="stringliteral">&#39;Only form elements and groups may be overloaded; variable of type &quot;&#39;</span> . $type . <span class="stringliteral">&#39;&quot; provided&#39;</span>);
<a name="l02804"></a>02804     }
<a name="l02805"></a>02805 
<a name="l02812"></a><a class="code" href="class_zend___form.html#a8f132f051b7cd7d570ccb9f6e2bb4201">02812</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a8f132f051b7cd7d570ccb9f6e2bb4201">__isset</a>($name)
<a name="l02813"></a>02813     {
<a name="l02814"></a>02814         <span class="keywordflow">if</span> (isset($this-&gt;_elements[$name])
<a name="l02815"></a>02815             || isset($this-&gt;_subForms[$name])
<a name="l02816"></a>02816             || isset($this-&gt;_displayGroups[$name]))
<a name="l02817"></a>02817         {
<a name="l02818"></a>02818             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02819"></a>02819         }
<a name="l02820"></a>02820 
<a name="l02821"></a>02821         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02822"></a>02822     }
<a name="l02823"></a>02823 
<a name="l02830"></a><a class="code" href="class_zend___form.html#a8a93654c7bfe3f0a9bb7af531e513d44">02830</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a8a93654c7bfe3f0a9bb7af531e513d44">__unset</a>($name)
<a name="l02831"></a>02831     {
<a name="l02832"></a>02832         <span class="keywordflow">if</span> (isset($this-&gt;_elements[$name])) {
<a name="l02833"></a>02833             unset($this-&gt;_elements[$name]);
<a name="l02834"></a>02834         } elseif (isset($this-&gt;_subForms[$name])) {
<a name="l02835"></a>02835             unset($this-&gt;_subForms[$name]);
<a name="l02836"></a>02836         } elseif (isset($this-&gt;_displayGroups[$name])) {
<a name="l02837"></a>02837             unset($this-&gt;_displayGroups[$name]);
<a name="l02838"></a>02838         }
<a name="l02839"></a>02839     }
<a name="l02840"></a>02840 
<a name="l02851"></a><a class="code" href="class_zend___form.html#a9f1179240d068c94a040021326032bed">02851</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a9f1179240d068c94a040021326032bed">__call</a>($method, $args)
<a name="l02852"></a>02852     {
<a name="l02853"></a>02853         <span class="keywordflow">if</span> (<span class="stringliteral">&#39;render&#39;</span> == substr($method, 0, 6)) {
<a name="l02854"></a>02854             $decoratorName = substr($method, 6);
<a name="l02855"></a>02855             <span class="keywordflow">if</span> (<span class="keyword">false</span> !== ($decorator = $this-&gt;<a class="code" href="class_zend___form.html#a15366634c307e792212e6535d2a19044">getDecorator</a>($decoratorName))) {
<a name="l02856"></a>02856                 $decorator-&gt;setElement($this);
<a name="l02857"></a>02857                 $seed = <span class="stringliteral">&#39;&#39;</span>;
<a name="l02858"></a>02858                 <span class="keywordflow">if</span> (0 &lt; <a class="code" href="class_zend___form.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>($args)) {
<a name="l02859"></a>02859                     $seed = array_shift($args);
<a name="l02860"></a>02860                 }
<a name="l02861"></a>02861                 <span class="keywordflow">return</span> $decorator-&gt;render($seed);
<a name="l02862"></a>02862             }
<a name="l02863"></a>02863 
<a name="l02864"></a>02864             require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l02865"></a>02865             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(sprintf(<span class="stringliteral">&#39;Decorator by name %s does not exist&#39;</span>, $decoratorName));
<a name="l02866"></a>02866         }
<a name="l02867"></a>02867 
<a name="l02868"></a>02868         require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l02869"></a>02869         <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(sprintf(<span class="stringliteral">&#39;Method %s does not exist&#39;</span>, $method));
<a name="l02870"></a>02870     }
<a name="l02871"></a>02871 
<a name="l02872"></a>02872     <span class="comment">// Interfaces: Iterator, Countable</span>
<a name="l02873"></a>02873 
<a name="l02879"></a><a class="code" href="class_zend___form.html#af343507d1926e6ecf964625d41db528c">02879</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#af343507d1926e6ecf964625d41db528c">current</a>()
<a name="l02880"></a>02880     {
<a name="l02881"></a>02881         $this-&gt;<a class="code" href="class_zend___form.html#aa383db51ee570e10369431b0b581d2a4">_sort</a>();
<a name="l02882"></a>02882         <a class="code" href="class_zend___form.html#af343507d1926e6ecf964625d41db528c">current</a>($this-&gt;_order);
<a name="l02883"></a>02883         $key = <a class="code" href="class_zend___form.html#a729e946b4ef600e71740113c6d4332c0">key</a>($this-&gt;_order);
<a name="l02884"></a>02884 
<a name="l02885"></a>02885         <span class="keywordflow">if</span> (isset($this-&gt;_elements[$key])) {
<a name="l02886"></a>02886             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a35128828cf351f086511607f767916b1">getElement</a>($key);
<a name="l02887"></a>02887         } elseif (isset($this-&gt;_subForms[$key])) {
<a name="l02888"></a>02888             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a8a11191a98f62faf1bb6c0bd3bdab781">getSubForm</a>($key);
<a name="l02889"></a>02889         } elseif (isset($this-&gt;_displayGroups[$key])) {
<a name="l02890"></a>02890             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___form.html#a5246c9416f3a6bb94f6025d44df39571">getDisplayGroup</a>($key);
<a name="l02891"></a>02891         } <span class="keywordflow">else</span> {
<a name="l02892"></a>02892             require_once <span class="stringliteral">&#39;Zend/Form/Exception.php&#39;</span>;
<a name="l02893"></a>02893             <span class="keywordflow">throw</span> <span class="keyword">new</span> Zend_Form_Exception(sprintf(<span class="stringliteral">&#39;Corruption detected in form; invalid key (&quot;%s&quot;) found in internal iterator&#39;</span>, (<span class="keywordtype">string</span>) $key));
<a name="l02894"></a>02894         }
<a name="l02895"></a>02895     }
<a name="l02896"></a>02896 
<a name="l02902"></a><a class="code" href="class_zend___form.html#a729e946b4ef600e71740113c6d4332c0">02902</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a729e946b4ef600e71740113c6d4332c0">key</a>()
<a name="l02903"></a>02903     {
<a name="l02904"></a>02904         $this-&gt;<a class="code" href="class_zend___form.html#aa383db51ee570e10369431b0b581d2a4">_sort</a>();
<a name="l02905"></a>02905         <span class="keywordflow">return</span> <a class="code" href="class_zend___form.html#a729e946b4ef600e71740113c6d4332c0">key</a>($this-&gt;_order);
<a name="l02906"></a>02906     }
<a name="l02907"></a>02907 
<a name="l02913"></a><a class="code" href="class_zend___form.html#acea62048bfee7b3cd80ed446c86fb78a">02913</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#acea62048bfee7b3cd80ed446c86fb78a">next</a>()
<a name="l02914"></a>02914     {
<a name="l02915"></a>02915         $this-&gt;<a class="code" href="class_zend___form.html#aa383db51ee570e10369431b0b581d2a4">_sort</a>();
<a name="l02916"></a>02916         <a class="code" href="class_zend___form.html#acea62048bfee7b3cd80ed446c86fb78a">next</a>($this-&gt;_order);
<a name="l02917"></a>02917     }
<a name="l02918"></a>02918 
<a name="l02924"></a><a class="code" href="class_zend___form.html#ae619dcf2218c21549cb65d875bbc6c9c">02924</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ae619dcf2218c21549cb65d875bbc6c9c">rewind</a>()
<a name="l02925"></a>02925     {
<a name="l02926"></a>02926         $this-&gt;<a class="code" href="class_zend___form.html#aa383db51ee570e10369431b0b581d2a4">_sort</a>();
<a name="l02927"></a>02927         <a class="code" href="class_zend___form.html#a4a20559544fdf4dcb457e258dc976cf8">reset</a>($this-&gt;_order);
<a name="l02928"></a>02928     }
<a name="l02929"></a>02929 
<a name="l02935"></a><a class="code" href="class_zend___form.html#abb9f0d6adf1eb9b3b55712056861a247">02935</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#abb9f0d6adf1eb9b3b55712056861a247">valid</a>()
<a name="l02936"></a>02936     {
<a name="l02937"></a>02937         $this-&gt;<a class="code" href="class_zend___form.html#aa383db51ee570e10369431b0b581d2a4">_sort</a>();
<a name="l02938"></a>02938         <span class="keywordflow">return</span> (<a class="code" href="class_zend___form.html#af343507d1926e6ecf964625d41db528c">current</a>($this-&gt;_order) !== <span class="keyword">false</span>);
<a name="l02939"></a>02939     }
<a name="l02940"></a>02940 
<a name="l02946"></a><a class="code" href="class_zend___form.html#ac751e87b3d4c4bf2feb03bee8b092755">02946</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>()
<a name="l02947"></a>02947     {
<a name="l02948"></a>02948         <span class="keywordflow">return</span> <a class="code" href="class_zend___form.html#ac751e87b3d4c4bf2feb03bee8b092755">count</a>($this-&gt;_order);
<a name="l02949"></a>02949     }
<a name="l02950"></a>02950 
<a name="l02957"></a><a class="code" href="class_zend___form.html#a7efbb68388e9c9b05caaa14a9c743bb9">02957</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a7efbb68388e9c9b05caaa14a9c743bb9">setDisableLoadDefaultDecorators</a>($flag)
<a name="l02958"></a>02958     {
<a name="l02959"></a>02959         $this-&gt;_disableLoadDefaultDecorators = (bool) $flag;
<a name="l02960"></a>02960         <span class="keywordflow">return</span> $this;
<a name="l02961"></a>02961     }
<a name="l02962"></a>02962 
<a name="l02968"></a><a class="code" href="class_zend___form.html#a2170597d8a19776393fabf4ddda10236">02968</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#a2170597d8a19776393fabf4ddda10236">loadDefaultDecoratorsIsDisabled</a>()
<a name="l02969"></a>02969     {
<a name="l02970"></a>02970         <span class="keywordflow">return</span> $this-&gt;_disableLoadDefaultDecorators;
<a name="l02971"></a>02971     }
<a name="l02972"></a>02972 
<a name="l02978"></a><a class="code" href="class_zend___form.html#aa9e0138685a7ef88f4f670e379e7cae3">02978</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___form.html#aa9e0138685a7ef88f4f670e379e7cae3">loadDefaultDecorators</a>()
<a name="l02979"></a>02979     {
<a name="l02980"></a>02980         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___form.html#a2170597d8a19776393fabf4ddda10236">loadDefaultDecoratorsIsDisabled</a>()) {
<a name="l02981"></a>02981             <span class="keywordflow">return</span>;
<a name="l02982"></a>02982         }
<a name="l02983"></a>02983 
<a name="l02984"></a>02984         $decorators = $this-&gt;<a class="code" href="class_zend___form.html#a14709784de42ac1565c64a09debb7db8">getDecorators</a>();
<a name="l02985"></a>02985         <span class="keywordflow">if</span> (empty($decorators)) {
<a name="l02986"></a>02986             $this-&gt;<a class="code" href="class_zend___form.html#a52126c33d89f43fc1e3e78e0dfe937af">addDecorator</a>(<span class="stringliteral">&#39;FormElements&#39;</span>)
<a name="l02987"></a>02987                  -&gt;addDecorator(<span class="stringliteral">&#39;HtmlTag&#39;</span>, array(<span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;dl&#39;</span>, <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;zend_form&#39;</span>))
<a name="l02988"></a>02988                  -&gt;addDecorator(<span class="stringliteral">&#39;Form&#39;</span>);
<a name="l02989"></a>02989         }
<a name="l02990"></a>02990     }
<a name="l02991"></a>02991 
<a name="l02997"></a><a class="code" href="class_zend___form.html#aa383db51ee570e10369431b0b581d2a4">02997</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___form.html#aa383db51ee570e10369431b0b581d2a4">_sort</a>()
<a name="l02998"></a>02998     {
<a name="l02999"></a>02999         <span class="keywordflow">if</span> ($this-&gt;_orderUpdated) {
<a name="l03000"></a>03000             $items = array();
<a name="l03001"></a>03001             $index = 0;
<a name="l03002"></a>03002             <span class="keywordflow">foreach</span> ($this-&gt;_order as $key =&gt; $order) {
<a name="l03003"></a>03003                 <span class="keywordflow">if</span> (null === $order) {
<a name="l03004"></a>03004                     <span class="keywordflow">if</span> (null === ($order = $this-&gt;{$key}-&gt;getOrder())) {
<a name="l03005"></a>03005                         <span class="keywordflow">while</span> (array_search($index, $this-&gt;_order, <span class="keyword">true</span>)) {
<a name="l03006"></a>03006                             ++$index;
<a name="l03007"></a>03007                         }
<a name="l03008"></a>03008                         $items[$index] = $key;
<a name="l03009"></a>03009                         ++$index;
<a name="l03010"></a>03010                     } <span class="keywordflow">else</span> {
<a name="l03011"></a>03011                         $items[$order] = $key;
<a name="l03012"></a>03012                     }
<a name="l03013"></a>03013                 } <span class="keywordflow">else</span> {
<a name="l03014"></a>03014                     $items[$order] = $key;
<a name="l03015"></a>03015                 }
<a name="l03016"></a>03016             }
<a name="l03017"></a>03017 
<a name="l03018"></a>03018             $items = array_flip($items);
<a name="l03019"></a>03019             asort($items);
<a name="l03020"></a>03020             $this-&gt;_order = $items;
<a name="l03021"></a>03021             $this-&gt;_orderUpdated = <span class="keyword">false</span>;
<a name="l03022"></a>03022         }
<a name="l03023"></a>03023     }
<a name="l03024"></a>03024 
<a name="l03032"></a><a class="code" href="class_zend___form.html#a144d69e80e5d3746d32e82bb5144eb07">03032</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___form.html#a144d69e80e5d3746d32e82bb5144eb07">_loadDecorator</a>(array $decorator, $name)
<a name="l03033"></a>03033     {
<a name="l03034"></a>03034         $sameName = <span class="keyword">false</span>;
<a name="l03035"></a>03035         <span class="keywordflow">if</span> ($name == $decorator[<span class="stringliteral">&#39;decorator&#39;</span>]) {
<a name="l03036"></a>03036             $sameName = <span class="keyword">true</span>;
<a name="l03037"></a>03037         }
<a name="l03038"></a>03038 
<a name="l03039"></a>03039         $instance = $this-&gt;<a class="code" href="class_zend___form.html#a9872cc115fbab24f0c3de7fed1e08726">_getDecorator</a>($decorator[<span class="stringliteral">&#39;decorator&#39;</span>], $decorator[<span class="stringliteral">&#39;options&#39;</span>]);
<a name="l03040"></a>03040         <span class="keywordflow">if</span> ($sameName) {
<a name="l03041"></a>03041             $newName            = get_class($instance);
<a name="l03042"></a>03042             $decoratorNames     = array_keys($this-&gt;_decorators);
<a name="l03043"></a>03043             $order              = array_flip($decoratorNames);
<a name="l03044"></a>03044             $order[$newName]    = $order[$name];
<a name="l03045"></a>03045             $decoratorsExchange = array();
<a name="l03046"></a>03046             unset($order[$name]);
<a name="l03047"></a>03047             asort($order);
<a name="l03048"></a>03048             <span class="keywordflow">foreach</span> ($order as $key =&gt; $index) {
<a name="l03049"></a>03049                 <span class="keywordflow">if</span> ($key == $newName) {
<a name="l03050"></a>03050                     $decoratorsExchange[$key] = $instance;
<a name="l03051"></a>03051                     <span class="keywordflow">continue</span>;
<a name="l03052"></a>03052                 }
<a name="l03053"></a>03053                 $decoratorsExchange[$key] = $this-&gt;_decorators[$key];
<a name="l03054"></a>03054             }
<a name="l03055"></a>03055             $this-&gt;_decorators = $decoratorsExchange;
<a name="l03056"></a>03056         } <span class="keywordflow">else</span> {
<a name="l03057"></a>03057             $this-&gt;_decorators[$name] = $instance;
<a name="l03058"></a>03058         }
<a name="l03059"></a>03059 
<a name="l03060"></a>03060         <span class="keywordflow">return</span> $instance;
<a name="l03061"></a>03061     }
<a name="l03062"></a>03062 
<a name="l03068"></a><a class="code" href="class_zend___form.html#a0fb3791c7a70f8911824df4a1176cdc5">03068</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___form.html#a0fb3791c7a70f8911824df4a1176cdc5">_getErrorMessages</a>()
<a name="l03069"></a>03069     {
<a name="l03070"></a>03070         $messages   = $this-&gt;<a class="code" href="class_zend___form.html#ade0940404502eeaa9a9881362094871a">getErrorMessages</a>();
<a name="l03071"></a>03071         $translator = $this-&gt;<a class="code" href="class_zend___form.html#a4b5bf5bf92166dc1c551fe8cfabfb5ae">getTranslator</a>();
<a name="l03072"></a>03072         <span class="keywordflow">if</span> (null !== $translator) {
<a name="l03073"></a>03073             <span class="keywordflow">foreach</span> ($messages as $key =&gt; $message) {
<a name="l03074"></a>03074                 $messages[$key] = $translator-&gt;translate($message);
<a name="l03075"></a>03075             }
<a name="l03076"></a>03076         }
<a name="l03077"></a>03077         <span class="keywordflow">return</span> $messages;
<a name="l03078"></a>03078     }
<a name="l03079"></a>03079 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Apr 19 2012 17:01:17 for openbiz by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
