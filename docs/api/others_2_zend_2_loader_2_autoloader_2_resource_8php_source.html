<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>openbiz: E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Loader/Autoloader/Resource.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Loader/Autoloader/Resource.php</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00024"></a>00024 require_once <span class="stringliteral">&#39;Zend/Loader/Autoloader/Interface.php&#39;</span>;
<a name="l00025"></a>00025 
<a name="l00035"></a><a class="code" href="class_zend___loader___autoloader___resource.html">00035</a> <span class="keyword">class </span><a class="code" href="class_zend___loader___autoloader___resource.html">Zend_Loader_Autoloader_Resource</a> <span class="keyword">implements</span> <a class="code" href="interface_zend___loader___autoloader___interface.html">Zend_Loader_Autoloader_Interface</a>
<a name="l00036"></a>00036 {
<a name="l00040"></a>00040     <span class="keyword">protected</span> $_basePath;
<a name="l00041"></a>00041 
<a name="l00045"></a>00045     <span class="keyword">protected</span> $_components = array();
<a name="l00046"></a>00046 
<a name="l00050"></a>00050     <span class="keyword">protected</span> $_defaultResourceType;
<a name="l00051"></a>00051 
<a name="l00055"></a>00055     <span class="keyword">protected</span> $_namespace;
<a name="l00056"></a>00056 
<a name="l00060"></a>00060     <span class="keyword">protected</span> $_resourceTypes = array();
<a name="l00061"></a>00061 
<a name="l00068"></a><a class="code" href="class_zend___loader___autoloader___resource.html#ae8b8e1144b807ac13f20a916fd073b32">00068</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#ae8b8e1144b807ac13f20a916fd073b32">__construct</a>($options)
<a name="l00069"></a>00069     {
<a name="l00070"></a>00070         <span class="keywordflow">if</span> ($options instanceof <a class="code" href="class_zend___config.html">Zend_Config</a>) {
<a name="l00071"></a>00071             $options = $options-&gt;toArray();
<a name="l00072"></a>00072         }
<a name="l00073"></a>00073         <span class="keywordflow">if</span> (!is_array($options)) {
<a name="l00074"></a>00074             require_once <span class="stringliteral">&#39;Zend/Loader/Exception.php&#39;</span>;
<a name="l00075"></a>00075             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;Options must be passed to resource loader constructor&#39;</span>);
<a name="l00076"></a>00076         }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078         $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#a673b5e9db470a52ea28b56a44e23e2d0">setOptions</a>($options);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080         $namespace = $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#a2614df64646ac71b70b1e1074258052b">getNamespace</a>();
<a name="l00081"></a>00081         <span class="keywordflow">if</span> ((null === $namespace)
<a name="l00082"></a>00082             || (null === $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#aaf4a9649667a3904fae19e9bd27ebd67">getBasePath</a>())
<a name="l00083"></a>00083         ) {
<a name="l00084"></a>00084             require_once <span class="stringliteral">&#39;Zend/Loader/Exception.php&#39;</span>;
<a name="l00085"></a>00085             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;Resource loader requires both a namespace and a base path for initialization&#39;</span>);
<a name="l00086"></a>00086         }
<a name="l00087"></a>00087 
<a name="l00088"></a>00088         <span class="keywordflow">if</span> (!empty($namespace)) {
<a name="l00089"></a>00089             $namespace .= <span class="charliteral">&#39;_&#39;</span>;
<a name="l00090"></a>00090         }
<a name="l00091"></a>00091         <a class="code" href="class_zend___loader___autoloader.html#ac93fbec81f07e5d15f80db907e63dc10">Zend_Loader_Autoloader::getInstance</a>()-&gt;unshiftAutoloader($this, $namespace);
<a name="l00092"></a>00092     }
<a name="l00093"></a>00093 
<a name="l00114"></a><a class="code" href="class_zend___loader___autoloader___resource.html#a9f1179240d068c94a040021326032bed">00114</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#a9f1179240d068c94a040021326032bed">__call</a>($method, $args)
<a name="l00115"></a>00115     {
<a name="l00116"></a>00116         <span class="keywordflow">if</span> (<span class="stringliteral">&#39;get&#39;</span> == substr($method, 0, 3)) {
<a name="l00117"></a>00117             $type  = strtolower(substr($method, 3));
<a name="l00118"></a>00118             <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#a8ccd2b93890c19cdefccade17fdf13e8">hasResourceType</a>($type)) {
<a name="l00119"></a>00119                 require_once <span class="stringliteral">&#39;Zend/Loader/Exception.php&#39;</span>;
<a name="l00120"></a>00120                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&quot;Invalid resource type $type; cannot load resource&quot;</span>);
<a name="l00121"></a>00121             }
<a name="l00122"></a>00122             <span class="keywordflow">if</span> (empty($args)) {
<a name="l00123"></a>00123                 require_once <span class="stringliteral">&#39;Zend/Loader/Exception.php&#39;</span>;
<a name="l00124"></a>00124                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&quot;Cannot load resources; no resource specified&quot;</span>);
<a name="l00125"></a>00125             }
<a name="l00126"></a>00126             $resource = array_shift($args);
<a name="l00127"></a>00127             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#ad89958b9648da3f24a63b866cb31ac54">load</a>($resource, $type);
<a name="l00128"></a>00128         }
<a name="l00129"></a>00129 
<a name="l00130"></a>00130         require_once <span class="stringliteral">&#39;Zend/Loader/Exception.php&#39;</span>;
<a name="l00131"></a>00131         <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&quot;Method &#39;$method&#39; is not supported&quot;</span>);
<a name="l00132"></a>00132     }
<a name="l00133"></a>00133 
<a name="l00140"></a><a class="code" href="class_zend___loader___autoloader___resource.html#a03148ab15ef9b5f81ca188327ebefb50">00140</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#a03148ab15ef9b5f81ca188327ebefb50">getClassPath</a>($class)
<a name="l00141"></a>00141     {
<a name="l00142"></a>00142         $segments          = explode(<span class="charliteral">&#39;_&#39;</span>, $class);
<a name="l00143"></a>00143         $namespaceTopLevel = $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#a2614df64646ac71b70b1e1074258052b">getNamespace</a>();
<a name="l00144"></a>00144         $namespace         = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146         <span class="keywordflow">if</span> (!empty($namespaceTopLevel)) {
<a name="l00147"></a>00147             $namespace = array_shift($segments);
<a name="l00148"></a>00148             <span class="keywordflow">if</span> ($namespace != $namespaceTopLevel) {
<a name="l00149"></a>00149                 <span class="comment">// wrong prefix? we&#39;re done</span>
<a name="l00150"></a>00150                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00151"></a>00151             }
<a name="l00152"></a>00152         }
<a name="l00153"></a>00153 
<a name="l00154"></a>00154         <span class="keywordflow">if</span> (count($segments) &lt; 2) {
<a name="l00155"></a>00155             <span class="comment">// assumes all resources have a component and class name, minimum</span>
<a name="l00156"></a>00156             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00157"></a>00157         }
<a name="l00158"></a>00158 
<a name="l00159"></a>00159         $final     = array_pop($segments);
<a name="l00160"></a>00160         $component = $namespace;
<a name="l00161"></a>00161         $lastMatch = <span class="keyword">false</span>;
<a name="l00162"></a>00162         <span class="keywordflow">do</span> {
<a name="l00163"></a>00163             $segment    = array_shift($segments);
<a name="l00164"></a>00164             $component .= empty($component) ? $segment : <span class="charliteral">&#39;_&#39;</span> . $segment;
<a name="l00165"></a>00165             <span class="keywordflow">if</span> (isset($this-&gt;_components[$component])) {
<a name="l00166"></a>00166                 $lastMatch = $component;
<a name="l00167"></a>00167             }
<a name="l00168"></a>00168         } <span class="keywordflow">while</span> (count($segments));
<a name="l00169"></a>00169 
<a name="l00170"></a>00170         <span class="keywordflow">if</span> (!$lastMatch) {
<a name="l00171"></a>00171             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00172"></a>00172         }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         $final = substr($class, strlen($lastMatch) + 1);
<a name="l00175"></a>00175         $path = $this-&gt;_components[$lastMatch];
<a name="l00176"></a>00176         $classPath = $path . <span class="charliteral">&#39;/&#39;</span> . str_replace(<span class="charliteral">&#39;_&#39;</span>, <span class="charliteral">&#39;/&#39;</span>, $final) . <span class="stringliteral">&#39;.php&#39;</span>;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178         <span class="keywordflow">if</span> (<a class="code" href="class_zend___loader.html#a994c67ffb8518bf6228fef12b47d6934">Zend_Loader::isReadable</a>($classPath)) {
<a name="l00179"></a>00179             <span class="keywordflow">return</span> $classPath;
<a name="l00180"></a>00180         }
<a name="l00181"></a>00181 
<a name="l00182"></a>00182         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184 
<a name="l00191"></a><a class="code" href="class_zend___loader___autoloader___resource.html#aad6cfb5484c7eda55731134910c7a280">00191</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#aad6cfb5484c7eda55731134910c7a280">autoload</a>($class)
<a name="l00192"></a>00192     {
<a name="l00193"></a>00193         $classPath = $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#a03148ab15ef9b5f81ca188327ebefb50">getClassPath</a>($class);
<a name="l00194"></a>00194         <span class="keywordflow">if</span> (<span class="keyword">false</span> !== $classPath) {
<a name="l00195"></a>00195             <span class="keywordflow">return</span> include $classPath;
<a name="l00196"></a>00196         }
<a name="l00197"></a>00197         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00198"></a>00198     }
<a name="l00199"></a>00199 
<a name="l00206"></a><a class="code" href="class_zend___loader___autoloader___resource.html#a673b5e9db470a52ea28b56a44e23e2d0">00206</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#a673b5e9db470a52ea28b56a44e23e2d0">setOptions</a>(array $options)
<a name="l00207"></a>00207     {
<a name="l00208"></a>00208         $methods = get_class_methods($this);
<a name="l00209"></a>00209         <span class="keywordflow">foreach</span> ($options as $key =&gt; $value) {
<a name="l00210"></a>00210             $method = <span class="stringliteral">&#39;set&#39;</span> . ucfirst($key);
<a name="l00211"></a>00211             <span class="keywordflow">if</span> (in_array($method, $methods)) {
<a name="l00212"></a>00212                 $this-&gt;$method($value);
<a name="l00213"></a>00213             }
<a name="l00214"></a>00214         }
<a name="l00215"></a>00215         <span class="keywordflow">return</span> $this;
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217 
<a name="l00224"></a><a class="code" href="class_zend___loader___autoloader___resource.html#a37949ed2c12b42fb654edc1bac8569ba">00224</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#a37949ed2c12b42fb654edc1bac8569ba">setNamespace</a>($namespace)
<a name="l00225"></a>00225     {
<a name="l00226"></a>00226         $this-&gt;_namespace = rtrim((<span class="keywordtype">string</span>) $namespace, <span class="charliteral">&#39;_&#39;</span>);
<a name="l00227"></a>00227         <span class="keywordflow">return</span> $this;
<a name="l00228"></a>00228     }
<a name="l00229"></a>00229 
<a name="l00235"></a><a class="code" href="class_zend___loader___autoloader___resource.html#a2614df64646ac71b70b1e1074258052b">00235</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#a2614df64646ac71b70b1e1074258052b">getNamespace</a>()
<a name="l00236"></a>00236     {
<a name="l00237"></a>00237         <span class="keywordflow">return</span> $this-&gt;_namespace;
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239 
<a name="l00246"></a><a class="code" href="class_zend___loader___autoloader___resource.html#a317e16be08edc5bc1297d0884d3ed5b1">00246</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#a317e16be08edc5bc1297d0884d3ed5b1">setBasePath</a>($path)
<a name="l00247"></a>00247     {
<a name="l00248"></a>00248         $this-&gt;_basePath = (string) $path;
<a name="l00249"></a>00249         <span class="keywordflow">return</span> $this;
<a name="l00250"></a>00250     }
<a name="l00251"></a>00251 
<a name="l00257"></a><a class="code" href="class_zend___loader___autoloader___resource.html#aaf4a9649667a3904fae19e9bd27ebd67">00257</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#aaf4a9649667a3904fae19e9bd27ebd67">getBasePath</a>()
<a name="l00258"></a>00258     {
<a name="l00259"></a>00259         <span class="keywordflow">return</span> $this-&gt;_basePath;
<a name="l00260"></a>00260     }
<a name="l00261"></a>00261 
<a name="l00270"></a><a class="code" href="class_zend___loader___autoloader___resource.html#aeb314acfeb0bc3275f3f19bc5e435222">00270</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#aeb314acfeb0bc3275f3f19bc5e435222">addResourceType</a>($type, $path, $namespace = null)
<a name="l00271"></a>00271     {
<a name="l00272"></a>00272         $type = strtolower($type);
<a name="l00273"></a>00273         <span class="keywordflow">if</span> (!isset($this-&gt;_resourceTypes[$type])) {
<a name="l00274"></a>00274             <span class="keywordflow">if</span> (null === $namespace) {
<a name="l00275"></a>00275                 require_once <span class="stringliteral">&#39;Zend/Loader/Exception.php&#39;</span>;
<a name="l00276"></a>00276                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;Initial definition of a resource type must include a namespace&#39;</span>);
<a name="l00277"></a>00277             }
<a name="l00278"></a>00278             $namespaceTopLevel = $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#a2614df64646ac71b70b1e1074258052b">getNamespace</a>();
<a name="l00279"></a>00279             $namespace = ucfirst(trim($namespace, <span class="charliteral">&#39;_&#39;</span>));
<a name="l00280"></a>00280             $this-&gt;_resourceTypes[$type] = array(
<a name="l00281"></a>00281                 <span class="stringliteral">&#39;namespace&#39;</span> =&gt; empty($namespaceTopLevel) ? $namespace : $namespaceTopLevel . <span class="charliteral">&#39;_&#39;</span> . $namespace,
<a name="l00282"></a>00282             );
<a name="l00283"></a>00283         }
<a name="l00284"></a>00284         <span class="keywordflow">if</span> (!is_string($path)) {
<a name="l00285"></a>00285             require_once <span class="stringliteral">&#39;Zend/Loader/Exception.php&#39;</span>;
<a name="l00286"></a>00286             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;Invalid path specification provided; must be string&#39;</span>);
<a name="l00287"></a>00287         }
<a name="l00288"></a>00288         $this-&gt;_resourceTypes[$type][<span class="stringliteral">&#39;path&#39;</span>] = $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#aaf4a9649667a3904fae19e9bd27ebd67">getBasePath</a>() . <span class="charliteral">&#39;/&#39;</span> . rtrim($path, <span class="charliteral">&#39;\/&#39;</span>);
<a name="l00289"></a>00289 
<a name="l00290"></a>00290         $component = $this-&gt;_resourceTypes[$type][<span class="stringliteral">&#39;namespace&#39;</span>];
<a name="l00291"></a>00291         $this-&gt;_components[$component] = $this-&gt;_resourceTypes[$type][<span class="stringliteral">&#39;path&#39;</span>];
<a name="l00292"></a>00292         <span class="keywordflow">return</span> $this;
<a name="l00293"></a>00293     }
<a name="l00294"></a>00294 
<a name="l00321"></a><a class="code" href="class_zend___loader___autoloader___resource.html#ac0175f6af1791678436f7bb8e119f1a0">00321</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#ac0175f6af1791678436f7bb8e119f1a0">addResourceTypes</a>(array $types)
<a name="l00322"></a>00322     {
<a name="l00323"></a>00323         <span class="keywordflow">foreach</span> ($types as $type =&gt; $spec) {
<a name="l00324"></a>00324             <span class="keywordflow">if</span> (!is_array($spec)) {
<a name="l00325"></a>00325                 require_once <span class="stringliteral">&#39;Zend/Loader/Exception.php&#39;</span>;
<a name="l00326"></a>00326                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;addResourceTypes() expects an array of arrays&#39;</span>);
<a name="l00327"></a>00327             }
<a name="l00328"></a>00328             <span class="keywordflow">if</span> (!isset($spec[<span class="stringliteral">&#39;path&#39;</span>])) {
<a name="l00329"></a>00329                 require_once <span class="stringliteral">&#39;Zend/Loader/Exception.php&#39;</span>;
<a name="l00330"></a>00330                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;addResourceTypes() expects each array to include a paths element&#39;</span>);
<a name="l00331"></a>00331             }
<a name="l00332"></a>00332             $paths  = $spec[<span class="stringliteral">&#39;path&#39;</span>];
<a name="l00333"></a>00333             $namespace = null;
<a name="l00334"></a>00334             <span class="keywordflow">if</span> (isset($spec[<span class="stringliteral">&#39;namespace&#39;</span>])) {
<a name="l00335"></a>00335                 $namespace = $spec[<span class="stringliteral">&#39;namespace&#39;</span>];
<a name="l00336"></a>00336             }
<a name="l00337"></a>00337             $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#aeb314acfeb0bc3275f3f19bc5e435222">addResourceType</a>($type, $paths, $namespace);
<a name="l00338"></a>00338         }
<a name="l00339"></a>00339         <span class="keywordflow">return</span> $this;
<a name="l00340"></a>00340     }
<a name="l00341"></a>00341 
<a name="l00349"></a><a class="code" href="class_zend___loader___autoloader___resource.html#abbc506a36b02bd575ae2a6c9701a2a60">00349</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#abbc506a36b02bd575ae2a6c9701a2a60">setResourceTypes</a>(array $types)
<a name="l00350"></a>00350     {
<a name="l00351"></a>00351         $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#a8feae95700e4470473696a8223d9f128">clearResourceTypes</a>();
<a name="l00352"></a>00352         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#ac0175f6af1791678436f7bb8e119f1a0">addResourceTypes</a>($types);
<a name="l00353"></a>00353     }
<a name="l00354"></a>00354 
<a name="l00360"></a><a class="code" href="class_zend___loader___autoloader___resource.html#a523395ca2d7ff5d93eb6f52c383a199a">00360</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#a523395ca2d7ff5d93eb6f52c383a199a">getResourceTypes</a>()
<a name="l00361"></a>00361     {
<a name="l00362"></a>00362         <span class="keywordflow">return</span> $this-&gt;_resourceTypes;
<a name="l00363"></a>00363     }
<a name="l00364"></a>00364 
<a name="l00371"></a><a class="code" href="class_zend___loader___autoloader___resource.html#a8ccd2b93890c19cdefccade17fdf13e8">00371</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#a8ccd2b93890c19cdefccade17fdf13e8">hasResourceType</a>($type)
<a name="l00372"></a>00372     {
<a name="l00373"></a>00373         <span class="keywordflow">return</span> isset($this-&gt;_resourceTypes[$type]);
<a name="l00374"></a>00374     }
<a name="l00375"></a>00375 
<a name="l00382"></a><a class="code" href="class_zend___loader___autoloader___resource.html#a28b9b4b2562bca7ff9e31d0780b53aef">00382</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#a28b9b4b2562bca7ff9e31d0780b53aef">removeResourceType</a>($type)
<a name="l00383"></a>00383     {
<a name="l00384"></a>00384         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#a8ccd2b93890c19cdefccade17fdf13e8">hasResourceType</a>($type)) {
<a name="l00385"></a>00385             $namespace = $this-&gt;_resourceTypes[$type][<span class="stringliteral">&#39;namespace&#39;</span>];
<a name="l00386"></a>00386             unset($this-&gt;_components[$namespace]);
<a name="l00387"></a>00387             unset($this-&gt;_resourceTypes[$type]);
<a name="l00388"></a>00388         }
<a name="l00389"></a>00389         <span class="keywordflow">return</span> $this;
<a name="l00390"></a>00390     }
<a name="l00391"></a>00391 
<a name="l00397"></a><a class="code" href="class_zend___loader___autoloader___resource.html#a8feae95700e4470473696a8223d9f128">00397</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#a8feae95700e4470473696a8223d9f128">clearResourceTypes</a>()
<a name="l00398"></a>00398     {
<a name="l00399"></a>00399         $this-&gt;_resourceTypes = array();
<a name="l00400"></a>00400         $this-&gt;_components    = array();
<a name="l00401"></a>00401         <span class="keywordflow">return</span> $this;
<a name="l00402"></a>00402     }
<a name="l00403"></a>00403 
<a name="l00410"></a><a class="code" href="class_zend___loader___autoloader___resource.html#ab3feb7fd85bd91cbc33c3f9dd86c1264">00410</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#ab3feb7fd85bd91cbc33c3f9dd86c1264">setDefaultResourceType</a>($type)
<a name="l00411"></a>00411     {
<a name="l00412"></a>00412         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#a8ccd2b93890c19cdefccade17fdf13e8">hasResourceType</a>($type)) {
<a name="l00413"></a>00413             $this-&gt;_defaultResourceType = $type;
<a name="l00414"></a>00414         }
<a name="l00415"></a>00415         <span class="keywordflow">return</span> $this;
<a name="l00416"></a>00416     }
<a name="l00417"></a>00417 
<a name="l00423"></a><a class="code" href="class_zend___loader___autoloader___resource.html#a00b38c6929ea039130b21290cab5733f">00423</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#a00b38c6929ea039130b21290cab5733f">getDefaultResourceType</a>()
<a name="l00424"></a>00424     {
<a name="l00425"></a>00425         <span class="keywordflow">return</span> $this-&gt;_defaultResourceType;
<a name="l00426"></a>00426     }
<a name="l00427"></a>00427 
<a name="l00440"></a><a class="code" href="class_zend___loader___autoloader___resource.html#ad89958b9648da3f24a63b866cb31ac54">00440</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader___resource.html#ad89958b9648da3f24a63b866cb31ac54">load</a>($resource, $type = null)
<a name="l00441"></a>00441     {
<a name="l00442"></a>00442         <span class="keywordflow">if</span> (null === $type) {
<a name="l00443"></a>00443             $type = $this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#a00b38c6929ea039130b21290cab5733f">getDefaultResourceType</a>();
<a name="l00444"></a>00444             <span class="keywordflow">if</span> (empty($type)) {
<a name="l00445"></a>00445                 require_once <span class="stringliteral">&#39;Zend/Loader/Exception.php&#39;</span>;
<a name="l00446"></a>00446                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;No resource type specified&#39;</span>);
<a name="l00447"></a>00447             }
<a name="l00448"></a>00448         }
<a name="l00449"></a>00449         <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="class_zend___loader___autoloader___resource.html#a8ccd2b93890c19cdefccade17fdf13e8">hasResourceType</a>($type)) {
<a name="l00450"></a>00450             require_once <span class="stringliteral">&#39;Zend/Loader/Exception.php&#39;</span>;
<a name="l00451"></a>00451             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;Invalid resource type specified&#39;</span>);
<a name="l00452"></a>00452         }
<a name="l00453"></a>00453         $namespace = $this-&gt;_resourceTypes[$type][<span class="stringliteral">&#39;namespace&#39;</span>];
<a name="l00454"></a>00454         $class     = $namespace . <span class="charliteral">&#39;_&#39;</span> . ucfirst($resource);
<a name="l00455"></a>00455         <span class="keywordflow">if</span> (!isset($this-&gt;_resources[$class])) {
<a name="l00456"></a>00456             $this-&gt;_resources[$class] = <span class="keyword">new</span> $class;
<a name="l00457"></a>00457         }
<a name="l00458"></a>00458         <span class="keywordflow">return</span> $this-&gt;_resources[$class];
<a name="l00459"></a>00459     }
<a name="l00460"></a>00460 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Apr 19 2012 17:01:16 for openbiz by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
