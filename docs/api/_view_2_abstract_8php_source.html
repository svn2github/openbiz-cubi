<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>openbiz: E:/E/GEAMP/www/openbiz/openbiz/others/Zend/View/Abstract.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>E:/E/GEAMP/www/openbiz/openbiz/others/Zend/View/Abstract.php</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00023"></a>00023 require_once <span class="stringliteral">&#39;Zend/Loader.php&#39;</span>;
<a name="l00024"></a>00024 
<a name="l00026"></a>00026 require_once <span class="stringliteral">&#39;Zend/Loader/PluginLoader.php&#39;</span>;
<a name="l00027"></a>00027 
<a name="l00029"></a>00029 require_once <span class="stringliteral">&#39;Zend/View/Interface.php&#39;</span>;
<a name="l00030"></a>00030 
<a name="l00039"></a><a class="code" href="class_zend___view___abstract.html">00039</a> <span class="keyword">abstract</span> <span class="keyword">class </span><a class="code" href="class_zend___view___abstract.html">Zend_View_Abstract</a> <span class="keyword">implements</span> <a class="code" href="interface_zend___view___interface.html">Zend_View_Interface</a>
<a name="l00040"></a>00040 {
<a name="l00046"></a>00046     <span class="keyword">private</span> $_path = array(
<a name="l00047"></a>00047         <span class="stringliteral">&#39;script&#39;</span> =&gt; array(),
<a name="l00048"></a>00048         <span class="stringliteral">&#39;helper&#39;</span> =&gt; array(),
<a name="l00049"></a>00049         <span class="stringliteral">&#39;filter&#39;</span> =&gt; array(),
<a name="l00050"></a>00050     );
<a name="l00051"></a>00051 
<a name="l00057"></a>00057     <span class="keyword">private</span> $_file = null;
<a name="l00058"></a>00058 
<a name="l00064"></a>00064     <span class="keyword">private</span> $_helper = array();
<a name="l00065"></a>00065 
<a name="l00071"></a>00071     <span class="keyword">private</span> $_helperLoaded = array();
<a name="l00072"></a>00072 
<a name="l00077"></a>00077     <span class="keyword">private</span> $_helperLoadedDir = array();
<a name="l00078"></a>00078 
<a name="l00083"></a>00083     <span class="keyword">private</span> $_filter = array();
<a name="l00084"></a>00084 
<a name="l00089"></a>00089     <span class="keyword">private</span> $_filterClass = array();
<a name="l00090"></a>00090 
<a name="l00096"></a>00096     <span class="keyword">private</span> $_filterLoaded = array();
<a name="l00097"></a>00097 
<a name="l00102"></a>00102     <span class="keyword">private</span> $_filterLoadedDir = array();
<a name="l00103"></a>00103 
<a name="l00109"></a>00109     <span class="keyword">private</span> $_escape = <span class="stringliteral">&#39;htmlspecialchars&#39;</span>;
<a name="l00110"></a>00110 
<a name="l00115"></a>00115     <span class="keyword">private</span> $_encoding = <span class="stringliteral">&#39;UTF-8&#39;</span>;
<a name="l00116"></a>00116 
<a name="l00121"></a>00121     <span class="keyword">private</span> $_lfiProtectionOn = <span class="keyword">true</span>;
<a name="l00122"></a>00122 
<a name="l00127"></a>00127     <span class="keyword">private</span> $_loaders = array();
<a name="l00128"></a>00128 
<a name="l00133"></a>00133     <span class="keyword">private</span> $_loaderTypes = array(<span class="stringliteral">&#39;filter&#39;</span>, <span class="stringliteral">&#39;helper&#39;</span>);
<a name="l00134"></a>00134 
<a name="l00140"></a>00140     <span class="keyword">private</span> $_strictVars = <span class="keyword">false</span>;
<a name="l00141"></a>00141 
<a name="l00147"></a><a class="code" href="class_zend___view___abstract.html#af7f9493844d2d66e924e3c1df51ce616">00147</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#af7f9493844d2d66e924e3c1df51ce616">__construct</a>($config = array())
<a name="l00148"></a>00148     {
<a name="l00149"></a>00149         <span class="comment">// set inital paths and properties</span>
<a name="l00150"></a>00150         $this-&gt;<a class="code" href="class_zend___view___abstract.html#a33cf4a3b05087e1e0629071fc6f4b842">setScriptPath</a>(null);
<a name="l00151"></a>00151 
<a name="l00152"></a>00152         <span class="comment">// $this-&gt;setHelperPath(null);</span>
<a name="l00153"></a>00153         $this-&gt;<a class="code" href="class_zend___view___abstract.html#abce1020a9d296859d16d2b9f9664fcfc">setFilterPath</a>(null);
<a name="l00154"></a>00154 
<a name="l00155"></a>00155         <span class="comment">// user-defined escaping callback</span>
<a name="l00156"></a>00156         <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;escape&#39;</span>, $config)) {
<a name="l00157"></a>00157             $this-&gt;<a class="code" href="class_zend___view___abstract.html#ac2e2ff2b1ae547ed44cf59fc0b8769db">setEscape</a>($config[<span class="stringliteral">&#39;escape&#39;</span>]);
<a name="l00158"></a>00158         }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160         <span class="comment">// encoding</span>
<a name="l00161"></a>00161         <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;encoding&#39;</span>, $config)) {
<a name="l00162"></a>00162             $this-&gt;<a class="code" href="class_zend___view___abstract.html#a8742b6ed0b5341136f00d42ec3864fd6">setEncoding</a>($config[<span class="stringliteral">&#39;encoding&#39;</span>]);
<a name="l00163"></a>00163         }
<a name="l00164"></a>00164 
<a name="l00165"></a>00165         <span class="comment">// base path</span>
<a name="l00166"></a>00166         <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;basePath&#39;</span>, $config)) {
<a name="l00167"></a>00167             $prefix = <span class="stringliteral">&#39;Zend_View&#39;</span>;
<a name="l00168"></a>00168             <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;basePathPrefix&#39;</span>, $config)) {
<a name="l00169"></a>00169                 $prefix = $config[<span class="stringliteral">&#39;basePathPrefix&#39;</span>];
<a name="l00170"></a>00170             }
<a name="l00171"></a>00171             $this-&gt;<a class="code" href="class_zend___view___abstract.html#a0ddd9d3c8baafc616f55a25f06ac3df4">setBasePath</a>($config[<span class="stringliteral">&#39;basePath&#39;</span>], $prefix);
<a name="l00172"></a>00172         }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         <span class="comment">// user-defined view script path</span>
<a name="l00175"></a>00175         <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;scriptPath&#39;</span>, $config)) {
<a name="l00176"></a>00176             $this-&gt;<a class="code" href="class_zend___view___abstract.html#a7251f5a4c3d7085c3e9579094324b3ff">addScriptPath</a>($config[<span class="stringliteral">&#39;scriptPath&#39;</span>]);
<a name="l00177"></a>00177         }
<a name="l00178"></a>00178 
<a name="l00179"></a>00179         <span class="comment">// user-defined helper path</span>
<a name="l00180"></a>00180         <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;helperPath&#39;</span>, $config)) {
<a name="l00181"></a>00181             <span class="keywordflow">if</span> (is_array($config[<span class="stringliteral">&#39;helperPath&#39;</span>])) {
<a name="l00182"></a>00182                 <span class="keywordflow">foreach</span> ($config[<span class="stringliteral">&#39;helperPath&#39;</span>] as $prefix =&gt; $path) {
<a name="l00183"></a>00183                     $this-&gt;<a class="code" href="class_zend___view___abstract.html#a58714df13d8ccb2cfb5cc02cb806699c">addHelperPath</a>($path, $prefix);
<a name="l00184"></a>00184                 }
<a name="l00185"></a>00185             } <span class="keywordflow">else</span> {
<a name="l00186"></a>00186                 $prefix = <span class="stringliteral">&#39;Zend_View_Helper&#39;</span>;
<a name="l00187"></a>00187                 <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;helperPathPrefix&#39;</span>, $config)) {
<a name="l00188"></a>00188                     $prefix = $config[<span class="stringliteral">&#39;helperPathPrefix&#39;</span>];
<a name="l00189"></a>00189                 }
<a name="l00190"></a>00190                 $this-&gt;<a class="code" href="class_zend___view___abstract.html#a58714df13d8ccb2cfb5cc02cb806699c">addHelperPath</a>($config[<span class="stringliteral">&#39;helperPath&#39;</span>], $prefix);
<a name="l00191"></a>00191             }
<a name="l00192"></a>00192         }
<a name="l00193"></a>00193 
<a name="l00194"></a>00194         <span class="comment">// user-defined filter path</span>
<a name="l00195"></a>00195         <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;filterPath&#39;</span>, $config)) {
<a name="l00196"></a>00196             <span class="keywordflow">if</span> (is_array($config[<span class="stringliteral">&#39;filterPath&#39;</span>])) {
<a name="l00197"></a>00197                 <span class="keywordflow">foreach</span> ($config[<span class="stringliteral">&#39;filterPath&#39;</span>] as $prefix =&gt; $path) {
<a name="l00198"></a>00198                     $this-&gt;<a class="code" href="class_zend___view___abstract.html#ac6b3745a094fe7aa760c55dcd2273556">addFilterPath</a>($path, $prefix);
<a name="l00199"></a>00199                 }
<a name="l00200"></a>00200             } <span class="keywordflow">else</span> {
<a name="l00201"></a>00201                 $prefix = <span class="stringliteral">&#39;Zend_View_Filter&#39;</span>;
<a name="l00202"></a>00202                 <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;filterPathPrefix&#39;</span>, $config)) {
<a name="l00203"></a>00203                     $prefix = $config[<span class="stringliteral">&#39;filterPathPrefix&#39;</span>];
<a name="l00204"></a>00204                 }
<a name="l00205"></a>00205                 $this-&gt;<a class="code" href="class_zend___view___abstract.html#ac6b3745a094fe7aa760c55dcd2273556">addFilterPath</a>($config[<span class="stringliteral">&#39;filterPath&#39;</span>], $prefix);
<a name="l00206"></a>00206             }
<a name="l00207"></a>00207         }
<a name="l00208"></a>00208 
<a name="l00209"></a>00209         <span class="comment">// user-defined filters</span>
<a name="l00210"></a>00210         <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;filter&#39;</span>, $config)) {
<a name="l00211"></a>00211             $this-&gt;<a class="code" href="class_zend___view___abstract.html#aecb6b6e0124b699329d11a3fd4573b7e">addFilter</a>($config[<span class="stringliteral">&#39;filter&#39;</span>]);
<a name="l00212"></a>00212         }
<a name="l00213"></a>00213 
<a name="l00214"></a>00214         <span class="comment">// strict vars</span>
<a name="l00215"></a>00215         <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;strictVars&#39;</span>, $config)) {
<a name="l00216"></a>00216             $this-&gt;<a class="code" href="class_zend___view___abstract.html#a8d70b8e4f85a7037e7a6bc5e3482ef35">strictVars</a>($config[<span class="stringliteral">&#39;strictVars&#39;</span>]);
<a name="l00217"></a>00217         }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         <span class="comment">// LFI protection flag</span>
<a name="l00220"></a>00220         <span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;lfiProtectionOn&#39;</span>, $config)) {
<a name="l00221"></a>00221             $this-&gt;<a class="code" href="class_zend___view___abstract.html#a255cb45d594a52c7848cd27c47553f01">setLfiProtection</a>($config[<span class="stringliteral">&#39;lfiProtectionOn&#39;</span>]);
<a name="l00222"></a>00222         }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224         $this-&gt;<a class="code" href="class_zend___view___abstract.html#a4be4055f3361d4800e16bc2e2e38cda6">init</a>();
<a name="l00225"></a>00225     }
<a name="l00226"></a>00226 
<a name="l00234"></a><a class="code" href="class_zend___view___abstract.html#aeb060f55c1b9b700005ae80d2d627654">00234</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#aeb060f55c1b9b700005ae80d2d627654">getEngine</a>()
<a name="l00235"></a>00235     {
<a name="l00236"></a>00236         <span class="keywordflow">return</span> $this;
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238 
<a name="l00247"></a><a class="code" href="class_zend___view___abstract.html#a4be4055f3361d4800e16bc2e2e38cda6">00247</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a4be4055f3361d4800e16bc2e2e38cda6">init</a>()
<a name="l00248"></a>00248     {
<a name="l00249"></a>00249     }
<a name="l00250"></a>00250 
<a name="l00259"></a><a class="code" href="class_zend___view___abstract.html#a4537dad3b44254124991341cc91b28fb">00259</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a4537dad3b44254124991341cc91b28fb">__get</a>($key)
<a name="l00260"></a>00260     {
<a name="l00261"></a>00261         <span class="keywordflow">if</span> ($this-&gt;_strictVars) {
<a name="l00262"></a>00262             trigger_error(<span class="stringliteral">&#39;Key &quot;&#39;</span> . $key . <span class="stringliteral">&#39;&quot; does not exist&#39;</span>, E_USER_NOTICE);
<a name="l00263"></a>00263         }
<a name="l00264"></a>00264 
<a name="l00265"></a>00265         <span class="keywordflow">return</span> null;
<a name="l00266"></a>00266     }
<a name="l00267"></a>00267 
<a name="l00275"></a><a class="code" href="class_zend___view___abstract.html#ae858fed7cd2822fbceac154138b68baa">00275</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#ae858fed7cd2822fbceac154138b68baa">__isset</a>($key)
<a name="l00276"></a>00276     {
<a name="l00277"></a>00277         <span class="keywordflow">if</span> (<span class="charliteral">&#39;_&#39;</span> != substr($key, 0, 1)) {
<a name="l00278"></a>00278             <span class="keywordflow">return</span> isset($this-&gt;$key);
<a name="l00279"></a>00279         }
<a name="l00280"></a>00280 
<a name="l00281"></a>00281         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00282"></a>00282     }
<a name="l00283"></a>00283 
<a name="l00297"></a><a class="code" href="class_zend___view___abstract.html#ae5e0d9ea041c1957ef04189b0b29657c">00297</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#ae5e0d9ea041c1957ef04189b0b29657c">__set</a>($key, $val)
<a name="l00298"></a>00298     {
<a name="l00299"></a>00299         <span class="keywordflow">if</span> (<span class="charliteral">&#39;_&#39;</span> != substr($key, 0, 1)) {
<a name="l00300"></a>00300             $this-&gt;$key = $val;
<a name="l00301"></a>00301             <span class="keywordflow">return</span>;
<a name="l00302"></a>00302         }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304         require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l00305"></a>00305         <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(<span class="stringliteral">&#39;Setting private or protected class members is not allowed&#39;</span>, $this);
<a name="l00306"></a>00306     }
<a name="l00307"></a>00307 
<a name="l00314"></a><a class="code" href="class_zend___view___abstract.html#a41af7dd29c879b4c30978876ebdf4ba7">00314</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a41af7dd29c879b4c30978876ebdf4ba7">__unset</a>($key)
<a name="l00315"></a>00315     {
<a name="l00316"></a>00316         <span class="keywordflow">if</span> (<span class="charliteral">&#39;_&#39;</span> != substr($key, 0, 1) &amp;&amp; isset($this-&gt;$key)) {
<a name="l00317"></a>00317             unset($this-&gt;$key);
<a name="l00318"></a>00318         }
<a name="l00319"></a>00319     }
<a name="l00320"></a>00320 
<a name="l00331"></a><a class="code" href="class_zend___view___abstract.html#af231e86ad32039b9573ae228db5a29fa">00331</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#af231e86ad32039b9573ae228db5a29fa">__call</a>($name, $args)
<a name="l00332"></a>00332     {
<a name="l00333"></a>00333         <span class="comment">// is the helper already loaded?</span>
<a name="l00334"></a>00334         $helper = $this-&gt;<a class="code" href="class_zend___view___abstract.html#aac754e69de0422d173417a192292d134">getHelper</a>($name);
<a name="l00335"></a>00335 
<a name="l00336"></a>00336         <span class="comment">// call the helper method</span>
<a name="l00337"></a>00337         <span class="keywordflow">return</span> call_user_func_array(
<a name="l00338"></a>00338             array($helper, $name),
<a name="l00339"></a>00339             $args
<a name="l00340"></a>00340         );
<a name="l00341"></a>00341     }
<a name="l00342"></a>00342 
<a name="l00358"></a><a class="code" href="class_zend___view___abstract.html#a0ddd9d3c8baafc616f55a25f06ac3df4">00358</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a0ddd9d3c8baafc616f55a25f06ac3df4">setBasePath</a>($path, $classPrefix = <span class="stringliteral">&#39;Zend_View&#39;</span>)
<a name="l00359"></a>00359     {
<a name="l00360"></a>00360         $path        = rtrim($path, <span class="charliteral">&#39;/&#39;</span>);
<a name="l00361"></a>00361         $path        = rtrim($path, <span class="charliteral">&#39;\\&#39;</span>);
<a name="l00362"></a>00362         $path       .= DIRECTORY_SEPARATOR;
<a name="l00363"></a>00363         $classPrefix = rtrim($classPrefix, <span class="charliteral">&#39;_&#39;</span>) . <span class="charliteral">&#39;_&#39;</span>;
<a name="l00364"></a>00364         $this-&gt;<a class="code" href="class_zend___view___abstract.html#a33cf4a3b05087e1e0629071fc6f4b842">setScriptPath</a>($path . <span class="stringliteral">&#39;scripts&#39;</span>);
<a name="l00365"></a>00365         $this-&gt;<a class="code" href="class_zend___view___abstract.html#ae7e27d174ca9559d249cff4919a76912">setHelperPath</a>($path . <span class="stringliteral">&#39;helpers&#39;</span>, $classPrefix . <span class="stringliteral">&#39;Helper&#39;</span>);
<a name="l00366"></a>00366         $this-&gt;<a class="code" href="class_zend___view___abstract.html#abce1020a9d296859d16d2b9f9664fcfc">setFilterPath</a>($path . <span class="stringliteral">&#39;filters&#39;</span>, $classPrefix . <span class="stringliteral">&#39;Filter&#39;</span>);
<a name="l00367"></a>00367         <span class="keywordflow">return</span> $this;
<a name="l00368"></a>00368     }
<a name="l00369"></a>00369 
<a name="l00385"></a><a class="code" href="class_zend___view___abstract.html#a3e6f2f2ee382d6ef60472db0c7136ff4">00385</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a3e6f2f2ee382d6ef60472db0c7136ff4">addBasePath</a>($path, $classPrefix = <span class="stringliteral">&#39;Zend_View&#39;</span>)
<a name="l00386"></a>00386     {
<a name="l00387"></a>00387         $path        = rtrim($path, <span class="charliteral">&#39;/&#39;</span>);
<a name="l00388"></a>00388         $path        = rtrim($path, <span class="charliteral">&#39;\\&#39;</span>);
<a name="l00389"></a>00389         $path       .= DIRECTORY_SEPARATOR;
<a name="l00390"></a>00390         $classPrefix = rtrim($classPrefix, <span class="charliteral">&#39;_&#39;</span>) . <span class="charliteral">&#39;_&#39;</span>;
<a name="l00391"></a>00391         $this-&gt;<a class="code" href="class_zend___view___abstract.html#a7251f5a4c3d7085c3e9579094324b3ff">addScriptPath</a>($path . <span class="stringliteral">&#39;scripts&#39;</span>);
<a name="l00392"></a>00392         $this-&gt;<a class="code" href="class_zend___view___abstract.html#a58714df13d8ccb2cfb5cc02cb806699c">addHelperPath</a>($path . <span class="stringliteral">&#39;helpers&#39;</span>, $classPrefix . <span class="stringliteral">&#39;Helper&#39;</span>);
<a name="l00393"></a>00393         $this-&gt;<a class="code" href="class_zend___view___abstract.html#ac6b3745a094fe7aa760c55dcd2273556">addFilterPath</a>($path . <span class="stringliteral">&#39;filters&#39;</span>, $classPrefix . <span class="stringliteral">&#39;Filter&#39;</span>);
<a name="l00394"></a>00394         <span class="keywordflow">return</span> $this;
<a name="l00395"></a>00395     }
<a name="l00396"></a>00396 
<a name="l00403"></a><a class="code" href="class_zend___view___abstract.html#a7251f5a4c3d7085c3e9579094324b3ff">00403</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a7251f5a4c3d7085c3e9579094324b3ff">addScriptPath</a>($path)
<a name="l00404"></a>00404     {
<a name="l00405"></a>00405         $this-&gt;_addPath(<span class="stringliteral">&#39;script&#39;</span>, $path);
<a name="l00406"></a>00406         <span class="keywordflow">return</span> $this;
<a name="l00407"></a>00407     }
<a name="l00408"></a>00408 
<a name="l00417"></a><a class="code" href="class_zend___view___abstract.html#a33cf4a3b05087e1e0629071fc6f4b842">00417</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a33cf4a3b05087e1e0629071fc6f4b842">setScriptPath</a>($path)
<a name="l00418"></a>00418     {
<a name="l00419"></a>00419         $this-&gt;_path[<span class="stringliteral">&#39;script&#39;</span>] = array();
<a name="l00420"></a>00420         $this-&gt;_addPath(<span class="stringliteral">&#39;script&#39;</span>, $path);
<a name="l00421"></a>00421         <span class="keywordflow">return</span> $this;
<a name="l00422"></a>00422     }
<a name="l00423"></a>00423 
<a name="l00431"></a><a class="code" href="class_zend___view___abstract.html#a3e49e89e1071c28cda1bf2a5a84beee2">00431</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a3e49e89e1071c28cda1bf2a5a84beee2">getScriptPath</a>($name)
<a name="l00432"></a>00432     {
<a name="l00433"></a>00433         <span class="keywordflow">try</span> {
<a name="l00434"></a>00434             $path = $this-&gt;<a class="code" href="class_zend___view___abstract.html#a324978fc900c703e12aa14b496fdf64b">_script</a>($name);
<a name="l00435"></a>00435             <span class="keywordflow">return</span> $path;
<a name="l00436"></a>00436         } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a> $e) {
<a name="l00437"></a>00437             <span class="keywordflow">if</span> (strstr($e-&gt;getMessage(), <span class="stringliteral">&#39;no view script directory set&#39;</span>)) {
<a name="l00438"></a>00438                 <span class="keywordflow">throw</span> $e;
<a name="l00439"></a>00439             }
<a name="l00440"></a>00440 
<a name="l00441"></a>00441             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00442"></a>00442         }
<a name="l00443"></a>00443     }
<a name="l00444"></a>00444 
<a name="l00450"></a><a class="code" href="class_zend___view___abstract.html#a4d9d6d824955c3f58106c2f5e43d9d3a">00450</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a4d9d6d824955c3f58106c2f5e43d9d3a">getScriptPaths</a>()
<a name="l00451"></a>00451     {
<a name="l00452"></a>00452         <span class="keywordflow">return</span> $this-&gt;_getPaths(<span class="stringliteral">&#39;script&#39;</span>);
<a name="l00453"></a>00453     }
<a name="l00454"></a>00454 
<a name="l00462"></a><a class="code" href="class_zend___view___abstract.html#a49fb50fd4b2c3244efe7f76ee220be54">00462</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a49fb50fd4b2c3244efe7f76ee220be54">setPluginLoader</a>(<a class="code" href="class_zend___loader___plugin_loader.html">Zend_Loader_PluginLoader</a> $loader, $type)
<a name="l00463"></a>00463     {
<a name="l00464"></a>00464         $type = strtolower($type);
<a name="l00465"></a>00465         <span class="keywordflow">if</span> (!in_array($type, $this-&gt;_loaderTypes)) {
<a name="l00466"></a>00466             require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l00467"></a>00467             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(sprintf(<span class="stringliteral">&#39;Invalid plugin loader type &quot;%s&quot;&#39;</span>, $type));
<a name="l00468"></a>00468         }
<a name="l00469"></a>00469 
<a name="l00470"></a>00470         $this-&gt;_loaders[$type] = $loader;
<a name="l00471"></a>00471         <span class="keywordflow">return</span> $this;
<a name="l00472"></a>00472     }
<a name="l00473"></a>00473 
<a name="l00480"></a><a class="code" href="class_zend___view___abstract.html#a8cef977c538a706861da485c357de860">00480</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a8cef977c538a706861da485c357de860">getPluginLoader</a>($type)
<a name="l00481"></a>00481     {
<a name="l00482"></a>00482         $type = strtolower($type);
<a name="l00483"></a>00483         <span class="keywordflow">if</span> (!in_array($type, $this-&gt;_loaderTypes)) {
<a name="l00484"></a>00484             require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l00485"></a>00485             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(sprintf(<span class="stringliteral">&#39;Invalid plugin loader type &quot;%s&quot;; cannot retrieve&#39;</span>, $type));
<a name="l00486"></a>00486         }
<a name="l00487"></a>00487 
<a name="l00488"></a>00488         <span class="keywordflow">if</span> (!array_key_exists($type, $this-&gt;_loaders)) {
<a name="l00489"></a>00489             $prefix     = <span class="stringliteral">&#39;Zend_View_&#39;</span>;
<a name="l00490"></a>00490             $pathPrefix = <span class="stringliteral">&#39;Zend/View/&#39;</span>;
<a name="l00491"></a>00491 
<a name="l00492"></a>00492             $pType = ucfirst($type);
<a name="l00493"></a>00493             <span class="keywordflow">switch</span> ($type) {
<a name="l00494"></a>00494                 <span class="keywordflow">case</span> <span class="stringliteral">&#39;filter&#39;</span>:
<a name="l00495"></a>00495                 <span class="keywordflow">case</span> <span class="stringliteral">&#39;helper&#39;</span>:
<a name="l00496"></a>00496                 <span class="keywordflow">default</span>:
<a name="l00497"></a>00497                     $prefix     .= $pType;
<a name="l00498"></a>00498                     $pathPrefix .= $pType;
<a name="l00499"></a>00499                     $loader = <span class="keyword">new</span> <a class="code" href="class_zend___loader___plugin_loader.html">Zend_Loader_PluginLoader</a>(array(
<a name="l00500"></a>00500                         $prefix =&gt; $pathPrefix
<a name="l00501"></a>00501                     ));
<a name="l00502"></a>00502                     $this-&gt;_loaders[$type] = $loader;
<a name="l00503"></a>00503                     <span class="keywordflow">break</span>;
<a name="l00504"></a>00504             }
<a name="l00505"></a>00505         }
<a name="l00506"></a>00506         <span class="keywordflow">return</span> $this-&gt;_loaders[$type];
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508 
<a name="l00517"></a><a class="code" href="class_zend___view___abstract.html#a58714df13d8ccb2cfb5cc02cb806699c">00517</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a58714df13d8ccb2cfb5cc02cb806699c">addHelperPath</a>($path, $classPrefix = <span class="stringliteral">&#39;Zend_View_Helper_&#39;</span>)
<a name="l00518"></a>00518     {
<a name="l00519"></a>00519         <span class="keywordflow">return</span> $this-&gt;_addPluginPath(<span class="stringliteral">&#39;helper&#39;</span>, $classPrefix, (array) $path);
<a name="l00520"></a>00520     }
<a name="l00521"></a>00521 
<a name="l00532"></a><a class="code" href="class_zend___view___abstract.html#ae7e27d174ca9559d249cff4919a76912">00532</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#ae7e27d174ca9559d249cff4919a76912">setHelperPath</a>($path, $classPrefix = <span class="stringliteral">&#39;Zend_View_Helper_&#39;</span>)
<a name="l00533"></a>00533     {
<a name="l00534"></a>00534         unset($this-&gt;_loaders[<span class="stringliteral">&#39;helper&#39;</span>]);
<a name="l00535"></a>00535         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___view___abstract.html#a58714df13d8ccb2cfb5cc02cb806699c">addHelperPath</a>($path, $classPrefix);
<a name="l00536"></a>00536     }
<a name="l00537"></a>00537 
<a name="l00544"></a><a class="code" href="class_zend___view___abstract.html#a65f9637a0aa97a35cdb1daa34166d9d2">00544</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a65f9637a0aa97a35cdb1daa34166d9d2">getHelperPath</a>($name)
<a name="l00545"></a>00545     {
<a name="l00546"></a>00546         <span class="keywordflow">return</span> $this-&gt;_getPluginPath(<span class="stringliteral">&#39;helper&#39;</span>, $name);
<a name="l00547"></a>00547     }
<a name="l00548"></a>00548 
<a name="l00554"></a><a class="code" href="class_zend___view___abstract.html#ac8fac2f39987b6b82f32b50b787080b5">00554</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#ac8fac2f39987b6b82f32b50b787080b5">getHelperPaths</a>()
<a name="l00555"></a>00555     {
<a name="l00556"></a>00556         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___view___abstract.html#a8cef977c538a706861da485c357de860">getPluginLoader</a>(<span class="stringliteral">&#39;helper&#39;</span>)-&gt;getPaths();
<a name="l00557"></a>00557     }
<a name="l00558"></a>00558 
<a name="l00565"></a><a class="code" href="class_zend___view___abstract.html#aac754e69de0422d173417a192292d134">00565</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#aac754e69de0422d173417a192292d134">getHelper</a>($name)
<a name="l00566"></a>00566     {
<a name="l00567"></a>00567         <span class="keywordflow">return</span> $this-&gt;_getPlugin(<span class="stringliteral">&#39;helper&#39;</span>, $name);
<a name="l00568"></a>00568     }
<a name="l00569"></a>00569 
<a name="l00577"></a><a class="code" href="class_zend___view___abstract.html#a1f7d4e6b69b7dc243264e407d2a965cf">00577</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a1f7d4e6b69b7dc243264e407d2a965cf">getHelpers</a>()
<a name="l00578"></a>00578     {
<a name="l00579"></a>00579         <span class="keywordflow">return</span> $this-&gt;_helper;
<a name="l00580"></a>00580     }
<a name="l00581"></a>00581 
<a name="l00590"></a><a class="code" href="class_zend___view___abstract.html#ac6b3745a094fe7aa760c55dcd2273556">00590</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#ac6b3745a094fe7aa760c55dcd2273556">addFilterPath</a>($path, $classPrefix = <span class="stringliteral">&#39;Zend_View_Filter_&#39;</span>)
<a name="l00591"></a>00591     {
<a name="l00592"></a>00592         <span class="keywordflow">return</span> $this-&gt;_addPluginPath(<span class="stringliteral">&#39;filter&#39;</span>, $classPrefix, (array) $path);
<a name="l00593"></a>00593     }
<a name="l00594"></a>00594 
<a name="l00605"></a><a class="code" href="class_zend___view___abstract.html#abce1020a9d296859d16d2b9f9664fcfc">00605</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#abce1020a9d296859d16d2b9f9664fcfc">setFilterPath</a>($path, $classPrefix = <span class="stringliteral">&#39;Zend_View_Filter_&#39;</span>)
<a name="l00606"></a>00606     {
<a name="l00607"></a>00607         unset($this-&gt;_loaders[<span class="stringliteral">&#39;filter&#39;</span>]);
<a name="l00608"></a>00608         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___view___abstract.html#ac6b3745a094fe7aa760c55dcd2273556">addFilterPath</a>($path, $classPrefix);
<a name="l00609"></a>00609     }
<a name="l00610"></a>00610 
<a name="l00617"></a><a class="code" href="class_zend___view___abstract.html#afd76fd1b657556cf56e532909c3aa0d8">00617</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#afd76fd1b657556cf56e532909c3aa0d8">getFilterPath</a>($name)
<a name="l00618"></a>00618     {
<a name="l00619"></a>00619         <span class="keywordflow">return</span> $this-&gt;_getPluginPath(<span class="stringliteral">&#39;filter&#39;</span>, $name);
<a name="l00620"></a>00620     }
<a name="l00621"></a>00621 
<a name="l00628"></a><a class="code" href="class_zend___view___abstract.html#a4a7bab9eccf45585b757bc4637d49c51">00628</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a4a7bab9eccf45585b757bc4637d49c51">getFilter</a>($name)
<a name="l00629"></a>00629     {
<a name="l00630"></a>00630         <span class="keywordflow">return</span> $this-&gt;_getPlugin(<span class="stringliteral">&#39;filter&#39;</span>, $name);
<a name="l00631"></a>00631     }
<a name="l00632"></a>00632 
<a name="l00640"></a><a class="code" href="class_zend___view___abstract.html#a428d91319fc73d3038784cf5436936b6">00640</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a428d91319fc73d3038784cf5436936b6">getFilters</a>()
<a name="l00641"></a>00641     {
<a name="l00642"></a>00642         <span class="keywordflow">return</span> $this-&gt;_filter;
<a name="l00643"></a>00643     }
<a name="l00644"></a>00644 
<a name="l00650"></a><a class="code" href="class_zend___view___abstract.html#a2ca33bcb3838bbceccf9ff37e7e5b197">00650</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a2ca33bcb3838bbceccf9ff37e7e5b197">getFilterPaths</a>()
<a name="l00651"></a>00651     {
<a name="l00652"></a>00652         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_zend___view___abstract.html#a8cef977c538a706861da485c357de860">getPluginLoader</a>(<span class="stringliteral">&#39;filter&#39;</span>)-&gt;getPaths();
<a name="l00653"></a>00653     }
<a name="l00654"></a>00654 
<a name="l00660"></a><a class="code" href="class_zend___view___abstract.html#a306dab87ff04457f8d9112d3dab12017">00660</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a306dab87ff04457f8d9112d3dab12017">getAllPaths</a>()
<a name="l00661"></a>00661     {
<a name="l00662"></a>00662         $paths = $this-&gt;_path;
<a name="l00663"></a>00663         $paths[<span class="stringliteral">&#39;helper&#39;</span>] = $this-&gt;<a class="code" href="class_zend___view___abstract.html#ac8fac2f39987b6b82f32b50b787080b5">getHelperPaths</a>();
<a name="l00664"></a>00664         $paths[<span class="stringliteral">&#39;filter&#39;</span>] = $this-&gt;<a class="code" href="class_zend___view___abstract.html#a2ca33bcb3838bbceccf9ff37e7e5b197">getFilterPaths</a>();
<a name="l00665"></a>00665         <span class="keywordflow">return</span> $paths;
<a name="l00666"></a>00666     }
<a name="l00667"></a>00667 
<a name="l00674"></a><a class="code" href="class_zend___view___abstract.html#aecb6b6e0124b699329d11a3fd4573b7e">00674</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#aecb6b6e0124b699329d11a3fd4573b7e">addFilter</a>($name)
<a name="l00675"></a>00675     {
<a name="l00676"></a>00676         <span class="keywordflow">foreach</span> ((array) $name as $val) {
<a name="l00677"></a>00677             $this-&gt;_filter[] = $val;
<a name="l00678"></a>00678         }
<a name="l00679"></a>00679         <span class="keywordflow">return</span> $this;
<a name="l00680"></a>00680     }
<a name="l00681"></a>00681 
<a name="l00690"></a><a class="code" href="class_zend___view___abstract.html#a5df5193036472dcb7287aaee34653821">00690</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a5df5193036472dcb7287aaee34653821">setFilter</a>($name)
<a name="l00691"></a>00691     {
<a name="l00692"></a>00692         $this-&gt;_filter = array();
<a name="l00693"></a>00693         $this-&gt;<a class="code" href="class_zend___view___abstract.html#aecb6b6e0124b699329d11a3fd4573b7e">addFilter</a>($name);
<a name="l00694"></a>00694         <span class="keywordflow">return</span> $this;
<a name="l00695"></a>00695     }
<a name="l00696"></a>00696 
<a name="l00703"></a><a class="code" href="class_zend___view___abstract.html#ac2e2ff2b1ae547ed44cf59fc0b8769db">00703</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#ac2e2ff2b1ae547ed44cf59fc0b8769db">setEscape</a>($spec)
<a name="l00704"></a>00704     {
<a name="l00705"></a>00705         $this-&gt;_escape = $spec;
<a name="l00706"></a>00706         <span class="keywordflow">return</span> $this;
<a name="l00707"></a>00707     }
<a name="l00708"></a>00708 
<a name="l00715"></a><a class="code" href="class_zend___view___abstract.html#a255cb45d594a52c7848cd27c47553f01">00715</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a255cb45d594a52c7848cd27c47553f01">setLfiProtection</a>($flag)
<a name="l00716"></a>00716     {
<a name="l00717"></a>00717         $this-&gt;_lfiProtectionOn = (bool) $flag;
<a name="l00718"></a>00718         <span class="keywordflow">return</span> $this;
<a name="l00719"></a>00719     }
<a name="l00720"></a>00720 
<a name="l00726"></a><a class="code" href="class_zend___view___abstract.html#a3eeaff00b2ae9d7e59fc4d99ecfe65c8">00726</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a3eeaff00b2ae9d7e59fc4d99ecfe65c8">isLfiProtectionOn</a>()
<a name="l00727"></a>00727     {
<a name="l00728"></a>00728         <span class="keywordflow">return</span> $this-&gt;_lfiProtectionOn;
<a name="l00729"></a>00729     }
<a name="l00730"></a>00730 
<a name="l00748"></a><a class="code" href="class_zend___view___abstract.html#aea7625b64739ca31a78b55b8938af45a">00748</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#aea7625b64739ca31a78b55b8938af45a">assign</a>($spec, $value = null)
<a name="l00749"></a>00749     {
<a name="l00750"></a>00750         <span class="comment">// which strategy to use?</span>
<a name="l00751"></a>00751         <span class="keywordflow">if</span> (is_string($spec)) {
<a name="l00752"></a>00752             <span class="comment">// assign by name and value</span>
<a name="l00753"></a>00753             <span class="keywordflow">if</span> (<span class="charliteral">&#39;_&#39;</span> == substr($spec, 0, 1)) {
<a name="l00754"></a>00754                 require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l00755"></a>00755                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(<span class="stringliteral">&#39;Setting private or protected class members is not allowed&#39;</span>, $this);
<a name="l00756"></a>00756             }
<a name="l00757"></a>00757             $this-&gt;$spec = $value;
<a name="l00758"></a>00758         } elseif (is_array($spec)) {
<a name="l00759"></a>00759             <span class="comment">// assign from associative array</span>
<a name="l00760"></a>00760             $error = <span class="keyword">false</span>;
<a name="l00761"></a>00761             <span class="keywordflow">foreach</span> ($spec as $key =&gt; $val) {
<a name="l00762"></a>00762                 <span class="keywordflow">if</span> (<span class="charliteral">&#39;_&#39;</span> == substr($key, 0, 1)) {
<a name="l00763"></a>00763                     $error = <span class="keyword">true</span>;
<a name="l00764"></a>00764                     <span class="keywordflow">break</span>;
<a name="l00765"></a>00765                 }
<a name="l00766"></a>00766                 $this-&gt;$key = $val;
<a name="l00767"></a>00767             }
<a name="l00768"></a>00768             <span class="keywordflow">if</span> ($error) {
<a name="l00769"></a>00769                 require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l00770"></a>00770                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(<span class="stringliteral">&#39;Setting private or protected class members is not allowed&#39;</span>, $this);
<a name="l00771"></a>00771             }
<a name="l00772"></a>00772         } <span class="keywordflow">else</span> {
<a name="l00773"></a>00773             require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l00774"></a>00774             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(<span class="stringliteral">&#39;assign() expects a string or array, received &#39;</span> . gettype($spec), $this);
<a name="l00775"></a>00775         }
<a name="l00776"></a>00776 
<a name="l00777"></a>00777         <span class="keywordflow">return</span> $this;
<a name="l00778"></a>00778     }
<a name="l00779"></a>00779 
<a name="l00788"></a><a class="code" href="class_zend___view___abstract.html#ab81a1d1cef7f7d6c406e60bd368f94af">00788</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#ab81a1d1cef7f7d6c406e60bd368f94af">getVars</a>()
<a name="l00789"></a>00789     {
<a name="l00790"></a>00790         $vars   = get_object_vars($this);
<a name="l00791"></a>00791         <span class="keywordflow">foreach</span> ($vars as $key =&gt; $value) {
<a name="l00792"></a>00792             <span class="keywordflow">if</span> (<span class="charliteral">&#39;_&#39;</span> == substr($key, 0, 1)) {
<a name="l00793"></a>00793                 unset($vars[$key]);
<a name="l00794"></a>00794             }
<a name="l00795"></a>00795         }
<a name="l00796"></a>00796 
<a name="l00797"></a>00797         <span class="keywordflow">return</span> $vars;
<a name="l00798"></a>00798     }
<a name="l00799"></a>00799 
<a name="l00808"></a><a class="code" href="class_zend___view___abstract.html#a118e36e92aeaad16f939012791bedf7e">00808</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a118e36e92aeaad16f939012791bedf7e">clearVars</a>()
<a name="l00809"></a>00809     {
<a name="l00810"></a>00810         $vars   = get_object_vars($this);
<a name="l00811"></a>00811         <span class="keywordflow">foreach</span> ($vars as $key =&gt; $value) {
<a name="l00812"></a>00812             <span class="keywordflow">if</span> (<span class="charliteral">&#39;_&#39;</span> != substr($key, 0, 1)) {
<a name="l00813"></a>00813                 unset($this-&gt;$key);
<a name="l00814"></a>00814             }
<a name="l00815"></a>00815         }
<a name="l00816"></a>00816     }
<a name="l00817"></a>00817 
<a name="l00824"></a><a class="code" href="class_zend___view___abstract.html#aa6b87486d439648725df4d9141f92413">00824</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#aa6b87486d439648725df4d9141f92413">render</a>($name)
<a name="l00825"></a>00825     {
<a name="l00826"></a>00826         <span class="comment">// find the script file name using the parent private method</span>
<a name="l00827"></a>00827         $this-&gt;_file = $this-&gt;<a class="code" href="class_zend___view___abstract.html#a324978fc900c703e12aa14b496fdf64b">_script</a>($name);
<a name="l00828"></a>00828         unset($name); <span class="comment">// remove $name from local scope</span>
<a name="l00829"></a>00829 
<a name="l00830"></a>00830         ob_start();
<a name="l00831"></a>00831         $this-&gt;<a class="code" href="class_zend___view___abstract.html#ac615f1c24391a6eb5345c4d17a877bf8">_run</a>($this-&gt;_file);
<a name="l00832"></a>00832 
<a name="l00833"></a>00833         <span class="keywordflow">return</span> $this-&gt;_filter(ob_get_clean()); <span class="comment">// filter output</span>
<a name="l00834"></a>00834     }
<a name="l00835"></a>00835 
<a name="l00845"></a><a class="code" href="class_zend___view___abstract.html#ae9e926d314ed178687849817fefa92ba">00845</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#ae9e926d314ed178687849817fefa92ba">escape</a>($var)
<a name="l00846"></a>00846     {
<a name="l00847"></a>00847         <span class="keywordflow">if</span> (in_array($this-&gt;_escape, array(<span class="stringliteral">&#39;htmlspecialchars&#39;</span>, <span class="stringliteral">&#39;htmlentities&#39;</span>))) {
<a name="l00848"></a>00848             <span class="keywordflow">return</span> call_user_func($this-&gt;_escape, $var, ENT_COMPAT, $this-&gt;_encoding);
<a name="l00849"></a>00849         }
<a name="l00850"></a>00850 
<a name="l00851"></a>00851         <span class="keywordflow">return</span> call_user_func($this-&gt;_escape, $var);
<a name="l00852"></a>00852     }
<a name="l00853"></a>00853 
<a name="l00860"></a><a class="code" href="class_zend___view___abstract.html#a8742b6ed0b5341136f00d42ec3864fd6">00860</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a8742b6ed0b5341136f00d42ec3864fd6">setEncoding</a>($encoding)
<a name="l00861"></a>00861     {
<a name="l00862"></a>00862         $this-&gt;_encoding = $encoding;
<a name="l00863"></a>00863         <span class="keywordflow">return</span> $this;
<a name="l00864"></a>00864     }
<a name="l00865"></a>00865 
<a name="l00871"></a><a class="code" href="class_zend___view___abstract.html#a515b2653f040b0c8a4ed093878232943">00871</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a515b2653f040b0c8a4ed093878232943">getEncoding</a>()
<a name="l00872"></a>00872     {
<a name="l00873"></a>00873         <span class="keywordflow">return</span> $this-&gt;_encoding;
<a name="l00874"></a>00874     }
<a name="l00875"></a>00875 
<a name="l00888"></a><a class="code" href="class_zend___view___abstract.html#a8d70b8e4f85a7037e7a6bc5e3482ef35">00888</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___view___abstract.html#a8d70b8e4f85a7037e7a6bc5e3482ef35">strictVars</a>($flag = <span class="keyword">true</span>)
<a name="l00889"></a>00889     {
<a name="l00890"></a>00890         $this-&gt;_strictVars = ($flag) ? <span class="keyword">true</span> : <span class="keyword">false</span>;
<a name="l00891"></a>00891 
<a name="l00892"></a>00892         <span class="keywordflow">return</span> $this;
<a name="l00893"></a>00893     }
<a name="l00894"></a>00894 
<a name="l00901"></a><a class="code" href="class_zend___view___abstract.html#a324978fc900c703e12aa14b496fdf64b">00901</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___view___abstract.html#a324978fc900c703e12aa14b496fdf64b">_script</a>($name)
<a name="l00902"></a>00902     {
<a name="l00903"></a>00903         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___view___abstract.html#a3eeaff00b2ae9d7e59fc4d99ecfe65c8">isLfiProtectionOn</a>() &amp;&amp; preg_match(<span class="stringliteral">&#39;#\.\.[\\\/]#&#39;</span>, $name)) {
<a name="l00904"></a>00904             require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l00905"></a>00905             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(<span class="stringliteral">&#39;Requested scripts may not include parent directory traversal (&quot;../&quot;, &quot;..\\&quot; notation)&#39;</span>);
<a name="l00906"></a>00906         }
<a name="l00907"></a>00907 
<a name="l00908"></a>00908         <span class="keywordflow">if</span> (0 == count($this-&gt;_path[<span class="stringliteral">&#39;script&#39;</span>])) {
<a name="l00909"></a>00909             require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l00910"></a>00910             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>(<span class="stringliteral">&#39;no view script directory set; unable to determine location for view script&#39;</span>,
<a name="l00911"></a>00911                 $this);
<a name="l00912"></a>00912         }
<a name="l00913"></a>00913 
<a name="l00914"></a>00914         <span class="keywordflow">foreach</span> ($this-&gt;_path[<span class="stringliteral">&#39;script&#39;</span>] as $dir) {
<a name="l00915"></a>00915             <span class="keywordflow">if</span> (is_readable($dir . $name)) {
<a name="l00916"></a>00916                 <span class="keywordflow">return</span> $dir . $name;
<a name="l00917"></a>00917             }
<a name="l00918"></a>00918         }
<a name="l00919"></a>00919 
<a name="l00920"></a>00920         require_once <span class="stringliteral">&#39;Zend/View/Exception.php&#39;</span>;
<a name="l00921"></a>00921         $message = <span class="stringliteral">&quot;script &#39;$name&#39; not found in path (&quot;</span>
<a name="l00922"></a>00922                  . implode(PATH_SEPARATOR, $this-&gt;_path[<span class="stringliteral">&#39;script&#39;</span>])
<a name="l00923"></a>00923                  . <span class="stringliteral">&quot;)&quot;</span>;
<a name="l00924"></a>00924         <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___view___exception.html">Zend_View_Exception</a>($message, $this);
<a name="l00925"></a>00925     }
<a name="l00926"></a>00926 
<a name="l00933"></a>00933     <span class="keyword">private</span> function _filter($buffer)
<a name="l00934"></a>00934     {
<a name="l00935"></a>00935         <span class="comment">// loop through each filter class</span>
<a name="l00936"></a>00936         <span class="keywordflow">foreach</span> ($this-&gt;_filter as $name) {
<a name="l00937"></a>00937             <span class="comment">// load and apply the filter class</span>
<a name="l00938"></a>00938             $filter = $this-&gt;<a class="code" href="class_zend___view___abstract.html#a4a7bab9eccf45585b757bc4637d49c51">getFilter</a>($name);
<a name="l00939"></a>00939             $buffer = call_user_func(array($filter, <span class="stringliteral">&#39;filter&#39;</span>), $buffer);
<a name="l00940"></a>00940         }
<a name="l00941"></a>00941 
<a name="l00942"></a>00942         <span class="comment">// done!</span>
<a name="l00943"></a>00943         <span class="keywordflow">return</span> $buffer;
<a name="l00944"></a>00944     }
<a name="l00945"></a>00945 
<a name="l00964"></a>00964     <span class="keyword">private</span> function _addPath($type, $path, $prefix = null)
<a name="l00965"></a>00965     {
<a name="l00966"></a>00966         <span class="keywordflow">foreach</span> ((array) $path as $dir) {
<a name="l00967"></a>00967             <span class="comment">// attempt to strip any possible separator and</span>
<a name="l00968"></a>00968             <span class="comment">// append the system directory separator</span>
<a name="l00969"></a>00969             $dir = str_replace(array(<span class="charliteral">&#39;/&#39;</span>, <span class="charliteral">&#39;\\&#39;</span>), DIRECTORY_SEPARATOR, $dir);
<a name="l00970"></a>00970             $dir = rtrim($dir, DIRECTORY_SEPARATOR . DIRECTORY_SEPARATOR)
<a name="l00971"></a>00971                  . DIRECTORY_SEPARATOR;
<a name="l00972"></a>00972 
<a name="l00973"></a>00973             <span class="keywordflow">switch</span> ($type) {
<a name="l00974"></a>00974                 <span class="keywordflow">case</span> <span class="stringliteral">&#39;script&#39;</span>:
<a name="l00975"></a>00975                     <span class="comment">// add to the top of the stack.</span>
<a name="l00976"></a>00976                     array_unshift($this-&gt;_path[$type], $dir);
<a name="l00977"></a>00977                     <span class="keywordflow">break</span>;
<a name="l00978"></a>00978                 <span class="keywordflow">case</span> <span class="stringliteral">&#39;filter&#39;</span>:
<a name="l00979"></a>00979                 <span class="keywordflow">case</span> <span class="stringliteral">&#39;helper&#39;</span>:
<a name="l00980"></a>00980                 <span class="keywordflow">default</span>:
<a name="l00981"></a>00981                     <span class="comment">// add as array with prefix and dir keys</span>
<a name="l00982"></a>00982                     array_unshift($this-&gt;_path[$type], array(<span class="stringliteral">&#39;prefix&#39;</span> =&gt; $prefix, <span class="stringliteral">&#39;dir&#39;</span> =&gt; $dir));
<a name="l00983"></a>00983                     <span class="keywordflow">break</span>;
<a name="l00984"></a>00984             }
<a name="l00985"></a>00985         }
<a name="l00986"></a>00986     }
<a name="l00987"></a>00987 
<a name="l00995"></a>00995     <span class="keyword">private</span> function _setPath($type, $path, $classPrefix = null)
<a name="l00996"></a>00996     {
<a name="l00997"></a>00997         $dir = DIRECTORY_SEPARATOR . ucfirst($type) . DIRECTORY_SEPARATOR;
<a name="l00998"></a>00998 
<a name="l00999"></a>00999         <span class="keywordflow">switch</span> ($type) {
<a name="l01000"></a>01000             <span class="keywordflow">case</span> <span class="stringliteral">&#39;script&#39;</span>:
<a name="l01001"></a>01001                 $this-&gt;_path[$type] = array(dirname(__FILE__) . $dir);
<a name="l01002"></a>01002                 $this-&gt;_addPath($type, $path);
<a name="l01003"></a>01003                 <span class="keywordflow">break</span>;
<a name="l01004"></a>01004             <span class="keywordflow">case</span> <span class="stringliteral">&#39;filter&#39;</span>:
<a name="l01005"></a>01005             <span class="keywordflow">case</span> <span class="stringliteral">&#39;helper&#39;</span>:
<a name="l01006"></a>01006             <span class="keywordflow">default</span>:
<a name="l01007"></a>01007                 $this-&gt;_path[$type] = array(array(
<a name="l01008"></a>01008                     <span class="stringliteral">&#39;prefix&#39;</span> =&gt; <span class="stringliteral">&#39;Zend_View_&#39;</span> . ucfirst($type) . <span class="charliteral">&#39;_&#39;</span>,
<a name="l01009"></a>01009                     <span class="stringliteral">&#39;dir&#39;</span>    =&gt; dirname(__FILE__) . $dir
<a name="l01010"></a>01010                 ));
<a name="l01011"></a>01011                 $this-&gt;_addPath($type, $path, $classPrefix);
<a name="l01012"></a>01012                 <span class="keywordflow">break</span>;
<a name="l01013"></a>01013         }
<a name="l01014"></a>01014     }
<a name="l01015"></a>01015 
<a name="l01022"></a>01022     <span class="keyword">private</span> function _getPaths($type)
<a name="l01023"></a>01023     {
<a name="l01024"></a>01024         <span class="keywordflow">return</span> $this-&gt;_path[$type];
<a name="l01025"></a>01025     }
<a name="l01026"></a>01026 
<a name="l01035"></a>01035     <span class="keyword">private</span> function _setHelperClass($name, $class, $file)
<a name="l01036"></a>01036     {
<a name="l01037"></a>01037         $this-&gt;_helperLoadedDir[$name] = $file;
<a name="l01038"></a>01038         $this-&gt;_helperLoaded[$name]    = $class;
<a name="l01039"></a>01039     }
<a name="l01040"></a>01040 
<a name="l01049"></a>01049     <span class="keyword">private</span> function _setFilterClass($name, $class, $file)
<a name="l01050"></a>01050     {
<a name="l01051"></a>01051         $this-&gt;_filterLoadedDir[$name] = $file;
<a name="l01052"></a>01052         $this-&gt;_filterLoaded[$name]    = $class;
<a name="l01053"></a>01053     }
<a name="l01054"></a>01054 
<a name="l01063"></a>01063     <span class="keyword">private</span> function _addPluginPath($type, $classPrefix, array $paths)
<a name="l01064"></a>01064     {
<a name="l01065"></a>01065         $loader = $this-&gt;<a class="code" href="class_zend___view___abstract.html#a8cef977c538a706861da485c357de860">getPluginLoader</a>($type);
<a name="l01066"></a>01066         <span class="keywordflow">foreach</span> ($paths as $path) {
<a name="l01067"></a>01067             $loader-&gt;addPrefixPath($classPrefix, $path);
<a name="l01068"></a>01068         }
<a name="l01069"></a>01069         <span class="keywordflow">return</span> $this;
<a name="l01070"></a>01070     }
<a name="l01071"></a>01071 
<a name="l01079"></a>01079     <span class="keyword">private</span> function _getPluginPath($type, $name)
<a name="l01080"></a>01080     {
<a name="l01081"></a>01081         $loader = $this-&gt;<a class="code" href="class_zend___view___abstract.html#a8cef977c538a706861da485c357de860">getPluginLoader</a>($type);
<a name="l01082"></a>01082         <span class="keywordflow">if</span> ($loader-&gt;isLoaded($name)) {
<a name="l01083"></a>01083             <span class="keywordflow">return</span> $loader-&gt;getClassPath($name);
<a name="l01084"></a>01084         }
<a name="l01085"></a>01085 
<a name="l01086"></a>01086         <span class="keywordflow">try</span> {
<a name="l01087"></a>01087             $loader-&gt;load($name);
<a name="l01088"></a>01088             <span class="keywordflow">return</span> $loader-&gt;getClassPath($name);
<a name="l01089"></a>01089         } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a> $e) {
<a name="l01090"></a>01090             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01091"></a>01091         }
<a name="l01092"></a>01092     }
<a name="l01093"></a>01093 
<a name="l01101"></a>01101     <span class="keyword">private</span> function _getPlugin($type, $name)
<a name="l01102"></a>01102     {
<a name="l01103"></a>01103         $name = ucfirst($name);
<a name="l01104"></a>01104         <span class="keywordflow">switch</span> ($type) {
<a name="l01105"></a>01105             <span class="keywordflow">case</span> <span class="stringliteral">&#39;filter&#39;</span>:
<a name="l01106"></a>01106                 $storeVar = <span class="stringliteral">&#39;_filterClass&#39;</span>;
<a name="l01107"></a>01107                 $store    = $this-&gt;_filterClass;
<a name="l01108"></a>01108                 <span class="keywordflow">break</span>;
<a name="l01109"></a>01109             <span class="keywordflow">case</span> <span class="stringliteral">&#39;helper&#39;</span>:
<a name="l01110"></a>01110                 $storeVar = <span class="stringliteral">&#39;_helper&#39;</span>;
<a name="l01111"></a>01111                 $store    = $this-&gt;_helper;
<a name="l01112"></a>01112                 <span class="keywordflow">break</span>;
<a name="l01113"></a>01113         }
<a name="l01114"></a>01114 
<a name="l01115"></a>01115         <span class="keywordflow">if</span> (!isset($store[$name])) {
<a name="l01116"></a>01116             $class = $this-&gt;<a class="code" href="class_zend___view___abstract.html#a8cef977c538a706861da485c357de860">getPluginLoader</a>($type)-&gt;load($name);
<a name="l01117"></a>01117             $store[$name] = <span class="keyword">new</span> $class();
<a name="l01118"></a>01118             <span class="keywordflow">if</span> (method_exists($store[$name], <span class="stringliteral">&#39;setView&#39;</span>)) {
<a name="l01119"></a>01119                 $store[$name]-&gt;setView($this);
<a name="l01120"></a>01120             }
<a name="l01121"></a>01121         }
<a name="l01122"></a>01122 
<a name="l01123"></a>01123         $this-&gt;$storeVar = $store;
<a name="l01124"></a>01124         <span class="keywordflow">return</span> $store[$name];
<a name="l01125"></a>01125     }
<a name="l01126"></a>01126 
<a name="l01133"></a>01133     <span class="keyword">abstract</span> <span class="keyword">protected</span> function <a class="code" href="class_zend___view___abstract.html#ac615f1c24391a6eb5345c4d17a877bf8">_run</a>();
<a name="l01134"></a>01134 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Apr 19 2012 17:01:17 for openbiz by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
