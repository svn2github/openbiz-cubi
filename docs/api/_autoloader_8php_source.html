<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>openbiz: E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Loader/Autoloader.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>E:/E/GEAMP/www/openbiz/openbiz/others/Zend/Loader/Autoloader.php</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00024"></a>00024 require_once <span class="stringliteral">&#39;Zend/Loader.php&#39;</span>;
<a name="l00025"></a>00025 
<a name="l00035"></a><a class="code" href="class_zend___loader___autoloader.html">00035</a> <span class="keyword">class </span><a class="code" href="class_zend___loader___autoloader.html">Zend_Loader_Autoloader</a>
<a name="l00036"></a>00036 {
<a name="l00040"></a>00040     <span class="keyword">protected</span> <span class="keyword">static</span> $_instance;
<a name="l00041"></a>00041 
<a name="l00045"></a>00045     <span class="keyword">protected</span> $_autoloaders = array();
<a name="l00046"></a>00046 
<a name="l00050"></a>00050     <span class="keyword">protected</span> $_defaultAutoloader = array(<span class="stringliteral">&#39;Zend_Loader&#39;</span>, <span class="stringliteral">&#39;loadClass&#39;</span>);
<a name="l00051"></a>00051 
<a name="l00055"></a>00055     <span class="keyword">protected</span> $_fallbackAutoloader = <span class="keyword">false</span>;
<a name="l00056"></a>00056 
<a name="l00060"></a>00060     <span class="keyword">protected</span> $_internalAutoloader;
<a name="l00061"></a>00061 
<a name="l00065"></a>00065     <span class="keyword">protected</span> $_namespaces = array(
<a name="l00066"></a>00066         <span class="stringliteral">&#39;Zend_&#39;</span>  =&gt; <span class="keyword">true</span>,
<a name="l00067"></a>00067         <span class="stringliteral">&#39;ZendX_&#39;</span> =&gt; <span class="keyword">true</span>,
<a name="l00068"></a>00068     );
<a name="l00069"></a>00069 
<a name="l00073"></a>00073     <span class="keyword">protected</span> $_namespaceAutoloaders = array();
<a name="l00074"></a>00074 
<a name="l00078"></a>00078     <span class="keyword">protected</span> $_suppressNotFoundWarnings = <span class="keyword">false</span>;
<a name="l00079"></a>00079 
<a name="l00083"></a>00083     <span class="keyword">protected</span> $_zfPath;
<a name="l00084"></a>00084 
<a name="l00090"></a><a class="code" href="class_zend___loader___autoloader.html#ac93fbec81f07e5d15f80db907e63dc10">00090</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___loader___autoloader.html#ac93fbec81f07e5d15f80db907e63dc10">getInstance</a>()
<a name="l00091"></a>00091     {
<a name="l00092"></a>00092         <span class="keywordflow">if</span> (null === self::$_instance) {
<a name="l00093"></a>00093             self::$_instance = <span class="keyword">new</span> <span class="keyword">self</span>();
<a name="l00094"></a>00094         }
<a name="l00095"></a>00095         <span class="keywordflow">return</span> self::$_instance;
<a name="l00096"></a>00096     }
<a name="l00097"></a>00097 
<a name="l00103"></a><a class="code" href="class_zend___loader___autoloader.html#a23bb62be5a2fa0b27abb85c36213d66a">00103</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___loader___autoloader.html#a23bb62be5a2fa0b27abb85c36213d66a">resetInstance</a>()
<a name="l00104"></a>00104     {
<a name="l00105"></a>00105         self::$_instance = null;
<a name="l00106"></a>00106     }
<a name="l00107"></a>00107 
<a name="l00114"></a><a class="code" href="class_zend___loader___autoloader.html#ab4c022bf9d3474583030f31894865182">00114</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_zend___loader___autoloader.html#ab4c022bf9d3474583030f31894865182">autoload</a>($class)
<a name="l00115"></a>00115     {
<a name="l00116"></a>00116         $self = <a class="code" href="class_zend___loader___autoloader.html#ac93fbec81f07e5d15f80db907e63dc10">self::getInstance</a>();
<a name="l00117"></a>00117 
<a name="l00118"></a>00118         <span class="keywordflow">foreach</span> ($self-&gt;getClassAutoloaders($class) as $autoloader) {
<a name="l00119"></a>00119             <span class="keywordflow">if</span> ($autoloader instanceof <a class="code" href="interface_zend___loader___autoloader___interface.html">Zend_Loader_Autoloader_Interface</a>) {
<a name="l00120"></a>00120                 <span class="keywordflow">if</span> ($autoloader-&gt;autoload($class)) {
<a name="l00121"></a>00121                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00122"></a>00122                 }
<a name="l00123"></a>00123             } elseif (is_string($autoloader)) {
<a name="l00124"></a>00124                 <span class="keywordflow">if</span> ($autoloader($class)) {
<a name="l00125"></a>00125                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00126"></a>00126                 }
<a name="l00127"></a>00127             } elseif (is_array($autoloader)) {
<a name="l00128"></a>00128                 $object = array_shift($autoloader);
<a name="l00129"></a>00129                 $method = array_shift($autoloader);
<a name="l00130"></a>00130                 <span class="keywordflow">if</span> (call_user_func(array($object, $method), $class)) {
<a name="l00131"></a>00131                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00132"></a>00132                 }
<a name="l00133"></a>00133             }
<a name="l00134"></a>00134         }
<a name="l00135"></a>00135 
<a name="l00136"></a>00136         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00137"></a>00137     }
<a name="l00138"></a>00138 
<a name="l00145"></a><a class="code" href="class_zend___loader___autoloader.html#a980074ca8300a7a7662d0bb4e7593180">00145</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#a980074ca8300a7a7662d0bb4e7593180">setDefaultAutoloader</a>($callback)
<a name="l00146"></a>00146     {
<a name="l00147"></a>00147         <span class="keywordflow">if</span> (!is_callable($callback)) {
<a name="l00148"></a>00148             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;Invalid callback specified for default autoloader&#39;</span>);
<a name="l00149"></a>00149         }
<a name="l00150"></a>00150 
<a name="l00151"></a>00151         $this-&gt;_defaultAutoloader = $callback;
<a name="l00152"></a>00152         <span class="keywordflow">return</span> $this;
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154 
<a name="l00160"></a><a class="code" href="class_zend___loader___autoloader.html#ad6bc6b05aaaace0c85e882ba88595504">00160</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#ad6bc6b05aaaace0c85e882ba88595504">getDefaultAutoloader</a>()
<a name="l00161"></a>00161     {
<a name="l00162"></a>00162         <span class="keywordflow">return</span> $this-&gt;_defaultAutoloader;
<a name="l00163"></a>00163     }
<a name="l00164"></a>00164 
<a name="l00171"></a><a class="code" href="class_zend___loader___autoloader.html#a983d2845d90e74b5cb533d2f1aad2982">00171</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#a983d2845d90e74b5cb533d2f1aad2982">setAutoloaders</a>(array $autoloaders)
<a name="l00172"></a>00172     {
<a name="l00173"></a>00173         $this-&gt;_autoloaders = $autoloaders;
<a name="l00174"></a>00174         <span class="keywordflow">return</span> $this;
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176 
<a name="l00182"></a><a class="code" href="class_zend___loader___autoloader.html#a4c8963cc7f85171dab8540b3fdc74f4f">00182</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#a4c8963cc7f85171dab8540b3fdc74f4f">getAutoloaders</a>()
<a name="l00183"></a>00183     {
<a name="l00184"></a>00184         <span class="keywordflow">return</span> $this-&gt;_autoloaders;
<a name="l00185"></a>00185     }
<a name="l00186"></a>00186 
<a name="l00193"></a><a class="code" href="class_zend___loader___autoloader.html#a89c5580c69205bab86fa9fc1bcda1236">00193</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#a89c5580c69205bab86fa9fc1bcda1236">getNamespaceAutoloaders</a>($namespace)
<a name="l00194"></a>00194     {
<a name="l00195"></a>00195         $namespace = (string) $namespace;
<a name="l00196"></a>00196         <span class="keywordflow">if</span> (!array_key_exists($namespace, $this-&gt;_namespaceAutoloaders)) {
<a name="l00197"></a>00197             <span class="keywordflow">return</span> array();
<a name="l00198"></a>00198         }
<a name="l00199"></a>00199         <span class="keywordflow">return</span> $this-&gt;_namespaceAutoloaders[$namespace];
<a name="l00200"></a>00200     }
<a name="l00201"></a>00201 
<a name="l00208"></a><a class="code" href="class_zend___loader___autoloader.html#aa518e2c8933dbf9ca5f424c27c03715e">00208</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#aa518e2c8933dbf9ca5f424c27c03715e">registerNamespace</a>($namespace)
<a name="l00209"></a>00209     {
<a name="l00210"></a>00210         <span class="keywordflow">if</span> (is_string($namespace)) {
<a name="l00211"></a>00211             $namespace = (array) $namespace;
<a name="l00212"></a>00212         } elseif (!is_array($namespace)) {
<a name="l00213"></a>00213             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;Invalid namespace provided&#39;</span>);
<a name="l00214"></a>00214         }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216         <span class="keywordflow">foreach</span> ($namespace as $ns) {
<a name="l00217"></a>00217             <span class="keywordflow">if</span> (!isset($this-&gt;_namespaces[$ns])) {
<a name="l00218"></a>00218                 $this-&gt;_namespaces[$ns] = <span class="keyword">true</span>;
<a name="l00219"></a>00219             }
<a name="l00220"></a>00220         }
<a name="l00221"></a>00221         <span class="keywordflow">return</span> $this;
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223 
<a name="l00230"></a><a class="code" href="class_zend___loader___autoloader.html#a3a64e31b6038844611a1b2db8592abcc">00230</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#a3a64e31b6038844611a1b2db8592abcc">unregisterNamespace</a>($namespace)
<a name="l00231"></a>00231     {
<a name="l00232"></a>00232         <span class="keywordflow">if</span> (is_string($namespace)) {
<a name="l00233"></a>00233             $namespace = (array) $namespace;
<a name="l00234"></a>00234         } elseif (!is_array($namespace)) {
<a name="l00235"></a>00235             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;Invalid namespace provided&#39;</span>);
<a name="l00236"></a>00236         }
<a name="l00237"></a>00237 
<a name="l00238"></a>00238         <span class="keywordflow">foreach</span> ($namespace as $ns) {
<a name="l00239"></a>00239             <span class="keywordflow">if</span> (isset($this-&gt;_namespaces[$ns])) {
<a name="l00240"></a>00240                 unset($this-&gt;_namespaces[$ns]);
<a name="l00241"></a>00241             }
<a name="l00242"></a>00242         }
<a name="l00243"></a>00243         <span class="keywordflow">return</span> $this;
<a name="l00244"></a>00244     }
<a name="l00245"></a>00245 
<a name="l00251"></a><a class="code" href="class_zend___loader___autoloader.html#abbbcbfa8d80937eae9db2f1cad1b89dd">00251</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#abbbcbfa8d80937eae9db2f1cad1b89dd">getRegisteredNamespaces</a>()
<a name="l00252"></a>00252     {
<a name="l00253"></a>00253         <span class="keywordflow">return</span> array_keys($this-&gt;_namespaces);
<a name="l00254"></a>00254     }
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     <span class="keyword">public</span> function setZfPath($spec, $version = <span class="stringliteral">&#39;latest&#39;</span>)
<a name="l00257"></a>00257     {
<a name="l00258"></a>00258         $path = $spec;
<a name="l00259"></a>00259         <span class="keywordflow">if</span> (is_array($spec)) {
<a name="l00260"></a>00260             <span class="keywordflow">if</span> (!isset($spec[<span class="stringliteral">&#39;path&#39;</span>])) {
<a name="l00261"></a>00261                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;No path specified for ZF&#39;</span>);
<a name="l00262"></a>00262             }
<a name="l00263"></a>00263             $path = $spec[<span class="stringliteral">&#39;path&#39;</span>];
<a name="l00264"></a>00264             <span class="keywordflow">if</span> (isset($spec[<span class="stringliteral">&#39;version&#39;</span>])) {
<a name="l00265"></a>00265                 $version = $spec[<span class="stringliteral">&#39;version&#39;</span>];
<a name="l00266"></a>00266             }
<a name="l00267"></a>00267         }
<a name="l00268"></a>00268 
<a name="l00269"></a>00269         $this-&gt;_zfPath = $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a7f590c012a0f715c539fcc28055633f7">_getVersionPath</a>($path, $version);
<a name="l00270"></a>00270         set_include_path(implode(PATH_SEPARATOR, array(
<a name="l00271"></a>00271             $this-&gt;_zfPath,
<a name="l00272"></a>00272             get_include_path(),
<a name="l00273"></a>00273         )));
<a name="l00274"></a>00274         <span class="keywordflow">return</span> $this;
<a name="l00275"></a>00275     }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277     <span class="keyword">public</span> function getZfPath()
<a name="l00278"></a>00278     {
<a name="l00279"></a>00279         <span class="keywordflow">return</span> $this-&gt;_zfPath;
<a name="l00280"></a>00280     }
<a name="l00281"></a>00281 
<a name="l00288"></a><a class="code" href="class_zend___loader___autoloader.html#a6bf1018db1448fa1194c5fc996ef34ec">00288</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#a6bf1018db1448fa1194c5fc996ef34ec">suppressNotFoundWarnings</a>($flag = null)
<a name="l00289"></a>00289     {
<a name="l00290"></a>00290         <span class="keywordflow">if</span> (null === $flag) {
<a name="l00291"></a>00291             <span class="keywordflow">return</span> $this-&gt;_suppressNotFoundWarnings;
<a name="l00292"></a>00292         }
<a name="l00293"></a>00293         $this-&gt;_suppressNotFoundWarnings = (bool) $flag;
<a name="l00294"></a>00294         <span class="keywordflow">return</span> $this;
<a name="l00295"></a>00295     }
<a name="l00296"></a>00296 
<a name="l00303"></a><a class="code" href="class_zend___loader___autoloader.html#a5ee0ae91cb10c74a8a8e923529039e68">00303</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#a5ee0ae91cb10c74a8a8e923529039e68">setFallbackAutoloader</a>($flag)
<a name="l00304"></a>00304     {
<a name="l00305"></a>00305         $this-&gt;_fallbackAutoloader = (bool) $flag;
<a name="l00306"></a>00306         <span class="keywordflow">return</span> $this;
<a name="l00307"></a>00307     }
<a name="l00308"></a>00308 
<a name="l00314"></a><a class="code" href="class_zend___loader___autoloader.html#a96c011471f69dcc65a9623e56dc16391">00314</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#a96c011471f69dcc65a9623e56dc16391">isFallbackAutoloader</a>()
<a name="l00315"></a>00315     {
<a name="l00316"></a>00316         <span class="keywordflow">return</span> $this-&gt;_fallbackAutoloader;
<a name="l00317"></a>00317     }
<a name="l00318"></a>00318 
<a name="l00329"></a><a class="code" href="class_zend___loader___autoloader.html#a14af67800f64ddaf2ce0bfa9998dee45">00329</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#a14af67800f64ddaf2ce0bfa9998dee45">getClassAutoloaders</a>($class)
<a name="l00330"></a>00330     {
<a name="l00331"></a>00331         $namespace   = <span class="keyword">false</span>;
<a name="l00332"></a>00332         $autoloaders = array();
<a name="l00333"></a>00333 
<a name="l00334"></a>00334         <span class="comment">// Add concrete namespaced autoloaders</span>
<a name="l00335"></a>00335         <span class="keywordflow">foreach</span> (array_keys($this-&gt;_namespaceAutoloaders) as $ns) {
<a name="l00336"></a>00336             <span class="keywordflow">if</span> (<span class="stringliteral">&#39;&#39;</span> == $ns) {
<a name="l00337"></a>00337                 <span class="keywordflow">continue</span>;
<a name="l00338"></a>00338             }
<a name="l00339"></a>00339             <span class="keywordflow">if</span> (0 === strpos($class, $ns)) {
<a name="l00340"></a>00340                 $namespace   = $ns;
<a name="l00341"></a>00341                 $autoloaders = $autoloaders + $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a89c5580c69205bab86fa9fc1bcda1236">getNamespaceAutoloaders</a>($ns);
<a name="l00342"></a>00342                 <span class="keywordflow">break</span>;
<a name="l00343"></a>00343             }
<a name="l00344"></a>00344         }
<a name="l00345"></a>00345 
<a name="l00346"></a>00346         <span class="comment">// Add internal namespaced autoloader</span>
<a name="l00347"></a>00347         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_zend___loader___autoloader.html#abbbcbfa8d80937eae9db2f1cad1b89dd">getRegisteredNamespaces</a>() as $ns) {
<a name="l00348"></a>00348             <span class="keywordflow">if</span> (0 === strpos($class, $ns)) {
<a name="l00349"></a>00349                 $namespace     = $ns;
<a name="l00350"></a>00350                 $autoloaders[] = $this-&gt;_internalAutoloader;
<a name="l00351"></a>00351                 <span class="keywordflow">break</span>;
<a name="l00352"></a>00352             }
<a name="l00353"></a>00353         }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355         <span class="comment">// Add non-namespaced autoloaders</span>
<a name="l00356"></a>00356         $autoloaders = $autoloaders + $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a89c5580c69205bab86fa9fc1bcda1236">getNamespaceAutoloaders</a>(<span class="stringliteral">&#39;&#39;</span>);
<a name="l00357"></a>00357 
<a name="l00358"></a>00358         <span class="comment">// Add fallback autoloader</span>
<a name="l00359"></a>00359         <span class="keywordflow">if</span> (!$namespace &amp;&amp; $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a96c011471f69dcc65a9623e56dc16391">isFallbackAutoloader</a>()) {
<a name="l00360"></a>00360             $autoloaders[] = $this-&gt;_internalAutoloader;
<a name="l00361"></a>00361         }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363         <span class="keywordflow">return</span> $autoloaders;
<a name="l00364"></a>00364     }
<a name="l00365"></a>00365 
<a name="l00373"></a><a class="code" href="class_zend___loader___autoloader.html#abe596e2ded7e8c320e6450c3d8009904">00373</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#abe596e2ded7e8c320e6450c3d8009904">unshiftAutoloader</a>($callback, $namespace = <span class="stringliteral">&#39;&#39;</span>)
<a name="l00374"></a>00374     {
<a name="l00375"></a>00375         $autoloaders = $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a4c8963cc7f85171dab8540b3fdc74f4f">getAutoloaders</a>();
<a name="l00376"></a>00376         array_unshift($autoloaders, $callback);
<a name="l00377"></a>00377         $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a983d2845d90e74b5cb533d2f1aad2982">setAutoloaders</a>($autoloaders);
<a name="l00378"></a>00378 
<a name="l00379"></a>00379         $namespace = (array) $namespace;
<a name="l00380"></a>00380         <span class="keywordflow">foreach</span> ($namespace as $ns) {
<a name="l00381"></a>00381             $autoloaders = $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a89c5580c69205bab86fa9fc1bcda1236">getNamespaceAutoloaders</a>($ns);
<a name="l00382"></a>00382             array_unshift($autoloaders, $callback);
<a name="l00383"></a>00383             $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a1e5b5ee5340ded3987e147556dc6e036">_setNamespaceAutoloaders</a>($autoloaders, $ns);
<a name="l00384"></a>00384         }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386         <span class="keywordflow">return</span> $this;
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388 
<a name="l00396"></a><a class="code" href="class_zend___loader___autoloader.html#a7c26385306ffa6a6c7f97617ff05b42f">00396</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#a7c26385306ffa6a6c7f97617ff05b42f">pushAutoloader</a>($callback, $namespace = <span class="stringliteral">&#39;&#39;</span>)
<a name="l00397"></a>00397     {
<a name="l00398"></a>00398         $autoloaders = $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a4c8963cc7f85171dab8540b3fdc74f4f">getAutoloaders</a>();
<a name="l00399"></a>00399         array_push($autoloaders, $callback);
<a name="l00400"></a>00400         $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a983d2845d90e74b5cb533d2f1aad2982">setAutoloaders</a>($autoloaders);
<a name="l00401"></a>00401 
<a name="l00402"></a>00402         $namespace = (array) $namespace;
<a name="l00403"></a>00403         <span class="keywordflow">foreach</span> ($namespace as $ns) {
<a name="l00404"></a>00404             $autoloaders = $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a89c5580c69205bab86fa9fc1bcda1236">getNamespaceAutoloaders</a>($ns);
<a name="l00405"></a>00405             array_push($autoloaders, $callback);
<a name="l00406"></a>00406             $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a1e5b5ee5340ded3987e147556dc6e036">_setNamespaceAutoloaders</a>($autoloaders, $ns);
<a name="l00407"></a>00407         }
<a name="l00408"></a>00408 
<a name="l00409"></a>00409         <span class="keywordflow">return</span> $this;
<a name="l00410"></a>00410     }
<a name="l00411"></a>00411 
<a name="l00419"></a><a class="code" href="class_zend___loader___autoloader.html#ae40cf6713af3c8d3f305767831282685">00419</a>     <span class="keyword">public</span> function <a class="code" href="class_zend___loader___autoloader.html#ae40cf6713af3c8d3f305767831282685">removeAutoloader</a>($callback, $namespace = null)
<a name="l00420"></a>00420     {
<a name="l00421"></a>00421         <span class="keywordflow">if</span> (null === $namespace) {
<a name="l00422"></a>00422             $autoloaders = $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a4c8963cc7f85171dab8540b3fdc74f4f">getAutoloaders</a>();
<a name="l00423"></a>00423             <span class="keywordflow">if</span> (<span class="keyword">false</span> !== ($index = array_search($callback, $autoloaders, <span class="keyword">true</span>))) {
<a name="l00424"></a>00424                 unset($autoloaders[$index]);
<a name="l00425"></a>00425                 $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a983d2845d90e74b5cb533d2f1aad2982">setAutoloaders</a>($autoloaders);
<a name="l00426"></a>00426             }
<a name="l00427"></a>00427 
<a name="l00428"></a>00428             <span class="keywordflow">foreach</span> ($this-&gt;_namespaceAutoloaders as $ns =&gt; $autoloaders) {
<a name="l00429"></a>00429                 <span class="keywordflow">if</span> (<span class="keyword">false</span> !== ($index = array_search($callback, $autoloaders, <span class="keyword">true</span>))) {
<a name="l00430"></a>00430                     unset($autoloaders[$index]);
<a name="l00431"></a>00431                     $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a1e5b5ee5340ded3987e147556dc6e036">_setNamespaceAutoloaders</a>($autoloaders, $ns);
<a name="l00432"></a>00432                 }
<a name="l00433"></a>00433             }
<a name="l00434"></a>00434         } <span class="keywordflow">else</span> {
<a name="l00435"></a>00435             $namespace = (array) $namespace;
<a name="l00436"></a>00436             <span class="keywordflow">foreach</span> ($namespace as $ns) {
<a name="l00437"></a>00437                 $autoloaders = $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a89c5580c69205bab86fa9fc1bcda1236">getNamespaceAutoloaders</a>($ns);
<a name="l00438"></a>00438                 <span class="keywordflow">if</span> (<span class="keyword">false</span> !== ($index = array_search($callback, $autoloaders, <span class="keyword">true</span>))) {
<a name="l00439"></a>00439                     unset($autoloaders[$index]);
<a name="l00440"></a>00440                     $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a1e5b5ee5340ded3987e147556dc6e036">_setNamespaceAutoloaders</a>($autoloaders, $ns);
<a name="l00441"></a>00441                 }
<a name="l00442"></a>00442             }
<a name="l00443"></a>00443         }
<a name="l00444"></a>00444 
<a name="l00445"></a>00445         <span class="keywordflow">return</span> $this;
<a name="l00446"></a>00446     }
<a name="l00447"></a>00447 
<a name="l00455"></a><a class="code" href="class_zend___loader___autoloader.html#a095c5d389db211932136b53f25f39685">00455</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___loader___autoloader.html#a095c5d389db211932136b53f25f39685">__construct</a>()
<a name="l00456"></a>00456     {
<a name="l00457"></a>00457         spl_autoload_register(array(__CLASS__, <span class="stringliteral">&#39;autoload&#39;</span>));
<a name="l00458"></a>00458         $this-&gt;_internalAutoloader = array($this, <span class="stringliteral">&#39;_autoload&#39;</span>);
<a name="l00459"></a>00459     }
<a name="l00460"></a>00460 
<a name="l00467"></a><a class="code" href="class_zend___loader___autoloader.html#a5c0b13db5685524751745af533ab7be7">00467</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___loader___autoloader.html#a5c0b13db5685524751745af533ab7be7">_autoload</a>($class)
<a name="l00468"></a>00468     {
<a name="l00469"></a>00469         $callback = $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#ad6bc6b05aaaace0c85e882ba88595504">getDefaultAutoloader</a>();
<a name="l00470"></a>00470         <span class="keywordflow">try</span> {
<a name="l00471"></a>00471             <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_zend___loader___autoloader.html#a6bf1018db1448fa1194c5fc996ef34ec">suppressNotFoundWarnings</a>()) {
<a name="l00472"></a>00472                 @call_user_func($callback, $class);
<a name="l00473"></a>00473             } <span class="keywordflow">else</span> {
<a name="l00474"></a>00474                 call_user_func($callback, $class);
<a name="l00475"></a>00475             }
<a name="l00476"></a>00476             <span class="keywordflow">return</span> $class;
<a name="l00477"></a>00477         } <span class="keywordflow">catch</span> (<a class="code" href="class_zend___exception.html">Zend_Exception</a> $e) {
<a name="l00478"></a>00478             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00479"></a>00479         }
<a name="l00480"></a>00480     }
<a name="l00481"></a>00481 
<a name="l00489"></a><a class="code" href="class_zend___loader___autoloader.html#a1e5b5ee5340ded3987e147556dc6e036">00489</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___loader___autoloader.html#a1e5b5ee5340ded3987e147556dc6e036">_setNamespaceAutoloaders</a>(array $autoloaders, $namespace = <span class="stringliteral">&#39;&#39;</span>)
<a name="l00490"></a>00490     {
<a name="l00491"></a>00491         $namespace = (string) $namespace;
<a name="l00492"></a>00492         $this-&gt;_namespaceAutoloaders[$namespace] = $autoloaders;
<a name="l00493"></a>00493         <span class="keywordflow">return</span> $this;
<a name="l00494"></a>00494     }
<a name="l00495"></a>00495 
<a name="l00503"></a><a class="code" href="class_zend___loader___autoloader.html#a7f590c012a0f715c539fcc28055633f7">00503</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___loader___autoloader.html#a7f590c012a0f715c539fcc28055633f7">_getVersionPath</a>($path, $version)
<a name="l00504"></a>00504     {
<a name="l00505"></a>00505         $type = $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#ab92e980284343097e9878658b0ca06cd">_getVersionType</a>($version);
<a name="l00506"></a>00506 
<a name="l00507"></a>00507         <span class="keywordflow">if</span> ($type == <span class="stringliteral">&#39;latest&#39;</span>) {
<a name="l00508"></a>00508             $version = <span class="stringliteral">&#39;latest&#39;</span>;
<a name="l00509"></a>00509         }
<a name="l00510"></a>00510 
<a name="l00511"></a>00511         $availableVersions = $this-&gt;<a class="code" href="class_zend___loader___autoloader.html#ac70fd67d94bd348762a96cfa9d9fe7c2">_getAvailableVersions</a>($path, $version);
<a name="l00512"></a>00512         <span class="keywordflow">if</span> (empty($availableVersions)) {
<a name="l00513"></a>00513             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;No valid ZF installations discovered&#39;</span>);
<a name="l00514"></a>00514         }
<a name="l00515"></a>00515 
<a name="l00516"></a>00516         $matchedVersion = array_pop($availableVersions);
<a name="l00517"></a>00517         <span class="keywordflow">return</span> $matchedVersion;
<a name="l00518"></a>00518     }
<a name="l00519"></a>00519 
<a name="l00527"></a><a class="code" href="class_zend___loader___autoloader.html#ab92e980284343097e9878658b0ca06cd">00527</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___loader___autoloader.html#ab92e980284343097e9878658b0ca06cd">_getVersionType</a>($version)
<a name="l00528"></a>00528     {
<a name="l00529"></a>00529         <span class="keywordflow">if</span> (strtolower($version) == <span class="stringliteral">&#39;latest&#39;</span>) {
<a name="l00530"></a>00530             <span class="keywordflow">return</span> <span class="stringliteral">&#39;latest&#39;</span>;
<a name="l00531"></a>00531         }
<a name="l00532"></a>00532 
<a name="l00533"></a>00533         $parts = explode(<span class="charliteral">&#39;.&#39;</span>, $version);
<a name="l00534"></a>00534         $count = count($parts);
<a name="l00535"></a>00535         <span class="keywordflow">if</span> (1 == $count) {
<a name="l00536"></a>00536             <span class="keywordflow">return</span> <span class="stringliteral">&#39;major&#39;</span>;
<a name="l00537"></a>00537         }
<a name="l00538"></a>00538         <span class="keywordflow">if</span> (2 == $count) {
<a name="l00539"></a>00539             <span class="keywordflow">return</span> <span class="stringliteral">&#39;minor&#39;</span>;
<a name="l00540"></a>00540         }
<a name="l00541"></a>00541         <span class="keywordflow">if</span> (3 &lt; $count) {
<a name="l00542"></a>00542             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;Invalid version string provided&#39;</span>);
<a name="l00543"></a>00543         }
<a name="l00544"></a>00544         <span class="keywordflow">return</span> <span class="stringliteral">&#39;specific&#39;</span>;
<a name="l00545"></a>00545     }
<a name="l00546"></a>00546 
<a name="l00554"></a><a class="code" href="class_zend___loader___autoloader.html#ac70fd67d94bd348762a96cfa9d9fe7c2">00554</a>     <span class="keyword">protected</span> function <a class="code" href="class_zend___loader___autoloader.html#ac70fd67d94bd348762a96cfa9d9fe7c2">_getAvailableVersions</a>($path, $version)
<a name="l00555"></a>00555     {
<a name="l00556"></a>00556         <span class="keywordflow">if</span> (!is_dir($path)) {
<a name="l00557"></a>00557             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zend___loader___exception.html">Zend_Loader_Exception</a>(<span class="stringliteral">&#39;Invalid ZF path provided&#39;</span>);
<a name="l00558"></a>00558         }
<a name="l00559"></a>00559 
<a name="l00560"></a>00560         $path       = rtrim($path, <span class="charliteral">&#39;/&#39;</span>);
<a name="l00561"></a>00561         $path       = rtrim($path, <span class="charliteral">&#39;\\&#39;</span>);
<a name="l00562"></a>00562         $versionLen = strlen($version);
<a name="l00563"></a>00563         $versions   = array();
<a name="l00564"></a>00564         $dirs       = glob(<span class="stringliteral">&quot;$path/*&quot;</span>, GLOB_ONLYDIR);
<a name="l00565"></a>00565         <span class="keywordflow">foreach</span> ($dirs as $dir) {
<a name="l00566"></a>00566             $dirName = substr($dir, strlen($path) + 1);
<a name="l00567"></a>00567             <span class="keywordflow">if</span> (!preg_match(<span class="stringliteral">&#39;/^(?:ZendFramework-)?(\d+\.\d+\.\d+((a|b|pl|pr|p|rc)\d+)?)(?:-minimal)?$/i&#39;</span>, $dirName, $matches)) {
<a name="l00568"></a>00568                 <span class="keywordflow">continue</span>;
<a name="l00569"></a>00569             }
<a name="l00570"></a>00570 
<a name="l00571"></a>00571             $matchedVersion = $matches[1];
<a name="l00572"></a>00572 
<a name="l00573"></a>00573             <span class="keywordflow">if</span> ((<span class="stringliteral">&#39;latest&#39;</span> == $version)
<a name="l00574"></a>00574                 || ((strlen($matchedVersion) &gt;= $versionLen)
<a name="l00575"></a>00575                     &amp;&amp; (0 === strpos($matchedVersion, $version)))
<a name="l00576"></a>00576             ) {
<a name="l00577"></a>00577                 $versions[$matchedVersion] = $dir . <span class="stringliteral">&#39;/library&#39;</span>;
<a name="l00578"></a>00578             }
<a name="l00579"></a>00579         }
<a name="l00580"></a>00580 
<a name="l00581"></a>00581         uksort($versions, <span class="stringliteral">&#39;version_compare&#39;</span>);
<a name="l00582"></a>00582         <span class="keywordflow">return</span> $versions;
<a name="l00583"></a>00583     }
<a name="l00584"></a>00584 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Apr 19 2012 17:01:17 for openbiz by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
