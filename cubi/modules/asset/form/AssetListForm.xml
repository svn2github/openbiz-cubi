<?xml version="1.0" encoding="UTF-8"?>
<EasyForm Name="AssetListForm" 
			Class="AssetForm"			  
			FormType="List" 
			jsClass="Openbiz.TableForm" 
			Icon="{RESOURCE_URL}/asset/images/icon_mod_asset_list.png"
			Title="Asset Manage Management" 
			Description="Asset Manage" 
			BizDataObj="asset.do.AssetDO" 
			PageSize="10" 
			DefaultForm="Y" 
			TemplateEngine="Smarty" 
			TemplateFile="form_asset_grid.tpl.html" 
			EventName="Asset" 
			MessageFile="Asset.ini" 
			Access="asset.Access">
	<DataPanel>
            
		<Element Name="row_selections" 
        			Class="RowCheckbox"  
        			Label="" 
        			FieldName="Id"/>
		<Element Name="fld_Id" 
        			Class="common.element.ColumnTitle" 
        			FieldName="Id" 
        			Label="ID" 
        			Sortable="Y" 
        			AllowURLParam="N" 
        			Link="javascript:;" />   
		<Element Name="fld_share" Class="ColumnShare" 
				MyPrivateImg="{RESOURCE_URL}/asset/images/icon_asset_private.gif"
				MySharedImg="{RESOURCE_URL}/asset/images/icon_asset_shared.gif" 
				MyAssignedImg="{RESOURCE_URL}/asset/images/icon_asset_assigned.gif"
				MyDistributedImg="{RESOURCE_URL}/asset/images/icon_asset_distributed.gif" 
				GroupSharedImg="{RESOURCE_URL}/asset/images/icon_asset_shared_group.gif"
				OtherSharedImg="{RESOURCE_URL}/asset/images/icon_asset_shared_other.gif"
				FieldName="create_by" 
				Label="Share"  
				Sortable="Y" 
				AllowURLParam="N" 
				Translatable="N" 
				OnEventLog="N" 
				Link="javascript:;">
			<EventHandler Name="fld_share_onclick" 
							Event="onclick" 
							Function="LoadDialog(common.form.DataSharingForm,{@:Elem[fld_Id].Value})"/>		
		</Element>
			        			     

		<Element Name="fld_name" 
        			Class="ColumnText" 
        			FieldName="name" 
        			Label="Name"         			 
        			Sortable="Y" 
        			MaxLength="25"
        			Link="{APP_INDEX}/asset/asset_detail/{@:Elem[fld_Id].Value}"        			
        			 
					/> 
        
                  
     <Element Name="fld_owner" Class="ColumnText" FieldName="owner_id" Text="{BizSystem::GetProfileName(@:Elem[fld_owner].Value,'short')}"  Label="Owner"  Sortable="Y" AllowURLParam="N" Translatable="N" OnEventLog="N" >
        </Element>
		
        
   		<Element Name="fld_barcode" 
        			Class="asset.element.ColumnBarcode" 
        			FieldName="barcode" 
        			Label="Barcode" 
        			MaxLength="15"        			 
        			Sortable="Y"
        			 />         

     
     
		<Element Name="fld_color" 
				Class="ColumnStyle" 
				FieldName="type_color" 
				Label="Type"  
				Sortable="Y" 
				AllowURLParam="N" 
				Translatable="N" 
				OnEventLog="N" />
				
		<Element Name="fld_type" 
				Class="ColumnText"  
				Style="line-height:24px;" 
				FieldName="type_name" 
				Label="Type"  
				Sortable="Y" 
				AllowURLParam="N" 
				Translatable="N" 
				OnEventLog="N" />						        
  
	</DataPanel>
    <ActionPanel>
        <!-- Export Records Button -->
        <Element Name="btn_scan" 
        			Class="Button" 
        			Text="Scan" 
        			Description="Scan Barcode"
        			CssClass="button_gray_m">
            <EventHandler Name="export_onclick" 
            				Event="onclick" 
            				EventLogMsg="" 
            				Function="SwitchForm(asset.form.AssetScanForm)" 
            				ShortcutKey="Insert" 
            				ContextMenu="Scan Barcode"/>
        </Element>    

		<Element Name="btn_spacer" Class="Spacer" Width="10" />		    
    
    	<!-- Create New Record Button -->
        <Element Name="btn_new" 
        			Class="Button" 
        			Text="Add" 
        			CssClass="button_gray_add" 
        			Description="New record (Insert)" 
        			Access="asset.Manage">
            <EventHandler Name="lnk_new_onclick" 
            				Event="onclick" 
            				EventLogMsg="" 
            				Function="SwitchForm(asset.form.AssetNewForm)"  
            				ShortcutKey="Insert" 
            				ContextMenu="New"/>
        </Element>
        
        <!-- Edit Selected Record Button -->
        <Element Name="btn_edit" 
        			Class="Button" 
        			Text="Edit" 
        			CssClass="button_gray_m" 
        			Description="Edit record (Ctrl+E)" 
        			Access="asset.Manage">
            <EventHandler Name="btn_edit_onclick" 
            				Event="onclick" 
            				EventLogMsg="" 
            				Function="EditRecord()" 
            				RedirectPage="form=asset.form.AssetEditForm&amp;fld:Id={@:Elem[fld_Id].Value}" 
            				ShortcutKey="Ctrl+E" 
            				ContextMenu="Edit" />
        </Element>
        
        
        
        <!-- Delete Selected Record Button -->
        <Element Name="btn_delete" 
        			Class="Button" 
        			Text="Delete" 
        			CssClass="button_gray_m" 
        			Description="Delete record"
        			Access="asset.Manage">
            <EventHandler Name="del_onclick" 
            				Event="onclick" 
            				EventLogMsg="" 
            				Function="DeleteRecord()" 
            				ShortcutKey="Ctrl+Delete" 
            				ContextMenu="Delete"/>
        </Element>
        <Element Name="btn_excel" 
        		Class="Button" 
        		Text="Export" 
        		CssClass="button_gray_m">
            <EventHandler Name="exc_onclick" 
            			Event="onclick" 
            			EventLogMsg="" 
            			Function="CallService(excelService,renderCSV)" 
            			FunctionType="Popup" 
            			ShortcutKey="Ctrl+X" 
            			ContextMenu="Export"/>
        </Element>

    </ActionPanel> 
    <NavPanel>
    	
    	<!-- Page Selector -->
		<Element  Name="page_selector" 
					Class="PageSelector" 
					Text="{@:m_CurrentPage}" 
					Label="Go to Page" 
					CssClass="input_select" 
					CssFocusClass="input_select_focus">
            <EventHandler Name="btn_page_selector_onchange" 
            				Event="onchange" 
            				Function="GotoSelectedPage(page_selector)"/>
        </Element>
        
        <!-- Page Size Selector -->
        <Element  Name="pagesize_selector" 
        			Class="PagesizeSelector" 
        			Text="{@:m_Range}" 
        			Label="Show Rows" 
        			CssClass="input_select" 
        			CssFocusClass="input_select_focus">
            <EventHandler Name="btn_pagesize_selector_onchange" 
            				Event="onchange" 
            				Function="SetPageSize(pagesize_selector)"/>
        </Element> 
        
        <!-- Goto First Page Button -->   
        <Element  Name="btn_first" 
        			Class="Button" 
        			Enabled="{(@:m_CurrentPage == 1)?'N':'Y'}" 
        			CssClass="button_gray_navi {(@:m_CurrentPage == 1)?'first_gray':'first'}">
            <EventHandler Name="first_onclick" 
            				Event="onclick" 
            				Function="GotoPage(1)"/>
        </Element>
        
        <!-- Goto Previous Page Button -->   
        <Element Name="btn_prev" 
        			Class="Button" 
        			Enabled="{(@:m_CurrentPage == 1)?'N':'Y'}" 
        			CssClass="button_gray_navi {(@:m_CurrentPage == 1)?'prev_gray':'prev'}">
            <EventHandler Name="prev_onclick" 
            				Event="onclick" 
            				Function="GotoPage({@:m_CurrentPage - 1})" 
            				ShortcutKey="Ctrl+Shift+Left"/>
        </Element>
        
        <!-- Display Current Page / Total Pages -->
        <Element Name="txt_page" 
        			Class="LabelText" 
        			Text="{'@:m_CurrentPage of @:m_TotalPages '}">
        </Element>
        
        <!-- Goto Next Page Button -->  
        <Element Name="btn_next" 
        			Class="Button" 
        			Enabled="{(@:m_CurrentPage == @:m_TotalPages )?'N':'Y'}" 
        			CssClass="button_gray_navi {(@:m_CurrentPage == @:m_TotalPages)?'next_gray':'next'}">
            <EventHandler Name="next_onclick" 
            				Event="onclick" 
            				Function="GotoPage({@:m_CurrentPage + 1})" 
            				ShortcutKey="Ctrl+Shift+Right"/>
        </Element>
        
        <!-- Goto Last Page Button -->  
        <Element  Name="btn_last" 
        			Class="Button" 
        			Enabled="{(@:m_CurrentPage == @:m_TotalPages )?'N':'Y'}" 
        			CssClass="button_gray_navi {(@:m_CurrentPage == @:m_TotalPages)?'last_gray':'last'}">
            <EventHandler Name="last_onclick" 
            				Event="onclick" 
            				Function="GotoPage({@:m_TotalPages})"/>
        </Element>
        
    </NavPanel> 
    <SearchPanel>
    	<Element Name="group_filter"  BlankOption="All Groups" cssclass="input_select_m" Class="DropDownList" FieldName="" Label="" SelectFrom="system.do.GroupDO[name:Id]">
            <EventHandler Name="groupfilter_onchange" Event="onchange" Function="UpdateForm()"/>
        </Element>
    	<Element Name="owner_filter"  BlankOption="All Users" cssclass="input_select_m" Class="DropDownList" FieldName="owner_id" Label="" SelectFrom="system.do.UserContactDO[display_name:Id],[group_id]='{@:Elem[group_filter].Value}'">
            <EventHandler Name="ownerfilter_onchange" Event="onchange" Function="RunSearch()"/>
        </Element>
        <Element Name="btn_spacer_group" Class="Spacer" Width="10"></Element>    
    
		<!-- Data Permission Filter -->  
		<Element Name="data_filter" 
    				BlankOption="All Data" 
    				Cssclass="input_select_m" 
    				Class="common.element.ShareDataFilter" 
    				FieldName="create_by" 
    				SelectFrom="common.lov.DataSharingLOV(DataFilter)" >
            <EventHandler Name="datafilter_onchange" 
            				Event="onchange" 
            				Function="RunSearch()"/>
        </Element>  
      
		<!-- Data Type Filter -->  
    	<Element Name="type_selector"  
    				BlankOption="All Types" 
    				Cssclass="input_select_m" 
    				Class="common.lib.TypeSelector" 
    				FieldName="type_id" 
    				SelectFrom="asset.do.AssetTypeDO[name:Id:color]" >
            <EventHandler Name="type_selector_onchange" 
            				Event="onchange" 
            				Function="RunSearch()"/>
        </Element> 
	
		<Element Name="qry_name" 
					Class="AutoSuggest" 
					SelectFrom="asset.do.AssetDO[name],[name] like '%{@:Elem[qry_name].Value}%' GROUP BY [name]" 
					FuzzySearch="Y" 
					FieldName="name" 
					Label="" 
					CssFocusClass="input_text_search_focus" 
					CssClass="input_text_search" />
        <Element Name="btn_dosearch" 
        			Class="Button" 
        			Text="Go" 
        			CssClass="button_gray">
            <EventHandler Name="search_onclick" 
            				Event="onclick" 
            				Function="RunSearch()" 
            				ShortcutKey="Enter"/>
        </Element>	
       
    </SearchPanel>
</EasyForm>