<form id="{$form.name}" name="{$form.name}">
<style>
{literal}
.button_next_highlight {
    background-image: url("{/literal}{$resource_url}{literal}/appbuilder/images/btn_bg.png");
    background-position: -72px top;
    background-repeat: no-repeat;
    color: #efefef;
    display: block;
    float: left;
    height: 20px;
    line-height: 20px;
    margin-right: 3px;
    overflow: hidden;
    text-align: center;
    text-indent:14px;
    text-decoration: none;
    width: 72px;
}
.button_next_highlight:hover {
    background-position: -72px -20px;
    color: #ffffff;
}
.button_next_highlight:active {
    background-position: -72px bottom;
    color: #ffffff;
}

.button_back {
    background-image: url("{/literal}{$resource_url}{literal}/appbuilder/images/btn_bg.png");
    background-position: 0px top;
    background-repeat: no-repeat;
    color: #efefef;
    display: block;
    float: left;
    height: 20px;
    line-height: 20px;
    margin-right: 3px;
    overflow: hidden;
    text-align: center;
    text-indent:14px;
    text-decoration: none;
    width: 72px;
}
.button_back:hover {
    background-position: 0px -20px;
    color: #ffffff;
}
.button_back:active {
    background-position: 0px bottom;
    color: #ffffff;
}

.button_cancel {
    background-image: url("{/literal}{$resource_url}{literal}/appbuilder/images/btn_bg.png");
    background-position: -144px top;
    background-repeat: no-repeat;
    color: #efefef;
    display: block;
    float: left;
    height: 20px;
    line-height: 20px;
    margin-right: 3px;
    overflow: hidden;
    text-align: left;
    text-indent:16px;
    text-decoration: none;
    width: 72px;
}
.button_cancel:hover {
    background-position: -144px -20px;
    color: #ffffff;
}
.button_cancel:active {
    background-position: -144px bottom;
    color: #ffffff;
}


{/literal}
</style>
<div style="padding-left:30px;padding-top:10px;">

<div class="wizard_progress_bar">
<table><tr>
{foreach name=steps item=view_form key=elems_name from=$form.forms}
	{assign var=current_step value=$smarty.foreach.steps.index+1}  
	{if $current_step lt $form.step}
	<td class="past_step"><span>{$current_step}. {$view_form->m_Text}</span></td>
	{elseif $current_step eq $form.step}
	<td class="current_step"><span>{$current_step}. {$view_form->m_Text}</span></td>
	{else}
	<td class="future_step"><span>{$current_step}. {$view_form->m_Text}</span></td>
	{/if}

{/foreach}
</tr></table>
</div>

<div class="upline">
	<table><tr><td>
		{if $form.icon !='' }
		<div class="form_icon"><img  src="{$form.icon}" border="0" /></div>
		{/if}
	
		<div style="float:left; width:550px;">
			<h2>
			{$form.title}
			</h2> 
			{if $form.description}
			<p class="input_row" style="line-height:20px;padding-bottom:10px;">		
			<span>{$form.description}</span>
			</p>
			{else}
			<div style="height:15px;"></div>
			{/if}
		</div>
	</td></tr></table>
</div>

<div class="from_table_container">


{if $actionPanel  }	
	<div class="form_header_panel">	
		<div class="action_panel" >
			{foreach item=elem from=$actionPanel}
			    	{$elem.element}
			{/foreach}
		</div>
			<div id='{$form.name}.load_disp' style="display:none;padding-top:12px;float:right;padding-right:10px;" >
				<img src="{$image_url}/form_ajax_loader.gif"/>
			</div>		
	</div>	
{/if}	

<!-- table start -->
<table border="0" cellpadding="0" cellspacing="0" class="form_table" id="{$form.name}_data_table">
	<thead>		
     {foreach item=cell key=elems_name from=$dataPanel.elems}	
     	{if $cell.type=='ColumnStyle'}
     		{assign var=row_style_name value=$elems_name}     	
		{else}
			{if $cell.type=='RowCheckbox'}
				{assign var=th_style value="text-align:left;padding-left:10px;"}
			{else}
				{assign var=th_style value=""}
			{/if}
         <th onmouseover="this.className='hover'" 
			onmouseout="this.className=''"
				nowrap="nowrap" style="{$th_style}"
			>{$cell.label}</th>	 
		{/if}
     {/foreach}
	</thead>
     {assign var=row_counter value=0}            
     {foreach item=row from=$dataPanel.data}
     	
     	 {if $row.$row_style_name != ''}
     	 	{assign var=row_style value=$dataPanel.data.$row_counter.$row_style_name}
     	 {else}
     	 	{assign var=row_style value=''}
     	 {/if}
     	 
         {if $row_style != ''}
		 	<tr id="{$form.name}-{$dataPanel.ids[$row_counter]}" 
					style="{$row_style}"										
					onclick="Openbiz.CallFunction('{$form.name}.SelectRecord({$dataPanel.ids[$row_counter]})');">
		 {elseif $form.currentRecordId == $dataPanel.ids[$row_counter]}  
         {assign var=default_selected_id value=$dataPanel.ids[$row_counter]}       	
			<tr id="{$form.name}-{$dataPanel.ids[$row_counter]}" 
					style="{$row_style}"
					class="selected"  normal="even" select="selected"
					onmouseover="if(this.className!='selected')this.className='hover'" 
					onmouseout="if(this.className!='selected')this.className='even'" 
					onclick="Openbiz.CallFunction('{$form.name}.SelectRecord({$dataPanel.ids[$row_counter]})');">
         {elseif $row_counter == 0 and $form.currentRecordId == ""}
         {assign var=default_selected_id value=$dataPanel.ids[$row_counter]}    
			<tr id="{$form.name}-{$dataPanel.ids[$row_counter]}" 
					style="{$row_style}"
					class="selected"  normal="even" select="selected"
					onmouseover="if(this.className!='selected')this.className='hover'" 
					onmouseout="if(this.className!='selected')this.className='even'" 
					onclick="Openbiz.CallFunction('{$form.name}.SelectRecord({$dataPanel.ids[$row_counter]})');">
          {elseif $row_counter is odd}
		   <tr id="{$form.name}-{$dataPanel.ids[$row_counter]}" 
		   			style="{$row_style}"
		   			class="odd"  normal="odd" select="selected"
					onmouseover="if(this.className!='selected')this.className='hover'" 
					onmouseout="if(this.className!='selected')this.className='odd'"  
					onclick="Openbiz.CallFunction('{$form.name}.SelectRecord({$dataPanel.ids[$row_counter]})');">
         {else}
			<tr id="{$form.name}-{$dataPanel.ids[$row_counter]}" 
					style="{$row_style}"
					class="even"  normal="even" select="selected"
					onmouseover="if(this.className!='selected')this.className='hover'" 
					onmouseout="if(this.className!='selected')this.className='even'" 
					onclick="Openbiz.CallFunction('{$form.name}.SelectRecord({$dataPanel.ids[$row_counter]})');">
         {/if}
         
         {assign var=col_counter value=0}    
         {foreach key=name item=cell key=cell_name from=$row}
         	{if $col_counter eq 0}
         		{assign var=col_class value=' class="row_header" '}    
         	{else}
         		{assign var=col_class value=' '}
         	{/if}
         	{if $cell_name != $row_style_name}
	            {if $cell != ''}            	
	              <td {$col_class} style="{$row_style}" nowrap="nowrap" >{$cell}</td>
	            {else}
	              <td {$col_class} style="{$row_style}" nowrap="nowrap" >&nbsp;</td>
	            {/if}
            {/if}
            {assign var=col_counter value=$col_counter+1}
         {/foreach}
                  
		{assign var=row_counter value=$row_counter+1}
		</tr>
     {/foreach}
  
							
</table>
</div>
	
		
<!-- table end -->	

{if $navPanel  }	
	<div class="" style="height:30px;padding-top:10px;">	
			{foreach item=elem from=$navPanel}
			    	{$elem.element}
			{/foreach}
	</div>	
{/if}	

<span id='{$form.name}_selected_id' style="display:none">{$default_selected_id}</span>

			
	<div class="v_spacer"></div>
	{if $errors}
	    <div id='errorsDiv' class='innerError errorBox'>
	    {foreach item=errMsg from=$errors}
	        <div>{$errMsg}</div>
	    {/foreach}
	    {literal}<script>try{setTimeout("$('errorsDiv').fade( {from: 1, to: 0});",3000);}catch(e){}</script>{/literal}
	    </div>
	    <div class="v_spacer"></div>
	{/if}
	
	{if $notices}
	    <div id='noticeDiv' class='noticeBox' >
	    {foreach item=noticeMsg from=$notices}
	        <div>{$noticeMsg}</div>
	    {/foreach}
	    </div>
	    {literal}<script>try{setTimeout("$('noticeDiv').fade( {from: 1, to: 0});",3000);}catch(e){};</script>{/literal}
	    <div class="v_spacer"></div>
	{/if}
	
</div>

</form>